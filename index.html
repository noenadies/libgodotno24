<html>
<head><meta http-equiv=Content-Type content="text/html; charset=UTF-8">
<style type="text/css">
<!--
span.cls_002{font-family:Times,serif;font-size:15.0px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
div.cls_002{font-family:Times,serif;font-size:15.0px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
span.cls_003{font-family:Times,serif;font-size:15.0px;color:rgb(0,0,0);font-weight:normal;font-style:normal;text-decoration: none}
div.cls_003{font-family:Times,serif;font-size:15.0px;color:rgb(0,0,0);font-weight:normal;font-style:normal;text-decoration: none}
span.cls_004{font-family:Times,serif;font-size:30.0px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
div.cls_004{font-family:Times,serif;font-size:30.0px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
span.cls_005{font-family:Times,serif;font-size:11.3px;color:rgb(0,0,0);font-weight:normal;font-style:normal;text-decoration: none}
div.cls_005{font-family:Times,serif;font-size:11.3px;color:rgb(0,0,0);font-weight:normal;font-style:normal;text-decoration: none}
span.cls_006{font-family:Times,serif;font-size:11.3px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
div.cls_006{font-family:Times,serif;font-size:11.3px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
span.cls_007{font-family:Courier New,serif;font-size:6.0px;color:rgb(0,0,237);font-weight:normal;font-style:normal;text-decoration: none}
div.cls_007{font-family:Courier New,serif;font-size:6.0px;color:rgb(0,0,237);font-weight:normal;font-style:normal;text-decoration: none}
span.cls_008{font-family:Times,serif;font-size:11.3px;color:rgb(0,0,0);font-weight:normal;font-style:italic;text-decoration: none}
div.cls_008{font-family:Times,serif;font-size:11.3px;color:rgb(0,0,0);font-weight:normal;font-style:italic;text-decoration: none}
span.cls_009{font-family:Courier New,serif;font-size:9.0px;color:rgb(0,0,237);font-weight:normal;font-style:normal;text-decoration: none}
div.cls_009{font-family:Courier New,serif;font-size:9.0px;color:rgb(0,0,237);font-weight:normal;font-style:normal;text-decoration: none}
span.cls_010{font-family:Courier New,serif;font-size:9.0px;color:rgb(0,0,0);font-weight:normal;font-style:normal;text-decoration: none}
div.cls_010{font-family:Courier New,serif;font-size:9.0px;color:rgb(0,0,0);font-weight:normal;font-style:normal;text-decoration: none}
span.cls_011{font-family:Courier New,serif;font-size:6.8px;color:rgb(0,0,0);font-weight:normal;font-style:italic;text-decoration: none}
div.cls_011{font-family:Courier New,serif;font-size:6.8px;color:rgb(0,0,0);font-weight:normal;font-style:italic;text-decoration: none}
span.cls_012{font-family:Times,serif;font-size:15.0px;color:rgb(0,0,0);font-weight:normal;font-style:italic;text-decoration: none}
div.cls_012{font-family:Times,serif;font-size:15.0px;color:rgb(0,0,0);font-weight:normal;font-style:italic;text-decoration: none}
span.cls_013{font-family:Courier New,serif;font-size:9.0px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
div.cls_013{font-family:Courier New,serif;font-size:9.0px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
span.cls_014{font-family:Courier New,serif;font-size:6.0px;color:rgb(0,0,0);font-weight:normal;font-style:italic;text-decoration: none}
div.cls_014{font-family:Courier New,serif;font-size:6.0px;color:rgb(0,0,0);font-weight:normal;font-style:italic;text-decoration: none}
span.cls_015{font-family:Times,serif;font-size:9.0px;color:rgb(0,0,0);font-weight:normal;font-style:normal;text-decoration: none}
div.cls_015{font-family:Times,serif;font-size:9.0px;color:rgb(0,0,0);font-weight:normal;font-style:normal;text-decoration: none}
span.cls_016{font-family:Times,serif;font-size:11.3px;color:rgb(0,0,0);font-weight:bold;font-style:italic;text-decoration: none}
div.cls_016{font-family:Times,serif;font-size:11.3px;color:rgb(0,0,0);font-weight:bold;font-style:italic;text-decoration: none}
span.cls_017{font-family:Courier New,serif;font-size:9.0px;color:rgb(84,26,138);font-weight:normal;font-style:normal;text-decoration: none}
div.cls_017{font-family:Courier New,serif;font-size:9.0px;color:rgb(84,26,138);font-weight:normal;font-style:normal;text-decoration: none}
-->
</style>
<script type="text/javascript" src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/wz_jsgraphics.js"></script>
</head>
<body>
<div style="position:absolute;left:50%;margin-left:-306px;top:0px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background001.jpg" width=612 height=792></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:802px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background002.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:3.00px" class="cls_002"><span class="cls_002">Godot Engine Game Development Projects</span></div>
<div style="position:absolute;left:5.00px;top:137.25px" class="cls_003"><span class="cls_003">Build five cross-platform 2D and 3D games with Godot 3.0</span></div>
<div style="position:absolute;left:5.00px;top:532.50px" class="cls_003"><span class="cls_003">Chris Bradfield</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:1604px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background003.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:186.00px" class="cls_002"><span class="cls_002">BIRMINGHAM - MUMBAI</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:2406px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background004.jpg" width=612 height=792></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:2406px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background005.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Godot Engine Game Development Projects</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_005"><span class="cls_005">Copyright © 2018 Packt Publishing</span></div>
<div style="position:absolute;left:5.00px;top:104.25px" class="cls_005"><span class="cls_005">All rights reserved. No part of this book may be reproduced, stored in a retrieval system, or transmitted in any form or by any means,</span></div>
<div style="position:absolute;left:5.00px;top:117.75px" class="cls_005"><span class="cls_005">without the prior written permission of the publisher, except in the case of brief quotations embedded in critical articles or reviews.</span></div>
<div style="position:absolute;left:5.00px;top:142.50px" class="cls_005"><span class="cls_005">Every effort has been made in the preparation of this book to ensure the accuracy of the information presented. However, the</span></div>
<div style="position:absolute;left:5.00px;top:156.00px" class="cls_005"><span class="cls_005">information contained in this book is sold without warranty, either express or implied. Neither the author, nor Packt Publishing or its</span></div>
<div style="position:absolute;left:5.00px;top:169.50px" class="cls_005"><span class="cls_005">dealers and distributors, will be held liable for any damages caused or alleged to have been caused directly or indirectly by this book.</span></div>
<div style="position:absolute;left:5.00px;top:194.25px" class="cls_005"><span class="cls_005">Packt Publishing has endeavored to provide trademark information about all of the companies and products mentioned in this book by the</span></div>
<div style="position:absolute;left:5.00px;top:207.75px" class="cls_005"><span class="cls_005">appropriate use of capitals. However, Packt Publishing cannot guarantee the accuracy of this information.</span></div>
<div style="position:absolute;left:5.00px;top:233.25px" class="cls_006"><span class="cls_006">Acquisition Editor: </span><span class="cls_005">Nigel Fernandes</span></div>
<div style="position:absolute;left:5.00px;top:247.50px" class="cls_006"><span class="cls_006">Content Development Editor: </span><span class="cls_005">Jason Pereira</span></div>
<div style="position:absolute;left:5.00px;top:261.75px" class="cls_006"><span class="cls_006">Technical Editor:</span><span class="cls_005"> Rutuja Vaze</span></div>
<div style="position:absolute;left:5.00px;top:276.00px" class="cls_006"><span class="cls_006">Copy Editor:</span><span class="cls_005"> Safis Editing</span></div>
<div style="position:absolute;left:5.00px;top:290.25px" class="cls_006"><span class="cls_006">Project Coordinator:</span><span class="cls_005"> Sheejal Shah</span></div>
<div style="position:absolute;left:5.00px;top:304.50px" class="cls_006"><span class="cls_006">Proofreader:</span><span class="cls_005"> Safis Editing</span></div>
<div style="position:absolute;left:5.00px;top:318.75px" class="cls_006"><span class="cls_006">Indexer: </span><span class="cls_005">Mariammal Chettiyar</span></div>
<div style="position:absolute;left:5.00px;top:333.00px" class="cls_006"><span class="cls_006">Graphics:</span><span class="cls_005"> Disha Haria</span></div>
<div style="position:absolute;left:5.00px;top:347.25px" class="cls_006"><span class="cls_006">Production Coordinator:</span><span class="cls_005"> Shraddha Falebhai</span></div>
<div style="position:absolute;left:5.00px;top:372.00px" class="cls_005"><span class="cls_005">First published: June 2018</span></div>
<div style="position:absolute;left:5.00px;top:396.75px" class="cls_005"><span class="cls_005">Production reference: 1270618</span></div>
<div style="position:absolute;left:5.00px;top:421.50px" class="cls_005"><span class="cls_005">Published by Packt Publishing Ltd.</span></div>
<div style="position:absolute;left:5.00px;top:435.00px" class="cls_005"><span class="cls_005">Livery Place</span></div>
<div style="position:absolute;left:5.00px;top:448.50px" class="cls_005"><span class="cls_005">35 Livery Street</span></div>
<div style="position:absolute;left:5.00px;top:462.00px" class="cls_005"><span class="cls_005">Birmingham</span></div>
<div style="position:absolute;left:5.00px;top:475.50px" class="cls_005"><span class="cls_005">B3 2PB, UK.</span></div>
<div style="position:absolute;left:5.00px;top:500.25px" class="cls_005"><span class="cls_005">ISBN 978-1-78883-150-5</span></div>
<div style="position:absolute;left:5.00px;top:525.00px" class="cls_007"><span class="cls_007"> </span><A HREF="http://www.packtpub.com">www.packtpub.com</A> </div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:3208px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background006.jpg" width=612 height=792></div>
<div style="position:absolute;left:91.59px;top:51.00px" class="cls_008"><span class="cls_008">To my son, Damian, and my daughter, Nadia, for being a constant source of love and pride.</span></div>
<div style="position:absolute;left:238.15px;top:64.50px" class="cls_008"><span class="cls_008">To Priya for being a wonderful wife and mother.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:4010px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background007.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:90.00px" class="cls_009"><span class="cls_009"> </span><A HREF="https://mapt.io/">mapt.io</A> </div>
<div style="position:absolute;left:5.00px;top:114.75px" class="cls_003"><span class="cls_003">Mapt is an online digital library that gives you full access to over 5,000 books and videos, as well as</span></div>
<div style="position:absolute;left:5.00px;top:132.75px" class="cls_003"><span class="cls_003">industry leading tools to help you plan your personal development and advance your career. For more</span></div>
<div style="position:absolute;left:5.00px;top:150.75px" class="cls_003"><span class="cls_003">information, please visit our website.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:4812px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background008.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Why subscribe?</span></div>
<div style="position:absolute;left:34.99px;top:79.50px" class="cls_003"><span class="cls_003">Spend less time learning and more time coding with practical eBooks and Videos from over</span></div>
<div style="position:absolute;left:34.99px;top:97.50px" class="cls_003"><span class="cls_003">4,000 industry professionals</span></div>
<div style="position:absolute;left:34.99px;top:130.50px" class="cls_003"><span class="cls_003">Improve your learning with Skill Plans built especially for you</span></div>
<div style="position:absolute;left:34.99px;top:163.50px" class="cls_003"><span class="cls_003">Get a free eBook or video every month</span></div>
<div style="position:absolute;left:34.99px;top:196.50px" class="cls_003"><span class="cls_003">Mapt is fully searchable</span></div>
<div style="position:absolute;left:34.99px;top:229.50px" class="cls_003"><span class="cls_003">Copy and paste, print, and bookmark content</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:5614px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background009.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">PacktPub.com</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Did you know that Packt offers eBook versions of every book published, with PDF and ePub files</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">available? You can upgrade to the eBook version at </span><A HREF="http://www.PacktPub.com">www.PacktPub.com</A> </span><span class="cls_003"> and as a print book customer, you</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">are entitled to a discount on the eBook copy. Get in touch with us at </span><span class="cls_010">service@packtpub.com</span><span class="cls_003"> for more</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">details.</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">At </span><A HREF="http://www.packtpub.com">www.PacktPub.com</A> </span><span class="cls_003">, you can also read a collection of free technical articles, sign up for a range of free</span></div>
<div style="position:absolute;left:5.00px;top:184.50px" class="cls_003"><span class="cls_003">newsletters, and receive exclusive discounts and offers on Packt books and eBooks.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:6416px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background010.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Foreword</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">In December 2014, Godot Engine 1.0 was released. With this first public release, the feature-packed,</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">free, and open source project delivered on its promise of a cross-platform, easy-to-use, and powerful</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">game creation tool.</span></div>
<div style="position:absolute;left:5.00px;top:148.50px" class="cls_003"><span class="cls_003">I fell in love with Godot's high-level features and its permissive license, so I jumped right in, with no</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">prior game development experience. I felt a bit lost when I first opened the editor. I moved on to the</span></div>
<div style="position:absolute;left:5.00px;top:184.50px" class="cls_003"><span class="cls_003">online documentation and started reading the well-written, step-by-step introduction. It covered basic</span></div>
<div style="position:absolute;left:5.00px;top:202.50px" class="cls_003"><span class="cls_003">concepts, such as scenes and nodes and the GDScript programming language, and it showed how to</span></div>
<div style="position:absolute;left:5.00px;top:220.50px" class="cls_003"><span class="cls_003">create a Pong clone, and that was basically it, at that time. There were some more tutorials on</span></div>
<div style="position:absolute;left:5.00px;top:238.50px" class="cls_003"><span class="cls_003">advanced features, but there was a gap between them and the first guide. As a complete beginner, I</span></div>
<div style="position:absolute;left:5.00px;top:256.50px" class="cls_003"><span class="cls_003">was stuck with the following question: how do I make my first game? Yet, I kept exploring, and with</span></div>
<div style="position:absolute;left:5.00px;top:274.50px" class="cls_003"><span class="cls_003">the help of the Godot community, I could eventually build a simple 2D game with a local multiplayer.</span></div>
<div style="position:absolute;left:5.00px;top:292.50px" class="cls_003"><span class="cls_003">What a feeling to see your first game on the screen!</span></div>
<div style="position:absolute;left:5.00px;top:325.50px" class="cls_003"><span class="cls_003">Fast-forward to 3 years from then, Godot has grown a lot as a project, a community, and an engine.</span></div>
<div style="position:absolute;left:5.00px;top:343.50px" class="cls_003"><span class="cls_003">Godot 3.0 was released in January 2018 after 18 months of work. It brought this free, community-</span></div>
<div style="position:absolute;left:5.00px;top:361.50px" class="cls_003"><span class="cls_003">driven project to the level of its proprietary counterparts for 2D and 3D game development. The</span></div>
<div style="position:absolute;left:5.00px;top:379.50px" class="cls_003"><span class="cls_003">beginner game developer that I was became a project manager, helping to organize and focus the</span></div>
<div style="position:absolute;left:5.00px;top:397.50px" class="cls_003"><span class="cls_003">work of hundreds of contributors revolving around the engine. Working together with people from all</span></div>
<div style="position:absolute;left:5.00px;top:415.50px" class="cls_003"><span class="cls_003">around the world improved all areas of the project: engine features, usability, localization, and, of</span></div>
<div style="position:absolute;left:5.00px;top:433.50px" class="cls_003"><span class="cls_003">course, documentation.</span></div>
<div style="position:absolute;left:5.00px;top:451.50px" class="cls_003"><span class="cls_003">Thanks to many dedicated contributors, Godot's documentation became one of the most accessible</span></div>
<div style="position:absolute;left:5.00px;top:469.50px" class="cls_003"><span class="cls_003">technical resources that I have seen in free and open source projects. This is in great part thanks to</span></div>
<div style="position:absolute;left:5.00px;top:487.50px" class="cls_003"><span class="cls_003">Chris Bradfield, the author of this book, who spent countless hours writing new material and</span></div>
<div style="position:absolute;left:5.00px;top:505.50px" class="cls_003"><span class="cls_003">reviewing contributions to ensure their accuracy and quality of writing.</span></div>
<div style="position:absolute;left:5.00px;top:538.50px" class="cls_003"><span class="cls_003">With this book, Chris goes one step further and provides a thorough answer to that question (how do I</span></div>
<div style="position:absolute;left:5.00px;top:556.50px" class="cls_003"><span class="cls_003">make my first game?), shared by many Godot beginners. Indeed, he goes beyond that, as Godot Engine</span></div>
<div style="position:absolute;left:5.00px;top:574.50px" class="cls_003"><span class="cls_003">Game Development Projects will lead you through the creation of five full-featured games—four in</span></div>
<div style="position:absolute;left:5.00px;top:592.50px" class="cls_003"><span class="cls_003">2D and one in 3D. Each game introduces new features and concepts of Godot so that you can learn</span></div>
<div style="position:absolute;left:5.00px;top:610.50px" class="cls_003"><span class="cls_003">how and when to use them in your own creations. Advanced users with experience in other game</span></div>
<div style="position:absolute;left:5.00px;top:628.50px" class="cls_003"><span class="cls_003">development tools (or even Godot itself) will learn how to use Godot's unique architecture and</span></div>
<div style="position:absolute;left:5.00px;top:646.50px" class="cls_003"><span class="cls_003">features to write better, more maintainable code through Chris' showcase of best practices.</span></div>
<div style="position:absolute;left:5.00px;top:679.50px" class="cls_003"><span class="cls_003">From setting up Godot for the first time on your computer to publishing your own games to a wide</span></div>
<div style="position:absolute;left:5.00px;top:697.50px" class="cls_003"><span class="cls_003">range of platforms, Chris runs you through all the steps in a concise yet thorough way. After the first</span></div>
<div style="position:absolute;left:5.00px;top:715.50px" class="cls_003"><span class="cls_003">lesson, you should already be able to see how straightforward and accessible game development can</span></div>
<div style="position:absolute;left:5.00px;top:733.50px" class="cls_003"><span class="cls_003">be with a tool such as Godot, even if you had no prior experience in game creation. You will also feel</span></div>
<div style="position:absolute;left:5.00px;top:751.50px" class="cls_003"><span class="cls_003">a great sense of accomplishment seeing your own creation playing on your computer or smartphone,</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:7218px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background011.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:3.31px" class="cls_003"><span class="cls_003">with the power to implement new gameplay elements with just a few lines of code.</span></div>
<div style="position:absolute;left:5.00px;top:21.31px" class="cls_003"><span class="cls_003">I wish you a lot of fun on your game development journey, and a warm welcome to the Godot</span></div>
<div style="position:absolute;left:5.00px;top:39.00px" class="cls_003"><span class="cls_003">community.</span></div>
<div style="position:absolute;left:5.00px;top:138.00px" class="cls_002"><span class="cls_002">Rémi Verschelde</span></div>
<div style="position:absolute;left:5.00px;top:171.00px" class="cls_003"><span class="cls_003">Godot Engine - Project Manager</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:8020px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background012.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Contributors</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:8822px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background013.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">About the author</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_002"><span class="cls_002">Chris Bradfield</span><span class="cls_003"> has been working in the internet technology space for more than 25 years. He has</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">worked in the online gaming space for a number of successful MMOs and social gaming publishers in</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">South Korea and the United States. Throughout his game industry career, he has served as a game</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">designer, developer, product manager, and business development executive.</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">In 2012, he discovered his love for teaching and founded KidsCanCode to provide programming</span></div>
<div style="position:absolute;left:5.00px;top:184.50px" class="cls_003"><span class="cls_003">instruction and curriculum to middle and high school students. He is also a member of the Godot</span></div>
<div style="position:absolute;left:5.00px;top:202.50px" class="cls_003"><span class="cls_003">Engine documentation team and works to provide learning resources for game development students</span></div>
<div style="position:absolute;left:5.00px;top:220.50px" class="cls_003"><span class="cls_003">around the world.</span></div>
<div style="position:absolute;left:5.00px;top:253.50px" class="cls_008"><span class="cls_008">I would like to expresses my gratitude to Sokoban Pack by Kenney Vleugels, Spaceship art founder skorpio, Sunny Land art by</span></div>
<div style="position:absolute;left:5.00px;top:267.00px" class="cls_008"><span class="cls_008">Luis Zuno (</span><span class="cls_011">@ansimuz</span><span class="cls_008">), and 3D Minigolf tiles by YeOldeDM for their work.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:9624px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background014.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">About the reviewer</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_002"><span class="cls_002">Max Hilbrunner</span><span class="cls_003"> is a Godot Engine contributor and CTO at aiPhilos and works on providing better</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">product search experiences using artificial intelligence, natural language processing, and machine</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">learning in cooperation with the </span><span class="cls_002">German Research Center for Artificial Intelligence</span><span class="cls_003"> (</span><span class="cls_002">DFKI</span><span class="cls_003">).</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:10426px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background015.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Packt is searching for authors like you</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">If you're interested in becoming an author for Packt, please visit </span><A HREF="http://authors.packtpub.com">authors.packtpub.com</A> </span><span class="cls_003"> and apply today.</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">We have worked with thousands of developers and tech professionals, just like you, to help them</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">share their insight with the global tech community. You can make a general application, apply for a</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">specific hot topic that we are recruiting an author for, or submit your own idea.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:11228px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background016.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Table of Contents</span></div>
<div style="position:absolute;left:34.99px;top:84.75px" class="cls_009"><span class="cls_009">Title Page</span></div>
<div style="position:absolute;left:34.99px;top:98.25px" class="cls_009"><span class="cls_009">Copyright and Credits</span></div>
<div style="position:absolute;left:64.98px;top:113.25px" class="cls_009"><span class="cls_009">Godot Engine Game Development Projects</span></div>
<div style="position:absolute;left:34.99px;top:130.50px" class="cls_009"><span class="cls_009">Dedication</span></div>
<div style="position:absolute;left:34.99px;top:144.00px" class="cls_009"><span class="cls_009"> </span><A HREF="http://www.packtpub.com/">www.packtpub.com</A> </div>
<div style="position:absolute;left:64.98px;top:159.00px" class="cls_009"><span class="cls_009">Why subscribe?</span></div>
<div style="position:absolute;left:64.98px;top:176.25px" class="cls_009"><span class="cls_009">PacktPub.com</span></div>
<div style="position:absolute;left:34.99px;top:193.50px" class="cls_009"><span class="cls_009">Foreword</span></div>
<div style="position:absolute;left:34.99px;top:207.00px" class="cls_009"><span class="cls_009">Contributors</span></div>
<div style="position:absolute;left:64.98px;top:222.00px" class="cls_009"><span class="cls_009">About the author</span></div>
<div style="position:absolute;left:64.98px;top:239.25px" class="cls_009"><span class="cls_009">About the reviewer</span></div>
<div style="position:absolute;left:64.98px;top:256.50px" class="cls_009"><span class="cls_009">Packt is searching for authors like you</span></div>
<div style="position:absolute;left:34.99px;top:270.00px" class="cls_009"><span class="cls_009">Preface</span></div>
<div style="position:absolute;left:64.98px;top:285.00px" class="cls_009"><span class="cls_009">Who this book is for</span></div>
<div style="position:absolute;left:64.98px;top:302.25px" class="cls_009"><span class="cls_009">What this book covers</span></div>
<div style="position:absolute;left:64.98px;top:315.75px" class="cls_009"><span class="cls_009">To get the most out of this book</span></div>
<div style="position:absolute;left:94.96px;top:330.75px" class="cls_009"><span class="cls_009">Download the example code files</span></div>
<div style="position:absolute;left:94.96px;top:348.00px" class="cls_009"><span class="cls_009">Download the color images</span></div>
<div style="position:absolute;left:94.96px;top:365.25px" class="cls_009"><span class="cls_009">Conventions used</span></div>
<div style="position:absolute;left:64.98px;top:378.75px" class="cls_009"><span class="cls_009">Get in touch</span></div>
<div style="position:absolute;left:94.96px;top:393.75px" class="cls_009"><span class="cls_009">Reviews</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:12030px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background017.jpg" width=612 height=792></div>
<div style="position:absolute;left:16.25px;top:2.25px" class="cls_003"><span class="cls_003">1. </span><span class="cls_009">Introduction</span></div>
<div style="position:absolute;left:64.98px;top:25.50px" class="cls_009"><span class="cls_009">General advice</span></div>
<div style="position:absolute;left:64.98px;top:42.75px" class="cls_009"><span class="cls_009">What is a game engine?</span></div>
<div style="position:absolute;left:64.98px;top:60.00px" class="cls_009"><span class="cls_009">What is Godot?</span></div>
<div style="position:absolute;left:64.98px;top:73.50px" class="cls_009"><span class="cls_009">Downloading Godot</span></div>
<div style="position:absolute;left:94.96px;top:88.50px" class="cls_009"><span class="cls_009">Alternate installation methods</span></div>
<div style="position:absolute;left:64.98px;top:102.00px" class="cls_009"><span class="cls_009">Overview of the Godot UI</span></div>
<div style="position:absolute;left:94.96px;top:113.25px" class="cls_009"><span class="cls_009">Project Manager</span></div>
<div style="position:absolute;left:124.95px;top:128.25px" class="cls_009"><span class="cls_009">Choosing filenames</span></div>
<div style="position:absolute;left:94.96px;top:145.50px" class="cls_009"><span class="cls_009">Editor window</span></div>
<div style="position:absolute;left:64.98px;top:159.00px" class="cls_009"><span class="cls_009">About nodes and scenes</span></div>
<div style="position:absolute;left:94.96px;top:170.25px" class="cls_009"><span class="cls_009">Scripting in Godot</span></div>
<div style="position:absolute;left:124.95px;top:185.25px" class="cls_009"><span class="cls_009">About GDScript</span></div>
<div style="position:absolute;left:64.98px;top:202.50px" class="cls_009"><span class="cls_009">Summary</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:12832px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background018.jpg" width=612 height=792></div>
<div style="position:absolute;left:16.25px;top:2.25px" class="cls_003"><span class="cls_003">2.</span></div>
<div style="position:absolute;left:34.99px;top:8.25px" class="cls_009"><span class="cls_009">Coin Dash</span></div>
<div style="position:absolute;left:64.98px;top:25.50px" class="cls_009"><span class="cls_009">Project setup</span></div>
<div style="position:absolute;left:64.98px;top:39.00px" class="cls_009"><span class="cls_009">Vectors and 2D coordinate systems</span></div>
<div style="position:absolute;left:94.96px;top:50.25px" class="cls_009"><span class="cls_009">Vectors</span></div>
<div style="position:absolute;left:124.95px;top:65.25px" class="cls_009"><span class="cls_009">Pixel rendering</span></div>
<div style="position:absolute;left:64.98px;top:78.75px" class="cls_009"><span class="cls_009">Part 1 &#x2013; Player scene</span></div>
<div style="position:absolute;left:94.96px;top:93.75px" class="cls_009"><span class="cls_009">Creating the scene</span></div>
<div style="position:absolute;left:94.96px;top:111.00px" class="cls_009"><span class="cls_009">Sprite animation</span></div>
<div style="position:absolute;left:94.96px;top:128.25px" class="cls_009"><span class="cls_009">Collision shape</span></div>
<div style="position:absolute;left:94.96px;top:141.75px" class="cls_009"><span class="cls_009">Scripting the Player</span></div>
<div style="position:absolute;left:124.95px;top:153.00px" class="cls_009"><span class="cls_009">Moving the Player</span></div>
<div style="position:absolute;left:154.94px;top:168.00px" class="cls_009"><span class="cls_009">About delta</span></div>
<div style="position:absolute;left:124.95px;top:185.25px" class="cls_009"><span class="cls_009">Choosing animations</span></div>
<div style="position:absolute;left:124.95px;top:202.50px" class="cls_009"><span class="cls_009">Starting and Ending the Player's Movement</span></div>
<div style="position:absolute;left:124.95px;top:219.75px" class="cls_009"><span class="cls_009">Preparing for collisions</span></div>
<div style="position:absolute;left:64.98px;top:233.25px" class="cls_009"><span class="cls_009">Part 2&#xA0;&#x2013; Coin scene</span></div>
<div style="position:absolute;left:94.96px;top:244.50px" class="cls_009"><span class="cls_009">Node setup</span></div>
<div style="position:absolute;left:124.95px;top:259.50px" class="cls_009"><span class="cls_009">Using groups</span></div>
<div style="position:absolute;left:94.96px;top:276.75px" class="cls_009"><span class="cls_009">Script</span></div>
<div style="position:absolute;left:64.98px;top:290.25px" class="cls_009"><span class="cls_009">Part 3&#xA0;&#x2013; Main scene</span></div>
<div style="position:absolute;left:94.96px;top:305.25px" class="cls_009"><span class="cls_009">Node setup</span></div>
<div style="position:absolute;left:94.96px;top:318.75px" class="cls_009"><span class="cls_009">Main script</span></div>
<div style="position:absolute;left:124.95px;top:333.75px" class="cls_009"><span class="cls_009">Initializing</span></div>
<div style="position:absolute;left:124.95px;top:351.00px" class="cls_009"><span class="cls_009">Starting a new game</span></div>
<div style="position:absolute;left:124.95px;top:368.25px" class="cls_009"><span class="cls_009">Checking for remaining coins</span></div>
<div style="position:absolute;left:64.98px;top:381.75px" class="cls_009"><span class="cls_009">Part 4 &#x2013; User Interface</span></div>
<div style="position:absolute;left:94.96px;top:393.00px" class="cls_009"><span class="cls_009">Node setup</span></div>
<div style="position:absolute;left:124.95px;top:408.00px" class="cls_009"><span class="cls_009">Anchors and margins</span></div>
<div style="position:absolute;left:124.95px;top:425.25px" class="cls_009"><span class="cls_009">Message label</span></div>
<div style="position:absolute;left:124.95px;top:438.75px" class="cls_009"><span class="cls_009">Score and time display</span></div>
<div style="position:absolute;left:154.94px;top:453.75px" class="cls_009"><span class="cls_009">Containers</span></div>
<div style="position:absolute;left:124.95px;top:471.00px" class="cls_009"><span class="cls_009">Updating UI via GDScript</span></div>
<div style="position:absolute;left:124.95px;top:488.25px" class="cls_009"><span class="cls_009">Using buttons</span></div>
<div style="position:absolute;left:124.95px;top:505.50px" class="cls_009"><span class="cls_009">Game over</span></div>
<div style="position:absolute;left:124.95px;top:522.75px" class="cls_009"><span class="cls_009">Adding the HUD to Main</span></div>
<div style="position:absolute;left:64.98px;top:536.25px" class="cls_009"><span class="cls_009">Part 5 &#x2013; Finishing up</span></div>
<div style="position:absolute;left:94.96px;top:547.50px" class="cls_009"><span class="cls_009">Visual effects</span></div>
<div style="position:absolute;left:124.95px;top:562.50px" class="cls_009"><span class="cls_009">What is a tween?</span></div>
<div style="position:absolute;left:94.96px;top:579.75px" class="cls_009"><span class="cls_009">Sound</span></div>
<div style="position:absolute;left:94.96px;top:597.00px" class="cls_009"><span class="cls_009">Powerups</span></div>
<div style="position:absolute;left:94.96px;top:614.25px" class="cls_009"><span class="cls_009">Coin animation</span></div>
<div style="position:absolute;left:94.96px;top:631.50px" class="cls_009"><span class="cls_009">Obstacles</span></div>
<div style="position:absolute;left:64.98px;top:648.75px" class="cls_009"><span class="cls_009">Summary</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:13634px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background019.jpg" width=612 height=792></div>
<div style="position:absolute;left:16.25px;top:2.25px" class="cls_003"><span class="cls_003">3.</span></div>
<div style="position:absolute;left:34.99px;top:8.25px" class="cls_009"><span class="cls_009">Escape the Maze</span></div>
<div style="position:absolute;left:64.98px;top:21.75px" class="cls_009"><span class="cls_009">Project setup</span></div>
<div style="position:absolute;left:94.96px;top:36.75px" class="cls_009"><span class="cls_009">Project organization</span></div>
<div style="position:absolute;left:64.98px;top:50.25px" class="cls_009"><span class="cls_009">Inheritance</span></div>
<div style="position:absolute;left:94.96px;top:61.50px" class="cls_009"><span class="cls_009">Character scene</span></div>
<div style="position:absolute;left:124.95px;top:76.50px" class="cls_009"><span class="cls_009">Animations</span></div>
<div style="position:absolute;left:124.95px;top:93.75px" class="cls_009"><span class="cls_009">Collision detection</span></div>
<div style="position:absolute;left:124.95px;top:111.00px" class="cls_009"><span class="cls_009">Character script</span></div>
<div style="position:absolute;left:94.96px;top:124.50px" class="cls_009"><span class="cls_009">Player scene</span></div>
<div style="position:absolute;left:124.95px;top:139.50px" class="cls_009"><span class="cls_009">Player script</span></div>
<div style="position:absolute;left:94.96px;top:153.00px" class="cls_009"><span class="cls_009">Enemy scene</span></div>
<div style="position:absolute;left:124.95px;top:168.00px" class="cls_009"><span class="cls_009">Optional &#x2013; turn-based movement</span></div>
<div style="position:absolute;left:64.98px;top:181.50px" class="cls_009"><span class="cls_009">Creating the level</span></div>
<div style="position:absolute;left:94.96px;top:196.50px" class="cls_009"><span class="cls_009">Items</span></div>
<div style="position:absolute;left:94.96px;top:210.00px" class="cls_009"><span class="cls_009">TileSets</span></div>
<div style="position:absolute;left:124.95px;top:225.00px" class="cls_009"><span class="cls_009">Creating a TileSet</span></div>
<div style="position:absolute;left:94.96px;top:242.25px" class="cls_009"><span class="cls_009">TileMaps</span></div>
<div style="position:absolute;left:94.96px;top:259.50px" class="cls_009"><span class="cls_009">Level script</span></div>
<div style="position:absolute;left:94.96px;top:276.75px" class="cls_009"><span class="cls_009">Adding more levels</span></div>
<div style="position:absolute;left:64.98px;top:290.25px" class="cls_009"><span class="cls_009">Game flow</span></div>
<div style="position:absolute;left:94.96px;top:305.25px" class="cls_009"><span class="cls_009">Start and end screens</span></div>
<div style="position:absolute;left:94.96px;top:318.75px" class="cls_009"><span class="cls_009">Globals</span></div>
<div style="position:absolute;left:124.95px;top:333.75px" class="cls_009"><span class="cls_009">Global script</span></div>
<div style="position:absolute;left:94.96px;top:351.00px" class="cls_009"><span class="cls_009">Score</span></div>
<div style="position:absolute;left:94.96px;top:364.50px" class="cls_009"><span class="cls_009">Saving the High Score</span></div>
<div style="position:absolute;left:124.95px;top:379.50px" class="cls_009"><span class="cls_009">Reading and writing files</span></div>
<div style="position:absolute;left:64.98px;top:393.00px" class="cls_009"><span class="cls_009">Finishing touches</span></div>
<div style="position:absolute;left:94.96px;top:408.00px" class="cls_009"><span class="cls_009">Death animation</span></div>
<div style="position:absolute;left:94.96px;top:425.25px" class="cls_009"><span class="cls_009">Sound effects</span></div>
<div style="position:absolute;left:64.98px;top:442.50px" class="cls_009"><span class="cls_009">Summary</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:14436px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background020.jpg" width=612 height=792></div>
<div style="position:absolute;left:16.25px;top:2.25px" class="cls_003"><span class="cls_003">4.</span></div>
<div style="position:absolute;left:34.99px;top:8.25px" class="cls_009"><span class="cls_009">Space Rocks</span></div>
<div style="position:absolute;left:64.98px;top:25.50px" class="cls_009"><span class="cls_009">Project setup</span></div>
<div style="position:absolute;left:64.98px;top:42.75px" class="cls_009"><span class="cls_009">Rigid body physics</span></div>
<div style="position:absolute;left:64.98px;top:56.25px" class="cls_009"><span class="cls_009">Player ship</span></div>
<div style="position:absolute;left:94.96px;top:67.50px" class="cls_009"><span class="cls_009">Body setup and physics</span></div>
<div style="position:absolute;left:124.95px;top:82.50px" class="cls_009"><span class="cls_009">State machines</span></div>
<div style="position:absolute;left:124.95px;top:99.75px" class="cls_009"><span class="cls_009">Controls</span></div>
<div style="position:absolute;left:124.95px;top:117.00px" class="cls_009"><span class="cls_009">Screen wrap</span></div>
<div style="position:absolute;left:94.96px;top:130.50px" class="cls_009"><span class="cls_009">Shooting</span></div>
<div style="position:absolute;left:124.95px;top:145.50px" class="cls_009"><span class="cls_009">Bullet scene</span></div>
<div style="position:absolute;left:124.95px;top:162.75px" class="cls_009"><span class="cls_009">Firing bullets</span></div>
<div style="position:absolute;left:64.98px;top:176.25px" class="cls_009"><span class="cls_009">Rocks</span></div>
<div style="position:absolute;left:94.96px;top:191.25px" class="cls_009"><span class="cls_009">Scene setup</span></div>
<div style="position:absolute;left:94.96px;top:208.50px" class="cls_009"><span class="cls_009">Variable size</span></div>
<div style="position:absolute;left:94.96px;top:225.75px" class="cls_009"><span class="cls_009">Instancing</span></div>
<div style="position:absolute;left:94.96px;top:239.25px" class="cls_009"><span class="cls_009">Exploding rocks</span></div>
<div style="position:absolute;left:124.95px;top:254.25px" class="cls_009"><span class="cls_009">Explosion scene</span></div>
<div style="position:absolute;left:124.95px;top:271.50px" class="cls_009"><span class="cls_009">Adding to Rock</span></div>
<div style="position:absolute;left:124.95px;top:288.75px" class="cls_009"><span class="cls_009">Spawning smaller rocks</span></div>
<div style="position:absolute;left:64.98px;top:302.25px" class="cls_009"><span class="cls_009">UI</span></div>
<div style="position:absolute;left:94.96px;top:317.25px" class="cls_009"><span class="cls_009">Layout</span></div>
<div style="position:absolute;left:94.96px;top:334.50px" class="cls_009"><span class="cls_009">UI functions</span></div>
<div style="position:absolute;left:94.96px;top:351.75px" class="cls_009"><span class="cls_009">Main scene code</span></div>
<div style="position:absolute;left:94.96px;top:369.00px" class="cls_009"><span class="cls_009">Player code</span></div>
<div style="position:absolute;left:64.98px;top:382.50px" class="cls_009"><span class="cls_009">Game over</span></div>
<div style="position:absolute;left:94.96px;top:397.50px" class="cls_009"><span class="cls_009">Detecting collisions between physics bodies</span></div>
<div style="position:absolute;left:64.98px;top:414.75px" class="cls_009"><span class="cls_009">Pausing the game</span></div>
<div style="position:absolute;left:64.98px;top:428.25px" class="cls_009"><span class="cls_009">Enemies</span></div>
<div style="position:absolute;left:94.96px;top:443.25px" class="cls_009"><span class="cls_009">Following a path</span></div>
<div style="position:absolute;left:94.96px;top:460.50px" class="cls_009"><span class="cls_009">Enemy scene</span></div>
<div style="position:absolute;left:94.96px;top:477.75px" class="cls_009"><span class="cls_009">Moving the Enemy</span></div>
<div style="position:absolute;left:94.96px;top:495.00px" class="cls_009"><span class="cls_009">Spawning enemies</span></div>
<div style="position:absolute;left:94.96px;top:512.25px" class="cls_009"><span class="cls_009">Enemy shooting and collisions</span></div>
<div style="position:absolute;left:64.98px;top:525.75px" class="cls_009"><span class="cls_009">Additional features</span></div>
<div style="position:absolute;left:94.96px;top:540.75px" class="cls_009"><span class="cls_009">Sound/music</span></div>
<div style="position:absolute;left:94.96px;top:554.25px" class="cls_009"><span class="cls_009">Particles</span></div>
<div style="position:absolute;left:124.95px;top:569.25px" class="cls_009"><span class="cls_009">Enemy trail</span></div>
<div style="position:absolute;left:94.96px;top:586.50px" class="cls_009"><span class="cls_009">Player shield</span></div>
<div style="position:absolute;left:64.98px;top:603.75px" class="cls_009"><span class="cls_009">Summary</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:15238px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background021.jpg" width=612 height=792></div>
<div style="position:absolute;left:16.25px;top:2.25px" class="cls_003"><span class="cls_003">5.</span></div>
<div style="position:absolute;left:34.99px;top:8.25px" class="cls_009"><span class="cls_009">Jungle Jump (Platformer)</span></div>
<div style="position:absolute;left:64.98px;top:25.50px" class="cls_009"><span class="cls_009">Project setup</span></div>
<div style="position:absolute;left:64.98px;top:39.00px" class="cls_009"><span class="cls_009">Introducing kinematic bodies</span></div>
<div style="position:absolute;left:94.96px;top:50.25px" class="cls_009"><span class="cls_009">Collision response</span></div>
<div style="position:absolute;left:124.95px;top:65.25px" class="cls_009"><span class="cls_009">move_and_collide</span></div>
<div style="position:absolute;left:124.95px;top:82.50px" class="cls_009"><span class="cls_009">move_and_slide</span></div>
<div style="position:absolute;left:64.98px;top:96.00px" class="cls_009"><span class="cls_009">Player scene</span></div>
<div style="position:absolute;left:94.96px;top:111.00px" class="cls_009"><span class="cls_009">Collision Layer/Mask</span></div>
<div style="position:absolute;left:94.96px;top:128.25px" class="cls_009"><span class="cls_009">Sprite</span></div>
<div style="position:absolute;left:94.96px;top:141.75px" class="cls_009"><span class="cls_009">Collision shape</span></div>
<div style="position:absolute;left:124.95px;top:156.75px" class="cls_009"><span class="cls_009">Shapes</span></div>
<div style="position:absolute;left:94.96px;top:174.00px" class="cls_009"><span class="cls_009">Animations</span></div>
<div style="position:absolute;left:94.96px;top:191.25px" class="cls_009"><span class="cls_009">Finishing up the scene tree</span></div>
<div style="position:absolute;left:94.96px;top:208.50px" class="cls_009"><span class="cls_009">Player states</span></div>
<div style="position:absolute;left:94.96px;top:225.75px" class="cls_009"><span class="cls_009">Player script</span></div>
<div style="position:absolute;left:94.96px;top:243.00px" class="cls_009"><span class="cls_009">Player movement</span></div>
<div style="position:absolute;left:94.96px;top:260.25px" class="cls_009"><span class="cls_009">Player health</span></div>
<div style="position:absolute;left:64.98px;top:273.75px" class="cls_009"><span class="cls_009">Collectible items</span></div>
<div style="position:absolute;left:94.96px;top:288.75px" class="cls_009"><span class="cls_009">Collectible scene</span></div>
<div style="position:absolute;left:94.96px;top:306.00px" class="cls_009"><span class="cls_009">Collectible script</span></div>
<div style="position:absolute;left:64.98px;top:319.50px" class="cls_009"><span class="cls_009">Designing the level</span></div>
<div style="position:absolute;left:94.96px;top:334.50px" class="cls_009"><span class="cls_009">TileSet configuration</span></div>
<div style="position:absolute;left:94.96px;top:351.75px" class="cls_009"><span class="cls_009">Base-level setup</span></div>
<div style="position:absolute;left:94.96px;top:369.00px" class="cls_009"><span class="cls_009">Designing the first level</span></div>
<div style="position:absolute;left:94.96px;top:386.25px" class="cls_009"><span class="cls_009">Scrolling background</span></div>
<div style="position:absolute;left:94.96px;top:399.75px" class="cls_009"><span class="cls_009">Dangerous objects</span></div>
<div style="position:absolute;left:124.95px;top:414.75px" class="cls_009"><span class="cls_009">About slide collisions</span></div>
<div style="position:absolute;left:64.98px;top:428.25px" class="cls_009"><span class="cls_009">Enemies</span></div>
<div style="position:absolute;left:94.96px;top:443.25px" class="cls_009"><span class="cls_009">Scene setup</span></div>
<div style="position:absolute;left:94.96px;top:460.50px" class="cls_009"><span class="cls_009">Script</span></div>
<div style="position:absolute;left:94.96px;top:477.75px" class="cls_009"><span class="cls_009">Damaging the enemy</span></div>
<div style="position:absolute;left:64.98px;top:491.25px" class="cls_009"><span class="cls_009">HUD</span></div>
<div style="position:absolute;left:94.96px;top:506.25px" class="cls_009"><span class="cls_009">Scene setup</span></div>
<div style="position:absolute;left:94.96px;top:523.50px" class="cls_009"><span class="cls_009">Script</span></div>
<div style="position:absolute;left:94.96px;top:540.75px" class="cls_009"><span class="cls_009">Attaching the HUD</span></div>
<div style="position:absolute;left:64.98px;top:554.25px" class="cls_009"><span class="cls_009">Title screen</span></div>
<div style="position:absolute;left:94.96px;top:569.25px" class="cls_009"><span class="cls_009">Scene setup</span></div>
<div style="position:absolute;left:64.98px;top:582.75px" class="cls_009"><span class="cls_009">Main scene</span></div>
<div style="position:absolute;left:94.96px;top:594.00px" class="cls_009"><span class="cls_009">Level transitions</span></div>
<div style="position:absolute;left:124.95px;top:609.00px" class="cls_009"><span class="cls_009">Door scene</span></div>
<div style="position:absolute;left:64.98px;top:622.50px" class="cls_009"><span class="cls_009">Finishing touches</span></div>
<div style="position:absolute;left:94.96px;top:637.50px" class="cls_009"><span class="cls_009">Sound effects</span></div>
<div style="position:absolute;left:94.96px;top:654.75px" class="cls_009"><span class="cls_009">Infinite falling</span></div>
<div style="position:absolute;left:94.96px;top:672.00px" class="cls_009"><span class="cls_009">Double jump</span></div>
<div style="position:absolute;left:94.96px;top:689.25px" class="cls_009"><span class="cls_009">Dust particles</span></div>
<div style="position:absolute;left:94.96px;top:706.50px" class="cls_009"><span class="cls_009">Crouching state</span></div>
<div style="position:absolute;left:94.96px;top:720.00px" class="cls_009"><span class="cls_009">Climbing ladders</span></div>
<div style="position:absolute;left:124.95px;top:735.00px" class="cls_009"><span class="cls_009">Player code</span></div>
<div style="position:absolute;left:124.95px;top:752.25px" class="cls_009"><span class="cls_009">Level code</span></div>
<div style="position:absolute;left:94.96px;top:769.50px" class="cls_009"><span class="cls_009">Moving platforms</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:16040px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background022.jpg" width=612 height=792></div>
<div style="position:absolute;left:64.98px;top:8.25px" class="cls_009"><span class="cls_009">Summary</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:16842px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background023.jpg" width=612 height=792></div>
<div style="position:absolute;left:16.25px;top:2.25px" class="cls_003"><span class="cls_003">6.</span></div>
<div style="position:absolute;left:34.99px;top:8.25px" class="cls_009"><span class="cls_009">3D Minigolf</span></div>
<div style="position:absolute;left:64.98px;top:21.75px" class="cls_009"><span class="cls_009">Introduction to 3D</span></div>
<div style="position:absolute;left:94.96px;top:36.75px" class="cls_009"><span class="cls_009">Orienting in 3D space</span></div>
<div style="position:absolute;left:94.96px;top:54.00px" class="cls_009"><span class="cls_009">Godot's 3D editor</span></div>
<div style="position:absolute;left:94.96px;top:67.50px" class="cls_009"><span class="cls_009">Adding 3D objects</span></div>
<div style="position:absolute;left:124.95px;top:82.50px" class="cls_009"><span class="cls_009">Global versus Local Space</span></div>
<div style="position:absolute;left:94.96px;top:96.00px" class="cls_009"><span class="cls_009">Transforms</span></div>
<div style="position:absolute;left:124.95px;top:111.00px" class="cls_009"><span class="cls_009">Transforms in code</span></div>
<div style="position:absolute;left:94.96px;top:124.50px" class="cls_009"><span class="cls_009">Meshes</span></div>
<div style="position:absolute;left:124.95px;top:139.50px" class="cls_009"><span class="cls_009">Importing meshes</span></div>
<div style="position:absolute;left:124.95px;top:156.75px" class="cls_009"><span class="cls_009">Primitives</span></div>
<div style="position:absolute;left:124.95px;top:174.00px" class="cls_009"><span class="cls_009">Multiple meshes</span></div>
<div style="position:absolute;left:94.96px;top:191.25px" class="cls_009"><span class="cls_009">Cameras</span></div>
<div style="position:absolute;left:94.96px;top:208.50px" class="cls_009"><span class="cls_009">Project setup</span></div>
<div style="position:absolute;left:64.98px;top:222.00px" class="cls_009"><span class="cls_009">Creating the course</span></div>
<div style="position:absolute;left:94.96px;top:233.25px" class="cls_009"><span class="cls_009">GridMaps</span></div>
<div style="position:absolute;left:124.95px;top:248.25px" class="cls_009"><span class="cls_009">Making a MeshLibrary</span></div>
<div style="position:absolute;left:94.96px;top:265.50px" class="cls_009"><span class="cls_009">Drawing the course</span></div>
<div style="position:absolute;left:94.96px;top:282.75px" class="cls_009"><span class="cls_009">WorldEnvironment</span></div>
<div style="position:absolute;left:94.96px;top:300.00px" class="cls_009"><span class="cls_009">Finishing the scene</span></div>
<div style="position:absolute;left:64.98px;top:313.50px" class="cls_009"><span class="cls_009">Ball</span></div>
<div style="position:absolute;left:94.96px;top:328.50px" class="cls_009"><span class="cls_009">Testing the ball</span></div>
<div style="position:absolute;left:94.96px;top:345.75px" class="cls_009"><span class="cls_009">Improving collisions</span></div>
<div style="position:absolute;left:64.98px;top:359.25px" class="cls_009"><span class="cls_009">UI</span></div>
<div style="position:absolute;left:94.96px;top:374.25px" class="cls_009"><span class="cls_009">Aiming arrow</span></div>
<div style="position:absolute;left:94.96px;top:391.50px" class="cls_009"><span class="cls_009">UI display</span></div>
<div style="position:absolute;left:64.98px;top:405.00px" class="cls_009"><span class="cls_009">Scripts</span></div>
<div style="position:absolute;left:94.96px;top:420.00px" class="cls_009"><span class="cls_009">UI</span></div>
<div style="position:absolute;left:94.96px;top:437.25px" class="cls_009"><span class="cls_009">Main</span></div>
<div style="position:absolute;left:94.96px;top:454.50px" class="cls_009"><span class="cls_009">Ball</span></div>
<div style="position:absolute;left:94.96px;top:471.75px" class="cls_009"><span class="cls_009">Hole</span></div>
<div style="position:absolute;left:94.96px;top:489.00px" class="cls_009"><span class="cls_009">Testing it out</span></div>
<div style="position:absolute;left:94.96px;top:506.25px" class="cls_009"><span class="cls_009">Improving aiming &#x2013; option 1</span></div>
<div style="position:absolute;left:94.96px;top:523.50px" class="cls_009"><span class="cls_009">Improving aiming &#x2013; option 2</span></div>
<div style="position:absolute;left:64.98px;top:537.00px" class="cls_009"><span class="cls_009">Camera improvements</span></div>
<div style="position:absolute;left:94.96px;top:552.00px" class="cls_009"><span class="cls_009">Multiple cameras</span></div>
<div style="position:absolute;left:94.96px;top:565.50px" class="cls_009"><span class="cls_009">Orbiting camera</span></div>
<div style="position:absolute;left:124.95px;top:580.50px" class="cls_009"><span class="cls_009">Creating a gimbal</span></div>
<div style="position:absolute;left:94.96px;top:597.75px" class="cls_009"><span class="cls_009">Tracking camera</span></div>
<div style="position:absolute;left:64.98px;top:611.25px" class="cls_009"><span class="cls_009">Visual effects</span></div>
<div style="position:absolute;left:94.96px;top:626.25px" class="cls_009"><span class="cls_009">SpatialMaterials</span></div>
<div style="position:absolute;left:94.96px;top:643.50px" class="cls_009"><span class="cls_009">Environment options</span></div>
<div style="position:absolute;left:94.96px;top:660.75px" class="cls_009"><span class="cls_009">Lighting</span></div>
<div style="position:absolute;left:64.98px;top:678.00px" class="cls_009"><span class="cls_009">Summary</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:17644px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background024.jpg" width=612 height=792></div>
<div style="position:absolute;left:16.25px;top:2.25px" class="cls_003"><span class="cls_003">7.</span></div>
<div style="position:absolute;left:34.99px;top:8.25px" class="cls_009"><span class="cls_009">Additional Topics</span></div>
<div style="position:absolute;left:64.98px;top:21.75px" class="cls_009"><span class="cls_009">Using Godot's documentation</span></div>
<div style="position:absolute;left:94.96px;top:36.75px" class="cls_009"><span class="cls_009">Reading the API documentation</span></div>
<div style="position:absolute;left:64.98px;top:50.25px" class="cls_009"><span class="cls_009">Exporting projects</span></div>
<div style="position:absolute;left:94.96px;top:65.25px" class="cls_009"><span class="cls_009">Getting the export templates</span></div>
<div style="position:absolute;left:94.96px;top:82.50px" class="cls_009"><span class="cls_009">Export presets</span></div>
<div style="position:absolute;left:94.96px;top:99.75px" class="cls_009"><span class="cls_009">Exporting</span></div>
<div style="position:absolute;left:94.96px;top:113.25px" class="cls_009"><span class="cls_009">Example &#x2013; Coin Dash for Android</span></div>
<div style="position:absolute;left:124.95px;top:128.25px" class="cls_009"><span class="cls_009">Modifying the game</span></div>
<div style="position:absolute;left:124.95px;top:145.50px" class="cls_009"><span class="cls_009">Preparing your system</span></div>
<div style="position:absolute;left:124.95px;top:162.75px" class="cls_009"><span class="cls_009">Exporting</span></div>
<div style="position:absolute;left:64.98px;top:176.25px" class="cls_009"><span class="cls_009">Shaders</span></div>
<div style="position:absolute;left:94.96px;top:191.25px" class="cls_009"><span class="cls_009">Creating a shader</span></div>
<div style="position:absolute;left:94.96px;top:208.50px" class="cls_009"><span class="cls_009">Learning more</span></div>
<div style="position:absolute;left:64.98px;top:222.00px" class="cls_009"><span class="cls_009">Using other languages</span></div>
<div style="position:absolute;left:94.96px;top:237.00px" class="cls_009"><span class="cls_009">C#</span></div>
<div style="position:absolute;left:94.96px;top:254.25px" class="cls_009"><span class="cls_009">VisualScript</span></div>
<div style="position:absolute;left:64.98px;top:267.75px" class="cls_009"><span class="cls_009">Native code &#x2013; GDNative</span></div>
<div style="position:absolute;left:94.96px;top:282.75px" class="cls_009"><span class="cls_009">Language bindings</span></div>
<div style="position:absolute;left:64.98px;top:300.00px" class="cls_009"><span class="cls_009">Asset library</span></div>
<div style="position:absolute;left:64.98px;top:313.50px" class="cls_009"><span class="cls_009">Contributing to Godot</span></div>
<div style="position:absolute;left:94.96px;top:328.50px" class="cls_009"><span class="cls_009">Contributing to the engine</span></div>
<div style="position:absolute;left:94.96px;top:345.75px" class="cls_009"><span class="cls_009">Writing documentation</span></div>
<div style="position:absolute;left:94.96px;top:363.00px" class="cls_009"><span class="cls_009">Donations</span></div>
<div style="position:absolute;left:64.98px;top:376.50px" class="cls_009"><span class="cls_009">Getting help &#x2013; community resources</span></div>
<div style="position:absolute;left:94.96px;top:391.50px" class="cls_009"><span class="cls_009">GitHub</span></div>
<div style="position:absolute;left:94.96px;top:408.75px" class="cls_009"><span class="cls_009">Godot Q and A</span></div>
<div style="position:absolute;left:94.96px;top:426.00px" class="cls_009"><span class="cls_009">Discord / Forum</span></div>
<div style="position:absolute;left:64.98px;top:443.25px" class="cls_009"><span class="cls_009">Summary</span></div>
<div style="position:absolute;left:34.99px;top:456.75px" class="cls_009"><span class="cls_009">Other Books You May Enjoy</span></div>
<div style="position:absolute;left:64.98px;top:471.75px" class="cls_009"><span class="cls_009">Leave a review - let other readers know what you think</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:18446px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background025.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Preface</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">This book is an introduction to the Godot game engine and its new version, 3.0. Godot 3.0 has a large</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">number of new features and capabilities that make it a strong alternative to more expensive</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">commercial game engines. For beginners, it offers a friendly way to learn game development</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">techniques. For more experienced developers, Godot is a powerful, customizable tool for bringing</span></div>
<div style="position:absolute;left:5.00px;top:151.50px" class="cls_003"><span class="cls_003">visions to life.</span></div>
<div style="position:absolute;left:5.00px;top:184.50px" class="cls_003"><span class="cls_003">This book will have a project-based approach. It consists of five projects that will help developers</span></div>
<div style="position:absolute;left:5.00px;top:202.50px" class="cls_003"><span class="cls_003">achieve a sound understanding of how to use the Godot engine to build games.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:19248px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background026.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Who this book is for</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">This book is for anyone who wants to learn how to make games using a modern game engine. New</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">users and experienced developers alike will find it a helpful resource. Some programming experience</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">is recommended.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:20050px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background027.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">What this book covers</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">This book is a project-based introduction to using the Godot game engine. Each of the five game</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">projects builds on the concepts learned in the previous project.</span></div>
<div style="position:absolute;left:5.00px;top:130.50px" class="cls_009"><span class="cls_009">Chapter 1</span><span class="cls_003">, </span><span class="cls_012">Introduction</span><span class="cls_003">, introduces the concept of game engines in general and Godot specifically,</span></div>
<div style="position:absolute;left:5.00px;top:148.50px" class="cls_003"><span class="cls_003">including how to download Godot and install it on your computer.</span></div>
<div style="position:absolute;left:5.00px;top:181.50px" class="cls_009"><span class="cls_009">Chapter 2</span><span class="cls_003">, </span><span class="cls_012">Coin Dash</span><span class="cls_003">, deals with a small game that demonstrates how to create scenes and work with</span></div>
<div style="position:absolute;left:5.00px;top:199.50px" class="cls_003"><span class="cls_003">Godot's node architecture.</span></div>
<div style="position:absolute;left:5.00px;top:232.50px" class="cls_009"><span class="cls_009">Chapter 3</span><span class="cls_003">, </span><span class="cls_012">Escape the Maze</span><span class="cls_003">, entails a project based on a top-down maze game that will show how to</span></div>
<div style="position:absolute;left:5.00px;top:250.50px" class="cls_003"><span class="cls_003">use Godot's powerful inheritance features and nodes for tile maps and sprite animation.</span></div>
<div style="position:absolute;left:5.00px;top:283.50px" class="cls_009"><span class="cls_009">Chapter 4</span><span class="cls_003">, </span><span class="cls_012">Space Rocks</span><span class="cls_003">, demonstrates working with physics bodies to create an </span><span class="cls_012">Asteroids</span><span class="cls_003">-style space</span></div>
<div style="position:absolute;left:5.00px;top:301.50px" class="cls_003"><span class="cls_003">game.</span></div>
<div style="position:absolute;left:5.00px;top:334.50px" class="cls_009"><span class="cls_009">Chapter 5</span><span class="cls_003">, </span><span class="cls_012">Jungle Jump</span><span class="cls_003">, involves a side-scrolling platform game in the spirit of </span><span class="cls_012">Super Mario</span></div>
<div style="position:absolute;left:5.00px;top:352.50px" class="cls_012"><span class="cls_012">Brothers. </span><span class="cls_003">You'll learn about kinematic bodies, animation states, and parallax backgrounds.</span></div>
<div style="position:absolute;left:5.00px;top:385.50px" class="cls_009"><span class="cls_009">Chapter 6</span><span class="cls_003">, </span><span class="cls_012">3D Minigolf</span><span class="cls_003">, extends the previous concepts into three dimensions. You'll work with meshes,</span></div>
<div style="position:absolute;left:5.00px;top:403.50px" class="cls_003"><span class="cls_003">lighting, and camera control.</span></div>
<div style="position:absolute;left:5.00px;top:436.50px" class="cls_009"><span class="cls_009">Chapter 7</span><span class="cls_003">, </span><span class="cls_012">Additional Topics</span><span class="cls_003">, covers even more topics to explore once you've mastered the material in</span></div>
<div style="position:absolute;left:5.00px;top:454.50px" class="cls_003"><span class="cls_003">the previous chapters.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:20852px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background028.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">To get the most out of this book</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">To best understand the example code in this book, you should have a general knowledge of</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">programming, preferably with a modern, dynamically-typed language, such as Python or JavaScript. If</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">you're new to programming entirely, you may wish to review a beginner Python tutorial before diving</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">into the game projects in this book.</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">Godot will run on any relatively modern PC running Windows, macOS, or Linux operating systems.</span></div>
<div style="position:absolute;left:5.00px;top:184.50px" class="cls_003"><span class="cls_003">Your video card must support OpenGL ES 3.0.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:21654px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background029.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Download the example code files</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">You can download the example code files for this book from your account at </span><A HREF="http://www.packtpub.com">www.packtpub.com</A> </span><span class="cls_003">. If you</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">purchased this book elsewhere, you can visit </span><A HREF="http://www.packtpub.com/support">www.packtpub.com/support</A> </span><span class="cls_003"> and register to have the files</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">emailed directly to you.</span></div>
<div style="position:absolute;left:5.00px;top:148.50px" class="cls_003"><span class="cls_003">You can download the code files by following these steps:</span></div>
<div style="position:absolute;left:16.25px;top:180.75px" class="cls_003"><span class="cls_003">1. Log in or register at </span><A HREF="http://www.packtpub.com/support">www.packtpub.com</A> </span><span class="cls_003">.</span></div>
<div style="position:absolute;left:16.25px;top:198.00px" class="cls_003"><span class="cls_003">2. Select the SUPPORT tab.</span></div>
<div style="position:absolute;left:16.25px;top:215.25px" class="cls_003"><span class="cls_003">3. Click on Code Downloads & Errata.</span></div>
<div style="position:absolute;left:16.25px;top:232.50px" class="cls_003"><span class="cls_003">4. Enter the name of the book in the Search box and follow the onscreen instructions.</span></div>
<div style="position:absolute;left:5.00px;top:265.50px" class="cls_003"><span class="cls_003">Once the file is downloaded, please make sure that you unzip or extract the folder using the latest</span></div>
<div style="position:absolute;left:5.00px;top:283.50px" class="cls_003"><span class="cls_003">version of:</span></div>
<div style="position:absolute;left:34.99px;top:315.75px" class="cls_003"><span class="cls_003">WinRAR/7-Zip for Windows</span></div>
<div style="position:absolute;left:34.99px;top:333.00px" class="cls_003"><span class="cls_003">Zipeg/iZip/UnRarX for Mac</span></div>
<div style="position:absolute;left:34.99px;top:350.25px" class="cls_003"><span class="cls_003">7-Zip/PeaZip for Linux</span></div>
<div style="position:absolute;left:5.00px;top:383.25px" class="cls_003"><span class="cls_003">The code bundle for the book is also hosted on GitHub at </span><span class="cls_009">https://github.com/PacktPublishing/Godot-Game-Eng</span></div>
<div style="position:absolute;left:5.00px;top:401.25px" class="cls_009"><span class="cls_009">ine-Projects/issues</span><span class="cls_003">. In case there's an update to the code, it will be updated on the existing GitHub</span></div>
<div style="position:absolute;left:5.00px;top:419.25px" class="cls_003"><span class="cls_003">repository.</span></div>
<div style="position:absolute;left:5.00px;top:452.25px" class="cls_003"><span class="cls_003">We also have other code bundles from our rich catalog of books and videos available at </span><span class="cls_009">https://github.</span></div>
<div style="position:absolute;left:5.00px;top:470.25px" class="cls_009"><span class="cls_009">com/PacktPublishing/</span><span class="cls_003">. Check them out!</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:22456px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background030.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Download the color images</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">We also provide a PDF file that has color images of the screenshots/diagrams used in this book. You</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">can download it here: </span><span class="cls_009">https://www.packtpub.com/sites/default/files/downloads/GodotEngineGameDevelopmentProjects</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_009"><span class="cls_009">_ColorImages.pdf</span><span class="cls_003">.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:23258px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background031.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Conventions used</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">There are a number of text conventions used throughout this book.</span></div>
<div style="position:absolute;left:5.00px;top:112.50px" class="cls_010"><span class="cls_010">CodeInText</span><span class="cls_003">: Indicates code words in text, database table names, folder names, filenames, file</span></div>
<div style="position:absolute;left:5.00px;top:130.50px" class="cls_003"><span class="cls_003">extensions, pathnames, dummy URLs, user input, and Twitter handles. Here is an example: "Mount the</span></div>
<div style="position:absolute;left:5.00px;top:148.50px" class="cls_003"><span class="cls_003">downloaded </span><span class="cls_010">WebStorm-10*.dmg</span><span class="cls_003"> disk image file as another disk in your system."</span></div>
<div style="position:absolute;left:5.00px;top:181.50px" class="cls_003"><span class="cls_003">A block of code is set as follows:</span></div>
<div style="position:absolute;left:19.99px;top:216.00px" class="cls_010"><span class="cls_010">extends Area2D</span></div>
<div style="position:absolute;left:19.99px;top:238.50px" class="cls_010"><span class="cls_010">export (int) var speed</span></div>
<div style="position:absolute;left:19.99px;top:249.75px" class="cls_010"><span class="cls_010">var velocity = Vector2()</span></div>
<div style="position:absolute;left:19.99px;top:261.00px" class="cls_010"><span class="cls_010">var screensize = Vector2(480, 720)</span></div>
<div style="position:absolute;left:5.00px;top:285.75px" class="cls_003"><span class="cls_003">Any command-line input or output is written as follows:</span></div>
<div style="position:absolute;left:19.99px;top:320.25px" class="cls_013"><span class="cls_013">adb install dodge.apk</span></div>
<div style="position:absolute;left:5.00px;top:345.75px" class="cls_002"><span class="cls_002">Bold</span><span class="cls_003">: Indicates a new term, an important word, or words that you see onscreen. For example, words</span></div>
<div style="position:absolute;left:5.00px;top:363.75px" class="cls_003"><span class="cls_003">in menus or dialog boxes appear in the text like this. Here is an example: "The main portion of the</span></div>
<div style="position:absolute;left:5.00px;top:381.75px" class="cls_003"><span class="cls_003">editor window is the Viewport."</span></div>
<div style="position:absolute;left:52.98px;top:414.75px" class="cls_008"><span class="cls_008">Warnings or important notes appear like this.</span></div>
<div style="position:absolute;left:52.98px;top:442.50px" class="cls_008"><span class="cls_008">Tips and tricks appear like this.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:24060px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background032.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Get in touch</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Feedback from our readers is always welcome.</span></div>
<div style="position:absolute;left:5.00px;top:112.50px" class="cls_002"><span class="cls_002">General feedback</span><span class="cls_003">: Email </span><span class="cls_010">feedback@packtpub.com</span><span class="cls_003"> and mention the book title in the subject of your</span></div>
<div style="position:absolute;left:5.00px;top:130.50px" class="cls_003"><span class="cls_003">message. If you have questions about any aspect of this book, please email us at </span><span class="cls_010">questions@packtpub.com</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:163.50px" class="cls_002"><span class="cls_002">Errata</span><span class="cls_003">: Although we have taken every care to ensure the accuracy of our content, mistakes do</span></div>
<div style="position:absolute;left:5.00px;top:181.50px" class="cls_003"><span class="cls_003">happen. If you have found a mistake in this book, we would be grateful if you would report this to us.</span></div>
<div style="position:absolute;left:5.00px;top:199.50px" class="cls_003"><span class="cls_003">Please visit </span><A HREF="http://www.packtpub.com/submit-errata">www.packtpub.com/submit-errata</A> </span><span class="cls_003">, selecting your book, clicking on the Errata Submission Form</span></div>
<div style="position:absolute;left:5.00px;top:217.50px" class="cls_003"><span class="cls_003">link, and entering the details.</span></div>
<div style="position:absolute;left:5.00px;top:250.50px" class="cls_002"><span class="cls_002">Piracy</span><span class="cls_003">: If you come across any illegal copies of our works in any form on the Internet, we would be</span></div>
<div style="position:absolute;left:5.00px;top:268.50px" class="cls_003"><span class="cls_003">grateful if you would provide us with the location address or website name. Please contact us at</span></div>
<div style="position:absolute;left:5.00px;top:286.50px" class="cls_010"><span class="cls_010">copyright@packtpub.com</span><span class="cls_003"> with a link to the material.</span></div>
<div style="position:absolute;left:5.00px;top:319.50px" class="cls_002"><span class="cls_002">If you are interested in becoming an author</span><span class="cls_003">: If there is a topic that you have expertise in and you</span></div>
<div style="position:absolute;left:5.00px;top:337.50px" class="cls_003"><span class="cls_003">are interested in either writing or contributing to a book, please visit </span><A HREF="http://authors.packtpub.com/">authors.packtpub.com</A> </span><span class="cls_003">.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:24862px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background033.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Reviews</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Please leave a review. Once you have read and used this book, why not leave a review on the site</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">that you purchased it from? Potential readers can then see and use your unbiased opinion to make</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">purchase decisions, we at Packt can understand what you think about our products, and our authors</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">can see your feedback on their book. Thank you!</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">For more information about Packt, please visit </span><A HREF="https://www.packtpub.com/">packtpub.com</A> </span><span class="cls_003">.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:25664px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background034.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Introduction</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Whether it's your desired career or a recreational hobby, game development is a fun and rewarding</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">endeavor. There never been a better time to get started in game development. Modern programming</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">languages and tools have made it easier than ever to build high- quality games and distribute them to</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">the world. If you're reading this book, then you've set your feet on the path to making the game of your</span></div>
<div style="position:absolute;left:5.00px;top:151.50px" class="cls_003"><span class="cls_003">dreams.</span></div>
<div style="position:absolute;left:5.00px;top:184.50px" class="cls_003"><span class="cls_003">This book is an introduction to the Godot game engine and its new 3.0 version, which was released in</span></div>
<div style="position:absolute;left:5.00px;top:202.50px" class="cls_003"><span class="cls_003">early 2018. Godot 3.0 has a large number of new features and capabilities that make it a strong</span></div>
<div style="position:absolute;left:5.00px;top:220.50px" class="cls_003"><span class="cls_003">alternative to expensive commercial game engines. For beginners, it offers a friendly way to learn</span></div>
<div style="position:absolute;left:5.00px;top:238.50px" class="cls_003"><span class="cls_003">fundamental game development techniques. For more experienced developers, Godot is a powerful,</span></div>
<div style="position:absolute;left:5.00px;top:256.50px" class="cls_003"><span class="cls_003">customizable, and </span><span class="cls_012">open</span><span class="cls_003"> tool for bringing your visions to life.</span></div>
<div style="position:absolute;left:5.00px;top:289.50px" class="cls_003"><span class="cls_003">This book takes a project-based approach that will introduce you to the fundamentals of the engine. It</span></div>
<div style="position:absolute;left:5.00px;top:307.50px" class="cls_003"><span class="cls_003">consists of five games that are designed to help you achieve a sound understanding of game</span></div>
<div style="position:absolute;left:5.00px;top:325.50px" class="cls_003"><span class="cls_003">development concepts and how they're applied in Godot. Along the way, you will learn how Godot</span></div>
<div style="position:absolute;left:5.00px;top:343.50px" class="cls_003"><span class="cls_003">works and absorb important techniques that you can apply to your projects.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:26466px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background035.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">General advice</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">This section contains some general advice to readers, based on the author's experience as a teacher</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">and lecturer. Keep these tips in mind as you work through the book, especially if you're very new to</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">programming.</span></div>
<div style="position:absolute;left:5.00px;top:148.50px" class="cls_003"><span class="cls_003">Try to follow the projects in the book in order. Later chapters may build on topics that were</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">introduced in earlier chapters, where they are explained in more detail. When you encounter</span></div>
<div style="position:absolute;left:5.00px;top:184.50px" class="cls_003"><span class="cls_003">something that you don't remember, go back and review that topic in the earlier chapter. No one is</span></div>
<div style="position:absolute;left:5.00px;top:202.50px" class="cls_003"><span class="cls_003">timing you, and there's no prize for finishing the book quickly.</span></div>
<div style="position:absolute;left:5.00px;top:235.50px" class="cls_003"><span class="cls_003">There is a lot of material to absorb here. Don't feel discouraged if you don't get it at first. The goal is</span></div>
<div style="position:absolute;left:5.00px;top:253.50px" class="cls_003"><span class="cls_003">not to become an expert in game development overnight—that's just not possible. Repetition is the key</span></div>
<div style="position:absolute;left:5.00px;top:271.50px" class="cls_003"><span class="cls_003">to learning complex topics; the more you work with Godot's features, the more familiar and </span><span class="cls_012">easy</span><span class="cls_003"> they</span></div>
<div style="position:absolute;left:5.00px;top:289.50px" class="cls_003"><span class="cls_003">will start to seem. Try looking back at </span><span class="cls_009">Chapter 2</span><span class="cls_003">, </span><span class="cls_012">Coin Dash</span><span class="cls_003">, when you finish </span><span class="cls_009">Chapter 7</span><span class="cls_003">, </span><span class="cls_012">Additional</span></div>
<div style="position:absolute;left:5.00px;top:307.50px" class="cls_012"><span class="cls_012">Topics</span><span class="cls_003">. You'll be surprised at how much more you'll understand compared to the first time you read it.</span></div>
<div style="position:absolute;left:5.00px;top:340.50px" class="cls_003"><span class="cls_003">If you're using the PDF version of this book, resist the temptation to copy and paste the code. Typing</span></div>
<div style="position:absolute;left:5.00px;top:358.50px" class="cls_003"><span class="cls_003">the code yourself will engage more of your brain. It's similar to how taking notes during a lecture</span></div>
<div style="position:absolute;left:5.00px;top:376.50px" class="cls_003"><span class="cls_003">helps you learn better than just listening, even if you never read the notes. If you're a slow typist, it</span></div>
<div style="position:absolute;left:5.00px;top:394.50px" class="cls_003"><span class="cls_003">will also help you work on your typing speed. In a nutshell: you're a programmer, so get used to</span></div>
<div style="position:absolute;left:5.00px;top:412.50px" class="cls_003"><span class="cls_003">typing code!</span></div>
<div style="position:absolute;left:5.00px;top:445.50px" class="cls_003"><span class="cls_003">One of the biggest mistakes that new game developers make is taking on a bigger project than they can</span></div>
<div style="position:absolute;left:5.00px;top:463.50px" class="cls_003"><span class="cls_003">handle. It is very important to keep the scope of your project as small as possible when starting out.</span></div>
<div style="position:absolute;left:5.00px;top:481.50px" class="cls_003"><span class="cls_003">You will be much more successful (and learn more) if you finish two or three small games than if you</span></div>
<div style="position:absolute;left:5.00px;top:499.50px" class="cls_003"><span class="cls_003">have a large, incomplete project that has grown beyond your ability to manage.</span></div>
<div style="position:absolute;left:5.00px;top:532.50px" class="cls_003"><span class="cls_003">You'll notice that the five games in this book follow this strategy very strictly. They are all small in</span></div>
<div style="position:absolute;left:5.00px;top:550.50px" class="cls_003"><span class="cls_003">scope, both for practical reasons—to fit reasonably into book-sized lessons—but also to remain</span></div>
<div style="position:absolute;left:5.00px;top:568.50px" class="cls_003"><span class="cls_003">focused on teaching you the basics. As you build them, you will likely find yourself thinking of</span></div>
<div style="position:absolute;left:5.00px;top:586.50px" class="cls_003"><span class="cls_003">additional features and gameplay elements right away. </span><span class="cls_012">What if the spaceship had upgrades?</span><span class="cls_003"> </span><span class="cls_012">What if</span></div>
<div style="position:absolute;left:5.00px;top:604.50px" class="cls_012"><span class="cls_012">the character could do wall jumps?</span></div>
<div style="position:absolute;left:5.00px;top:637.50px" class="cls_003"><span class="cls_003">Ideas are great, but if you haven't finished the basic project yet, write them down and save them for</span></div>
<div style="position:absolute;left:5.00px;top:655.50px" class="cls_003"><span class="cls_003">later. Don't let yourself be sidetracked by one </span><span class="cls_012">cool idea</span><span class="cls_003"> after another. Developers call this </span><span class="cls_012">feature</span></div>
<div style="position:absolute;left:5.00px;top:673.50px" class="cls_012"><span class="cls_012">creep</span><span class="cls_003">, and it's a trap that has led to many an unfinished game. Don't fall victim to it.</span></div>
<div style="position:absolute;left:5.00px;top:706.50px" class="cls_003"><span class="cls_003">Finally, don't forget to take a break now and again. You shouldn't try and power through the whole</span></div>
<div style="position:absolute;left:5.00px;top:724.50px" class="cls_003"><span class="cls_003">book in just a few sittings. After each new concept, and especially after each chapter, give yourself</span></div>
<div style="position:absolute;left:5.00px;top:742.50px" class="cls_003"><span class="cls_003">time to absorb the new information before you dive into the next one. You'll find that you not only</span></div>
<div style="position:absolute;left:5.00px;top:760.50px" class="cls_003"><span class="cls_003">retain more information, but you'll probably enjoy the process more.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:27268px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background036.jpg" width=612 height=792></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:27268px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background037.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">What is a game engine?</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Game development is complex and involves a wide variety of knowledge and skills. In order to build</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">a modern game, you need a great deal of underlying technology before you can make the actual game</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">itself. Imagine that you had to build your own computer and write your own operating system before</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">you could even start programming. Game development would be a lot like that if you truly had to start</span></div>
<div style="position:absolute;left:5.00px;top:151.50px" class="cls_003"><span class="cls_003">from scratch and build </span><span class="cls_012">everything</span><span class="cls_003"> you needed.</span></div>
<div style="position:absolute;left:5.00px;top:184.50px" class="cls_003"><span class="cls_003">In addition, there are a number of common needs that every game has. For example, no matter what</span></div>
<div style="position:absolute;left:5.00px;top:202.50px" class="cls_003"><span class="cls_003">the game is, it's going to need to draw things on the screen. If the code to do that has already been</span></div>
<div style="position:absolute;left:5.00px;top:220.50px" class="cls_003"><span class="cls_003">written, it makes more sense to reuse it than to create it all over again for every game. That's where</span></div>
<div style="position:absolute;left:5.00px;top:238.50px" class="cls_003"><span class="cls_003">game frameworks and engines come in.</span></div>
<div style="position:absolute;left:5.00px;top:271.50px" class="cls_003"><span class="cls_003">A </span><span class="cls_002">game framework</span><span class="cls_003"> is a set of libraries with helper code that assists in building the foundational</span></div>
<div style="position:absolute;left:5.00px;top:289.50px" class="cls_003"><span class="cls_003">parts of a game. It doesn't necessarily provide all the pieces, and you may still have to write a great</span></div>
<div style="position:absolute;left:5.00px;top:307.50px" class="cls_003"><span class="cls_003">deal of code to tie everything together. Because of this, building a game with a game framework can</span></div>
<div style="position:absolute;left:5.00px;top:325.50px" class="cls_003"><span class="cls_003">take more time than one built with a full game engine.</span></div>
<div style="position:absolute;left:5.00px;top:358.50px" class="cls_003"><span class="cls_003">A </span><span class="cls_002">game engine</span><span class="cls_003"> is a collection of tools and technologies designed to ease the process of game-making</span></div>
<div style="position:absolute;left:5.00px;top:376.50px" class="cls_003"><span class="cls_003">by removing the need to </span><span class="cls_012">reinvent the wheel</span><span class="cls_003"> for each new game project. It provides a framework of</span></div>
<div style="position:absolute;left:5.00px;top:394.50px" class="cls_003"><span class="cls_003">commonly needed functionality that often needs a significant investment in time to develop.</span></div>
<div style="position:absolute;left:5.00px;top:427.50px" class="cls_003"><span class="cls_003">Here is a list of some of the main features a game engine will provide:</span></div>
<div style="position:absolute;left:34.99px;top:460.50px" class="cls_002"><span class="cls_002">Rendering (2D and 3D)</span><span class="cls_003">: Rendering is the process of displaying your game on the player's</span></div>
<div style="position:absolute;left:34.99px;top:477.75px" class="cls_003"><span class="cls_003">screen. A good rendering pipeline must take into account modern GPU support, high-resolution</span></div>
<div style="position:absolute;left:34.99px;top:495.00px" class="cls_003"><span class="cls_003">displays, and effects like lighting, perspective, and viewports, while maintaining a very high</span></div>
<div style="position:absolute;left:34.99px;top:512.25px" class="cls_003"><span class="cls_003">frame rate.</span></div>
<div style="position:absolute;left:34.99px;top:530.25px" class="cls_002"><span class="cls_002">Physics</span><span class="cls_003">: While a very common requirement, building a robust and accurate physics engine is a</span></div>
<div style="position:absolute;left:34.99px;top:547.50px" class="cls_003"><span class="cls_003">monumental task. Most games require some sort of collision detection and response system, and</span></div>
<div style="position:absolute;left:34.99px;top:564.75px" class="cls_003"><span class="cls_003">many need physics simulation, but few developers want to take on the task of writing one,</span></div>
<div style="position:absolute;left:34.99px;top:582.00px" class="cls_003"><span class="cls_003">especially if they have ever tried to do so.</span></div>
<div style="position:absolute;left:34.99px;top:600.00px" class="cls_002"><span class="cls_002">Platform support</span><span class="cls_003">: In today's market, most developers want to be able to release their games on</span></div>
<div style="position:absolute;left:34.99px;top:617.25px" class="cls_003"><span class="cls_003">multiple platforms, such as consoles, mobile, PC, and/or the web. A game engine provides a</span></div>
<div style="position:absolute;left:34.99px;top:634.50px" class="cls_003"><span class="cls_003">unified exporting process to publish on multiple platforms without needing to rewrite game code</span></div>
<div style="position:absolute;left:34.99px;top:651.75px" class="cls_003"><span class="cls_003">or support multiple versions.</span></div>
<div style="position:absolute;left:34.99px;top:669.75px" class="cls_002"><span class="cls_002">Common development environment</span><span class="cls_003">: By using the same unified interface to make multiple</span></div>
<div style="position:absolute;left:34.99px;top:687.00px" class="cls_003"><span class="cls_003">games, you don't have to re learn a new workflow every time you start a new project.</span></div>
<div style="position:absolute;left:5.00px;top:720.00px" class="cls_003"><span class="cls_003">In addition, there will be tools to assist with features such as networking, easing the process of</span></div>
<div style="position:absolute;left:5.00px;top:738.00px" class="cls_003"><span class="cls_003">working with images and sound, animations, debugging, level creation, and many more. Often, game</span></div>
<div style="position:absolute;left:5.00px;top:756.00px" class="cls_003"><span class="cls_003">engines will include the ability to import content from other tools such as those used to create</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:28070px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background038.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:3.31px" class="cls_003"><span class="cls_003">animations or 3D models.</span></div>
<div style="position:absolute;left:5.00px;top:36.00px" class="cls_003"><span class="cls_003">Using a game engine allows the developer to focus on building their game, rather than creating all of</span></div>
<div style="position:absolute;left:5.00px;top:54.00px" class="cls_003"><span class="cls_003">the underlying framework needed to make it work. For small or independent developers, this can</span></div>
<div style="position:absolute;left:5.00px;top:72.00px" class="cls_003"><span class="cls_003">mean the difference between releasing a game after one year of development instead of three, or even</span></div>
<div style="position:absolute;left:5.00px;top:90.00px" class="cls_003"><span class="cls_003">never at all.</span></div>
<div style="position:absolute;left:5.00px;top:123.00px" class="cls_003"><span class="cls_003">There are dozens of popular game engines on the market today, such as Unity, Unreal Engine, and</span></div>
<div style="position:absolute;left:5.00px;top:141.00px" class="cls_003"><span class="cls_003">GameMaker Studio, just to name a few. An important fact to be aware of is that the majority of</span></div>
<div style="position:absolute;left:5.00px;top:159.00px" class="cls_003"><span class="cls_003">popular game engines are commercial products. They may or may not require any financial investment</span></div>
<div style="position:absolute;left:5.00px;top:177.00px" class="cls_003"><span class="cls_003">to get started, but they will require some kind of licensing and/or royalty payments if your game</span></div>
<div style="position:absolute;left:5.00px;top:195.00px" class="cls_003"><span class="cls_003">makes money. Whatever engine you choose, you need to carefully read the user agreement and make</span></div>
<div style="position:absolute;left:5.00px;top:213.00px" class="cls_003"><span class="cls_003">sure you understand what you are and are not allowed to with the engine, and what hidden costs, if</span></div>
<div style="position:absolute;left:5.00px;top:231.00px" class="cls_003"><span class="cls_003">any, you may be responsible for.</span></div>
<div style="position:absolute;left:5.00px;top:264.00px" class="cls_003"><span class="cls_003">On the other hand, there are some engines which are non-commercial and </span><span class="cls_012">open source</span><span class="cls_003">, such as the</span></div>
<div style="position:absolute;left:5.00px;top:282.00px" class="cls_003"><span class="cls_003">Godot game engine, which is what this book is all about.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:28872px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background039.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">What is Godot?</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Godot is a fully featured modern game engine, providing all of the features described in the previous</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">section and more. It is also completely free and open source, released under the very permissive MIT</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">license. This means there are no fees, no hidden costs, and no royalties to pay on your game's</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">revenue. Everything you make with Godot 100% belongs to you, which is not the case with many</span></div>
<div style="position:absolute;left:5.00px;top:151.50px" class="cls_003"><span class="cls_003">commercial game engines that require an ongoing contractual relationship. For many developers, this</span></div>
<div style="position:absolute;left:5.00px;top:169.50px" class="cls_003"><span class="cls_003">is very appealing.</span></div>
<div style="position:absolute;left:5.00px;top:202.50px" class="cls_003"><span class="cls_003">If you're not familiar with the concept of open source, community-driven development, this may seem</span></div>
<div style="position:absolute;left:5.00px;top:220.50px" class="cls_003"><span class="cls_003">strange to you. However, much like the Linux kernel, Firefox browser, and many other very well-</span></div>
<div style="position:absolute;left:5.00px;top:238.50px" class="cls_003"><span class="cls_003">known pieces of software, Godot is not developed by a company as a commercial product. Instead, a</span></div>
<div style="position:absolute;left:5.00px;top:256.50px" class="cls_003"><span class="cls_003">dedicated community of passionate developers donate their time and expertise to building the engine,</span></div>
<div style="position:absolute;left:5.00px;top:274.50px" class="cls_003"><span class="cls_003">testing and fixing bugs, producing documentation, and more.</span></div>
<div style="position:absolute;left:5.00px;top:307.50px" class="cls_003"><span class="cls_003">As a game developer, the benefits of using Godot are vast. Because it is unencumbered by</span></div>
<div style="position:absolute;left:5.00px;top:325.50px" class="cls_003"><span class="cls_003">commercial licensing, you have complete control over exactly how and where your game is</span></div>
<div style="position:absolute;left:5.00px;top:343.50px" class="cls_003"><span class="cls_003">distributed. Many commercial game engines restrict the types of projects you can make, or require a</span></div>
<div style="position:absolute;left:5.00px;top:361.50px" class="cls_003"><span class="cls_003">much more expensive license to build games in certain categories, such as gambling.</span></div>
<div style="position:absolute;left:5.00px;top:394.50px" class="cls_003"><span class="cls_003">Godot's open source nature also means there is a level of transparency that doesn't exist with</span></div>
<div style="position:absolute;left:5.00px;top:412.50px" class="cls_003"><span class="cls_003">commercial game engines. For example, if you find that a particular engine feature doesn't quite meet</span></div>
<div style="position:absolute;left:5.00px;top:430.50px" class="cls_003"><span class="cls_003">your needs, you are free to modify the engine itself and add the new features you need, no permission</span></div>
<div style="position:absolute;left:5.00px;top:448.50px" class="cls_003"><span class="cls_003">required. This can also be very helpful when debugging a large project, because you have full access</span></div>
<div style="position:absolute;left:5.00px;top:466.50px" class="cls_003"><span class="cls_003">to the engine's internal workings.</span></div>
<div style="position:absolute;left:5.00px;top:499.50px" class="cls_003"><span class="cls_003">It also means that you can directly contribute to Godot's future. See </span><span class="cls_009">Chapter 7</span><span class="cls_003">, </span><span class="cls_012">Additional Topics</span><span class="cls_003">, for</span></div>
<div style="position:absolute;left:5.00px;top:517.50px" class="cls_003"><span class="cls_003">more information about how you can get involved with Godot development.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:29674px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background040.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Downloading Godot</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">You can download the latest version of Godot by visiting </span><A HREF="https://godotengine.org/">https://godotengine.org/</A> </span><span class="cls_003"> and clicking</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">Download. This book is written for version 3.0. If the version you download has another number at</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">the end (like 3.0.3), that's fine—this just means that it includes updates to version 3.0 that fix bugs or</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">other issues.</span></div>
<div style="position:absolute;left:52.98px;top:166.50px" class="cls_008"><span class="cls_008">A version 3.1 release is currently in development and may have been released by the time you read this book. This</span></div>
<div style="position:absolute;left:52.98px;top:180.00px" class="cls_008"><span class="cls_008">version may or may not include changes that are incompatible with the code in this book. Check the GitHub</span></div>
<div style="position:absolute;left:52.98px;top:193.50px" class="cls_008"><span class="cls_008">repository for this book for information and errata: </span><A HREF="https://github.com/PacktPublishing/Godot-Game-Engine-Projects">https://github.com/PacktPublishing/Godot-Game-Engine-Projects</A> </span></div>
<div style="position:absolute;left:5.00px;top:222.00px" class="cls_003"><span class="cls_003">On the download page, there are a few options that bear explaining. First, 32-bit versus 64-bit: this</span></div>
<div style="position:absolute;left:5.00px;top:240.00px" class="cls_003"><span class="cls_003">option depends on your operating system and your computer's processor. If you're not sure, you should</span></div>
<div style="position:absolute;left:5.00px;top:258.00px" class="cls_003"><span class="cls_003">choose the 64-bit version. You will also see a </span><span class="cls_012">Mono Version</span><span class="cls_003">. This is a version specially built to be</span></div>
<div style="position:absolute;left:5.00px;top:276.00px" class="cls_003"><span class="cls_003">used with the C# programming language. Don't download this one unless you plan to use C# with</span></div>
<div style="position:absolute;left:5.00px;top:294.00px" class="cls_003"><span class="cls_003">Godot. At the time of writing, C# support is still experimental, and is not recommended for beginners.</span></div>
<div style="position:absolute;left:5.00px;top:327.00px" class="cls_003"><span class="cls_003">Double-click on the file you downloaded to unzip it, and you'll have the Godot application.</span></div>
<div style="position:absolute;left:5.00px;top:345.00px" class="cls_003"><span class="cls_003">Optionally, you can drag it to your </span><span class="cls_010">Programs</span><span class="cls_003"> or </span><span class="cls_010">Applications</span><span class="cls_003"> folder, if you have one. Double-click the</span></div>
<div style="position:absolute;left:5.00px;top:363.00px" class="cls_003"><span class="cls_003">application to launch it and you'll see Godot's Project Manager window.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:30476px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background041.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Alternate installation methods</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">There are a few other ways to get Godot on your computer besides downloading it from the Godot</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">website. Note that there is no difference in functionality when installed this way. The following are</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">merely alternatives for downloading the application:</span></div>
<div style="position:absolute;left:34.99px;top:148.50px" class="cls_002"><span class="cls_002">Steam</span><span class="cls_003">: If you have an account on Steam, you can install Godot via the Steam desktop</span></div>
<div style="position:absolute;left:34.99px;top:165.75px" class="cls_003"><span class="cls_003">application. Search for Godot in the Steam store and follow the instructions to install it. You can</span></div>
<div style="position:absolute;left:34.99px;top:183.00px" class="cls_003"><span class="cls_003">launch Godot from the Steam application and it will even track your </span><span class="cls_012">playtime</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:34.99px;top:216.00px" class="cls_002"><span class="cls_002">Package Managers</span><span class="cls_003">: If you're using one of the following operating system package managers,</span></div>
<div style="position:absolute;left:34.99px;top:233.25px" class="cls_003"><span class="cls_003">you can install Godot via its normal install process. See the documentation for your package</span></div>
<div style="position:absolute;left:34.99px;top:250.50px" class="cls_003"><span class="cls_003">manager for details. Godot is available in these package managers:</span></div>
<div style="position:absolute;left:57.48px;top:267.75px" class="cls_003"><span class="cls_003">Homebrew (macOS)</span></div>
<div style="position:absolute;left:57.48px;top:285.00px" class="cls_003"><span class="cls_003">Scoop (Windows)</span></div>
<div style="position:absolute;left:57.48px;top:302.25px" class="cls_003"><span class="cls_003">Snap (Linux)</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:31278px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background042.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Overview of the Godot UI</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Like most game engines, Godot has a unified development environment. This means that you use the</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">same interface to work on all of the aspects of your game—code, visuals, audio, and so on. This</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">section is an introduction to the interface and its parts. Take note of the terminology used here; it will</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">be used throughout this book when referring to actions you'll take in the editor window.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:32080px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background043.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Project Manager</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">The Project Manager is the first window you'll see when you open Godot:</span></div>
<div style="position:absolute;left:5.00px;top:397.50px" class="cls_003"><span class="cls_003">In this window, you can see a list of your existing Godot projects. You can choose an existing project</span></div>
<div style="position:absolute;left:5.00px;top:415.50px" class="cls_003"><span class="cls_003">and click Run to play the game or click Edit to work on it in the Godot Editor (refer to the following</span></div>
<div style="position:absolute;left:5.00px;top:433.50px" class="cls_003"><span class="cls_003">screenshot). You can also create a new project by clicking New Project:</span></div>
<div style="position:absolute;left:5.00px;top:609.00px" class="cls_003"><span class="cls_003">Here, you can give the project a name and create a folder to store it in. Always try to choose a name</span></div>
<div style="position:absolute;left:5.00px;top:627.00px" class="cls_003"><span class="cls_003">that describes the project. Also keep in mind that different operating systems handle capitalization</span></div>
<div style="position:absolute;left:5.00px;top:645.00px" class="cls_003"><span class="cls_003">and spaces in filenames differently. It's a good idea to stick to lowercase and use underscores, </span><span class="cls_010">_</span><span class="cls_003">,</span></div>
<div style="position:absolute;left:5.00px;top:663.00px" class="cls_003"><span class="cls_003">instead of spaces for maximum compatibility.</span></div>
<div style="position:absolute;left:5.00px;top:696.00px" class="cls_003"><span class="cls_003">Note the warning message—in Godot, each project is stored as a separate folder on the computer. All</span></div>
<div style="position:absolute;left:5.00px;top:714.00px" class="cls_003"><span class="cls_003">the files that the project uses are in this folder. Nothing outside of this project folder will be</span></div>
<div style="position:absolute;left:5.00px;top:732.00px" class="cls_003"><span class="cls_003">accessible in the game, so you need to put any images, sounds, models, or other data into the project</span></div>
<div style="position:absolute;left:5.00px;top:750.00px" class="cls_003"><span class="cls_003">folder. This makes it convenient to share Godot projects; you only need to zip the project folder and</span></div>
<div style="position:absolute;left:5.00px;top:768.00px" class="cls_003"><span class="cls_003">you can be confident that another Godot user will be able to open it and not be missing any necessary</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:32882px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background044.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:3.31px" class="cls_003"><span class="cls_003">data.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:33684px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background045.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Choosing filenames</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">When you're naming your new project, there are a few simple rules you should try and follow that</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">may save you some trouble in the future. Give your project a name that describes what it is—</span><span class="cls_012">Wizard</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_012"><span class="cls_012">Battle Arena</span><span class="cls_003"> is a much better project name than </span><span class="cls_012">Game #2</span><span class="cls_003">. In the future, you'll never be able to</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">remember which game #2 was, so be as descriptive as possible.</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">You should also think about how you name your project folder and the files in it. Some operating</span></div>
<div style="position:absolute;left:5.00px;top:184.50px" class="cls_003"><span class="cls_003">systems are </span><span class="cls_012">case-sensitive</span><span class="cls_003"> and distinguish between </span><span class="cls_010">My_Game</span><span class="cls_003"> and </span><span class="cls_010">my_game</span><span class="cls_003">, while others do not. This can</span></div>
<div style="position:absolute;left:5.00px;top:202.50px" class="cls_003"><span class="cls_003">lead to problems if you move your project from one computer to another. For this reason, many</span></div>
<div style="position:absolute;left:5.00px;top:220.50px" class="cls_003"><span class="cls_003">programmers develop a standardized naming scheme for their projects, for example: </span><span class="cls_012">No spaces in</span></div>
<div style="position:absolute;left:5.00px;top:238.50px" class="cls_012"><span class="cls_012">filenames, use "_" between words</span><span class="cls_003">. Regardless of what naming scheme you adopt, the most important</span></div>
<div style="position:absolute;left:5.00px;top:256.50px" class="cls_003"><span class="cls_003">thing is to be consistent.</span></div>
<div style="position:absolute;left:5.00px;top:289.50px" class="cls_003"><span class="cls_003">Once you've created the project folder, the Create & Edit button will open the new project in</span></div>
<div style="position:absolute;left:5.00px;top:307.50px" class="cls_003"><span class="cls_003">the Editor window.</span></div>
<div style="position:absolute;left:5.00px;top:340.50px" class="cls_003"><span class="cls_003">Try it now: create a project called </span><span class="cls_010">test_project</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:52.98px;top:373.50px" class="cls_008"><span class="cls_008">If you're using a version of the Windows operating system, you'll also see a console window open when you run</span></div>
<div style="position:absolute;left:52.98px;top:387.00px" class="cls_008"><span class="cls_008">Godot. In this window, you can see warnings and errors produced by the engine and/or your project. This window</span></div>
<div style="position:absolute;left:52.98px;top:400.50px" class="cls_008"><span class="cls_008">doesn't appear under macOS or Linux, but you can see the console output if you launch the application from the</span></div>
<div style="position:absolute;left:52.98px;top:414.00px" class="cls_008"><span class="cls_008">command line using a Terminal program.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:34486px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background046.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Editor window</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">The following is a screenshot of the main Godot editor window. This is where you will spend most of</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">your time when building projects in Godot. The editor interface is divided into several sections, each</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">offering different functionality. The specific terminology for each section is described as follows:</span></div>
<div style="position:absolute;left:265.89px;top:487.50px" class="cls_015"><span class="cls_015">Godot Editor Window</span></div>
<div style="position:absolute;left:5.00px;top:513.00px" class="cls_003"><span class="cls_003">The main portion of the editor window is the Viewport. This is where you'll see parts of your game as</span></div>
<div style="position:absolute;left:5.00px;top:531.00px" class="cls_003"><span class="cls_003">you're working on them.</span></div>
<div style="position:absolute;left:5.00px;top:564.00px" class="cls_003"><span class="cls_003">In the upper-left corner is the Main menus, where you can save and load files, edit project settings,</span></div>
<div style="position:absolute;left:5.00px;top:582.00px" class="cls_003"><span class="cls_003">and get help.</span></div>
<div style="position:absolute;left:5.00px;top:615.00px" class="cls_003"><span class="cls_003">In the center at the top is a list of the Workspaces you can switch between when working on different</span></div>
<div style="position:absolute;left:5.00px;top:633.00px" class="cls_003"><span class="cls_003">parts of your game. You can switch between 2D and 3D mode, as well Script mode, where you can</span></div>
<div style="position:absolute;left:5.00px;top:651.00px" class="cls_003"><span class="cls_003">edit your game's code. The AssetLib is a place where you can download add-ons and example</span></div>
<div style="position:absolute;left:5.00px;top:669.00px" class="cls_003"><span class="cls_003">projects. See </span><span class="cls_009">Chapter 7</span><span class="cls_003">, </span><span class="cls_012">Additional Topics</span><span class="cls_003">, for more information on using the AssetLib. Refer to the</span></div>
<div style="position:absolute;left:5.00px;top:687.00px" class="cls_003"><span class="cls_003">following screenshot:</span></div>
<div style="position:absolute;left:5.00px;top:754.50px" class="cls_003"><span class="cls_003">The following screenshot shows the Workspaces buttons on the toolbar. The icons in the toolbar will</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:35288px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background047.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:3.17px" class="cls_003"><span class="cls_003">change based on what kind of object you are editing. So will the items in the Bottom panel, which</span></div>
<div style="position:absolute;left:5.00px;top:21.17px" class="cls_003"><span class="cls_003">will open various smaller windows for accessing specific information such as debugging, audio</span></div>
<div style="position:absolute;left:5.00px;top:39.00px" class="cls_003"><span class="cls_003">settings, and more:</span></div>
<div style="position:absolute;left:5.00px;top:108.00px" class="cls_003"><span class="cls_003">The buttons in the upper-right Playtest area are for launching the game and interacting with it when it's</span></div>
<div style="position:absolute;left:5.00px;top:126.00px" class="cls_003"><span class="cls_003">running:</span></div>
<div style="position:absolute;left:5.00px;top:194.25px" class="cls_003"><span class="cls_003">Finally, on the left and right sides are the Docks you can use to view and select game items and set</span></div>
<div style="position:absolute;left:5.00px;top:212.25px" class="cls_003"><span class="cls_003">their properties. The left-hand dock contains the FileSystem tab:</span></div>
<div style="position:absolute;left:5.00px;top:495.00px" class="cls_003"><span class="cls_003">All of the files inside the project folder are shown here, and you can click on folders to open them</span></div>
<div style="position:absolute;left:5.00px;top:513.00px" class="cls_003"><span class="cls_003">and see what they contain. All resources in your project will be located relative to </span><span class="cls_010">res://</span><span class="cls_003">, which is the</span></div>
<div style="position:absolute;left:5.00px;top:531.00px" class="cls_003"><span class="cls_003">project's root folder. For example, a file path might look like this: </span><span class="cls_010">res://player/Player.tscn</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:564.00px" class="cls_003"><span class="cls_003">In the right-hand dock, you can see several tabs. The Scene tab shows the current scene you are</span></div>
<div style="position:absolute;left:5.00px;top:582.00px" class="cls_003"><span class="cls_003">working on in the Viewport. In the Inspector tab below it, you can see and adjust the properties of any</span></div>
<div style="position:absolute;left:5.00px;top:600.00px" class="cls_003"><span class="cls_003">object you select. Refer to the following screenshot:</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:36090px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background048.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:395.25px" class="cls_003"><span class="cls_003">Selecting the Import tab and clicking on a file in the FileSystem tab lets you adjust how Godot</span></div>
<div style="position:absolute;left:5.00px;top:413.25px" class="cls_003"><span class="cls_003">imports resources like textures, meshes, and sounds, as shown in the following screenshot:</span></div>
<div style="position:absolute;left:5.00px;top:694.50px" class="cls_003"><span class="cls_003">As you work through the game projects in this book, you'll learn about the functionality of these items</span></div>
<div style="position:absolute;left:5.00px;top:712.50px" class="cls_003"><span class="cls_003">and become familiar with navigating the editor interface. However, there are a few other concepts</span></div>
<div style="position:absolute;left:5.00px;top:730.50px" class="cls_003"><span class="cls_003">you need to know about before getting started.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:36892px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background049.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">About nodes and scenes</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_002"><span class="cls_002">Nodes</span><span class="cls_003"> are the basic building blocks for creating games in Godot. A node is an object that can</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">represent a variety of specialized game functions. A given type of node might display graphics, play</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">an animation, or represent a 3D model of an object. The node also contains a collection of properties,</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">allowing you to customize its behavior. Which nodes you add to your project depends on what</span></div>
<div style="position:absolute;left:5.00px;top:151.50px" class="cls_003"><span class="cls_003">functionality you need. It's a modular system designed to give you flexibility in building your game</span></div>
<div style="position:absolute;left:5.00px;top:169.50px" class="cls_003"><span class="cls_003">objects.</span></div>
<div style="position:absolute;left:5.00px;top:202.50px" class="cls_003"><span class="cls_003">In your project, the nodes you add are organized into a </span><span class="cls_012">tree</span><span class="cls_003"> structure. In a tree, nodes are added</span></div>
<div style="position:absolute;left:5.00px;top:220.50px" class="cls_003"><span class="cls_003">as </span><span class="cls_012">children</span><span class="cls_003"> of other nodes. A particular node can have any number of children, but only</span></div>
<div style="position:absolute;left:5.00px;top:238.50px" class="cls_003"><span class="cls_003">one </span><span class="cls_012">parent</span><span class="cls_003"> node. When a group of nodes are collected into a tree, it is called a </span><span class="cls_002">scene</span><span class="cls_003">, and the tree is</span></div>
<div style="position:absolute;left:5.00px;top:256.50px" class="cls_003"><span class="cls_003">referred to as the </span><span class="cls_002">scene tree</span><span class="cls_003">:</span></div>
<div style="position:absolute;left:5.00px;top:422.25px" class="cls_003"><span class="cls_003">Scenes in Godot are typically used to create and organize the various game objects in your project.</span></div>
<div style="position:absolute;left:5.00px;top:440.25px" class="cls_003"><span class="cls_003">You might have a player scene that contains all the nodes and scripts that make the player's character</span></div>
<div style="position:absolute;left:5.00px;top:458.25px" class="cls_003"><span class="cls_003">work. Then, you might create another scene that defines the game's map: the obstacles and items that</span></div>
<div style="position:absolute;left:5.00px;top:476.25px" class="cls_003"><span class="cls_003">the player must navigate through. You can then combine these various scenes into the final game</span></div>
<div style="position:absolute;left:5.00px;top:494.25px" class="cls_003"><span class="cls_003">using </span><span class="cls_012">instancing</span><span class="cls_003">, which you'll learn about later.</span></div>
<div style="position:absolute;left:5.00px;top:527.25px" class="cls_003"><span class="cls_003">While nodes come with a variety of properties and functions, any node's behavior and capabilities</span></div>
<div style="position:absolute;left:5.00px;top:545.25px" class="cls_003"><span class="cls_003">can also be extended by attaching a </span><span class="cls_012">script</span><span class="cls_003"> to the node. This allows you to write code that makes the</span></div>
<div style="position:absolute;left:5.00px;top:563.25px" class="cls_003"><span class="cls_003">node do more than it can in its default state. For example, you can add a Sprite node to your scene to</span></div>
<div style="position:absolute;left:5.00px;top:581.25px" class="cls_003"><span class="cls_003">display an image, but if you want that image to move or disappear when clicked, you'll need to add a</span></div>
<div style="position:absolute;left:5.00px;top:599.25px" class="cls_003"><span class="cls_003">script to create that behavior.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:37694px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background050.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Scripting in Godot</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">At the time of writing, Godot provides three official languages for scripting nodes: GDScript,</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">VisualScript, and C#. GDScript is the dedicated built-in language, providing the tightest integration</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">with the engine, and is the most straightforward to use. VisualScript is still very new and in the</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_012"><span class="cls_012">testing</span><span class="cls_003"> stage, and should be avoided until you have a good understanding of Godot's workings. For</span></div>
<div style="position:absolute;left:5.00px;top:151.50px" class="cls_003"><span class="cls_003">most projects, C# is best reserved for those portions of the game where there is a specific</span></div>
<div style="position:absolute;left:5.00px;top:169.50px" class="cls_003"><span class="cls_003">performance need; most Godot projects will not need this level of additional performance. For those</span></div>
<div style="position:absolute;left:5.00px;top:187.50px" class="cls_003"><span class="cls_003">that do, Godot gives the flexibility to use a combination of GDScript and C# where you need them.</span></div>
<div style="position:absolute;left:5.00px;top:220.50px" class="cls_003"><span class="cls_003">In addition to the three supported scripting languages, Godot itself is written in C++ and you can get</span></div>
<div style="position:absolute;left:5.00px;top:238.50px" class="cls_003"><span class="cls_003">even more performance and control by extending the engine's functionality directly. See </span><span class="cls_009">Chapter 7</span><span class="cls_003">,</span></div>
<div style="position:absolute;left:5.00px;top:256.50px" class="cls_012"><span class="cls_012">Additional Topics</span><span class="cls_003">, for information on using other languages and extending the engine.</span></div>
<div style="position:absolute;left:5.00px;top:289.50px" class="cls_003"><span class="cls_003">All of the games in this book use GDScript. For the majority of projects, GDScript is the best choice</span></div>
<div style="position:absolute;left:5.00px;top:307.50px" class="cls_003"><span class="cls_003">of language. It is very tightly integrated with Godot's </span><span class="cls_002">Application Programming Interface</span><span class="cls_003"> (</span><span class="cls_002">API</span><span class="cls_003">),</span></div>
<div style="position:absolute;left:5.00px;top:325.50px" class="cls_003"><span class="cls_003">and is designed for rapid development.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:38496px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background051.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">About GDScript</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">GDScript's syntax is very closely modeled on the Python language. If you are familiar with Python</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">already, you will find GDScript very familiar. If you are comfortable with another dynamic language,</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">such as JavaScript, you should find it relatively easy to learn. Python is very often recommended as a</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">good beginner language, and GDScript shares that user-friendliness.</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">This book assumes you have at least </span><span class="cls_012">some</span><span class="cls_003"> programming experience already. If you've never coded</span></div>
<div style="position:absolute;left:5.00px;top:184.50px" class="cls_003"><span class="cls_003">before, you may find it a little more difficult. Learning a game engine is a large task on its own;</span></div>
<div style="position:absolute;left:5.00px;top:202.50px" class="cls_003"><span class="cls_003">learning to code at the same time means you've taken on a major challenge. If you find yourself</span></div>
<div style="position:absolute;left:5.00px;top:220.50px" class="cls_003"><span class="cls_003">struggling with the code in this book, you may find that working through an introductory Python lesson</span></div>
<div style="position:absolute;left:5.00px;top:238.50px" class="cls_003"><span class="cls_003">will help you grasp the basics.</span></div>
<div style="position:absolute;left:5.00px;top:271.50px" class="cls_003"><span class="cls_003">Like Python, GDScript is a </span><span class="cls_012">dynamically typed</span><span class="cls_003"> language, meaning you do not need to declare a</span></div>
<div style="position:absolute;left:5.00px;top:289.50px" class="cls_003"><span class="cls_003">variable's type when creating it, and it uses </span><span class="cls_012">whitespace</span><span class="cls_003"> (indentation) to denote code blocks. Overall,</span></div>
<div style="position:absolute;left:5.00px;top:307.50px" class="cls_003"><span class="cls_003">the result of using GDScript for your game's logic is that you write less code, which means faster</span></div>
<div style="position:absolute;left:5.00px;top:325.50px" class="cls_003"><span class="cls_003">development and fewer mistakes to fix.</span></div>
<div style="position:absolute;left:5.00px;top:358.50px" class="cls_003"><span class="cls_003">To give you an idea of what GDScript looks like, here is a small script that causes a sprite to move</span></div>
<div style="position:absolute;left:5.00px;top:376.50px" class="cls_003"><span class="cls_003">from left to right across the screen at a given speed:</span></div>
<div style="position:absolute;left:19.99px;top:411.00px" class="cls_010"><span class="cls_010">extends Sprite</span></div>
<div style="position:absolute;left:19.99px;top:433.50px" class="cls_010"><span class="cls_010">var speed = 200</span></div>
<div style="position:absolute;left:19.99px;top:456.00px" class="cls_010"><span class="cls_010">func _ready():</span></div>
<div style="position:absolute;left:40.99px;top:467.25px" class="cls_010"><span class="cls_010">position = Vector2(100, 100)</span></div>
<div style="position:absolute;left:19.99px;top:489.75px" class="cls_010"><span class="cls_010">func _process(delta):</span></div>
<div style="position:absolute;left:40.99px;top:501.00px" class="cls_010"><span class="cls_010">position.x += speed * delta</span></div>
<div style="position:absolute;left:40.99px;top:512.25px" class="cls_010"><span class="cls_010">if position.x > 500:</span></div>
<div style="position:absolute;left:61.98px;top:523.50px" class="cls_010"><span class="cls_010">position.x = 0</span></div>
<div style="position:absolute;left:5.00px;top:548.25px" class="cls_003"><span class="cls_003">Don't worry if this doesn't make sense to you yet. In the following chapters, you'll be writing lots of</span></div>
<div style="position:absolute;left:5.00px;top:566.25px" class="cls_003"><span class="cls_003">code, which will be accompanied by explanations of how it all works.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:39298px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background052.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Summary</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">In this chapter, you were introduced to the concept of a game engine in general and to Godot in</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">particular. Most importantly, you downloaded Godot and launched it!</span></div>
<div style="position:absolute;left:5.00px;top:130.50px" class="cls_003"><span class="cls_003">You learned some important vocabulary that will be used throughout this book when referring to</span></div>
<div style="position:absolute;left:5.00px;top:148.50px" class="cls_003"><span class="cls_003">various parts of the Godot editor window. You also learned about the concepts of nodes and scenes,</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">which are the fundamental building blocks of Godot.</span></div>
<div style="position:absolute;left:5.00px;top:199.50px" class="cls_003"><span class="cls_003">You also received some advice on how to approach the projects in this book and game development</span></div>
<div style="position:absolute;left:5.00px;top:217.50px" class="cls_003"><span class="cls_003">in general. If you ever find yourself getting frustrated as you are working through this book, go back</span></div>
<div style="position:absolute;left:5.00px;top:235.50px" class="cls_003"><span class="cls_003">and reread the </span><span class="cls_012">General advice</span><span class="cls_003"> section. There's a lot to learn, and it's okay if it doesn't all make sense</span></div>
<div style="position:absolute;left:5.00px;top:253.50px" class="cls_003"><span class="cls_003">the first time. You'll make five different games over the course of this book, and each one will help</span></div>
<div style="position:absolute;left:5.00px;top:271.50px" class="cls_003"><span class="cls_003">you understand things a little bit more.</span></div>
<div style="position:absolute;left:5.00px;top:304.50px" class="cls_003"><span class="cls_003">You're ready to move on to </span><span class="cls_009">Chapter 2</span><span class="cls_003">, </span><span class="cls_012">Coin Dash</span><span class="cls_003">, where you'll start building your first game in Godot.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:40100px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background053.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Coin Dash</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">This first project will guide you through making your first Godot Engine project. You will learn how</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">the Godot editor works, how to structure a project, and how to build a small 2D game.</span></div>
<div style="position:absolute;left:52.98px;top:130.50px" class="cls_008"><span class="cls_008">Why 2D? In a nutshell, 3D games are much more complex than 2D ones, while many of the underlying game</span></div>
<div style="position:absolute;left:52.98px;top:144.00px" class="cls_008"><span class="cls_008">engine features you'll need to know are the same. You should stick to 2D until you have a good understanding of</span></div>
<div style="position:absolute;left:52.98px;top:157.50px" class="cls_008"><span class="cls_008">Godot's game development process. At that point, the jump to 3D will be much easier. You'll get an introduction to</span></div>
<div style="position:absolute;left:52.98px;top:171.00px" class="cls_008"><span class="cls_008">3D in this book's fifth and final project.</span></div>
<div style="position:absolute;left:5.00px;top:199.50px" class="cls_003"><span class="cls_003">Important—don't skip this chapter, even if you aren't a complete newcomer to game development.</span></div>
<div style="position:absolute;left:5.00px;top:217.50px" class="cls_003"><span class="cls_003">While you may already understand many of the underlying concepts, this project will introduce a</span></div>
<div style="position:absolute;left:5.00px;top:235.50px" class="cls_003"><span class="cls_003">number of fundamental Godot features and design paradigms that you'll need to know going forward.</span></div>
<div style="position:absolute;left:5.00px;top:253.50px" class="cls_003"><span class="cls_003">You'll build on these concepts as you develop more complex projects.</span></div>
<div style="position:absolute;left:5.00px;top:286.50px" class="cls_003"><span class="cls_003">The game in this chapter is called </span><span class="cls_002">Coin Dash</span><span class="cls_003">. Your character must move around the screen, collecting</span></div>
<div style="position:absolute;left:5.00px;top:304.50px" class="cls_003"><span class="cls_003">as many coins as possible while racing against the clock. When you're finished, the game will look</span></div>
<div style="position:absolute;left:5.00px;top:322.50px" class="cls_003"><span class="cls_003">like this:</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:40902px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background054.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Project setup</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Launch Godot and create a new project, making sure to use the </span><span class="cls_010">Create Folder</span><span class="cls_003"> button to ensure that this</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">project's files will be kept separate from other projects. You can download a Zip file of the art and</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">sounds (collectively known as </span><span class="cls_012">assets</span><span class="cls_003">) for the game here, </span><span class="cls_009">https://github.com/PacktPublishing/Godot-Game-Engi</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_009"><span class="cls_009">ne-Projects/releases</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">Unzip this file in your new project folder.</span></div>
<div style="position:absolute;left:5.00px;top:199.50px" class="cls_003"><span class="cls_003">In this project, you will make three independent scenes: </span><span class="cls_010">Player</span><span class="cls_003">, </span><span class="cls_010">Coin</span><span class="cls_003">, and </span><span class="cls_010">HUD</span><span class="cls_003">, which will all be</span></div>
<div style="position:absolute;left:5.00px;top:217.50px" class="cls_003"><span class="cls_003">combined into the game's </span><span class="cls_010">Main</span><span class="cls_003"> scene. In a larger project, it might be useful to make separate folders to</span></div>
<div style="position:absolute;left:5.00px;top:235.50px" class="cls_003"><span class="cls_003">hold each scene's assets and scripts, but for this relatively small game, you can save your scenes and</span></div>
<div style="position:absolute;left:5.00px;top:253.50px" class="cls_003"><span class="cls_003">scripts in the root folder, which is referred to as </span><span class="cls_010">res://</span><span class="cls_003"> (</span><span class="cls_002">res</span><span class="cls_003"> is short for </span><span class="cls_002">resource</span><span class="cls_003">). All resources in</span></div>
<div style="position:absolute;left:5.00px;top:271.50px" class="cls_003"><span class="cls_003">your project will be located relative to the </span><span class="cls_010">res://</span><span class="cls_003"> folder. You can see your project folders in the</span></div>
<div style="position:absolute;left:5.00px;top:289.50px" class="cls_003"><span class="cls_003">FileSystem dock in the upper-left corner:</span></div>
<div style="position:absolute;left:5.00px;top:496.50px" class="cls_003"><span class="cls_003">For example, the images for the coin would be located in </span><span class="cls_010">res://assets/coin/</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:529.50px" class="cls_003"><span class="cls_003">This game will use portrait mode, so you need to adjust the size of the game window. Click on</span></div>
<div style="position:absolute;left:5.00px;top:547.50px" class="cls_003"><span class="cls_003">the Project menu and select Project Settings, as shown in the following screenshot:</span></div>
<div style="position:absolute;left:5.00px;top:717.00px" class="cls_003"><span class="cls_003">Look for the Display/Window section and set Width to </span><span class="cls_010">480</span><span class="cls_003"> and Height to </span><span class="cls_010">720</span><span class="cls_003">. Also in this section, set</span></div>
<div style="position:absolute;left:5.00px;top:735.00px" class="cls_003"><span class="cls_003">the Stretch/Mode to </span><span class="cls_010">2D</span><span class="cls_003"> and the Aspect to </span><span class="cls_010">keep</span><span class="cls_003">. This will ensure that if the user resizes the game</span></div>
<div style="position:absolute;left:5.00px;top:753.00px" class="cls_003"><span class="cls_003">window, everything will scale appropriately and not become stretched or deformed. If you like, you</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:41704px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background055.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:3.31px" class="cls_003"><span class="cls_003">can also uncheck the box for Resizable, to prevent the window from being resized entirely.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:42506px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background056.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Vectors and 2D coordinate systems</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Note: This section is a very brief overview of 2D coordinate systems and does not delve very deeply</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">into vector math. It is intended as a high-level overview of how such topics apply to game</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">development in Godot. Vector math is an essential tool in game development, so if you need a broader</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">understanding of the topic, see Khan Academy's Linear Algebra series (</span><span class="cls_009">https://www.khanacademy.org/math/l</span></div>
<div style="position:absolute;left:5.00px;top:151.50px" class="cls_009"><span class="cls_009">inear-algebra</span><span class="cls_003">).</span></div>
<div style="position:absolute;left:5.00px;top:184.50px" class="cls_003"><span class="cls_003">When working in 2D, you'll be using Cartesian coordinates to identify locations in space. A particular</span></div>
<div style="position:absolute;left:5.00px;top:202.50px" class="cls_003"><span class="cls_003">position in 2D space is written as a pair of values, such as </span><span class="cls_010">(4,3)</span><span class="cls_003">, representing the position along the </span><span class="cls_012">x</span></div>
<div style="position:absolute;left:5.00px;top:220.50px" class="cls_003"><span class="cls_003">and </span><span class="cls_012">y</span><span class="cls_003"> axes, respectively. Any position in the 2D plane can be described in this way.</span></div>
<div style="position:absolute;left:5.00px;top:253.50px" class="cls_003"><span class="cls_003">In 2D space, Godot follows the common computer graphics practice of orienting the </span><span class="cls_012">x</span><span class="cls_003"> axis to the</span></div>
<div style="position:absolute;left:5.00px;top:271.50px" class="cls_003"><span class="cls_003">right, and the </span><span class="cls_012">y </span><span class="cls_003">axis down:</span></div>
<div style="position:absolute;left:52.98px;top:439.50px" class="cls_008"><span class="cls_008">If you're new to computer graphics or game development, it might seem odd that the positive y axis points</span></div>
<div style="position:absolute;left:52.98px;top:453.00px" class="cls_008"><span class="cls_008">downwards instead of upwards, as you likely learned in math class. However, this orientation is very common in</span></div>
<div style="position:absolute;left:52.98px;top:466.50px" class="cls_008"><span class="cls_008">computer graphics applications.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:43308px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background057.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Vectors</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">You can also think of the position </span><span class="cls_010">(4, 3)</span><span class="cls_003"> as an </span><span class="cls_012">offset</span><span class="cls_003"> from the </span><span class="cls_010">(0, 0)</span><span class="cls_003"> point, or </span><span class="cls_012">origin</span><span class="cls_003">. Imagine an arrow</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">pointing from the origin to the point:</span></div>
<div style="position:absolute;left:5.00px;top:288.00px" class="cls_003"><span class="cls_003">This arrow is a </span><span class="cls_012">vector</span><span class="cls_003">. It represents a great deal of useful information including the point's</span></div>
<div style="position:absolute;left:5.00px;top:306.00px" class="cls_003"><span class="cls_003">location, </span><span class="cls_012">(4, 3)</span><span class="cls_003">, its length, </span><span class="cls_012">m,</span><span class="cls_003"> and its angle from the </span><span class="cls_012">x</span><span class="cls_003">-axis, </span><span class="cls_012">θ</span><span class="cls_003">. Altogether, this is a </span><span class="cls_012">position vector</span><span class="cls_003">, in</span></div>
<div style="position:absolute;left:5.00px;top:324.00px" class="cls_003"><span class="cls_003">other words, it describes a position in space. Vectors can also represent movement, acceleration, or</span></div>
<div style="position:absolute;left:5.00px;top:342.00px" class="cls_003"><span class="cls_003">any other quantity that has an </span><span class="cls_012">x</span><span class="cls_003"> and a </span><span class="cls_012">y</span><span class="cls_003"> component.</span></div>
<div style="position:absolute;left:5.00px;top:375.00px" class="cls_003"><span class="cls_003">In Godot, vectors (</span><span class="cls_010">Vector2</span><span class="cls_003"> for 2D or </span><span class="cls_010">Vector3</span><span class="cls_003"> for 3D) are widely used, and you'll use them in the course</span></div>
<div style="position:absolute;left:5.00px;top:393.00px" class="cls_003"><span class="cls_003">of building the projects in this book.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:44110px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background058.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Pixel rendering</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Vector coordinates in Godot are </span><span class="cls_012">floating point </span><span class="cls_003">numbers, not </span><span class="cls_012">integers</span><span class="cls_003">. This means a </span><span class="cls_010">Vector2</span><span class="cls_003"> could have</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">a fractional value, such as </span><span class="cls_010">(1.5, 1.5)</span><span class="cls_003">. Since objects can't be drawn at half pixels, this can cause visual</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">problems for pixel art games where you want to ensure that all the pixels of the textures are drawn.</span></div>
<div style="position:absolute;left:5.00px;top:148.50px" class="cls_003"><span class="cls_003">To address this, open Project </span><span class="cls_012">|</span><span class="cls_003"> Project Settings and find the Rendering</span><span class="cls_012">/</span><span class="cls_003">Quality section in the sidebar</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">and enable Use Pixel Snap, as shown in the following screenshot:</span></div>
<div style="position:absolute;left:5.00px;top:552.00px" class="cls_003"><span class="cls_003">If you're using 2D pixel art in your game, it's a good idea to always enable this setting when you start</span></div>
<div style="position:absolute;left:5.00px;top:570.00px" class="cls_003"><span class="cls_003">your project. This setting has no effect in 3D games.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:44912px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background059.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Part 1 - Player scene</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">The first scene you'll make defines the Player object. One of the benefits of creating a separate player</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">scene is that you can test it independently, even before you've created the other parts of the game. This</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">separation of game objects will become more and more helpful as your projects grow in size and</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">complexity. Keeping individual game objects separate from each other makes them easier to</span></div>
<div style="position:absolute;left:5.00px;top:151.50px" class="cls_003"><span class="cls_003">troubleshoot, modify, and even replace entirely without affecting other parts of the game. It also</span></div>
<div style="position:absolute;left:5.00px;top:169.50px" class="cls_003"><span class="cls_003">makes your player reusable—you can drop the player scene into an entirely different game and it will</span></div>
<div style="position:absolute;left:5.00px;top:187.50px" class="cls_003"><span class="cls_003">work just the same.</span></div>
<div style="position:absolute;left:5.00px;top:220.50px" class="cls_003"><span class="cls_003">The player scene will display your character and its animations, respond to user input by moving the</span></div>
<div style="position:absolute;left:5.00px;top:238.50px" class="cls_003"><span class="cls_003">character accordingly, and detect collisions with other objects in the game.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:45714px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background060.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Creating the scene</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Start by clicking the Add/Create a New Node button and selecting an </span><span class="cls_010">Area2D</span><span class="cls_003">. Then, click on its name</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">and change it to </span><span class="cls_010">Player</span><span class="cls_003">. Click Scene | Save Scene to save the scene. This is the scene's </span><span class="cls_012">root</span><span class="cls_003"> or top-</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">level node. You'll add more functionality to the </span><span class="cls_010">Player</span><span class="cls_003"> by adding children to this node:</span></div>
<div style="position:absolute;left:5.00px;top:282.75px" class="cls_003"><span class="cls_003">Before adding any children, it's a good idea to make sure you don't accidentally move or resize them</span></div>
<div style="position:absolute;left:5.00px;top:300.75px" class="cls_003"><span class="cls_003">by clicking on them. Select the </span><span class="cls_010">Player</span><span class="cls_003"> node and click the icon next to the lock:</span></div>
<div style="position:absolute;left:5.00px;top:390.00px" class="cls_003"><span class="cls_003">The tooltip will say Make sure the object's children are not selectable, as shown in the preceding</span></div>
<div style="position:absolute;left:5.00px;top:408.00px" class="cls_003"><span class="cls_003">screenshot.</span></div>
<div style="position:absolute;left:52.98px;top:441.00px" class="cls_008"><span class="cls_008">It's a good idea to always do this when creating a new scene. If a body's collision shape or sprite becomes offset</span></div>
<div style="position:absolute;left:52.98px;top:454.50px" class="cls_008"><span class="cls_008">or scaled, it can cause unexpected errors and be difficult to fix. With this option, the node and all of its children</span></div>
<div style="position:absolute;left:52.98px;top:468.00px" class="cls_008"><span class="cls_008">will always move together.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:46516px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background061.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Sprite animation</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">With </span><span class="cls_010">Area2D</span><span class="cls_003">, you can detect when other objects overlap or run into the player, but </span><span class="cls_010">Area2D</span><span class="cls_003"> doesn't have an</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">appearance on its own, so click on the </span><span class="cls_010">Player</span><span class="cls_003"> node and add an </span><span class="cls_010">AnimatedSprite</span><span class="cls_003"> node as a child. The</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_010"><span class="cls_010">AnimatedSprite</span><span class="cls_003"> will handle the appearance and animations for your player. Note that there is a warning</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">symbol next to the node. An </span><span class="cls_010">AnimatedSprite</span><span class="cls_003"> requires a </span><span class="cls_010">SpriteFrames</span><span class="cls_003"> resource, which contains the</span></div>
<div style="position:absolute;left:5.00px;top:151.50px" class="cls_003"><span class="cls_003">animation(s) it can display. To create one, find the Frame</span><span class="cls_012">s</span><span class="cls_003"> property in the Inspector and click &lt;null> |</span></div>
<div style="position:absolute;left:5.00px;top:169.50px" class="cls_003"><span class="cls_003">New SpriteFrames:</span></div>
<div style="position:absolute;left:5.00px;top:321.00px" class="cls_003"><span class="cls_003">Next, in the same location, click &lt;SpriteFrames> to open the SpriteFrames panel:</span></div>
<div style="position:absolute;left:5.00px;top:546.00px" class="cls_003"><span class="cls_003">On the left is a list of animations. Click the default one and rename it to </span><span class="cls_010">run</span><span class="cls_003">. Then, click the</span></div>
<div style="position:absolute;left:5.00px;top:564.00px" class="cls_002"><span class="cls_002">Add</span><span class="cls_003"> button and create a second animation named </span><span class="cls_010">idle</span><span class="cls_003"> and a third named </span><span class="cls_010">hurt</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:597.00px" class="cls_003"><span class="cls_003">In the FileSystem dock on the left, find the </span><span class="cls_010">run</span><span class="cls_003">, </span><span class="cls_010">idle</span><span class="cls_003">, and </span><span class="cls_010">hurt</span><span class="cls_003"> player images and drag them into the</span></div>
<div style="position:absolute;left:5.00px;top:615.00px" class="cls_003"><span class="cls_003">corresponding animations:</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:47318px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background062.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:172.50px" class="cls_003"><span class="cls_003">Each animation has a default speed setting of 5 frames per second. This is a little too slow, so click</span></div>
<div style="position:absolute;left:5.00px;top:190.50px" class="cls_003"><span class="cls_003">on each of the animations and set the Speed (FPS) setting to 8. In the Inspector, check On next to the</span></div>
<div style="position:absolute;left:5.00px;top:208.50px" class="cls_003"><span class="cls_003">Playing property and choose an Animation to see the animations in action:</span></div>
<div style="position:absolute;left:5.00px;top:432.75px" class="cls_003"><span class="cls_003">Later, you'll write code to select between these animations, depending on what the player is doing.</span></div>
<div style="position:absolute;left:5.00px;top:450.75px" class="cls_003"><span class="cls_003">But first, you need to finish setting up the player's nodes.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:48120px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background063.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Collision shape</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">When using </span><span class="cls_010">Area2D</span><span class="cls_003">, or one of the other collision objects in Godot, it needs to have a shape defined, or</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">it can't detect collisions. A collision shape defines the region that the object occupies and is used to</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">detect overlaps and/or collisions. Shapes are defined by </span><span class="cls_010">Shape2D</span><span class="cls_003">, and include rectangles, circles,</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">polygons, and other types of shapes.</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">For convenience, when you need to add a shape to an area or physics body, you can add a</span></div>
<div style="position:absolute;left:5.00px;top:184.50px" class="cls_010"><span class="cls_010">CollisionShape2D</span><span class="cls_003"> as a child. You then select the type of shape you want and you can edit its size in the</span></div>
<div style="position:absolute;left:5.00px;top:202.50px" class="cls_003"><span class="cls_003">editor.</span></div>
<div style="position:absolute;left:5.00px;top:235.50px" class="cls_003"><span class="cls_003">Add a </span><span class="cls_010">CollisionShape2D</span><span class="cls_003"> as a child of </span><span class="cls_010">Player</span><span class="cls_003"> (make sure you don't add it as a child of the </span><span class="cls_010">AnimatedSprite</span><span class="cls_003">).</span></div>
<div style="position:absolute;left:5.00px;top:253.50px" class="cls_003"><span class="cls_003">This will allow you to determine the player's </span><span class="cls_012">hitbox</span><span class="cls_003">, or the bounds of its collision area. In the</span></div>
<div style="position:absolute;left:5.00px;top:271.50px" class="cls_003"><span class="cls_003">Inspector, next to Shape, click &lt;null> and choose New RectangleShape2D. Adjust the shape's size to</span></div>
<div style="position:absolute;left:5.00px;top:289.50px" class="cls_003"><span class="cls_003">cover the sprite:</span></div>
<div style="position:absolute;left:52.98px;top:528.00px" class="cls_008"><span class="cls_008">Be careful not to scale the shape's outline! Only use the size handles (red) to adjust the shape! Collisions will not</span></div>
<div style="position:absolute;left:52.98px;top:541.50px" class="cls_008"><span class="cls_008">work properly with a scaled collision shape.</span></div>
<div style="position:absolute;left:5.00px;top:570.75px" class="cls_003"><span class="cls_003">You may have noticed that the collision shape is not centered on the sprite. That is because the sprites</span></div>
<div style="position:absolute;left:5.00px;top:588.75px" class="cls_003"><span class="cls_003">themselves are not centered vertically. We can fix this by adding a small offset to the </span><span class="cls_010">AnimatedSprite</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:606.75px" class="cls_003"><span class="cls_003">Click on the node and look for the Offset property in the Inspector. Set it to </span><span class="cls_010">(0, -5)</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:639.75px" class="cls_003"><span class="cls_003">When you're finished, your </span><span class="cls_010">Player</span><span class="cls_003"> scene should look like this:</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:48922px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background064.jpg" width=612 height=792></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:49724px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background065.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Scripting the Player</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Now, you're ready to add a script. Scripts allow you to add additional functionality that isn't provided</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">by the built-in nodes. Click the </span><span class="cls_010">Player</span><span class="cls_003"> node and click the </span><span class="cls_002">Add Script</span><span class="cls_003"> button:</span></div>
<div style="position:absolute;left:5.00px;top:261.75px" class="cls_003"><span class="cls_003">In the Script Settings window, you can leave the default settings as they are. If you've remembered to</span></div>
<div style="position:absolute;left:5.00px;top:279.75px" class="cls_003"><span class="cls_003">save the scene (see the preceding screenshot), the script will automatically be named to match the</span></div>
<div style="position:absolute;left:5.00px;top:297.75px" class="cls_003"><span class="cls_003">scene's name. Click Create and you'll be taken to the script window. Your script will contain some</span></div>
<div style="position:absolute;left:5.00px;top:315.75px" class="cls_003"><span class="cls_003">default comments and hints. You can remove the comments (lines starting with </span><span class="cls_010">#</span><span class="cls_003">). Refer to the</span></div>
<div style="position:absolute;left:5.00px;top:333.75px" class="cls_003"><span class="cls_003">following code snippet:</span></div>
<div style="position:absolute;left:19.99px;top:368.25px" class="cls_010"><span class="cls_010">extends Area2D</span></div>
<div style="position:absolute;left:19.99px;top:390.75px" class="cls_010"><span class="cls_010"># class member variables go here, for example:</span></div>
<div style="position:absolute;left:19.99px;top:402.00px" class="cls_010"><span class="cls_010"># var a = 2</span></div>
<div style="position:absolute;left:19.99px;top:413.25px" class="cls_010"><span class="cls_010"># var b = "textvar"</span></div>
<div style="position:absolute;left:19.99px;top:435.75px" class="cls_010"><span class="cls_010">func _ready():</span></div>
<div style="position:absolute;left:25.24px;top:447.00px" class="cls_010"><span class="cls_010"># Called every time the node is added to the scene.</span></div>
<div style="position:absolute;left:25.24px;top:458.25px" class="cls_010"><span class="cls_010"># Initialization here</span></div>
<div style="position:absolute;left:25.24px;top:469.50px" class="cls_010"><span class="cls_010">pass</span></div>
<div style="position:absolute;left:19.99px;top:492.00px" class="cls_010"><span class="cls_010">#func _process(delta):</span></div>
<div style="position:absolute;left:19.99px;top:503.25px" class="cls_010"><span class="cls_010"># # Called every frame. Delta is time since last frame.</span></div>
<div style="position:absolute;left:19.99px;top:514.50px" class="cls_010"><span class="cls_010"># # Update game logic here.</span></div>
<div style="position:absolute;left:19.99px;top:525.75px" class="cls_010"><span class="cls_010"># pass</span></div>
<div style="position:absolute;left:5.00px;top:550.50px" class="cls_003"><span class="cls_003">The first line of every script will describe what type of node it is attached to. Next, you'll define your</span></div>
<div style="position:absolute;left:5.00px;top:568.50px" class="cls_003"><span class="cls_003">class variables:</span></div>
<div style="position:absolute;left:19.99px;top:603.00px" class="cls_010"><span class="cls_010">extends Area2D</span></div>
<div style="position:absolute;left:19.99px;top:625.50px" class="cls_010"><span class="cls_010">export (int) var speed</span></div>
<div style="position:absolute;left:19.99px;top:636.75px" class="cls_010"><span class="cls_010">var velocity = Vector2()</span></div>
<div style="position:absolute;left:19.99px;top:648.00px" class="cls_010"><span class="cls_010">var screensize = Vector2(480, 720)</span></div>
<div style="position:absolute;left:5.00px;top:672.75px" class="cls_003"><span class="cls_003">Using the </span><span class="cls_010">export</span><span class="cls_003"> keyword on the </span><span class="cls_010">speed</span><span class="cls_003"> variable allows you to set its value in the Inspector, as well as</span></div>
<div style="position:absolute;left:5.00px;top:690.75px" class="cls_003"><span class="cls_003">letting the Inspector know what type of data the variable should contain. This can be very handy for</span></div>
<div style="position:absolute;left:5.00px;top:708.75px" class="cls_003"><span class="cls_003">values that you want to be able to adjust, just like you adjust a node's built-in properties. Click on</span></div>
<div style="position:absolute;left:5.00px;top:726.75px" class="cls_003"><span class="cls_003">the </span><span class="cls_010">Player</span><span class="cls_003"> node and set the Speed property to 350, as shown in the following screenshot:</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:50526px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background066.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:101.25px" class="cls_010"><span class="cls_010">velocity</span><span class="cls_003"> will contain the character's current movement speed and direction, and </span><span class="cls_010">screensize</span><span class="cls_003"> will be used</span></div>
<div style="position:absolute;left:5.00px;top:119.25px" class="cls_003"><span class="cls_003">to set the limits of the player's movement. Later, the game's main scene will set this variable, but for</span></div>
<div style="position:absolute;left:5.00px;top:137.25px" class="cls_003"><span class="cls_003">now you will set it manually so you can test.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:51328px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background067.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Moving the Player</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Next, you'll use the </span><span class="cls_010">_process()</span><span class="cls_003"> function to define what the player will do. The </span><span class="cls_010">_process()</span><span class="cls_003"> function is</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">called on every frame, so you'll use it to update elements of your game that you expect to be changing</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">often. You need the player to do three things:</span></div>
<div style="position:absolute;left:34.99px;top:147.75px" class="cls_003"><span class="cls_003">Check for keyboard input</span></div>
<div style="position:absolute;left:34.99px;top:165.00px" class="cls_003"><span class="cls_003">Move in the given direction</span></div>
<div style="position:absolute;left:34.99px;top:182.25px" class="cls_003"><span class="cls_003">Play the appropriate animation</span></div>
<div style="position:absolute;left:5.00px;top:215.25px" class="cls_003"><span class="cls_003">First, you need to check the inputs. For this game, you have four directional inputs to check (the four</span></div>
<div style="position:absolute;left:5.00px;top:233.25px" class="cls_003"><span class="cls_003">arrow keys). Input actions are defined in the project settings under the Input Map tab. In this tab, you</span></div>
<div style="position:absolute;left:5.00px;top:251.25px" class="cls_003"><span class="cls_003">can define custom events and assign different keys, mouse actions, or other inputs to them. By default,</span></div>
<div style="position:absolute;left:5.00px;top:269.25px" class="cls_003"><span class="cls_003">Godot has events assigned to the keyboard arrows, so you can use them for this project.</span></div>
<div style="position:absolute;left:5.00px;top:302.25px" class="cls_003"><span class="cls_003">You can detect whether an input is pressed using </span><span class="cls_010">Input.is_action_pressed()</span><span class="cls_003">, which returns </span><span class="cls_010">true</span><span class="cls_003"> if the key</span></div>
<div style="position:absolute;left:5.00px;top:320.25px" class="cls_003"><span class="cls_003">is held down and </span><span class="cls_010">false</span><span class="cls_003"> if it is not. Combining the states of all four buttons will give you the resultant</span></div>
<div style="position:absolute;left:5.00px;top:338.25px" class="cls_003"><span class="cls_003">direction of movement. For example, if you hold </span><span class="cls_010">right</span><span class="cls_003"> and </span><span class="cls_010">down</span><span class="cls_003"> at the same time, the resulting velocity</span></div>
<div style="position:absolute;left:5.00px;top:356.25px" class="cls_003"><span class="cls_003">vector will be </span><span class="cls_010">(1, 1)</span><span class="cls_003">. In this case, since we’re adding a horizontal and a vertical movement together,</span></div>
<div style="position:absolute;left:5.00px;top:374.25px" class="cls_003"><span class="cls_003">the player would move </span><span class="cls_012">faster</span><span class="cls_003"> than if they just moved horizontally.</span></div>
<div style="position:absolute;left:5.00px;top:407.25px" class="cls_003"><span class="cls_003">You can prevent that by </span><span class="cls_012">normalizing</span><span class="cls_003"> the velocity, which means setting its length to </span><span class="cls_002">1</span><span class="cls_003">, then multiplying</span></div>
<div style="position:absolute;left:5.00px;top:425.25px" class="cls_003"><span class="cls_003">it by the desired speed:</span></div>
<div style="position:absolute;left:19.99px;top:459.75px" class="cls_010"><span class="cls_010">func get_input():</span></div>
<div style="position:absolute;left:40.99px;top:471.00px" class="cls_010"><span class="cls_010">velocity = Vector2()</span></div>
<div style="position:absolute;left:40.99px;top:482.25px" class="cls_010"><span class="cls_010">if Input.is_action_pressed("ui_left"):</span></div>
<div style="position:absolute;left:61.98px;top:493.50px" class="cls_010"><span class="cls_010">velocity.x -= 1</span></div>
<div style="position:absolute;left:40.99px;top:504.75px" class="cls_010"><span class="cls_010">if Input.is_action_pressed("ui_right"):</span></div>
<div style="position:absolute;left:61.98px;top:516.00px" class="cls_010"><span class="cls_010">velocity.x += 1</span></div>
<div style="position:absolute;left:40.99px;top:527.25px" class="cls_010"><span class="cls_010">if Input.is_action_pressed("ui_up"):</span></div>
<div style="position:absolute;left:61.98px;top:538.50px" class="cls_010"><span class="cls_010">velocity.y -= 1</span></div>
<div style="position:absolute;left:40.99px;top:549.75px" class="cls_010"><span class="cls_010">if Input.is_action_pressed("ui_down"):</span></div>
<div style="position:absolute;left:61.98px;top:561.00px" class="cls_010"><span class="cls_010">velocity.y += 1</span></div>
<div style="position:absolute;left:40.99px;top:572.25px" class="cls_010"><span class="cls_010">if velocity.length() > 0:</span></div>
<div style="position:absolute;left:61.98px;top:583.50px" class="cls_010"><span class="cls_010">velocity = velocity.normalized() * speed</span></div>
<div style="position:absolute;left:5.00px;top:608.25px" class="cls_003"><span class="cls_003">By grouping all of this code together in a </span><span class="cls_010">get_input()</span><span class="cls_003"> function, you make it easier to change things later.</span></div>
<div style="position:absolute;left:5.00px;top:626.25px" class="cls_003"><span class="cls_003">For example, you could decide to change to an analog joystick or other type of controller. Call this</span></div>
<div style="position:absolute;left:5.00px;top:644.25px" class="cls_003"><span class="cls_003">function from </span><span class="cls_010">_process()</span><span class="cls_003"> and then change the player's </span><span class="cls_010">position</span><span class="cls_003"> by the resulting </span><span class="cls_010">velocity</span><span class="cls_003">. To prevent the</span></div>
<div style="position:absolute;left:5.00px;top:662.25px" class="cls_003"><span class="cls_003">player from leaving the screen, you can use the </span><span class="cls_010">clamp()</span><span class="cls_003"> function to limit the position to a minimum and</span></div>
<div style="position:absolute;left:5.00px;top:680.25px" class="cls_003"><span class="cls_003">maximum value:</span></div>
<div style="position:absolute;left:19.99px;top:714.75px" class="cls_010"><span class="cls_010">func _process(delta):</span></div>
<div style="position:absolute;left:40.99px;top:726.00px" class="cls_010"><span class="cls_010">get_input()</span></div>
<div style="position:absolute;left:40.99px;top:748.50px" class="cls_010"><span class="cls_010">position += velocity * delta</span></div>
<div style="position:absolute;left:40.99px;top:759.75px" class="cls_010"><span class="cls_010">position.x = clamp(position.x, 0, screensize.x)</span></div>
<div style="position:absolute;left:40.99px;top:771.00px" class="cls_010"><span class="cls_010">position.y = clamp(position.y, 0, screensize.y)</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:52130px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background068.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:3.00px" class="cls_003"><span class="cls_003">Click Play the Edited Scene (</span><span class="cls_012">F6</span><span class="cls_003">) and confirm that you can move the player around the screen in all</span></div>
<div style="position:absolute;left:5.00px;top:21.00px" class="cls_003"><span class="cls_003">directions.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:52932px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background069.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">About delta</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">The </span><span class="cls_010">_process()</span><span class="cls_003"> function includes a parameter called </span><span class="cls_010">delta</span><span class="cls_003"> that is then multiplied by the velocity. What is</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_010"><span class="cls_010">delta</span><span class="cls_003">?</span></div>
<div style="position:absolute;left:5.00px;top:130.50px" class="cls_003"><span class="cls_003">The game engine attempts to run at a consistent 60 frames per second. However, this can change due</span></div>
<div style="position:absolute;left:5.00px;top:148.50px" class="cls_003"><span class="cls_003">to computer slowdowns, either in Godot or from the computer itself. If the frame rate is not</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">consistent, then it will affect the movement of your game objects. For example, consider an object set</span></div>
<div style="position:absolute;left:5.00px;top:184.50px" class="cls_003"><span class="cls_003">to move </span><span class="cls_010">10</span><span class="cls_003"> pixels every frame. If everything is running smoothly, this will translate to moving </span><span class="cls_010">600</span></div>
<div style="position:absolute;left:5.00px;top:202.50px" class="cls_003"><span class="cls_003">pixels in one second. However, if some of those frames take longer, then there may only have been 50</span></div>
<div style="position:absolute;left:5.00px;top:220.50px" class="cls_003"><span class="cls_003">frames in that second, so the object only moved </span><span class="cls_010">500</span><span class="cls_003"> pixels.</span></div>
<div style="position:absolute;left:5.00px;top:253.50px" class="cls_003"><span class="cls_003">Godot, like most game engines and frameworks, solves this by passing you </span><span class="cls_010">delta</span><span class="cls_003">, which is the elapsed</span></div>
<div style="position:absolute;left:5.00px;top:271.50px" class="cls_003"><span class="cls_003">time since the previous frame. Most of the time, this will be around </span><span class="cls_010">0.016</span><span class="cls_003"> s (or around 16</span></div>
<div style="position:absolute;left:5.00px;top:289.50px" class="cls_003"><span class="cls_003">milliseconds). If you then take your desired speed (</span><span class="cls_010">600</span><span class="cls_003"> px/s) and multiply by delta, you will get a</span></div>
<div style="position:absolute;left:5.00px;top:307.50px" class="cls_003"><span class="cls_003">movement of exactly </span><span class="cls_010">10</span><span class="cls_003">. If, however, the </span><span class="cls_010">delta</span><span class="cls_003"> increased to </span><span class="cls_010">0.3</span><span class="cls_003">, then the object will be moved </span><span class="cls_010">18</span><span class="cls_003"> pixels.</span></div>
<div style="position:absolute;left:5.00px;top:325.50px" class="cls_003"><span class="cls_003">Overall, the movement speed remains consistent and independent of the frame rate.</span></div>
<div style="position:absolute;left:5.00px;top:358.50px" class="cls_003"><span class="cls_003">As a side benefit, you can express your movement in units of px/s rather than px/frame, which is</span></div>
<div style="position:absolute;left:5.00px;top:376.50px" class="cls_003"><span class="cls_003">easier to visualize.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:53734px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background070.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Choosing animations</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Now that the player can move, you need to change which animation the </span><span class="cls_010">AnimatedSprite</span><span class="cls_003"> is playing based</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">on whether it is moving or standing still. The art for the </span><span class="cls_010">run</span><span class="cls_003"> animation faces to the right, which means</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">it should be flipped horizontally (using the Flip H property) for movement to the left. Add this to the</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">end of your </span><span class="cls_010">_process()</span><span class="cls_003"> function:</span></div>
<div style="position:absolute;left:40.99px;top:168.00px" class="cls_010"><span class="cls_010">if velocity.length() > 0:</span></div>
<div style="position:absolute;left:61.98px;top:179.25px" class="cls_010"><span class="cls_010">$AnimatedSprite.animation = "run"</span></div>
<div style="position:absolute;left:61.98px;top:190.50px" class="cls_010"><span class="cls_010">$AnimatedSprite.flip_h = velocity.x &lt; 0</span></div>
<div style="position:absolute;left:40.99px;top:201.75px" class="cls_010"><span class="cls_010">else:</span></div>
<div style="position:absolute;left:61.98px;top:213.00px" class="cls_010"><span class="cls_010">$AnimatedSprite.animation = "idle"</span></div>
<div style="position:absolute;left:5.00px;top:237.75px" class="cls_003"><span class="cls_003">Note that this code takes a little shortcut. </span><span class="cls_010">flip_h</span><span class="cls_003"> is a Boolean property, which means it can be </span><span class="cls_010">true</span><span class="cls_003"> or</span></div>
<div style="position:absolute;left:5.00px;top:255.75px" class="cls_010"><span class="cls_010">false</span><span class="cls_003">. A Boolean value is also the result of a comparison like </span><span class="cls_010">&lt;</span><span class="cls_003">. Because of this, we can set the</span></div>
<div style="position:absolute;left:5.00px;top:273.75px" class="cls_003"><span class="cls_003">property equal to the result of the comparison. This one line is equivalent to writing it out like this:</span></div>
<div style="position:absolute;left:19.99px;top:308.25px" class="cls_010"><span class="cls_010">if velocity.x &lt; 0:</span></div>
<div style="position:absolute;left:40.99px;top:319.50px" class="cls_010"><span class="cls_010">$AnimatedSprite.flip_h = true</span></div>
<div style="position:absolute;left:19.99px;top:330.75px" class="cls_010"><span class="cls_010">else:</span></div>
<div style="position:absolute;left:40.99px;top:342.00px" class="cls_010"><span class="cls_010">$AnimatedSprite.flip_h = false</span></div>
<div style="position:absolute;left:5.00px;top:366.75px" class="cls_003"><span class="cls_003">Play the scene again and check that the animations are correct in each case. Make sure Playing is set</span></div>
<div style="position:absolute;left:5.00px;top:384.75px" class="cls_003"><span class="cls_003">to On in the </span><span class="cls_010">AnimatedSprite</span><span class="cls_003"> so that the animations will play.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:54536px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background071.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Starting and Ending the Player's Movement</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">When the game starts, the main scene will need to inform the player that the game has begun. Add the</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_010"><span class="cls_010">start()</span><span class="cls_003"> function as follows, which the main scene will use to set the player's starting animation and</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">position:</span></div>
<div style="position:absolute;left:19.99px;top:150.00px" class="cls_010"><span class="cls_010">func start(pos):</span></div>
<div style="position:absolute;left:40.99px;top:161.25px" class="cls_010"><span class="cls_010">set_process(true)</span></div>
<div style="position:absolute;left:40.99px;top:172.50px" class="cls_010"><span class="cls_010">position = pos</span></div>
<div style="position:absolute;left:40.99px;top:183.75px" class="cls_010"><span class="cls_010">$AnimatedSprite.animation = "idle"</span></div>
<div style="position:absolute;left:5.00px;top:208.50px" class="cls_003"><span class="cls_003">The </span><span class="cls_010">die()</span><span class="cls_003"> function will be called when the player hits an obstacle or runs out of time:</span></div>
<div style="position:absolute;left:19.99px;top:243.00px" class="cls_010"><span class="cls_010">func die():</span></div>
<div style="position:absolute;left:40.99px;top:254.25px" class="cls_010"><span class="cls_010">$AnimatedSprite.animation = "hurt"</span></div>
<div style="position:absolute;left:40.99px;top:265.50px" class="cls_010"><span class="cls_010">set_process(false)</span></div>
<div style="position:absolute;left:5.00px;top:290.25px" class="cls_003"><span class="cls_003">Setting </span><span class="cls_010">set_process(false)</span><span class="cls_003"> causes the </span><span class="cls_010">_process()</span><span class="cls_003"> function to no longer be called for this node. That way,</span></div>
<div style="position:absolute;left:5.00px;top:308.25px" class="cls_003"><span class="cls_003">when the player has died, they can't still be moved by key input.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:55338px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background072.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Preparing for collisions</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">The player should detect when it hits a coin or an obstacle, but you haven't made them do so yet.</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">That's OK, because you can use Godot's </span><span class="cls_012">signal</span><span class="cls_003"> functionality to make it work. Signals are a way for</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">nodes to send out messages that other nodes can detect and react to. Many nodes have built-in signals</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">to alert you when a body collides, for example, or when a button is pressed. You can also define</span></div>
<div style="position:absolute;left:5.00px;top:151.50px" class="cls_003"><span class="cls_003">custom signals for your own purposes.</span></div>
<div style="position:absolute;left:5.00px;top:184.50px" class="cls_003"><span class="cls_003">Signals are used by </span><span class="cls_012">connecting</span><span class="cls_003"> them to the node(s) that you want to listen and respond to. This</span></div>
<div style="position:absolute;left:5.00px;top:202.50px" class="cls_003"><span class="cls_003">connection can be made in the Inspector or in the code. Later in the project, you'll learn how to</span></div>
<div style="position:absolute;left:5.00px;top:220.50px" class="cls_003"><span class="cls_003">connect signals in both ways.</span></div>
<div style="position:absolute;left:5.00px;top:253.50px" class="cls_003"><span class="cls_003">Add the following to the top of the script (after </span><span class="cls_010">extends Area2D</span><span class="cls_003">):</span></div>
<div style="position:absolute;left:19.99px;top:288.00px" class="cls_010"><span class="cls_010">signal pickup</span></div>
<div style="position:absolute;left:19.99px;top:299.25px" class="cls_010"><span class="cls_010">signal hurt</span></div>
<div style="position:absolute;left:5.00px;top:324.00px" class="cls_003"><span class="cls_003">These define custom signals that your player will </span><span class="cls_012">emit</span><span class="cls_003"> (send out) when they touch a coin or an</span></div>
<div style="position:absolute;left:5.00px;top:342.00px" class="cls_003"><span class="cls_003">obstacle. The touches will be detected by the </span><span class="cls_010">Area2D</span><span class="cls_003"> itself. Select the </span><span class="cls_010">Player</span><span class="cls_003"> node and click the Node</span></div>
<div style="position:absolute;left:5.00px;top:360.00px" class="cls_003"><span class="cls_003">tab next to the Inspector to see the list of signals the player can emit:</span></div>
<div style="position:absolute;left:5.00px;top:600.00px" class="cls_003"><span class="cls_003">Note your custom signals are there as well. Since the other objects will also be </span><span class="cls_010">Area2D</span><span class="cls_003"> nodes, you want</span></div>
<div style="position:absolute;left:5.00px;top:618.00px" class="cls_003"><span class="cls_003">the </span><span class="cls_010">area_entered()</span><span class="cls_003"> signal. Select it and click Connect. Click Connect on the Connecting Signal window</span></div>
<div style="position:absolute;left:5.00px;top:636.00px" class="cls_003"><span class="cls_003">—you don't need to change any of those settings. Godot will automatically create a new function</span></div>
<div style="position:absolute;left:5.00px;top:654.00px" class="cls_003"><span class="cls_003">called </span><span class="cls_010">_on_Player_area_entered()</span><span class="cls_003"> in your script.</span></div>
<div style="position:absolute;left:52.98px;top:687.00px" class="cls_008"><span class="cls_008">When connecting a signal, instead of having Godot create a function for you, you can also give the name of an</span></div>
<div style="position:absolute;left:52.98px;top:700.50px" class="cls_008"><span class="cls_008">existing function that you want to link the signal to. Toggle the Make Function switch to Off if you don't want</span></div>
<div style="position:absolute;left:52.98px;top:714.00px" class="cls_008"><span class="cls_008">Godot to create the function for you.</span></div>
<div style="position:absolute;left:5.00px;top:742.50px" class="cls_003"><span class="cls_003">Add the following code to this new function:</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:56140px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background073.jpg" width=612 height=792></div>
<div style="position:absolute;left:19.99px;top:4.50px" class="cls_010"><span class="cls_010">func _on_Player_area_entered( area ):</span></div>
<div style="position:absolute;left:40.99px;top:15.75px" class="cls_010"><span class="cls_010">if area.is_in_group("coins"):</span></div>
<div style="position:absolute;left:61.98px;top:27.00px" class="cls_010"><span class="cls_010">area.pickup()</span></div>
<div style="position:absolute;left:61.98px;top:38.25px" class="cls_010"><span class="cls_010">emit_signal("pickup")</span></div>
<div style="position:absolute;left:40.99px;top:49.50px" class="cls_010"><span class="cls_010">if area.is_in_group("obstacles"):</span></div>
<div style="position:absolute;left:61.98px;top:60.75px" class="cls_010"><span class="cls_010">emit_signal("hurt")</span></div>
<div style="position:absolute;left:61.98px;top:72.00px" class="cls_010"><span class="cls_010">die()</span></div>
<div style="position:absolute;left:5.00px;top:96.75px" class="cls_003"><span class="cls_003">When another </span><span class="cls_010">Area2D</span><span class="cls_003"> is detected, it will be passed in to the function (using the </span><span class="cls_010">area</span><span class="cls_003"> variable). The coin</span></div>
<div style="position:absolute;left:5.00px;top:114.75px" class="cls_003"><span class="cls_003">object will have a </span><span class="cls_010">pickup()</span><span class="cls_003"> function that defines the coin's behavior when picked up (playing an</span></div>
<div style="position:absolute;left:5.00px;top:132.75px" class="cls_003"><span class="cls_003">animation or sound, for example). When you create the coins and obstacles, you'll assign them to the</span></div>
<div style="position:absolute;left:5.00px;top:150.75px" class="cls_003"><span class="cls_003">appropriate </span><span class="cls_012">group</span><span class="cls_003"> so they can be detected.</span></div>
<div style="position:absolute;left:5.00px;top:183.75px" class="cls_003"><span class="cls_003">To summarize, here is the complete player script so far:</span></div>
<div style="position:absolute;left:19.99px;top:218.25px" class="cls_010"><span class="cls_010">extends Area2D</span></div>
<div style="position:absolute;left:19.99px;top:240.75px" class="cls_010"><span class="cls_010">signal pickup</span></div>
<div style="position:absolute;left:19.99px;top:252.00px" class="cls_010"><span class="cls_010">signal hurt</span></div>
<div style="position:absolute;left:19.99px;top:274.50px" class="cls_010"><span class="cls_010">export (int) var speed</span></div>
<div style="position:absolute;left:19.99px;top:285.75px" class="cls_010"><span class="cls_010">var velocity = Vector2()</span></div>
<div style="position:absolute;left:19.99px;top:297.00px" class="cls_010"><span class="cls_010">var screensize = Vector2(480, 720)</span></div>
<div style="position:absolute;left:19.99px;top:319.50px" class="cls_010"><span class="cls_010">func get_input():</span></div>
<div style="position:absolute;left:40.99px;top:330.75px" class="cls_010"><span class="cls_010">velocity = Vector2()</span></div>
<div style="position:absolute;left:40.99px;top:342.00px" class="cls_010"><span class="cls_010">if Input.is_action_pressed("ui_left"):</span></div>
<div style="position:absolute;left:61.98px;top:353.25px" class="cls_010"><span class="cls_010">velocity.x -= 1</span></div>
<div style="position:absolute;left:40.99px;top:364.50px" class="cls_010"><span class="cls_010">if Input.is_action_pressed("ui_right"):</span></div>
<div style="position:absolute;left:61.98px;top:375.75px" class="cls_010"><span class="cls_010">velocity.x += 1</span></div>
<div style="position:absolute;left:40.99px;top:387.00px" class="cls_010"><span class="cls_010">if Input.is_action_pressed("ui_up"):</span></div>
<div style="position:absolute;left:61.98px;top:398.25px" class="cls_010"><span class="cls_010">velocity.y -= 1</span></div>
<div style="position:absolute;left:40.99px;top:409.50px" class="cls_010"><span class="cls_010">if Input.is_action_pressed("ui_down"):</span></div>
<div style="position:absolute;left:61.98px;top:420.75px" class="cls_010"><span class="cls_010">velocity.y += 1</span></div>
<div style="position:absolute;left:40.99px;top:432.00px" class="cls_010"><span class="cls_010">if velocity.length() > 0:</span></div>
<div style="position:absolute;left:61.98px;top:443.25px" class="cls_010"><span class="cls_010">velocity = velocity.normalized() * speed</span></div>
<div style="position:absolute;left:19.99px;top:465.75px" class="cls_010"><span class="cls_010">func _process(delta):</span></div>
<div style="position:absolute;left:40.99px;top:477.00px" class="cls_010"><span class="cls_010">get_input()</span></div>
<div style="position:absolute;left:40.99px;top:488.25px" class="cls_010"><span class="cls_010">position += velocity * delta</span></div>
<div style="position:absolute;left:40.99px;top:499.50px" class="cls_010"><span class="cls_010">position.x = clamp(position.x, 0, screensize.x)</span></div>
<div style="position:absolute;left:40.99px;top:510.75px" class="cls_010"><span class="cls_010">position.y = clamp(position.y, 0, screensize.y)</span></div>
<div style="position:absolute;left:40.99px;top:533.25px" class="cls_010"><span class="cls_010">if velocity.length() > 0:</span></div>
<div style="position:absolute;left:61.98px;top:544.50px" class="cls_010"><span class="cls_010">$AnimatedSprite.animation = "run"</span></div>
<div style="position:absolute;left:61.98px;top:555.75px" class="cls_010"><span class="cls_010">$AnimatedSprite.flip_h = velocity.x &lt; 0</span></div>
<div style="position:absolute;left:40.99px;top:567.00px" class="cls_010"><span class="cls_010">else:</span></div>
<div style="position:absolute;left:61.98px;top:578.25px" class="cls_010"><span class="cls_010">$AnimatedSprite.animation = "idle"</span></div>
<div style="position:absolute;left:19.99px;top:600.75px" class="cls_010"><span class="cls_010">func start(pos):</span></div>
<div style="position:absolute;left:40.99px;top:612.00px" class="cls_010"><span class="cls_010">set_process(true)</span></div>
<div style="position:absolute;left:40.99px;top:623.25px" class="cls_010"><span class="cls_010">position = pos</span></div>
<div style="position:absolute;left:40.99px;top:634.50px" class="cls_010"><span class="cls_010">$AnimatedSprite.animation = "idle"</span></div>
<div style="position:absolute;left:19.99px;top:657.00px" class="cls_010"><span class="cls_010">func die():</span></div>
<div style="position:absolute;left:40.99px;top:668.25px" class="cls_010"><span class="cls_010">$AnimatedSprite.animation = "hurt"</span></div>
<div style="position:absolute;left:40.99px;top:679.50px" class="cls_010"><span class="cls_010">set_process(false)</span></div>
<div style="position:absolute;left:19.99px;top:702.00px" class="cls_010"><span class="cls_010">func _on_Player_area_entered( area ):</span></div>
<div style="position:absolute;left:40.99px;top:713.25px" class="cls_010"><span class="cls_010">if area.is_in_group("coins"):</span></div>
<div style="position:absolute;left:61.98px;top:724.50px" class="cls_010"><span class="cls_010">area.pickup()</span></div>
<div style="position:absolute;left:61.98px;top:735.75px" class="cls_010"><span class="cls_010">emit_signal("pickup")</span></div>
<div style="position:absolute;left:40.99px;top:747.00px" class="cls_010"><span class="cls_010">if area.is_in_group("obstacles"):</span></div>
<div style="position:absolute;left:61.98px;top:758.25px" class="cls_010"><span class="cls_010">emit_signal("hurt")</span></div>
<div style="position:absolute;left:61.98px;top:769.50px" class="cls_010"><span class="cls_010">die()</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:56942px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background074.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Part 2 - Coin scene</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">In this part, you'll make the coins for the player to collect. This will be a separate scene describing</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">all of the properties and behavior of a single coin. Once saved, the main scene will load the coin</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">scene and create multiple </span><span class="cls_012">instances</span><span class="cls_003"> (that is, copies) of it.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:57744px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background075.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Node setup</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Click Scene | New Scene and add the following nodes. Don't forget to set the children to not be</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">selected, like you did with the </span><span class="cls_010">Player</span><span class="cls_003"> scene:</span></div>
<div style="position:absolute;left:34.99px;top:129.75px" class="cls_010"><span class="cls_010">Area2D</span><span class="cls_003"> (named </span><span class="cls_010">Coin</span><span class="cls_003">)</span></div>
<div style="position:absolute;left:34.99px;top:153.00px" class="cls_010"><span class="cls_010">AnimatedSprite</span></div>
<div style="position:absolute;left:34.99px;top:170.25px" class="cls_010"><span class="cls_010">CollisionShape2D</span></div>
<div style="position:absolute;left:5.00px;top:197.25px" class="cls_003"><span class="cls_003">Make sure to save the scene once you've added the nodes.</span></div>
<div style="position:absolute;left:5.00px;top:230.25px" class="cls_003"><span class="cls_003">Set up the </span><span class="cls_010">AnimatedSprite</span><span class="cls_003"> like you did in the Player scene. This time, you only have one animation: a</span></div>
<div style="position:absolute;left:5.00px;top:248.25px" class="cls_003"><span class="cls_003">shine/sparkle effect that makes the coin look less flat and boring. Add all the frames and set the Speed</span></div>
<div style="position:absolute;left:5.00px;top:266.25px" class="cls_003"><span class="cls_003">(FPS) to </span><span class="cls_010">12</span><span class="cls_003">. The images are a little too large, so set the Scale of </span><span class="cls_010">AnimatedSprite</span><span class="cls_003"> to (</span><span class="cls_010">0.5</span><span class="cls_003">, </span><span class="cls_010">0.5</span><span class="cls_003">). In the</span></div>
<div style="position:absolute;left:5.00px;top:284.25px" class="cls_010"><span class="cls_010">CollisionShape2D</span><span class="cls_003">, use a </span><span class="cls_010">CircleShape2D</span><span class="cls_003"> and size it to cover the coin image. Don't forget: never use the scale</span></div>
<div style="position:absolute;left:5.00px;top:302.25px" class="cls_003"><span class="cls_003">handles when sizing a collision shape. The circle shape has a single handle that adjusts the circle's</span></div>
<div style="position:absolute;left:5.00px;top:320.25px" class="cls_003"><span class="cls_003">radius.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:58546px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background076.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Using groups</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Groups provide a tagging system for nodes, allowing you to identify similar nodes. A node can belong</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">to any number of groups. You need to ensure that all coins will be in a group called </span><span class="cls_010">coins</span><span class="cls_003"> for the</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">player script to react correctly to touching the coin. Select the </span><span class="cls_010">Coin</span><span class="cls_003"> node and click the Node tab (the</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">same tab where you found the signals) and choose Groups. Type </span><span class="cls_010">coins</span><span class="cls_003"> in the box and click Add, as</span></div>
<div style="position:absolute;left:5.00px;top:151.50px" class="cls_003"><span class="cls_003">shown in the following screenshot:</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:59348px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background077.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Script</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Next, add a script to the </span><span class="cls_010">Coin</span><span class="cls_003"> node. If you choose Empty in the Template setting, Godot will create an</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">empty script without any comments or suggestions. The code for the coin's script is much shorter</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">than the code for the player's:</span></div>
<div style="position:absolute;left:19.99px;top:150.00px" class="cls_010"><span class="cls_010">extends Area2D</span></div>
<div style="position:absolute;left:19.99px;top:172.50px" class="cls_010"><span class="cls_010">func pickup():</span></div>
<div style="position:absolute;left:40.99px;top:183.75px" class="cls_010"><span class="cls_010">queue_free()</span></div>
<div style="position:absolute;left:5.00px;top:208.50px" class="cls_003"><span class="cls_003">The </span><span class="cls_010">pickup()</span><span class="cls_003"> function is called by the player script and tells the coin what to do when it's been</span></div>
<div style="position:absolute;left:5.00px;top:226.50px" class="cls_003"><span class="cls_003">collected. </span><span class="cls_010">queue_free()</span><span class="cls_003"> is Godot's node removal method. It safely removes the node from the tree and</span></div>
<div style="position:absolute;left:5.00px;top:244.50px" class="cls_003"><span class="cls_003">deletes it from memory along with all of its children. Later, you'll add a visual effect here, but for</span></div>
<div style="position:absolute;left:5.00px;top:262.50px" class="cls_003"><span class="cls_003">now the coin disappearing is good enough.</span></div>
<div style="position:absolute;left:52.98px;top:295.50px" class="cls_011"><span class="cls_011">queue_free()</span><span class="cls_008"> doesn't delete the object immediately, but rather adds it to a queue to be deleted at the end of the current</span></div>
<div style="position:absolute;left:52.98px;top:309.00px" class="cls_008"><span class="cls_008">frame. This is safer than immediately deleting the node, because other code running in the game may still need the</span></div>
<div style="position:absolute;left:52.98px;top:322.50px" class="cls_008"><span class="cls_008">node to exist. By waiting until the end of the frame, Godot can be sure that all code that may access the node has</span></div>
<div style="position:absolute;left:52.98px;top:336.00px" class="cls_008"><span class="cls_008">completed and the node can be removed safely.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:60150px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background078.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Part 3 - Main scene</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">The </span><span class="cls_010">Main</span><span class="cls_003"> scene is what ties all the pieces of the game together. It will manage the player, the coins, the</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">timer, and the other pieces of the game.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:60952px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background079.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Node setup</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Create a new scene and add a node named </span><span class="cls_010">Main</span><span class="cls_003">. To add the player to the scene, click the Instance</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">button and select your saved </span><span class="cls_010">Player.tscn</span><span class="cls_003">:</span></div>
<div style="position:absolute;left:5.00px;top:209.25px" class="cls_003"><span class="cls_003">Now, add the following nodes as children of </span><span class="cls_010">Main</span><span class="cls_003">, naming them as follows:</span></div>
<div style="position:absolute;left:34.99px;top:241.50px" class="cls_010"><span class="cls_010">TextureRect</span><span class="cls_003"> (named </span><span class="cls_010">Background</span><span class="cls_003">)—for the background image</span></div>
<div style="position:absolute;left:34.99px;top:258.75px" class="cls_010"><span class="cls_010">Node</span><span class="cls_003"> (named </span><span class="cls_010">CoinContainer</span><span class="cls_003">)—to hold all the coins</span></div>
<div style="position:absolute;left:34.99px;top:276.00px" class="cls_010"><span class="cls_010">Position2D</span><span class="cls_003"> (named </span><span class="cls_010">PlayerStart</span><span class="cls_003">)—to mark the starting position of the </span><span class="cls_010">Player</span></div>
<div style="position:absolute;left:34.99px;top:293.25px" class="cls_010"><span class="cls_010">Timer</span><span class="cls_003"> (named </span><span class="cls_010">GameTimer</span><span class="cls_003">)—to track the time limit</span></div>
<div style="position:absolute;left:5.00px;top:326.25px" class="cls_003"><span class="cls_003">Make sure </span><span class="cls_010">Background</span><span class="cls_003"> is the first child node. Nodes are drawn in the order shown, so the background</span></div>
<div style="position:absolute;left:5.00px;top:344.25px" class="cls_003"><span class="cls_003">will be </span><span class="cls_012">behind</span><span class="cls_003"> the player in this case. Add an image to the </span><span class="cls_010">Background</span><span class="cls_003"> node by dragging</span></div>
<div style="position:absolute;left:5.00px;top:362.25px" class="cls_003"><span class="cls_003">the </span><span class="cls_010">grass.png</span><span class="cls_003"> image from the </span><span class="cls_010">assets</span><span class="cls_003"> folder into the Texture property. Change the Stretch Mode to Tile</span></div>
<div style="position:absolute;left:5.00px;top:380.25px" class="cls_003"><span class="cls_003">and then click Layout | Full Rect to size the frame to the size of the screen, as shown in the following</span></div>
<div style="position:absolute;left:5.00px;top:398.25px" class="cls_003"><span class="cls_003">screenshot:</span></div>
<div style="position:absolute;left:5.00px;top:711.00px" class="cls_003"><span class="cls_003">Set the Position of the </span><span class="cls_010">PlayerStart</span><span class="cls_003"> node to (</span><span class="cls_010">240</span><span class="cls_003">, </span><span class="cls_010">350</span><span class="cls_003">).</span></div>
<div style="position:absolute;left:5.00px;top:744.00px" class="cls_003"><span class="cls_003">Your scene layout should look like this:</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:61754px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background080.jpg" width=612 height=792></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:62556px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background081.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Main script</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Add a script to the </span><span class="cls_010">Main</span><span class="cls_003"> node (use the Empty template) and add the following variables:</span></div>
<div style="position:absolute;left:19.99px;top:114.00px" class="cls_010"><span class="cls_010">extends Node</span></div>
<div style="position:absolute;left:19.99px;top:136.50px" class="cls_010"><span class="cls_010">export (PackedScene) var Coin</span></div>
<div style="position:absolute;left:19.99px;top:147.75px" class="cls_010"><span class="cls_010">export (int) var playtime</span></div>
<div style="position:absolute;left:19.99px;top:170.25px" class="cls_010"><span class="cls_010">var level</span></div>
<div style="position:absolute;left:19.99px;top:181.50px" class="cls_010"><span class="cls_010">var score</span></div>
<div style="position:absolute;left:19.99px;top:192.75px" class="cls_010"><span class="cls_010">var time_left</span></div>
<div style="position:absolute;left:19.99px;top:204.00px" class="cls_010"><span class="cls_010">var screensize</span></div>
<div style="position:absolute;left:19.99px;top:215.25px" class="cls_010"><span class="cls_010">var playing = false</span></div>
<div style="position:absolute;left:5.00px;top:240.00px" class="cls_003"><span class="cls_003">The </span><span class="cls_010">Coin</span><span class="cls_003"> and </span><span class="cls_010">Playtime</span><span class="cls_003"> properties will now appear in the Inspector when you click on </span><span class="cls_010">Main</span><span class="cls_003">. Drag </span><span class="cls_010">Coin.tscn</span></div>
<div style="position:absolute;left:5.00px;top:258.00px" class="cls_003"><span class="cls_003">from the FileSystem panel and drop it in the </span><span class="cls_010">Coin</span><span class="cls_003"> property. Set </span><span class="cls_010">Playtime</span><span class="cls_003"> to </span><span class="cls_010">30</span><span class="cls_003"> (this is the amount of time</span></div>
<div style="position:absolute;left:5.00px;top:276.00px" class="cls_003"><span class="cls_003">the game will last). The remaining variables will be used later in the code.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:63358px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background082.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Initializing</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Next, add the </span><span class="cls_010">_ready()</span><span class="cls_003"> function:</span></div>
<div style="position:absolute;left:19.99px;top:114.00px" class="cls_010"><span class="cls_010">func _ready():</span></div>
<div style="position:absolute;left:40.99px;top:125.25px" class="cls_010"><span class="cls_010">randomize()</span></div>
<div style="position:absolute;left:40.99px;top:136.50px" class="cls_010"><span class="cls_010">screensize = get_viewport().get_visible_rect().size</span></div>
<div style="position:absolute;left:40.99px;top:147.75px" class="cls_010"><span class="cls_010">$Player.screensize = screensize</span></div>
<div style="position:absolute;left:40.99px;top:159.00px" class="cls_010"><span class="cls_010">$Player.hide()</span></div>
<div style="position:absolute;left:5.00px;top:183.75px" class="cls_003"><span class="cls_003">In GDScript, you can use </span><span class="cls_010">$</span><span class="cls_003"> to refer to a particular node by name. This allows you to find the size of</span></div>
<div style="position:absolute;left:5.00px;top:201.75px" class="cls_003"><span class="cls_003">the screen and assign it to the player's </span><span class="cls_010">screensize</span><span class="cls_003"> variable. </span><span class="cls_010">hide()</span><span class="cls_003"> makes the player start out invisible</span></div>
<div style="position:absolute;left:5.00px;top:219.75px" class="cls_003"><span class="cls_003">(you'll make them appear when the game actually starts).</span></div>
<div style="position:absolute;left:5.00px;top:252.75px" class="cls_003"><span class="cls_003">In the </span><span class="cls_010">$</span><span class="cls_003"> notation, the node name is relative to the node running the script. For example, </span><span class="cls_010">$Node1/Node2</span></div>
<div style="position:absolute;left:5.00px;top:270.75px" class="cls_003"><span class="cls_003">would refer to a node (</span><span class="cls_010">Node2</span><span class="cls_003">) that is the child of </span><span class="cls_010">Node1</span><span class="cls_003">, which itself is a child of the currently running</span></div>
<div style="position:absolute;left:5.00px;top:288.75px" class="cls_003"><span class="cls_003">script. Godot's autocomplete will suggest node names from the tree as you type. Note that if the node's</span></div>
<div style="position:absolute;left:5.00px;top:306.75px" class="cls_003"><span class="cls_003">name contains spaces, you must put quote marks around it, for example, </span><span class="cls_010">$"My Node"</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:52.98px;top:339.75px" class="cls_008"><span class="cls_008">You must use </span><span class="cls_011">randomize()</span><span class="cls_008"> if you want your sequence of "random" numbers to be different every time you run the</span></div>
<div style="position:absolute;left:52.98px;top:353.25px" class="cls_008"><span class="cls_008">scene. Technically speaking, this selects a random seed for the random number generator.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:64160px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background083.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Starting a new game</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Next, the </span><span class="cls_010">new_game()</span><span class="cls_003"> function will initialize everything for a new game:</span></div>
<div style="position:absolute;left:19.99px;top:114.00px" class="cls_010"><span class="cls_010">func new_game():</span></div>
<div style="position:absolute;left:40.99px;top:125.25px" class="cls_010"><span class="cls_010">playing = true</span></div>
<div style="position:absolute;left:40.99px;top:136.50px" class="cls_010"><span class="cls_010">level = 1</span></div>
<div style="position:absolute;left:40.99px;top:147.75px" class="cls_010"><span class="cls_010">score = 0</span></div>
<div style="position:absolute;left:40.99px;top:159.00px" class="cls_010"><span class="cls_010">time_left = playtime</span></div>
<div style="position:absolute;left:40.99px;top:170.25px" class="cls_010"><span class="cls_010">$Player.start($PlayerStart.position)</span></div>
<div style="position:absolute;left:40.99px;top:181.50px" class="cls_010"><span class="cls_010">$Player.show()</span></div>
<div style="position:absolute;left:40.99px;top:192.75px" class="cls_010"><span class="cls_010">$GameTimer.start()</span></div>
<div style="position:absolute;left:40.99px;top:204.00px" class="cls_010"><span class="cls_010">spawn_coins()</span></div>
<div style="position:absolute;left:5.00px;top:228.75px" class="cls_003"><span class="cls_003">In addition to setting the variables to their starting values, this function calls the Player's </span><span class="cls_010">start()</span></div>
<div style="position:absolute;left:5.00px;top:246.75px" class="cls_003"><span class="cls_003">function to ensure it moves to the proper starting location. The game timer is started, which will count</span></div>
<div style="position:absolute;left:5.00px;top:264.75px" class="cls_003"><span class="cls_003">down the remaining time in the game.</span></div>
<div style="position:absolute;left:5.00px;top:297.75px" class="cls_003"><span class="cls_003">You also need a function that will create a number of coins based on the current level:</span></div>
<div style="position:absolute;left:19.99px;top:332.25px" class="cls_010"><span class="cls_010">func spawn_coins():</span></div>
<div style="position:absolute;left:40.99px;top:343.50px" class="cls_010"><span class="cls_010">for i in range(4 + level):</span></div>
<div style="position:absolute;left:61.98px;top:354.75px" class="cls_010"><span class="cls_010">var c = Coin.instance()</span></div>
<div style="position:absolute;left:61.98px;top:366.00px" class="cls_010"><span class="cls_010">$CoinContainer.add_child(c)</span></div>
<div style="position:absolute;left:61.98px;top:377.25px" class="cls_010"><span class="cls_010">c.screensize = screensize</span></div>
<div style="position:absolute;left:61.98px;top:388.50px" class="cls_010"><span class="cls_010">c.position = Vector2(rand_range(0, screensize.x),</span></div>
<div style="position:absolute;left:61.98px;top:399.75px" class="cls_010"><span class="cls_010">rand_range(0, screensize.y))</span></div>
<div style="position:absolute;left:5.00px;top:424.50px" class="cls_003"><span class="cls_003">In this function, you create a number of </span><span class="cls_012">instances</span><span class="cls_003"> of the </span><span class="cls_010">Coin</span><span class="cls_003"> object (in code this time, rather than by</span></div>
<div style="position:absolute;left:5.00px;top:442.50px" class="cls_003"><span class="cls_003">clicking the Instance a Scene button), and add it as a child of the </span><span class="cls_010">CoinContainer</span><span class="cls_003">. Whenever you instance</span></div>
<div style="position:absolute;left:5.00px;top:460.50px" class="cls_003"><span class="cls_003">a new node, it must be added to the tree using </span><span class="cls_010">add_child()</span><span class="cls_003">. Finally, you pick a random location for the</span></div>
<div style="position:absolute;left:5.00px;top:478.50px" class="cls_003"><span class="cls_003">coin to appear in. You'll call this function at the start of every level, generating more coins each time.</span></div>
<div style="position:absolute;left:5.00px;top:511.50px" class="cls_003"><span class="cls_003">Eventually, you'll want </span><span class="cls_010">new_game()</span><span class="cls_003"> to be called when the player clicks the start button. For now, to test</span></div>
<div style="position:absolute;left:5.00px;top:529.50px" class="cls_003"><span class="cls_003">if everything is working, add </span><span class="cls_010">new_game()</span><span class="cls_003"> to the end of your </span><span class="cls_010">_ready()</span><span class="cls_003"> function and click Play the Project</span></div>
<div style="position:absolute;left:5.00px;top:547.50px" class="cls_003"><span class="cls_003">(</span><span class="cls_012">F5</span><span class="cls_003">). When you are prompted to choose a main scene, choose </span><span class="cls_010">Main.tscn</span><span class="cls_003">. Now, whenever you play the</span></div>
<div style="position:absolute;left:5.00px;top:565.50px" class="cls_003"><span class="cls_003">project, the </span><span class="cls_010">Main</span><span class="cls_003"> scene will be started.</span></div>
<div style="position:absolute;left:5.00px;top:598.50px" class="cls_003"><span class="cls_003">At this point, you should see your player and five coins appear on the screen. When the player touches</span></div>
<div style="position:absolute;left:5.00px;top:616.50px" class="cls_003"><span class="cls_003">a coin, it disappears.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:64962px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background084.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Checking for remaining coins</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">The main script needs to detect whether the player has picked up all of the coins. Since the coins are</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">all children of </span><span class="cls_010">CoinCointainer</span><span class="cls_003">, you can use </span><span class="cls_010">get_child_count()</span><span class="cls_003"> on this node to find out how many coins</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">remain. Put this in the </span><span class="cls_010">_process()</span><span class="cls_003"> function so that it will be checked every frame:</span></div>
<div style="position:absolute;left:19.99px;top:150.00px" class="cls_010"><span class="cls_010">func _process(delta):</span></div>
<div style="position:absolute;left:40.99px;top:161.25px" class="cls_010"><span class="cls_010">if playing and $CoinContainer.get_child_count() == 0:</span></div>
<div style="position:absolute;left:61.98px;top:172.50px" class="cls_010"><span class="cls_010">level += 1</span></div>
<div style="position:absolute;left:61.98px;top:183.75px" class="cls_010"><span class="cls_010">time_left += 5</span></div>
<div style="position:absolute;left:61.98px;top:195.00px" class="cls_010"><span class="cls_010">spawn_coins()</span></div>
<div style="position:absolute;left:5.00px;top:219.75px" class="cls_003"><span class="cls_003">If no more coins remain, then the player advances to the next level.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:65764px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background085.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Part 4 - User Interface</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">The final piece your game needs is a </span><span class="cls_002">user interface</span><span class="cls_003"> (</span><span class="cls_002">UI</span><span class="cls_003">). This is an interface to display information</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">that the player needs to see during gameplay. In games, this is also referred to as a </span><span class="cls_002">Heads-Up</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_002"><span class="cls_002">Display</span><span class="cls_003"> (</span><span class="cls_002">HUD</span><span class="cls_003">), because the information appears as an overlay on top of the game view. You'll also</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">use this scene to display a start button.</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">The HUD will display the following information:</span></div>
<div style="position:absolute;left:34.99px;top:198.75px" class="cls_003"><span class="cls_003">Score</span></div>
<div style="position:absolute;left:34.99px;top:216.00px" class="cls_003"><span class="cls_003">Time remaining</span></div>
<div style="position:absolute;left:34.99px;top:233.25px" class="cls_003"><span class="cls_003">A message, such as Game Over</span></div>
<div style="position:absolute;left:34.99px;top:250.50px" class="cls_003"><span class="cls_003">A start button</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:66566px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background086.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Node setup</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Create a new scene and add a </span><span class="cls_010">CanvasLayer</span><span class="cls_003"> node named </span><span class="cls_010">HUD</span><span class="cls_003">. A </span><span class="cls_010">CanvasLayer</span><span class="cls_003"> node allows you to draw your</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">UI elements on a layer above the rest of the game, so that the information it displays doesn't get</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">covered up by any game elements like the player or the coins.</span></div>
<div style="position:absolute;left:5.00px;top:148.50px" class="cls_003"><span class="cls_003">Godot provides a wide variety of UI elements that may be used to create anything from indicators</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">such as health bars to complex interfaces such as inventories. In fact, the Godot editor that you are</span></div>
<div style="position:absolute;left:5.00px;top:184.50px" class="cls_003"><span class="cls_003">using to make this game is built in Godot using these elements. The basic nodes for UI elements are</span></div>
<div style="position:absolute;left:5.00px;top:202.50px" class="cls_003"><span class="cls_003">extended from </span><span class="cls_010">Control</span><span class="cls_003">, and appear with green icons in the node list. To create your UI, you'll use</span></div>
<div style="position:absolute;left:5.00px;top:220.50px" class="cls_003"><span class="cls_003">various </span><span class="cls_010">Control</span><span class="cls_003"> nodes to position, format, and display information. Here is what the </span><span class="cls_010">HUD</span><span class="cls_003"> will look like</span></div>
<div style="position:absolute;left:5.00px;top:238.50px" class="cls_003"><span class="cls_003">when complete:</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:67368px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background087.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Anchors and margins</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Control nodes have a position and size, but they also have properties called </span><span class="cls_002">anchors</span><span class="cls_003"> and </span><span class="cls_002">margins</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">Anchors define the origin, or the reference point, for the edges of the node, relative to the parent</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">container. Margins represent the distance from the control node's edge to its corresponding anchor.</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">Margins update automatically when you move or resize a control node.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:68170px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background088.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Message label</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Add a </span><span class="cls_010">Label</span><span class="cls_003"> node to the scene and change its name to </span><span class="cls_010">MessageLabel</span><span class="cls_002">.</span><span class="cls_003"> This label will display the game's</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">title, as well as Game Over when the game ends. This label should be centered on the game screen.</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">You could drag it with the mouse, but to place UI elements precisely, you should use</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">the Anchor properties.</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">Select View | Show Helpers to display pins that will help you see the anchor positions, then click on</span></div>
<div style="position:absolute;left:5.00px;top:184.50px" class="cls_003"><span class="cls_003">the Layout menu and select HCenter Wide:</span></div>
<div style="position:absolute;left:5.00px;top:488.25px" class="cls_003"><span class="cls_003">The </span><span class="cls_010">MessageLabel</span><span class="cls_003"> now spans the width of the screen and is centered vertically. The Text property in the</span></div>
<div style="position:absolute;left:5.00px;top:506.25px" class="cls_003"><span class="cls_003">Inspector sets what text the label displays. Set it to Coin Dash! and set Align and Valign to Center.</span></div>
<div style="position:absolute;left:5.00px;top:539.25px" class="cls_003"><span class="cls_003">The default font for </span><span class="cls_010">Label</span><span class="cls_003"> nodes is very small, so the next step is to assign a custom font. Scroll down</span></div>
<div style="position:absolute;left:5.00px;top:557.25px" class="cls_003"><span class="cls_003">to the Custom Fonts section in the Inspector and select New DynamicFont, as shown in the following</span></div>
<div style="position:absolute;left:5.00px;top:575.25px" class="cls_003"><span class="cls_003">screenshot:</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:68972px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background089.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:3.00px" class="cls_003"><span class="cls_003">Now, click on DynamicFont and you can adjust the font settings. From the FileSystem dock, drag the</span></div>
<div style="position:absolute;left:5.00px;top:21.00px" class="cls_010"><span class="cls_010">Kenney Bold.ttf</span><span class="cls_003"> font and drop it in the Font Data</span><span class="cls_012"> </span><span class="cls_003">property. Set Size</span><span class="cls_012"> </span><span class="cls_003">to </span><span class="cls_010">48</span><span class="cls_003">, as shown in the following</span></div>
<div style="position:absolute;left:5.00px;top:39.00px" class="cls_003"><span class="cls_003">screenshot:</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:69774px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background090.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Score and time display</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">The top of the </span><span class="cls_010">HUD</span><span class="cls_003"> will display the player's score and the time remaining on the clock. Both of these</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">will be </span><span class="cls_010">Label</span><span class="cls_003"> nodes, arranged at opposite sides of the game screen. Rather than position them</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">separately, you'll use a </span><span class="cls_010">Container</span><span class="cls_003"> node to manage their positions.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:70576px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background091.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Containers</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">UI containers automatically arrange the positions of their child </span><span class="cls_010">Control</span><span class="cls_003"> nodes (including other</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_010"><span class="cls_010">Containers</span><span class="cls_003">). You can use them to add padding around elements, center them, or arrange elements in</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">rows or columns. Each type of </span><span class="cls_010">Container</span><span class="cls_003"> has special properties that control how they arrange their</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">children. You can see these properties in the Custom Constants section of the Inspector.</span></div>
<div style="position:absolute;left:52.98px;top:166.50px" class="cls_008"><span class="cls_008">Remember that containers automatically arrange their children. If you move or resize a Control that's inside a</span></div>
<div style="position:absolute;left:52.98px;top:180.00px" class="cls_011"><span class="cls_011">Container</span><span class="cls_008"> node, you'll find it snaps back to its original position. You can manually arrange controls or arrange them</span></div>
<div style="position:absolute;left:52.98px;top:193.50px" class="cls_008"><span class="cls_008">with a container, but not both.</span></div>
<div style="position:absolute;left:5.00px;top:222.00px" class="cls_003"><span class="cls_003">To manage the score and time labels, add a </span><span class="cls_010">MarginContainer</span><span class="cls_003"> node to the </span><span class="cls_010">HUD</span><span class="cls_002">.</span><span class="cls_003"> Use the Layout menu to set</span></div>
<div style="position:absolute;left:5.00px;top:240.00px" class="cls_003"><span class="cls_003">the anchors to Top Wide. In the Custom Constants section, set Margin Right, Margin Top, and Margin</span></div>
<div style="position:absolute;left:5.00px;top:258.00px" class="cls_003"><span class="cls_003">Left to </span><span class="cls_010">10</span><span class="cls_003">. This will add some padding so that the text isn't against the edge of the screen.</span></div>
<div style="position:absolute;left:5.00px;top:291.00px" class="cls_003"><span class="cls_003">Since the score and time labels will use the same font settings as the </span><span class="cls_010">MessageLabel</span><span class="cls_003">, it will save time if</span></div>
<div style="position:absolute;left:5.00px;top:309.00px" class="cls_003"><span class="cls_003">you duplicate it. Click on </span><span class="cls_010">MessageLabel</span><span class="cls_003"> and press </span><span class="cls_012">Ctrl</span><span class="cls_003"> + </span><span class="cls_012">D</span><span class="cls_003"> (</span><span class="cls_012">Cmd</span><span class="cls_003"> + </span><span class="cls_012">D</span><span class="cls_003"> on macOS) twice to create two</span></div>
<div style="position:absolute;left:5.00px;top:327.00px" class="cls_003"><span class="cls_003">duplicate labels. Drag them both and drop them on the </span><span class="cls_010">MarginContainer</span><span class="cls_003"> to make them its children. Name</span></div>
<div style="position:absolute;left:5.00px;top:345.00px" class="cls_003"><span class="cls_003">one </span><span class="cls_010">ScoreLabel</span><span class="cls_003"> and the other </span><span class="cls_010">TimeLabel</span><span class="cls_003"> and set the Text property to </span><span class="cls_010">0</span><span class="cls_003"> for both. Set Align to Left</span></div>
<div style="position:absolute;left:5.00px;top:363.00px" class="cls_003"><span class="cls_003">for </span><span class="cls_010">ScoreLabel</span><span class="cls_003"> and Right for </span><span class="cls_010">TimeLabel</span><span class="cls_002">.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:71378px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background092.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Updating UI via GDScript</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Add a script to the </span><span class="cls_010">HUD</span><span class="cls_003"> node. This script will update the UI elements when their properties need to</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">change, updating the score text whenever a coin is collected, for example. Refer to the following</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">code:</span></div>
<div style="position:absolute;left:19.99px;top:150.00px" class="cls_010"><span class="cls_010">extends CanvasLayer</span></div>
<div style="position:absolute;left:19.99px;top:172.50px" class="cls_010"><span class="cls_010">signal start_game</span></div>
<div style="position:absolute;left:19.99px;top:195.00px" class="cls_010"><span class="cls_010">func update_score(value):</span></div>
<div style="position:absolute;left:40.99px;top:206.25px" class="cls_010"><span class="cls_010">$MarginContainer/ScoreLabel.text = str(value)</span></div>
<div style="position:absolute;left:19.99px;top:228.75px" class="cls_010"><span class="cls_010">func update_timer(value):</span></div>
<div style="position:absolute;left:40.99px;top:240.00px" class="cls_010"><span class="cls_010">$MarginContainer/TimeLabel.txt = str(value)</span></div>
<div style="position:absolute;left:5.00px;top:264.75px" class="cls_003"><span class="cls_003">The </span><span class="cls_010">Main</span><span class="cls_003"> scene's script will call these functions to update the display whenever there is a change in</span></div>
<div style="position:absolute;left:5.00px;top:282.75px" class="cls_003"><span class="cls_003">value. For the </span><span class="cls_010">MessageLabel</span><span class="cls_003">, you also need a timer to make it disappear after a brief period. Add a </span><span class="cls_010">Timer</span></div>
<div style="position:absolute;left:5.00px;top:300.75px" class="cls_003"><span class="cls_003">node and change its name to </span><span class="cls_010">MessageTimer</span><span class="cls_002">. </span><span class="cls_003">In the Inspector, set its Wait Time to </span><span class="cls_010">2</span><span class="cls_003"> seconds and check the</span></div>
<div style="position:absolute;left:5.00px;top:318.75px" class="cls_003"><span class="cls_003">box to set One Shot to On. This ensures that, when started, the timer will only run once, rather than</span></div>
<div style="position:absolute;left:5.00px;top:336.75px" class="cls_003"><span class="cls_003">repeating. Add the following code:</span></div>
<div style="position:absolute;left:19.99px;top:371.25px" class="cls_010"><span class="cls_010">func show_message(text):</span></div>
<div style="position:absolute;left:40.99px;top:382.50px" class="cls_010"><span class="cls_010">$MessageLabel.text = text</span></div>
<div style="position:absolute;left:40.99px;top:393.75px" class="cls_010"><span class="cls_010">$MessageLabel.show()</span></div>
<div style="position:absolute;left:40.99px;top:405.00px" class="cls_010"><span class="cls_010">$MessageTimer.start()</span></div>
<div style="position:absolute;left:5.00px;top:429.75px" class="cls_003"><span class="cls_003">In this function, you display the message and start the timer. To hide the message, connect the </span><span class="cls_010">timeout()</span></div>
<div style="position:absolute;left:5.00px;top:447.75px" class="cls_003"><span class="cls_003">signal of </span><span class="cls_010">MessageTimer</span><span class="cls_003"> and add this:</span></div>
<div style="position:absolute;left:19.99px;top:482.25px" class="cls_010"><span class="cls_010">func _on_MessageTimer_timeout():</span></div>
<div style="position:absolute;left:40.99px;top:493.50px" class="cls_010"><span class="cls_010">$MessageLabel.hide()</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:72180px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background093.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Using buttons</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Add a </span><span class="cls_010">Button</span><span class="cls_003"> node and change its name to </span><span class="cls_010">StartButton</span><span class="cls_002">. </span><span class="cls_003">This button will be displayed before the game</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">starts, and when clicked, it will hide itself and send a signal to the </span><span class="cls_010">Main</span><span class="cls_003"> scene to start the game. Set</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">the Text property to Start and change the custom font like you did with the </span><span class="cls_010">MessageLabel</span><span class="cls_002">.</span><span class="cls_003"> In the Layout</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">menu, choose Center Bottom. This will put the button at the very bottom of the screen, so move it up a</span></div>
<div style="position:absolute;left:5.00px;top:151.50px" class="cls_003"><span class="cls_003">little bit either by pressing the </span><span class="cls_012">Up</span><span class="cls_003"> arrow key or by editing the margins and setting Top to </span><span class="cls_010">-150</span></div>
<div style="position:absolute;left:5.00px;top:169.50px" class="cls_003"><span class="cls_003">and Bottom to </span><span class="cls_010">-50</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:202.50px" class="cls_003"><span class="cls_003">When a button is clicked, a signal is sent out. In the Node tab for the </span><span class="cls_010">StartButton</span><span class="cls_003">, connect the </span><span class="cls_010">pressed()</span></div>
<div style="position:absolute;left:5.00px;top:220.50px" class="cls_003"><span class="cls_003">signal:</span></div>
<div style="position:absolute;left:19.99px;top:255.00px" class="cls_010"><span class="cls_010">func _on_StartButton_pressed():</span></div>
<div style="position:absolute;left:40.99px;top:266.25px" class="cls_010"><span class="cls_010">$StartButton.hide()</span></div>
<div style="position:absolute;left:40.99px;top:277.50px" class="cls_010"><span class="cls_010">$MessageLabel.hide()</span></div>
<div style="position:absolute;left:40.99px;top:288.75px" class="cls_010"><span class="cls_010">emit_signal("start_game")</span></div>
<div style="position:absolute;left:5.00px;top:313.50px" class="cls_003"><span class="cls_003">The </span><span class="cls_010">HUD</span><span class="cls_003"> emits the </span><span class="cls_010">start_game</span><span class="cls_003"> signal to notify </span><span class="cls_010">Main</span><span class="cls_003"> that it's time to start a new game.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:72982px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background094.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Game over</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">The final task for your UI is to react to the game ending:</span></div>
<div style="position:absolute;left:19.99px;top:114.00px" class="cls_010"><span class="cls_010">func show_game_over():</span></div>
<div style="position:absolute;left:40.99px;top:125.25px" class="cls_010"><span class="cls_010">show_message("Game Over")</span></div>
<div style="position:absolute;left:40.99px;top:136.50px" class="cls_010"><span class="cls_010">yield($MessageTimer, "timeout")</span></div>
<div style="position:absolute;left:40.99px;top:147.75px" class="cls_010"><span class="cls_010">$StartButton.show()</span></div>
<div style="position:absolute;left:40.99px;top:159.00px" class="cls_010"><span class="cls_010">$MessageLabel.text = "Coin Dash!"</span></div>
<div style="position:absolute;left:40.99px;top:170.25px" class="cls_010"><span class="cls_010">$MessageLabel.show()</span></div>
<div style="position:absolute;left:5.00px;top:195.00px" class="cls_003"><span class="cls_003">In this function, you need the Game Over message to be displayed for two seconds and then</span></div>
<div style="position:absolute;left:5.00px;top:213.00px" class="cls_003"><span class="cls_003">disappear, which is what </span><span class="cls_010">show_message()</span><span class="cls_003"> does. However, you also want to show the start button once the</span></div>
<div style="position:absolute;left:5.00px;top:231.00px" class="cls_003"><span class="cls_003">message has disappeared. The </span><span class="cls_010">yield()</span><span class="cls_003"> function pauses execution of the function until the given node</span></div>
<div style="position:absolute;left:5.00px;top:249.00px" class="cls_003"><span class="cls_003">(</span><span class="cls_010">MessageTimer</span><span class="cls_003">) emits a given signal (</span><span class="cls_010">timeout</span><span class="cls_003">). Once the signal is received, the function continues,</span></div>
<div style="position:absolute;left:5.00px;top:267.00px" class="cls_003"><span class="cls_003">returning you to the initial state so that you can play again.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:73784px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background095.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Adding the HUD to Main</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Now, you need to set up the communication between the </span><span class="cls_010">Main</span><span class="cls_003"> scene and the </span><span class="cls_010">HUD</span><span class="cls_003">. Add an instance of the</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_010"><span class="cls_010">HUD</span><span class="cls_003"> scene to the </span><span class="cls_010">Main</span><span class="cls_003"> scene. In the </span><span class="cls_010">Main</span><span class="cls_003"> scene, connect the </span><span class="cls_010">timeout()</span><span class="cls_003"> signal of </span><span class="cls_010">GameTimer</span><span class="cls_003"> and add the</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">following:</span></div>
<div style="position:absolute;left:19.99px;top:150.00px" class="cls_010"><span class="cls_010">func _on_GameTimer_timeout():</span></div>
<div style="position:absolute;left:40.99px;top:161.25px" class="cls_010"><span class="cls_010">time_left -= 1</span></div>
<div style="position:absolute;left:40.99px;top:172.50px" class="cls_010"><span class="cls_010">$HUD.update_timer(time_left)</span></div>
<div style="position:absolute;left:40.99px;top:183.75px" class="cls_010"><span class="cls_010">if time_left &lt;= 0:</span></div>
<div style="position:absolute;left:61.98px;top:195.00px" class="cls_010"><span class="cls_010">game_over()</span></div>
<div style="position:absolute;left:5.00px;top:219.75px" class="cls_003"><span class="cls_003">Every time the </span><span class="cls_010">GameTimer</span><span class="cls_003"> times out (every second), the remaining time is reduced.</span></div>
<div style="position:absolute;left:5.00px;top:237.75px" class="cls_003"><span class="cls_003">Next, connect the </span><span class="cls_010">pickup()</span><span class="cls_003"> and </span><span class="cls_010">hurt()</span><span class="cls_003"> signals of the </span><span class="cls_010">Player</span><span class="cls_003">:</span></div>
<div style="position:absolute;left:19.99px;top:272.25px" class="cls_010"><span class="cls_010">func _on_Player_pickup():</span></div>
<div style="position:absolute;left:40.99px;top:283.50px" class="cls_010"><span class="cls_010">score += 1</span></div>
<div style="position:absolute;left:40.99px;top:294.75px" class="cls_010"><span class="cls_010">$HUD.update_score(score)</span></div>
<div style="position:absolute;left:19.99px;top:317.25px" class="cls_010"><span class="cls_010">func _on_Player_hurt():</span></div>
<div style="position:absolute;left:40.99px;top:328.50px" class="cls_010"><span class="cls_010">game_over()</span></div>
<div style="position:absolute;left:5.00px;top:353.25px" class="cls_003"><span class="cls_003">Several things need to happen when the game ends, so add the following function:</span></div>
<div style="position:absolute;left:19.99px;top:387.75px" class="cls_010"><span class="cls_010">func game_over():</span></div>
<div style="position:absolute;left:40.99px;top:399.00px" class="cls_010"><span class="cls_010">playing = false</span></div>
<div style="position:absolute;left:40.99px;top:410.25px" class="cls_010"><span class="cls_010">$GameTimer.stop()</span></div>
<div style="position:absolute;left:40.99px;top:421.50px" class="cls_010"><span class="cls_010">for coin in $CoinContainer.get_children():</span></div>
<div style="position:absolute;left:61.98px;top:432.75px" class="cls_010"><span class="cls_010">coin.queue_free()</span></div>
<div style="position:absolute;left:40.99px;top:444.00px" class="cls_010"><span class="cls_010">$HUD.show_game_over()</span></div>
<div style="position:absolute;left:40.99px;top:455.25px" class="cls_010"><span class="cls_010">$Player.die()</span></div>
<div style="position:absolute;left:5.00px;top:480.00px" class="cls_003"><span class="cls_003">This function halts the game, and also loops through the coins and removes any that are remaining, as</span></div>
<div style="position:absolute;left:5.00px;top:498.00px" class="cls_003"><span class="cls_003">well as calling the HUD's </span><span class="cls_010">show_game_over()</span><span class="cls_003"> function.</span></div>
<div style="position:absolute;left:5.00px;top:531.00px" class="cls_003"><span class="cls_003">Finally, the </span><span class="cls_010">StartButton</span><span class="cls_003"> needs to activate the </span><span class="cls_010">new_game()</span><span class="cls_003"> function. Click on the </span><span class="cls_010">HUD</span><span class="cls_003"> instance and select its</span></div>
<div style="position:absolute;left:5.00px;top:549.00px" class="cls_010"><span class="cls_010">new_game()</span><span class="cls_003"> signal. In the signal connection dialog, click Make Function to Off and in the Method In</span></div>
<div style="position:absolute;left:5.00px;top:567.00px" class="cls_003"><span class="cls_003">Node field, type </span><span class="cls_010">new_game</span><span class="cls_003">. This will connect the signal to the existing function rather than creating a</span></div>
<div style="position:absolute;left:5.00px;top:585.00px" class="cls_003"><span class="cls_003">new one. Take a look at the following screenshot:</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:74586px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background096.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:228.00px" class="cls_003"><span class="cls_003">Remove </span><span class="cls_010">new_game()</span><span class="cls_003"> from the </span><span class="cls_010">_ready()</span><span class="cls_003"> function and add these two lines to the </span><span class="cls_010">new_game()</span><span class="cls_003"> function:</span></div>
<div style="position:absolute;left:19.99px;top:262.50px" class="cls_010"><span class="cls_010">$HUD.update_score(score)</span></div>
<div style="position:absolute;left:19.99px;top:273.75px" class="cls_010"><span class="cls_010">$HUD.update_timer(time_left)</span></div>
<div style="position:absolute;left:5.00px;top:298.50px" class="cls_003"><span class="cls_003">Now, you can play the game! Confirm that all the parts are working as intended: the score, the</span></div>
<div style="position:absolute;left:5.00px;top:316.50px" class="cls_003"><span class="cls_003">countdown, the game ending and restarting, and so on. If you find a piece that's not working, go back</span></div>
<div style="position:absolute;left:5.00px;top:334.50px" class="cls_003"><span class="cls_003">and check the step where you created it, as well as the step(s) where it was connected to the rest of</span></div>
<div style="position:absolute;left:5.00px;top:352.50px" class="cls_003"><span class="cls_003">the game.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:75388px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background097.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Part 5 - Finishing up</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">You have created a working game, but it still could be made to feel a little more exciting. Game</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">developers use the term </span><span class="cls_012">juice</span><span class="cls_003"> to describe the things that make the game feel good to play. Juice can</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">include things like sound, visual effects, or any other addition that adds to the player's enjoyment,</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">without necessarily changing the nature of the gameplay.</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">In this section, you'll add some small </span><span class="cls_012">juicy</span><span class="cls_003"> features to finish up the game.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:76190px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background098.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Visual effects</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">When you pick up the coins, they just disappear, which is not very appealing. Adding a visual effect</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">will make it much more satisfying to collect lots of coins.</span></div>
<div style="position:absolute;left:5.00px;top:130.50px" class="cls_003"><span class="cls_003">Start by adding a </span><span class="cls_010">Tween</span><span class="cls_003"> node to the </span><span class="cls_010">Coin</span><span class="cls_003"> scene.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:76992px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background099.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">What is a tween?</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">A </span><span class="cls_002">tween</span><span class="cls_003"> is a way to interpolate (change gradually) some value over time (from a start value to an end</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">value) using a particular function. For example, you might choose a function that steadily changes the</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">value or one that starts slow but ramps up in speed. Tweening is also sometimes referred to as</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_012"><span class="cls_012">easing</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">When using a </span><span class="cls_010">Tween</span><span class="cls_003"> node in Godot, you can assign it to alter one or more properties of a node. In this</span></div>
<div style="position:absolute;left:5.00px;top:184.50px" class="cls_003"><span class="cls_003">case, you're going to increase the </span><span class="cls_010">Scale</span><span class="cls_003"> of the coin and also cause it to fade out using the Modulate</span></div>
<div style="position:absolute;left:5.00px;top:202.50px" class="cls_003"><span class="cls_003">property.</span></div>
<div style="position:absolute;left:5.00px;top:235.50px" class="cls_003"><span class="cls_003">Add this line to the </span><span class="cls_010">_ready()</span><span class="cls_003"> function of </span><span class="cls_010">Coin</span><span class="cls_003">:</span></div>
<div style="position:absolute;left:19.99px;top:270.00px" class="cls_010"><span class="cls_010">$Tween.interpolate_property($AnimatedSprite, 'scale',</span></div>
<div style="position:absolute;left:166.93px;top:281.25px" class="cls_010"><span class="cls_010">$AnimatedSprite.scale,</span></div>
<div style="position:absolute;left:166.93px;top:292.50px" class="cls_010"><span class="cls_010">$AnimatedSprite.scale * 3, 0.3,</span></div>
<div style="position:absolute;left:166.93px;top:303.75px" class="cls_010"><span class="cls_010">Tween.TRANS_QUAD,</span></div>
<div style="position:absolute;left:166.93px;top:315.00px" class="cls_010"><span class="cls_010">Tween.EASE_IN_OUT)</span></div>
<div style="position:absolute;left:5.00px;top:339.75px" class="cls_003"><span class="cls_003">The </span><span class="cls_010">interpolate_property()</span><span class="cls_003"> function causes the </span><span class="cls_010">Tween</span><span class="cls_003"> to change a node's property. There are seven</span></div>
<div style="position:absolute;left:5.00px;top:357.75px" class="cls_003"><span class="cls_003">parameters:</span></div>
<div style="position:absolute;left:34.99px;top:390.00px" class="cls_003"><span class="cls_003">The node to affect</span></div>
<div style="position:absolute;left:34.99px;top:407.25px" class="cls_003"><span class="cls_003">The property to alter</span></div>
<div style="position:absolute;left:34.99px;top:424.50px" class="cls_003"><span class="cls_003">The property's starting value</span></div>
<div style="position:absolute;left:34.99px;top:441.75px" class="cls_003"><span class="cls_003">The property's ending value</span></div>
<div style="position:absolute;left:34.99px;top:459.00px" class="cls_003"><span class="cls_003">The duration (in seconds)</span></div>
<div style="position:absolute;left:34.99px;top:476.25px" class="cls_003"><span class="cls_003">The function to use</span></div>
<div style="position:absolute;left:34.99px;top:493.50px" class="cls_003"><span class="cls_003">The direction</span></div>
<div style="position:absolute;left:5.00px;top:526.50px" class="cls_003"><span class="cls_003">The tween should start playing when the player picks up the coin. Replace </span><span class="cls_010">queue_free()</span><span class="cls_003"> in the </span><span class="cls_010">pickup()</span></div>
<div style="position:absolute;left:5.00px;top:544.50px" class="cls_003"><span class="cls_003">function:</span></div>
<div style="position:absolute;left:19.99px;top:579.00px" class="cls_010"><span class="cls_010">func pickup():</span></div>
<div style="position:absolute;left:40.99px;top:590.25px" class="cls_010"><span class="cls_010">monitoring = false</span></div>
<div style="position:absolute;left:40.99px;top:601.50px" class="cls_010"><span class="cls_010">$Tween.start()</span></div>
<div style="position:absolute;left:5.00px;top:626.25px" class="cls_003"><span class="cls_003">Setting </span><span class="cls_010">monitoring</span><span class="cls_003"> to </span><span class="cls_010">false</span><span class="cls_003"> ensures that the </span><span class="cls_010">area_enter()</span><span class="cls_003"> signal won't be emitted if the player touches the</span></div>
<div style="position:absolute;left:5.00px;top:644.25px" class="cls_003"><span class="cls_003">coin during the tween animation.</span></div>
<div style="position:absolute;left:5.00px;top:677.25px" class="cls_003"><span class="cls_003">Finally, the coin should be deleted when the animation finishes, so connect the </span><span class="cls_010">Tween</span><span class="cls_003"> node's</span></div>
<div style="position:absolute;left:5.00px;top:695.25px" class="cls_010"><span class="cls_010">tween_completed()</span><span class="cls_003"> signal:</span></div>
<div style="position:absolute;left:19.99px;top:729.75px" class="cls_010"><span class="cls_010">func _on_Tween_tween_completed(object, key):</span></div>
<div style="position:absolute;left:40.99px;top:741.00px" class="cls_010"><span class="cls_010">queue_free()</span></div>
<div style="position:absolute;left:5.00px;top:765.75px" class="cls_003"><span class="cls_003">Now, when you run the game, you should see the coins growing larger when they're picked up. This is</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:77794px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background100.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:3.31px" class="cls_003"><span class="cls_003">good, but tweens are even more effective when applied to multiple properties at once. You can add</span></div>
<div style="position:absolute;left:5.00px;top:21.31px" class="cls_003"><span class="cls_003">another </span><span class="cls_010">interpolate_property()</span><span class="cls_003">, this time to change the sprite's opacity. This is done by altering the</span></div>
<div style="position:absolute;left:5.00px;top:39.31px" class="cls_010"><span class="cls_010">modulate</span><span class="cls_003"> property, which is a </span><span class="cls_010">Color</span><span class="cls_003"> object, and changing its alpha channel from </span><span class="cls_010">1</span><span class="cls_003"> (opaque) to </span><span class="cls_010">0</span></div>
<div style="position:absolute;left:5.00px;top:57.00px" class="cls_003"><span class="cls_003">(transparent). Refer to the following code:</span></div>
<div style="position:absolute;left:19.99px;top:91.50px" class="cls_010"><span class="cls_010">$Tween.interpolate_property($AnimatedSprite, 'modulate',</span></div>
<div style="position:absolute;left:166.93px;top:102.75px" class="cls_010"><span class="cls_010">Color(1, 1, 1, 1),</span></div>
<div style="position:absolute;left:166.93px;top:114.00px" class="cls_010"><span class="cls_010">Color(1, 1, 1, 0), 0.3,</span></div>
<div style="position:absolute;left:166.93px;top:125.25px" class="cls_010"><span class="cls_010">Tween.TRANS_QUAD,</span></div>
<div style="position:absolute;left:166.93px;top:136.50px" class="cls_010"><span class="cls_010">Tween.EASE_IN_OUT)</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:78596px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background101.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Sound</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Sound is one of the most important but often neglected pieces of game design. Good sound design can</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">add a huge amount of juice to your game for a very small amount of effort. Sounds can give the player</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">feedback, connect them emotionally to the characters, or even be a part of the gameplay.</span></div>
<div style="position:absolute;left:5.00px;top:148.50px" class="cls_003"><span class="cls_003">For this game, you're going to add three sound effects. In the </span><span class="cls_010">Main</span><span class="cls_003"> scene, add three</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_010"><span class="cls_010">AudioStreamPlayer</span><span class="cls_003"> nodes and name them </span><span class="cls_010">CoinSound</span><span class="cls_003">, </span><span class="cls_010">LevelSound</span><span class="cls_003">, and </span><span class="cls_010">EndSound</span><span class="cls_003">. Drag each sound from the </span><span class="cls_010">audio</span></div>
<div style="position:absolute;left:5.00px;top:184.50px" class="cls_003"><span class="cls_003">folder (you can find it under </span><span class="cls_010">assets</span><span class="cls_003"> in the FileSystem dock) into the corresponding Stream property of</span></div>
<div style="position:absolute;left:5.00px;top:202.50px" class="cls_003"><span class="cls_003">each node.</span></div>
<div style="position:absolute;left:5.00px;top:235.50px" class="cls_003"><span class="cls_003">To play a sound, you call the </span><span class="cls_010">play()</span><span class="cls_003"> function on it. Add </span><span class="cls_010">$CoinSound.play()</span><span class="cls_003"> to the </span><span class="cls_010">_on_Player_pickup()</span></div>
<div style="position:absolute;left:5.00px;top:253.50px" class="cls_003"><span class="cls_003">function, </span><span class="cls_010">$EndSound.play()</span><span class="cls_003"> to the </span><span class="cls_010">game_over()</span><span class="cls_003"> function, and </span><span class="cls_010">$LevelSound.play()</span><span class="cls_003"> to the </span><span class="cls_010">spawn_coins()</span><span class="cls_003"> function.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:79398px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background102.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Powerups</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">There are many possibilities for objects that give the player a small advantage or powerup. In this</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">section, you'll add a powerup item that gives the player a small time bonus when collected. It will</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">appear occasionally for a short time, then disappear.</span></div>
<div style="position:absolute;left:5.00px;top:148.50px" class="cls_003"><span class="cls_003">The new scene will be very similar to the </span><span class="cls_010">Coin</span><span class="cls_003"> scene you already created, so click on your </span><span class="cls_010">Coin</span><span class="cls_003"> scene</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">and choose Scene | Save Scene As and save it as </span><span class="cls_010">Powerup.tscn</span><span class="cls_003">. Change the name of the root node to</span></div>
<div style="position:absolute;left:5.00px;top:193.50px" class="cls_003"><span class="cls_003">Powerup and remove the script by clicking the clear script button:</span></div>
<div style="position:absolute;left:423.33px;top:193.50px" class="cls_003"><span class="cls_003">. You should also disconnect</span></div>
<div style="position:absolute;left:5.00px;top:211.50px" class="cls_003"><span class="cls_003">the </span><span class="cls_010">area_entered</span><span class="cls_003"> signal (you'll reconnect it later). In the Groups tab, remove the coins group by clicking</span></div>
<div style="position:absolute;left:5.00px;top:229.50px" class="cls_003"><span class="cls_003">the delete button (it looks like a trash can) and adding it to a new group called </span><span class="cls_010">powerups</span><span class="cls_003"> instead.</span></div>
<div style="position:absolute;left:5.00px;top:262.50px" class="cls_003"><span class="cls_003">In the </span><span class="cls_010">AnimatedSprite</span><span class="cls_003">, change the images from the coin to the powerup, which you can find in the</span></div>
<div style="position:absolute;left:5.00px;top:280.50px" class="cls_010"><span class="cls_010">res://assets/pow/</span><span class="cls_003"> folder.</span></div>
<div style="position:absolute;left:5.00px;top:313.50px" class="cls_003"><span class="cls_003">Click to add a new script and copy the code from the </span><span class="cls_010">Coin.gd</span><span class="cls_003"> script. Change the name</span></div>
<div style="position:absolute;left:5.00px;top:331.50px" class="cls_003"><span class="cls_003">of </span><span class="cls_010">_on_Coin_area_entered</span><span class="cls_003"> to </span><span class="cls_010">_on_Powerup_area_entered</span><span class="cls_003"> and connect the </span><span class="cls_010">area_entered</span><span class="cls_003"> signal to it again.</span></div>
<div style="position:absolute;left:5.00px;top:349.50px" class="cls_003"><span class="cls_003">Remember, this function name will automatically be chosen by the signal connect window.</span></div>
<div style="position:absolute;left:5.00px;top:382.50px" class="cls_003"><span class="cls_003">Next, add a </span><span class="cls_010">Timer</span><span class="cls_003"> node named </span><span class="cls_010">Lifetime</span><span class="cls_003">. This will limit the amount of time the object remains on the</span></div>
<div style="position:absolute;left:5.00px;top:400.50px" class="cls_003"><span class="cls_003">screen. Set its Wait Time to </span><span class="cls_010">2</span><span class="cls_003"> and both One Shot and Autostart to </span><span class="cls_010">On</span><span class="cls_003">. Connect its timeout signal so that</span></div>
<div style="position:absolute;left:5.00px;top:418.50px" class="cls_003"><span class="cls_003">it can be removed at the end of the time period:</span></div>
<div style="position:absolute;left:19.99px;top:453.00px" class="cls_010"><span class="cls_010">func _on_Lifetime_timeout():</span></div>
<div style="position:absolute;left:40.99px;top:464.25px" class="cls_010"><span class="cls_010">queue_free()</span></div>
<div style="position:absolute;left:5.00px;top:489.00px" class="cls_003"><span class="cls_003">Now, go to your Main scene and add another </span><span class="cls_010">Timer</span><span class="cls_003"> node called </span><span class="cls_010">PowerupTimer</span><span class="cls_003">. Set its One Shot property</span></div>
<div style="position:absolute;left:5.00px;top:507.00px" class="cls_003"><span class="cls_003">to On. There is also a </span><span class="cls_010">Powerup.wav</span><span class="cls_003"> sound in the </span><span class="cls_010">audio</span><span class="cls_003"> folder you can add with another </span><span class="cls_010">AudioStreamPlayer</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:540.00px" class="cls_003"><span class="cls_003">Connect the </span><span class="cls_010">timeout</span><span class="cls_003"> signal and add the following code to spawn a </span><span class="cls_010">Powerup</span><span class="cls_003">:</span></div>
<div style="position:absolute;left:19.99px;top:574.50px" class="cls_010"><span class="cls_010">func _on_PowerupTimer_timeout():</span></div>
<div style="position:absolute;left:40.99px;top:585.75px" class="cls_010"><span class="cls_010">var p = Powerup.instance()</span></div>
<div style="position:absolute;left:40.99px;top:597.00px" class="cls_010"><span class="cls_010">add_child(p)</span></div>
<div style="position:absolute;left:40.99px;top:608.25px" class="cls_010"><span class="cls_010">p.screensize = screensize</span></div>
<div style="position:absolute;left:40.99px;top:619.50px" class="cls_010"><span class="cls_010">p.position = Vector2(rand_range(0, screensize.x),</span></div>
<div style="position:absolute;left:151.19px;top:630.75px" class="cls_010"><span class="cls_010">rand_range(0, screensize.y))</span></div>
<div style="position:absolute;left:5.00px;top:655.50px" class="cls_003"><span class="cls_003">The </span><span class="cls_010">Powerup</span><span class="cls_003"> scene needs to be linked by adding a variable, then dragging the scene into the property in</span></div>
<div style="position:absolute;left:5.00px;top:673.50px" class="cls_003"><span class="cls_003">the Inspector, as you did earlier with the </span><span class="cls_010">Coin</span><span class="cls_003"> scene:</span></div>
<div style="position:absolute;left:19.99px;top:708.00px" class="cls_010"><span class="cls_010">export (PackedScene) var Powerup</span></div>
<div style="position:absolute;left:5.00px;top:732.75px" class="cls_003"><span class="cls_003">The powerups should appear unpredictably, so the wait time of the </span><span class="cls_010">PowerupTimer</span><span class="cls_003"> needs to be set</span></div>
<div style="position:absolute;left:5.00px;top:750.75px" class="cls_003"><span class="cls_003">whenever you begin a new level. Add this to the </span><span class="cls_010">_process()</span><span class="cls_003"> function after the new coins are spawned</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:80200px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background103.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:3.31px" class="cls_003"><span class="cls_003">with </span><span class="cls_010">spawn_coins()</span><span class="cls_003">:</span></div>
<div style="position:absolute;left:19.99px;top:37.50px" class="cls_010"><span class="cls_010">$PowerupTimer.wait_time = rand_range(5, 10)</span></div>
<div style="position:absolute;left:19.99px;top:48.75px" class="cls_010"><span class="cls_010">$PowerupTimer.start()</span></div>
<div style="position:absolute;left:5.00px;top:73.50px" class="cls_003"><span class="cls_003">Now that you will have powerups appearing, the last step is to give the player some bonus time when</span></div>
<div style="position:absolute;left:5.00px;top:91.50px" class="cls_003"><span class="cls_003">one is collected. Currently, the player script assumes anything it runs into is either a coin or an</span></div>
<div style="position:absolute;left:5.00px;top:109.50px" class="cls_003"><span class="cls_003">obstacle. Change the code in </span><span class="cls_010">Player.gd</span><span class="cls_003"> to check for what kind of object has been hit:</span></div>
<div style="position:absolute;left:19.99px;top:144.00px" class="cls_010"><span class="cls_010">func _on_Player_area_entered( area ):</span></div>
<div style="position:absolute;left:40.99px;top:155.25px" class="cls_010"><span class="cls_010">if area.is_in_group("coins"):</span></div>
<div style="position:absolute;left:61.98px;top:166.50px" class="cls_010"><span class="cls_010">area.pickup()</span></div>
<div style="position:absolute;left:61.98px;top:177.75px" class="cls_010"><span class="cls_010">emit_signal("pickup", "coin")</span></div>
<div style="position:absolute;left:40.99px;top:189.00px" class="cls_010"><span class="cls_010">if area.is_in_group("powerups"):</span></div>
<div style="position:absolute;left:61.98px;top:200.25px" class="cls_010"><span class="cls_010">area.pickup()</span></div>
<div style="position:absolute;left:61.98px;top:211.50px" class="cls_010"><span class="cls_010">emit_signal("pickup", "powerup")</span></div>
<div style="position:absolute;left:40.99px;top:222.75px" class="cls_010"><span class="cls_010">if area.is_in_group("obstacles"):</span></div>
<div style="position:absolute;left:61.98px;top:234.00px" class="cls_010"><span class="cls_010">emit_signal("hurt")</span></div>
<div style="position:absolute;left:61.98px;top:245.25px" class="cls_010"><span class="cls_010">die()</span></div>
<div style="position:absolute;left:5.00px;top:270.00px" class="cls_003"><span class="cls_003">Note that now you're emitting the pickup signal with an additional argument naming the type of object.</span></div>
<div style="position:absolute;left:5.00px;top:288.00px" class="cls_003"><span class="cls_003">The corresponding function in </span><span class="cls_010">Main.gd</span><span class="cls_003"> can now be changed to accept that argument and use the </span><span class="cls_010">match</span></div>
<div style="position:absolute;left:5.00px;top:306.00px" class="cls_003"><span class="cls_003">statement to decide what action to take:</span></div>
<div style="position:absolute;left:19.99px;top:340.50px" class="cls_010"><span class="cls_010">func _on_Player_pickup(type):</span></div>
<div style="position:absolute;left:40.99px;top:351.75px" class="cls_010"><span class="cls_010">match type:</span></div>
<div style="position:absolute;left:61.98px;top:363.00px" class="cls_010"><span class="cls_010">"coin":</span></div>
<div style="position:absolute;left:82.97px;top:374.25px" class="cls_010"><span class="cls_010">score += 1</span></div>
<div style="position:absolute;left:82.97px;top:385.50px" class="cls_010"><span class="cls_010">$CoinSound.play()</span></div>
<div style="position:absolute;left:82.97px;top:396.75px" class="cls_010"><span class="cls_010">$HUD.update_score(score)</span></div>
<div style="position:absolute;left:61.98px;top:408.00px" class="cls_010"><span class="cls_010">"powerup":</span></div>
<div style="position:absolute;left:82.97px;top:419.25px" class="cls_010"><span class="cls_010">time_left += 5</span></div>
<div style="position:absolute;left:82.97px;top:430.50px" class="cls_010"><span class="cls_010">$PowerupSound.play()</span></div>
<div style="position:absolute;left:82.97px;top:441.75px" class="cls_010"><span class="cls_010">$HUD.update_timer(time_left)</span></div>
<div style="position:absolute;left:5.00px;top:466.50px" class="cls_003"><span class="cls_003">The </span><span class="cls_010">match</span><span class="cls_003"> statement is a useful alternative to </span><span class="cls_010">if</span><span class="cls_003"> statements, especially when you have a large number of</span></div>
<div style="position:absolute;left:5.00px;top:484.50px" class="cls_003"><span class="cls_003">possible values to test.</span></div>
<div style="position:absolute;left:5.00px;top:517.50px" class="cls_003"><span class="cls_003">Try running the game and collecting the powerup. Make sure the sound plays and the timer increases</span></div>
<div style="position:absolute;left:5.00px;top:535.50px" class="cls_003"><span class="cls_003">by five seconds.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:81002px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background104.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Coin animation</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">When you created the </span><span class="cls_010">Coin</span><span class="cls_003"> scene, you added an </span><span class="cls_010">AnimatedSprite</span><span class="cls_003">, but it isn't playing yet. The coin</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">animation displays a </span><span class="cls_012">shimmer</span><span class="cls_003"> effect traveling across the face of the coin. If all the coins display this</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">at the same time, it will look too regular, so each coin needs a small random delay in its animation.</span></div>
<div style="position:absolute;left:5.00px;top:148.50px" class="cls_003"><span class="cls_003">First, click on the </span><span class="cls_010">AnimatedSprite</span><span class="cls_003"> and then on the </span><span class="cls_012">Frames</span><span class="cls_003"> resource. Make sure Loop is set to Off and</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">that Speed is set to </span><span class="cls_010">12</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:199.50px" class="cls_003"><span class="cls_003">Add a </span><span class="cls_010">Timer</span><span class="cls_003"> node to the </span><span class="cls_010">Coin</span><span class="cls_003"> scene, and add this code to </span><span class="cls_010">_ready()</span><span class="cls_003">:</span></div>
<div style="position:absolute;left:19.99px;top:234.00px" class="cls_010"><span class="cls_010">$Timer.wait_time = rand_range(3, 8)</span></div>
<div style="position:absolute;left:19.99px;top:245.25px" class="cls_010"><span class="cls_010">$Timer.start()</span></div>
<div style="position:absolute;left:5.00px;top:270.00px" class="cls_003"><span class="cls_003">Now, connect the </span><span class="cls_010">timeout()</span><span class="cls_003"> signal from the </span><span class="cls_010">Timer</span><span class="cls_003"> and add this:</span></div>
<div style="position:absolute;left:19.99px;top:304.50px" class="cls_010"><span class="cls_010">func _on_Timer_timeout():</span></div>
<div style="position:absolute;left:40.99px;top:315.75px" class="cls_010"><span class="cls_010">$AnimatedSprite.frame = 0</span></div>
<div style="position:absolute;left:40.99px;top:327.00px" class="cls_010"><span class="cls_010">$AnimatedSprite.play()</span></div>
<div style="position:absolute;left:5.00px;top:351.75px" class="cls_003"><span class="cls_003">Try running the game and watching for the coins to animate. It's a nice visual effect for a very small</span></div>
<div style="position:absolute;left:5.00px;top:369.75px" class="cls_003"><span class="cls_003">amount of effort. You'll notice a lot of effects like this in professional games. Though very subtle, the</span></div>
<div style="position:absolute;left:5.00px;top:387.75px" class="cls_003"><span class="cls_003">visual appeal makes for a much more pleasing experience.</span></div>
<div style="position:absolute;left:5.00px;top:420.75px" class="cls_003"><span class="cls_003">The preceding </span><span class="cls_010">Powerup</span><span class="cls_003"> object has a similar animation that you can add in the same manner.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:81804px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background105.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Obstacles</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Finally, the game can be made a bit more challenging by introducing an obstacle that the player must</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">avoid. Touching the obstacle will end the game.</span></div>
<div style="position:absolute;left:5.00px;top:130.50px" class="cls_003"><span class="cls_003">Create a new scene for the cactus and add the following nodes:</span></div>
<div style="position:absolute;left:34.99px;top:162.75px" class="cls_010"><span class="cls_010">Area2D</span><span class="cls_003"> (named </span><span class="cls_010">Cactus</span><span class="cls_003">)</span></div>
<div style="position:absolute;left:34.99px;top:186.00px" class="cls_010"><span class="cls_010">Sprite</span></div>
<div style="position:absolute;left:34.99px;top:203.25px" class="cls_010"><span class="cls_010">CollisionShape2D</span></div>
<div style="position:absolute;left:5.00px;top:230.25px" class="cls_003"><span class="cls_003">Drag the cactus texture from the FileSystem dock to the Texture property of the </span><span class="cls_010">Sprite</span><span class="cls_003">. Add a</span></div>
<div style="position:absolute;left:5.00px;top:248.25px" class="cls_010"><span class="cls_010">RectangleShape2D</span><span class="cls_003"> to the collision shape and size it so that it covers the image. Remember when you</span></div>
<div style="position:absolute;left:5.00px;top:266.25px" class="cls_003"><span class="cls_003">added </span><span class="cls_010">if area.is_in_group("obstacles")</span><span class="cls_003"> to the player script? Add the </span><span class="cls_010">Cactus</span><span class="cls_003"> body to the </span><span class="cls_010">obstacles</span><span class="cls_003"> group</span></div>
<div style="position:absolute;left:5.00px;top:284.25px" class="cls_003"><span class="cls_003">using the Node tab (next to Inspector).</span></div>
<div style="position:absolute;left:5.00px;top:317.25px" class="cls_003"><span class="cls_003">Now, add a </span><span class="cls_010">Cactus</span><span class="cls_003"> instance to the </span><span class="cls_010">Main</span><span class="cls_003"> scene and move it to a location in the upper half of the screen</span></div>
<div style="position:absolute;left:5.00px;top:335.25px" class="cls_003"><span class="cls_003">(away from where the player spawns). Play the game and see what happens when you run into the</span></div>
<div style="position:absolute;left:5.00px;top:353.25px" class="cls_003"><span class="cls_003">cactus.</span></div>
<div style="position:absolute;left:5.00px;top:386.25px" class="cls_003"><span class="cls_003">You may have spotted a problem: coins can spawn behind the cactus, making them impossible to pick</span></div>
<div style="position:absolute;left:5.00px;top:404.25px" class="cls_003"><span class="cls_003">up. When the coin is placed, it needs to move if it detects that it's overlapping the obstacle. Connect</span></div>
<div style="position:absolute;left:5.00px;top:422.25px" class="cls_003"><span class="cls_003">the coin's </span><span class="cls_010">area_entered()</span><span class="cls_003"> signal and add the following:</span></div>
<div style="position:absolute;left:19.99px;top:456.75px" class="cls_010"><span class="cls_010">func _on_Coin_area_entered( area ):</span></div>
<div style="position:absolute;left:40.99px;top:468.00px" class="cls_010"><span class="cls_010">if area.is_in_group("obstacles"):</span></div>
<div style="position:absolute;left:61.98px;top:479.25px" class="cls_010"><span class="cls_010">position = Vector2(rand_range(0, screensize.x), rand_range(0, screensize.y))</span></div>
<div style="position:absolute;left:5.00px;top:504.00px" class="cls_003"><span class="cls_003">If you've added the preceding </span><span class="cls_010">Powerup</span><span class="cls_003"> object, you'll need to do the same for its </span><span class="cls_010">area_entered</span><span class="cls_003"> signal.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:82606px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background106.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Summary</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">In this chapter, you learned the basics of Godot Engine by creating a basic 2D game. You set up the</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">project and created multiple scenes, worked with sprites and animations, captured user input,</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">used </span><span class="cls_012">signals</span><span class="cls_003"> to communicate with events, and created a UI using </span><span class="cls_002">Control</span><span class="cls_003"> nodes. The things you</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">learned here are important skills that you'll use in any Godot project.</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">Before moving on to the next chapter, look through the project. Do you understand what each node is</span></div>
<div style="position:absolute;left:5.00px;top:184.50px" class="cls_003"><span class="cls_003">doing? Are there any bits of code that you don't understand? If so, go back and review that section of</span></div>
<div style="position:absolute;left:5.00px;top:202.50px" class="cls_003"><span class="cls_003">the chapter.</span></div>
<div style="position:absolute;left:5.00px;top:235.50px" class="cls_003"><span class="cls_003">Also, feel free to experiment with the game and change things around. One of the best ways to get a</span></div>
<div style="position:absolute;left:5.00px;top:253.50px" class="cls_003"><span class="cls_003">good feel for what different parts of the game are doing is to change them and see what happens.</span></div>
<div style="position:absolute;left:5.00px;top:286.50px" class="cls_003"><span class="cls_003">In the next chapter, you'll explore more of Godot's features and learn how to use more node types by</span></div>
<div style="position:absolute;left:5.00px;top:304.50px" class="cls_003"><span class="cls_003">building a more complex game.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:83408px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background107.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Escape the Maze</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">In the previous chapter, you learned how Godot's node system works, allowing you to build a</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">complex scene out of smaller building blocks, each providing different functionalities for your game's</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">objects. This process will continue as you move up to larger and more complex projects. However,</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">sometimes you'll find yourself duplicating the same nodes and/or code in more than one different</span></div>
<div style="position:absolute;left:5.00px;top:151.50px" class="cls_003"><span class="cls_003">object, and this project will introduce some techniques for reducing the amount of repeated code.</span></div>
<div style="position:absolute;left:5.00px;top:184.50px" class="cls_003"><span class="cls_003">In this chapter, you'll build a game called </span><span class="cls_002">Escape the Maze</span><span class="cls_003">. In this game, you will be trying to</span></div>
<div style="position:absolute;left:5.00px;top:202.50px" class="cls_003"><span class="cls_003">navigate a maze to find the exit while avoiding the roaming enemies:</span></div>
<div style="position:absolute;left:5.00px;top:453.75px" class="cls_003"><span class="cls_003">You will learn about the following key topics in this project:</span></div>
<div style="position:absolute;left:34.99px;top:486.00px" class="cls_003"><span class="cls_003">Inheritance</span></div>
<div style="position:absolute;left:34.99px;top:503.25px" class="cls_003"><span class="cls_003">Grid-based movement</span></div>
<div style="position:absolute;left:34.99px;top:520.50px" class="cls_003"><span class="cls_003">Spritesheet animation</span></div>
<div style="position:absolute;left:34.99px;top:537.75px" class="cls_003"><span class="cls_003">Using TileMaps for level design</span></div>
<div style="position:absolute;left:34.99px;top:555.00px" class="cls_003"><span class="cls_003">Transitioning between scenes</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:84210px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background108.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Project setup</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Create a new project and download the project assets from </span><span class="cls_009">https://github.com/PacktPublishing/Godot-Game-E</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_009"><span class="cls_009">ngine-Projects/releases</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:130.50px" class="cls_003"><span class="cls_003">As you've seen previously, Godot, by default, includes a number of input actions mapped to various</span></div>
<div style="position:absolute;left:5.00px;top:148.50px" class="cls_003"><span class="cls_003">keyboard inputs. For example, you used </span><span class="cls_010">ui_left</span><span class="cls_003"> and </span><span class="cls_010">ui_right</span><span class="cls_003"> for arrow key movement in the first</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">project. Often, however, you need a different input from the defaults provided, or you'd like to</span></div>
<div style="position:absolute;left:5.00px;top:184.50px" class="cls_003"><span class="cls_003">customize the actions' names. You might also wish to add actions for mouse or gamepad inputs. You</span></div>
<div style="position:absolute;left:5.00px;top:202.50px" class="cls_003"><span class="cls_003">can do this in the Project Settings window.</span></div>
<div style="position:absolute;left:5.00px;top:235.50px" class="cls_003"><span class="cls_003">Click on the Input Map tab and add four new input actions (left, right, up, and down) by typing the</span></div>
<div style="position:absolute;left:5.00px;top:253.50px" class="cls_003"><span class="cls_003">names into the Action: box and clicking Add. Then, for each new action, click the + button to add a</span></div>
<div style="position:absolute;left:5.00px;top:271.50px" class="cls_003"><span class="cls_003">Key action and choose the corresponding arrow key. You can also add WASD controls, if you wish:</span></div>
<div style="position:absolute;left:5.00px;top:541.50px" class="cls_003"><span class="cls_003">This game will have a variety of objects on the screen. Some of them should detect collisions (the</span></div>
<div style="position:absolute;left:5.00px;top:559.50px" class="cls_003"><span class="cls_003">player against the walls, for example), while others should ignore one another (like the enemies</span></div>
<div style="position:absolute;left:5.00px;top:577.50px" class="cls_003"><span class="cls_003">versus coins). You can solve this by setting the objects' physics layer and physics layer mask</span></div>
<div style="position:absolute;left:5.00px;top:595.50px" class="cls_003"><span class="cls_003">properties. To make these layers easier to work with, Godot allows you to give the game's physics</span></div>
<div style="position:absolute;left:5.00px;top:613.50px" class="cls_003"><span class="cls_003">layers custom names.</span></div>
<div style="position:absolute;left:5.00px;top:646.50px" class="cls_003"><span class="cls_003">Click on the General tab and find the Layer Names/2D Physics section. Name the first four layers as</span></div>
<div style="position:absolute;left:5.00px;top:664.50px" class="cls_003"><span class="cls_003">follows:</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:85012px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background109.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:274.50px" class="cls_003"><span class="cls_003">You'll see how the collision layer system works with the various objects in the game later in the</span></div>
<div style="position:absolute;left:5.00px;top:292.50px" class="cls_003"><span class="cls_003">project.</span></div>
<div style="position:absolute;left:5.00px;top:325.50px" class="cls_003"><span class="cls_003">Next, in the Display/Window section, set the Mode to viewport and the Aspect to keep. This will</span></div>
<div style="position:absolute;left:5.00px;top:343.50px" class="cls_003"><span class="cls_003">enable you to resize the game window while keeping the display's proportions unchanged. Refer to</span></div>
<div style="position:absolute;left:5.00px;top:361.50px" class="cls_003"><span class="cls_003">the following screenshot:</span></div>
<div style="position:absolute;left:5.00px;top:657.00px" class="cls_003"><span class="cls_003">Finally, in the Rendering/Quality section, set Use Pixel Snap to On. This setting is useful, especially</span></div>
<div style="position:absolute;left:5.00px;top:675.00px" class="cls_003"><span class="cls_003">for pixel art-styled games, as it ensures that all objects are drawn at whole-number pixel values. Note</span></div>
<div style="position:absolute;left:5.00px;top:693.00px" class="cls_003"><span class="cls_003">that this does not affect movement, physics, or other properties; it only applies to the rendering of</span></div>
<div style="position:absolute;left:5.00px;top:711.00px" class="cls_003"><span class="cls_003">objects. Refer to the following screenshot:</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:85814px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background110.jpg" width=612 height=792></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:86616px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background111.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Project organization</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">As your projects become larger and more involved, you'll find that saving all of your scenes and</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">scripts in the same folder becomes unwieldy.</span></div>
<div style="position:absolute;left:5.00px;top:130.50px" class="cls_003"><span class="cls_003">A common response to this by Godot beginners is to make a </span><span class="cls_010">scenes</span><span class="cls_003"> folder and a </span><span class="cls_010">scripts</span><span class="cls_003"> folder, and to</span></div>
<div style="position:absolute;left:5.00px;top:148.50px" class="cls_003"><span class="cls_003">save each type of file in the respective folder. This isn't very effective. Soon, you find yourself</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">hunting through the </span><span class="cls_010">scripts</span><span class="cls_003"> folder, looking for the script you need because it's jumbled up with all the</span></div>
<div style="position:absolute;left:5.00px;top:184.50px" class="cls_003"><span class="cls_003">other scripts of your game.</span></div>
<div style="position:absolute;left:5.00px;top:217.50px" class="cls_003"><span class="cls_003">A more logical organization is to create a folder for each type of object. A </span><span class="cls_010">player</span><span class="cls_003"> folder, for example,</span></div>
<div style="position:absolute;left:5.00px;top:235.50px" class="cls_003"><span class="cls_003">will hold the player's scene file, script(s), and any other resources that it needs. Organizing your</span></div>
<div style="position:absolute;left:5.00px;top:253.50px" class="cls_003"><span class="cls_003">project in this way is much more scalable and can be extended even further if you have a very large</span></div>
<div style="position:absolute;left:5.00px;top:271.50px" class="cls_003"><span class="cls_003">number of objects. For example, refer to the following screenshot:</span></div>
<div style="position:absolute;left:5.00px;top:512.25px" class="cls_003"><span class="cls_003">Throughout this project, the examples will assume that each new scene type is being saved in a folder</span></div>
<div style="position:absolute;left:5.00px;top:530.25px" class="cls_003"><span class="cls_003">of that type, along with its script. The </span><span class="cls_010">Player.tscn</span><span class="cls_003"> and </span><span class="cls_010">Player.gd</span><span class="cls_003"> files, for example, will be saved in a</span></div>
<div style="position:absolute;left:5.00px;top:548.25px" class="cls_010"><span class="cls_010">player</span><span class="cls_003"> folder.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:87418px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background112.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Inheritance</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">In </span><span class="cls_002">Object-Oriented Programming</span><span class="cls_003"> (</span><span class="cls_002">OOP</span><span class="cls_003">), inheritance is a powerful tool. Put briefly, you can define</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">a class that </span><span class="cls_012">inherits</span><span class="cls_003"> from another class. An object created using the first class will contain all of the</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">methods and member variables of the master class as well as its own.</span></div>
<div style="position:absolute;left:5.00px;top:148.50px" class="cls_003"><span class="cls_003">Godot is strongly object-oriented, and this gives you the opportunity to use inheritance not just with</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">objects (scripts) but also with scenes, allowing you a great deal of flexibility when designing your</span></div>
<div style="position:absolute;left:5.00px;top:184.50px" class="cls_003"><span class="cls_003">game's architecture. It also removes the need to duplicate code—if two objects need to share a set of</span></div>
<div style="position:absolute;left:5.00px;top:202.50px" class="cls_003"><span class="cls_003">methods and variables, for example, you can create a common script and let both objects inherit from</span></div>
<div style="position:absolute;left:5.00px;top:220.50px" class="cls_003"><span class="cls_003">it. If you make a change to that code, it will apply to both objects.</span></div>
<div style="position:absolute;left:5.00px;top:253.50px" class="cls_003"><span class="cls_003">In this project, the player's character will be controlled by key events, while the mobs will wander</span></div>
<div style="position:absolute;left:5.00px;top:271.50px" class="cls_003"><span class="cls_003">around the maze randomly. However, both types of character need to have a number of properties and</span></div>
<div style="position:absolute;left:5.00px;top:289.50px" class="cls_003"><span class="cls_003">functions in common:</span></div>
<div style="position:absolute;left:34.99px;top:321.75px" class="cls_003"><span class="cls_003">A spritesheet containing the four directional movement animations</span></div>
<div style="position:absolute;left:34.99px;top:339.00px" class="cls_003"><span class="cls_003">An </span><span class="cls_010">AnimationPlayer</span><span class="cls_003"> to play the movement animations</span></div>
<div style="position:absolute;left:34.99px;top:356.25px" class="cls_003"><span class="cls_003">Grid-based movement (the character can only move one full </span><span class="cls_012">tile</span><span class="cls_003"> at a time)</span></div>
<div style="position:absolute;left:34.99px;top:373.50px" class="cls_003"><span class="cls_003">Collision detection (the character can't move through walls)</span></div>
<div style="position:absolute;left:5.00px;top:406.50px" class="cls_003"><span class="cls_003">By using inheritance, you can create a generic </span><span class="cls_010">Character</span><span class="cls_003"> scene containing the nodes that all characters</span></div>
<div style="position:absolute;left:5.00px;top:424.50px" class="cls_003"><span class="cls_003">need. The player and mob scenes can inherit the shared nodes from that scene. Similarly, the actual</span></div>
<div style="position:absolute;left:5.00px;top:442.50px" class="cls_003"><span class="cls_003">movement code (though not the controls) will be identical between player and mob, so they can both</span></div>
<div style="position:absolute;left:5.00px;top:460.50px" class="cls_003"><span class="cls_003">inherit from the same script to handle movement.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:88220px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background113.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Character scene</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Start creating the </span><span class="cls_010">Character</span><span class="cls_003"> scene by adding an </span><span class="cls_010">Area2D</span><span class="cls_003"> and naming it </span><span class="cls_010">Character</span><span class="cls_003">. </span><span class="cls_010">Area2D</span><span class="cls_003"> is a good choice for</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">this type of character because its main function will be to detect overlaps—when it moves onto an</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">item or enemy, for example.</span></div>
<div style="position:absolute;left:5.00px;top:148.50px" class="cls_003"><span class="cls_003">Add the following children:</span></div>
<div style="position:absolute;left:34.99px;top:186.75px" class="cls_010"><span class="cls_010">Sprite</span></div>
<div style="position:absolute;left:34.99px;top:204.00px" class="cls_010"><span class="cls_010">CollisionShape2D</span></div>
<div style="position:absolute;left:34.99px;top:215.25px" class="cls_010"><span class="cls_010">Tween</span><span class="cls_003"> (named </span><span class="cls_010">MoveTween</span><span class="cls_003">)</span></div>
<div style="position:absolute;left:34.99px;top:238.50px" class="cls_010"><span class="cls_010">AnimationPlayer</span></div>
<div style="position:absolute;left:5.00px;top:265.50px" class="cls_003"><span class="cls_003">Leave the </span><span class="cls_010">Sprite</span><span class="cls_003"> without a texture, but in the Inspector, under the Animation section of the </span><span class="cls_010">Sprite</span><span class="cls_003">, set its</span></div>
<div style="position:absolute;left:5.00px;top:283.50px" class="cls_003"><span class="cls_003">Vframes and Hframes properties to </span><span class="cls_010">4</span><span class="cls_003"> and </span><span class="cls_010">5</span><span class="cls_003">, respectively. This tells Godot to slice the texture into a 5</span></div>
<div style="position:absolute;left:5.00px;top:301.50px" class="cls_003"><span class="cls_003">x 4 grid of individual images.</span></div>
<div style="position:absolute;left:5.00px;top:334.50px" class="cls_003"><span class="cls_003">The spritesheets you'll use for the player and the enemy are arranged in exactly this pattern, with each</span></div>
<div style="position:absolute;left:5.00px;top:352.50px" class="cls_003"><span class="cls_003">row containing the animation frames for a single direction of movement:</span></div>
<div style="position:absolute;left:5.00px;top:572.25px" class="cls_003"><span class="cls_003">When a spritesheet has been sliced using the Vframes and Hframes properties, you can use the Frame</span></div>
<div style="position:absolute;left:5.00px;top:590.25px" class="cls_003"><span class="cls_003">property to set which individual frame to use. In the preceding player sheet, the left-facing animation</span></div>
<div style="position:absolute;left:5.00px;top:608.25px" class="cls_003"><span class="cls_003">would use frames 5 through 9 (counting from frame 0 in the upper-left corner). You'll use an</span></div>
<div style="position:absolute;left:5.00px;top:626.25px" class="cls_010"><span class="cls_010">AnimationPlayer</span><span class="cls_003"> to change the Frame property below. Refer to the following screenshot:</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:89022px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background114.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:165.75px" class="cls_003"><span class="cls_003">Next, create a new </span><span class="cls_010">RectangleShape2D</span><span class="cls_003"> in the collision shape's Shape. Click on the new</span></div>
<div style="position:absolute;left:5.00px;top:183.75px" class="cls_003"><span class="cls_003">&lt;RectangleShape2D> and set its Extents property in the Inspector to </span><span class="cls_010">(16, 16)</span><span class="cls_003">. Note that Extents</span></div>
<div style="position:absolute;left:5.00px;top:201.75px" class="cls_003"><span class="cls_003">measures the distance from the center in each direction, so this results in a collision shape that is 32</span></div>
<div style="position:absolute;left:5.00px;top:219.75px" class="cls_003"><span class="cls_003">by 32 pixels.</span></div>
<div style="position:absolute;left:52.98px;top:252.75px" class="cls_008"><span class="cls_008">Because all the characters are drawn to the same scale, we can be confident that the same sized collision shape</span></div>
<div style="position:absolute;left:52.98px;top:266.25px" class="cls_008"><span class="cls_008">will work for all characters. If this isn’t the case with the art you’re using, you can skip setting the collision shape</span></div>
<div style="position:absolute;left:52.98px;top:279.75px" class="cls_008"><span class="cls_008">here and configure it later for the individual inherited scenes.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:89824px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background115.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Animations</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Create four new animations in the </span><span class="cls_010">AnimationPlayer</span><span class="cls_003"> node. Name them to match the four directions you</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">used in the input actions (left, right, up, and down). It's important that the spelling matches here: the</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">names of the input actions must have the same spelling and capitalization as the animation names. If</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">you are inconsistent in naming, it will make things much more difficult when you get to the scripting</span></div>
<div style="position:absolute;left:5.00px;top:151.50px" class="cls_003"><span class="cls_003">stage. Take a look at the following screenshot:</span></div>
<div style="position:absolute;left:5.00px;top:251.25px" class="cls_003"><span class="cls_003">For each animation, set the Length to </span><span class="cls_010">1</span><span class="cls_003"> and the Step to </span><span class="cls_010">0.2</span><span class="cls_003">. These properties are located at the bottom</span></div>
<div style="position:absolute;left:5.00px;top:269.25px" class="cls_003"><span class="cls_003">of the Animation panel:</span></div>
<div style="position:absolute;left:5.00px;top:486.75px" class="cls_003"><span class="cls_003">Starting with the down animation, click on the </span><span class="cls_010">Sprite</span><span class="cls_003"> node and set its Frame property to </span><span class="cls_010">0</span><span class="cls_003">. Click the</span></div>
<div style="position:absolute;left:5.00px;top:504.75px" class="cls_003"><span class="cls_003">key icon next to the Frame property and confirm that you want to add a new track for the Frame</span></div>
<div style="position:absolute;left:5.00px;top:522.75px" class="cls_003"><span class="cls_003">property:</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:90626px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background116.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:3.00px" class="cls_003"><span class="cls_003">The Frame property will automatically be incremented by one and the animation track will be</span></div>
<div style="position:absolute;left:5.00px;top:21.00px" class="cls_003"><span class="cls_003">advanced by one step (0.2 seconds). Click the key again until you've reached frame 4. You should</span></div>
<div style="position:absolute;left:5.00px;top:39.00px" class="cls_003"><span class="cls_003">now have five keyframes on the animation track. If you drag the bar back and forth, you'll see</span></div>
<div style="position:absolute;left:5.00px;top:57.00px" class="cls_003"><span class="cls_003">the Frame property change as you reach each keyframe:</span></div>
<div style="position:absolute;left:5.00px;top:273.00px" class="cls_003"><span class="cls_003">If, for some reason, you find that the frames aren't correct, you can delete any of the keyframes by</span></div>
<div style="position:absolute;left:5.00px;top:291.00px" class="cls_003"><span class="cls_003">clicking on the dot and pressing </span><span class="cls_012">Delete</span><span class="cls_003"> on your keyboard, or right-clicking on the dot and choosing</span></div>
<div style="position:absolute;left:5.00px;top:309.00px" class="cls_003"><span class="cls_003">Remove Selection. Remember, whatever value you set Frame to, that will be the value of the</span></div>
<div style="position:absolute;left:5.00px;top:327.00px" class="cls_003"><span class="cls_003">keyframe when you press the Add Keyframe button. You can also click and drag keyframes to change</span></div>
<div style="position:absolute;left:5.00px;top:345.00px" class="cls_003"><span class="cls_003">their order in the timeline.</span></div>
<div style="position:absolute;left:5.00px;top:378.00px" class="cls_003"><span class="cls_003">Repeat the process for the other animations, using the following table to guide you on which</span></div>
<div style="position:absolute;left:5.00px;top:396.00px" class="cls_003"><span class="cls_003">keyframes to use for each direction:</span></div>
<div style="position:absolute;left:14.75px;top:434.25px" class="cls_002"><span class="cls_002">Animation</span></div>
<div style="position:absolute;left:268.89px;top:434.25px" class="cls_002"><span class="cls_002">Frames</span></div>
<div style="position:absolute;left:14.75px;top:461.25px" class="cls_003"><span class="cls_003">Down</span></div>
<div style="position:absolute;left:268.89px;top:466.50px" class="cls_010"><span class="cls_010">0, 1, 2, 3, 4</span></div>
<div style="position:absolute;left:14.75px;top:488.25px" class="cls_003"><span class="cls_003">Left</span></div>
<div style="position:absolute;left:268.89px;top:493.50px" class="cls_010"><span class="cls_010">5, 6, 7, 8, 9</span></div>
<div style="position:absolute;left:14.75px;top:515.25px" class="cls_003"><span class="cls_003">Right</span></div>
<div style="position:absolute;left:268.89px;top:520.50px" class="cls_010"><span class="cls_010">10, 11, 12, 13, 14</span></div>
<div style="position:absolute;left:14.75px;top:542.25px" class="cls_003"><span class="cls_003">Up</span></div>
<div style="position:absolute;left:268.89px;top:547.50px" class="cls_010"><span class="cls_010">15, 16, 17, 18, 19</span></div>
<div style="position:absolute;left:5.00px;top:613.50px" class="cls_003"><span class="cls_003">As long as the spritesheet for a character follows the same 5 x 4 arrangement, this </span><span class="cls_010">AnimationPlayer</span></div>
<div style="position:absolute;left:5.00px;top:631.50px" class="cls_003"><span class="cls_003">configuration will work, and you won't need to create separate animations for each character. In</span></div>
<div style="position:absolute;left:5.00px;top:649.50px" class="cls_003"><span class="cls_003">larger projects, it can be a huge time-saver to create all your spritesheet animations while following a</span></div>
<div style="position:absolute;left:5.00px;top:667.50px" class="cls_003"><span class="cls_003">common pattern.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:91428px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background117.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Collision detection</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Because the characters are moving on a grid, they need to either move the full distance to the next tile</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">or not at all. This means that, before moving, the character needs to check to see if the move is</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">possible. One way to test if an adjacent square has anything in it is by using a </span><span class="cls_012">raycast</span><span class="cls_003">. </span><span class="cls_002">Raycasting</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">means extending a ray from the character's position to a given destination. If the ray encounters any</span></div>
<div style="position:absolute;left:5.00px;top:151.50px" class="cls_003"><span class="cls_003">object along the way, it will report that contact. By adding four rays to the character, it can </span><span class="cls_012">look</span><span class="cls_003"> at the</span></div>
<div style="position:absolute;left:5.00px;top:169.50px" class="cls_003"><span class="cls_003">squares around it to see if they are unoccupied.</span></div>
<div style="position:absolute;left:5.00px;top:202.50px" class="cls_003"><span class="cls_003">Add four </span><span class="cls_010">RayCast2D</span><span class="cls_003"> nodes and set their names and </span><span class="cls_002">Cast To</span><span class="cls_003"> properties as follows:</span></div>
<div style="position:absolute;left:14.75px;top:240.75px" class="cls_002"><span class="cls_002">Name</span></div>
<div style="position:absolute;left:379.09px;top:240.75px" class="cls_002"><span class="cls_002">Cast To</span></div>
<div style="position:absolute;left:14.75px;top:267.75px" class="cls_003"><span class="cls_003">RayCastRight</span></div>
<div style="position:absolute;left:379.09px;top:273.00px" class="cls_010"><span class="cls_010">(64, 0)</span></div>
<div style="position:absolute;left:14.75px;top:294.75px" class="cls_003"><span class="cls_003">RayCastLeft</span></div>
<div style="position:absolute;left:379.09px;top:300.00px" class="cls_010"><span class="cls_010">(-64, 0)</span></div>
<div style="position:absolute;left:14.75px;top:321.75px" class="cls_003"><span class="cls_003">RayCastDown</span></div>
<div style="position:absolute;left:379.09px;top:327.00px" class="cls_010"><span class="cls_010">(0, 64)</span></div>
<div style="position:absolute;left:14.75px;top:348.75px" class="cls_003"><span class="cls_003">RayCastUp</span></div>
<div style="position:absolute;left:379.09px;top:354.00px" class="cls_010"><span class="cls_010">(0, -64)</span></div>
<div style="position:absolute;left:5.00px;top:387.00px" class="cls_003"><span class="cls_003">Make sure to set the Enabled property on each one (</span><span class="cls_010">RayCast2D</span><span class="cls_003"> options are disabled by default). Your</span></div>
<div style="position:absolute;left:5.00px;top:405.00px" class="cls_003"><span class="cls_003">final node setup should look like this:</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:92230px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background118.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Character script</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Now, add a script to the </span><span class="cls_010">Character</span><span class="cls_003"> node (make sure you've saved the scene first, and the script will</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">automatically be named </span><span class="cls_010">Character.gd</span><span class="cls_003">). First, define the class variables:</span></div>
<div style="position:absolute;left:19.99px;top:132.00px" class="cls_010"><span class="cls_010">extends Area2D</span></div>
<div style="position:absolute;left:19.99px;top:154.50px" class="cls_010"><span class="cls_010">export (int) var speed</span></div>
<div style="position:absolute;left:19.99px;top:177.00px" class="cls_010"><span class="cls_010">var tile_size = 64</span></div>
<div style="position:absolute;left:19.99px;top:188.25px" class="cls_010"><span class="cls_010">var can_move = true</span></div>
<div style="position:absolute;left:19.99px;top:199.50px" class="cls_010"><span class="cls_010">var facing = 'right'</span></div>
<div style="position:absolute;left:19.99px;top:210.75px" class="cls_010"><span class="cls_010">var moves = {'right': Vector2(1, 0),</span></div>
<div style="position:absolute;left:88.22px;top:222.00px" class="cls_010"><span class="cls_010">'left': Vector2(-1, 0),</span></div>
<div style="position:absolute;left:88.22px;top:233.25px" class="cls_010"><span class="cls_010">'up': Vector2(0, -1),</span></div>
<div style="position:absolute;left:88.22px;top:244.50px" class="cls_010"><span class="cls_010">'down': Vector2(0, 1)}</span></div>
<div style="position:absolute;left:19.99px;top:255.75px" class="cls_010"><span class="cls_010">onready var raycasts = {'right': $RayCastRight,</span></div>
<div style="position:absolute;left:145.94px;top:267.00px" class="cls_010"><span class="cls_010">'left': $RayCastLeft,</span></div>
<div style="position:absolute;left:145.94px;top:278.25px" class="cls_010"><span class="cls_010">'up': $RayCastUp,</span></div>
<div style="position:absolute;left:145.94px;top:289.50px" class="cls_010"><span class="cls_010">'down': $RayCastDown}</span></div>
<div style="position:absolute;left:5.00px;top:314.25px" class="cls_010"><span class="cls_010">speed</span><span class="cls_003"> will control the movement and animation speed of the character, allowing you to customize the</span></div>
<div style="position:absolute;left:5.00px;top:332.25px" class="cls_003"><span class="cls_003">movement speed. As you learned in </span><span class="cls_009">Chapter 1</span><span class="cls_003">, </span><span class="cls_012">Introduction</span><span class="cls_003">, using </span><span class="cls_010">export</span><span class="cls_003"> allows you to set the value of</span></div>
<div style="position:absolute;left:5.00px;top:350.25px" class="cls_003"><span class="cls_003">a variable via the Inspector. Save the script and set the Speed property to </span><span class="cls_010">3</span><span class="cls_003"> in the Inspector.</span></div>
<div style="position:absolute;left:5.00px;top:383.25px" class="cls_010"><span class="cls_010">can_move</span><span class="cls_003"> is a flag that will track whether the character is allowed to move during the current frame. It</span></div>
<div style="position:absolute;left:5.00px;top:401.25px" class="cls_003"><span class="cls_003">will be set to </span><span class="cls_010">false</span><span class="cls_003"> while the movement is underway, preventing a second movement from being</span></div>
<div style="position:absolute;left:5.00px;top:419.25px" class="cls_003"><span class="cls_003">started before the previous one has finished. </span><span class="cls_010">facing</span><span class="cls_003"> is a string denoting the current direction of</span></div>
<div style="position:absolute;left:5.00px;top:437.25px" class="cls_003"><span class="cls_003">movement (again, spelled and capitalized exactly like the input actions you created at the beginning of</span></div>
<div style="position:absolute;left:5.00px;top:455.25px" class="cls_003"><span class="cls_003">the project). The </span><span class="cls_010">moves</span><span class="cls_003"> dictionary contains vectors describing the four directions, while the </span><span class="cls_010">raycasts</span></div>
<div style="position:absolute;left:5.00px;top:473.25px" class="cls_003"><span class="cls_003">dictionary contains references to the four raycast nodes. Note that both dictionaries' keys match the</span></div>
<div style="position:absolute;left:5.00px;top:491.25px" class="cls_003"><span class="cls_003">input action names.</span></div>
<div style="position:absolute;left:52.98px;top:524.25px" class="cls_008"><span class="cls_008">When referencing another node during variable declaration, you must use </span><span class="cls_011">onready</span><span class="cls_008"> to ensure that the variable isn't</span></div>
<div style="position:absolute;left:52.98px;top:537.75px" class="cls_008"><span class="cls_008">set before the referenced node is ready. You can think of it as a shortcut to writing the code in the </span><span class="cls_011">_ready()</span><span class="cls_008"> function.</span></div>
<div style="position:absolute;left:52.98px;top:551.25px" class="cls_008"><span class="cls_008">This line:</span></div>
<div style="position:absolute;left:52.98px;top:566.25px" class="cls_011"><span class="cls_011">onready var sprite = $Sprite</span></div>
<div style="position:absolute;left:52.98px;top:573.75px" class="cls_008"><span class="cls_008">Is equivalent to writing this:</span></div>
<div style="position:absolute;left:52.98px;top:588.75px" class="cls_011"><span class="cls_011">var sprite</span></div>
<div style="position:absolute;left:52.98px;top:597.75px" class="cls_011"><span class="cls_011">func _ready():</span></div>
<div style="position:absolute;left:67.97px;top:606.75px" class="cls_011"><span class="cls_011">sprite = $Sprite</span></div>
<div style="position:absolute;left:5.00px;top:629.25px" class="cls_003"><span class="cls_003">The following is the code that will execute a movement from one square to another:</span></div>
<div style="position:absolute;left:19.99px;top:663.75px" class="cls_010"><span class="cls_010">func move(dir):</span></div>
<div style="position:absolute;left:40.99px;top:675.00px" class="cls_010"><span class="cls_010">$AnimationPlayer.playback_speed = speed</span></div>
<div style="position:absolute;left:40.99px;top:686.25px" class="cls_010"><span class="cls_010">facing = dir</span></div>
<div style="position:absolute;left:40.99px;top:697.50px" class="cls_010"><span class="cls_010">if raycasts[facing].is_colliding():</span></div>
<div style="position:absolute;left:61.98px;top:708.75px" class="cls_010"><span class="cls_010">return</span></div>
<div style="position:absolute;left:40.99px;top:731.25px" class="cls_010"><span class="cls_010">can_move = false</span></div>
<div style="position:absolute;left:40.99px;top:742.50px" class="cls_010"><span class="cls_010">$AnimationPlayer.play(facing)</span></div>
<div style="position:absolute;left:40.99px;top:753.75px" class="cls_010"><span class="cls_010">$MoveTween.interpolate_property(self, "position", position,</span></div>
<div style="position:absolute;left:103.96px;top:765.00px" class="cls_010"><span class="cls_010">position + moves[facing] * tile_size,</span></div>
<div style="position:absolute;left:103.96px;top:776.25px" class="cls_010"><span class="cls_010">1.0 / speed, Tween.TRANS_SINE, Tween.EASE_IN_OUT)</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:93032px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background119.jpg" width=612 height=792></div>
<div style="position:absolute;left:40.99px;top:4.81px" class="cls_010"><span class="cls_010">$MoveTween.start()</span></div>
<div style="position:absolute;left:40.99px;top:15.75px" class="cls_010"><span class="cls_010">return true</span></div>
<div style="position:absolute;left:5.00px;top:40.50px" class="cls_010"><span class="cls_010">move()</span><span class="cls_003"> takes a direction as an argument. If the </span><span class="cls_010">RayCast2D</span><span class="cls_003"> for the given direction detects a collision, the</span></div>
<div style="position:absolute;left:5.00px;top:58.50px" class="cls_003"><span class="cls_003">move is canceled and the function returns without executing further (note that the return value will be</span></div>
<div style="position:absolute;left:5.00px;top:76.50px" class="cls_010"><span class="cls_010">null</span><span class="cls_003">). Otherwise, it changes </span><span class="cls_010">facing</span><span class="cls_003"> to the new direction, disables additional movement with </span><span class="cls_010">can_move</span><span class="cls_003">,</span></div>
<div style="position:absolute;left:5.00px;top:94.50px" class="cls_003"><span class="cls_003">and starts playing the matching animation. To actually perform the movement, the </span><span class="cls_010">Tween</span><span class="cls_003"> node</span></div>
<div style="position:absolute;left:5.00px;top:112.50px" class="cls_003"><span class="cls_003">interpolates the </span><span class="cls_010">position</span><span class="cls_003"> property from its current value to its current value plus a tile-sized movement</span></div>
<div style="position:absolute;left:5.00px;top:130.50px" class="cls_003"><span class="cls_003">in the given direction. The duration (</span><span class="cls_010">1.0 / speed</span><span class="cls_003"> seconds) is set to match the length of the animation.</span></div>
<div style="position:absolute;left:5.00px;top:163.50px" class="cls_003"><span class="cls_003">Using the </span><span class="cls_010">Tween.TRANS_SINE</span><span class="cls_003"> transition type results in a pleasing, smooth movement that accelerates up</span></div>
<div style="position:absolute;left:5.00px;top:181.50px" class="cls_003"><span class="cls_003">and then down to the final position. Feel free to try other transition types here to alter the movement</span></div>
<div style="position:absolute;left:5.00px;top:199.50px" class="cls_003"><span class="cls_003">style.</span></div>
<div style="position:absolute;left:5.00px;top:232.50px" class="cls_003"><span class="cls_003">Finally, to enable movement again, you need to reset </span><span class="cls_010">can_move</span><span class="cls_003"> when the movement has finished.</span></div>
<div style="position:absolute;left:5.00px;top:250.50px" class="cls_003"><span class="cls_003">Connect the </span><span class="cls_010">tween_completed</span><span class="cls_003"> signal from </span><span class="cls_010">MoveTween</span><span class="cls_003"> and add the following:</span></div>
<div style="position:absolute;left:19.99px;top:285.00px" class="cls_010"><span class="cls_010">func _on_MoveTween_tween_completed( object, key ):</span></div>
<div style="position:absolute;left:40.99px;top:296.25px" class="cls_010"><span class="cls_010">can_move = true</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:93834px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background120.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Player scene</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">The player scene needs to contain all the same nodes we gave to </span><span class="cls_010">Character</span><span class="cls_003">. This is where you'll take</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">advantage of the power of inheritance.</span></div>
<div style="position:absolute;left:5.00px;top:130.50px" class="cls_003"><span class="cls_003">Start by making a new scene. However, instead of making a new empty scene, click on Scene | New</span></div>
<div style="position:absolute;left:5.00px;top:148.50px" class="cls_003"><span class="cls_003">Inherited Scene in the menu. In the Open Base Scene window, select </span><span class="cls_010">res://character/Character.tscn</span><span class="cls_003">, as</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">shown in the following screenshot:</span></div>
<div style="position:absolute;left:5.00px;top:388.50px" class="cls_003"><span class="cls_003">Rename the root node of this new scene from </span><span class="cls_010">Character</span><span class="cls_003"> to </span><span class="cls_010">Player</span><span class="cls_003"> and save the new scene. Note that all</span></div>
<div style="position:absolute;left:5.00px;top:406.50px" class="cls_003"><span class="cls_003">the </span><span class="cls_010">Character</span><span class="cls_003"> nodes are also present. If you make a change to </span><span class="cls_010">Character.tscn</span><span class="cls_003"> and save it, the changes will</span></div>
<div style="position:absolute;left:5.00px;top:424.50px" class="cls_003"><span class="cls_003">also take effect in the </span><span class="cls_010">Player</span><span class="cls_003"> scene.</span></div>
<div style="position:absolute;left:5.00px;top:457.50px" class="cls_003"><span class="cls_003">Now, you need to set the Player's physics layers, so find the Collision section in the Inspector and set</span></div>
<div style="position:absolute;left:5.00px;top:475.50px" class="cls_003"><span class="cls_003">the Layer and Mask properties. Layer should be set to player only, while Mask should show walls,</span></div>
<div style="position:absolute;left:5.00px;top:493.50px" class="cls_003"><span class="cls_003">enemies, and items. Refer to the following screenshot:</span></div>
<div style="position:absolute;left:5.00px;top:614.25px" class="cls_003"><span class="cls_003">The collision layers system is a powerful tool that allows you to customize which objects can detect</span></div>
<div style="position:absolute;left:5.00px;top:632.25px" class="cls_003"><span class="cls_003">each other. The Layer property places the object in one or more collision layers, while the</span></div>
<div style="position:absolute;left:5.00px;top:650.25px" class="cls_003"><span class="cls_003">Mask property defines what layers the object can </span><span class="cls_012">see</span><span class="cls_003">. If another object is not in one of its mask</span></div>
<div style="position:absolute;left:5.00px;top:668.25px" class="cls_003"><span class="cls_003">layers, it will not be detected or collided with.</span></div>
<div style="position:absolute;left:5.00px;top:701.25px" class="cls_003"><span class="cls_003">The only other node that needs to be changed is the </span><span class="cls_010">Sprite</span><span class="cls_003">, where you need to set the texture. Drag the</span></div>
<div style="position:absolute;left:5.00px;top:719.25px" class="cls_003"><span class="cls_003">player spritesheet from the </span><span class="cls_010">res://assets</span><span class="cls_003"> folder and drop it in the Texture property of the </span><span class="cls_010">Sprite</span><span class="cls_003">. Go</span></div>
<div style="position:absolute;left:5.00px;top:737.25px" class="cls_003"><span class="cls_003">ahead and test out the animations in the </span><span class="cls_010">AnimationPlayer</span><span class="cls_003"> and make sure they're showing the correct</span></div>
<div style="position:absolute;left:5.00px;top:755.25px" class="cls_003"><span class="cls_003">directions. If you find a problem with any of the animations, make sure you fix it in the </span><span class="cls_010">Character</span><span class="cls_003"> scene,</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:94636px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background121.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:3.31px" class="cls_003"><span class="cls_003">and it will automatically be fixed in the </span><span class="cls_010">Player</span><span class="cls_003"> scene as well:</span></div>
<div style="position:absolute;left:5.00px;top:221.25px" class="cls_003"><span class="cls_003">Add a </span><span class="cls_010">Camera</span><span class="cls_003"> node as a child of </span><span class="cls_010">Player</span><span class="cls_003"> and check its Current property to On. Godot will automatically</span></div>
<div style="position:absolute;left:5.00px;top:239.25px" class="cls_003"><span class="cls_003">render whatever the current camera sees in the game window. This will allow you to make maps of</span></div>
<div style="position:absolute;left:5.00px;top:257.25px" class="cls_003"><span class="cls_003">any size, and the camera will scroll the map as the player walks around on it. Note that when you add</span></div>
<div style="position:absolute;left:5.00px;top:275.25px" class="cls_003"><span class="cls_003">the camera, a purplish box appears, which is centered on the player. This represents the camera's</span></div>
<div style="position:absolute;left:5.00px;top:293.25px" class="cls_003"><span class="cls_003">visible region, and because it's a child of the player, it follows the player's movement. If you look at</span></div>
<div style="position:absolute;left:5.00px;top:311.25px" class="cls_003"><span class="cls_003">the camera's properties in the Inspector, you'll see four Limit properties. These are used to stop the</span></div>
<div style="position:absolute;left:5.00px;top:329.25px" class="cls_003"><span class="cls_003">camera from scrolling past a certain point; the edge of your map, for example. Try adjusting them and</span></div>
<div style="position:absolute;left:5.00px;top:347.25px" class="cls_003"><span class="cls_003">see how the box stops following the </span><span class="cls_010">Player</span><span class="cls_003"> as you drag it around the screen (make sure you're moving</span></div>
<div style="position:absolute;left:5.00px;top:365.25px" class="cls_003"><span class="cls_003">the </span><span class="cls_010">Player</span><span class="cls_003"> node itself and not one of its children). Later, the limits will be set automatically by the</span></div>
<div style="position:absolute;left:5.00px;top:383.25px" class="cls_003"><span class="cls_003">level itself so that the camera won't scroll "outside" the level.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:95438px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background122.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Player script</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">The player's script also needs to extend the character's. Remove the attached script (</span><span class="cls_010">Character.gd</span><span class="cls_003">) by</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">selecting the </span><span class="cls_010">Player</span><span class="cls_003"> node and clicking the Clear script button:</span></div>
<div style="position:absolute;left:5.00px;top:315.75px" class="cls_003"><span class="cls_003">Now, click the button again to attach a new script. In the Attach Node Script dialog, click the folder</span></div>
<div style="position:absolute;left:5.00px;top:333.75px" class="cls_003"><span class="cls_003">icon next to the Inherits option and select </span><span class="cls_010">Character.gd</span><span class="cls_003">:</span></div>
<div style="position:absolute;left:5.00px;top:577.50px" class="cls_003"><span class="cls_003">Here is the player script (note that it </span><span class="cls_010">extends</span><span class="cls_003"> the character script):</span></div>
<div style="position:absolute;left:19.99px;top:623.25px" class="cls_010"><span class="cls_010">extends "res://character/Character.gd"</span></div>
<div style="position:absolute;left:19.99px;top:645.75px" class="cls_010"><span class="cls_010">signal moved</span></div>
<div style="position:absolute;left:19.99px;top:668.25px" class="cls_010"><span class="cls_010">func _process(delta):</span></div>
<div style="position:absolute;left:40.99px;top:679.50px" class="cls_010"><span class="cls_010">if can_move:</span></div>
<div style="position:absolute;left:61.98px;top:690.75px" class="cls_010"><span class="cls_010">for dir in moves.keys():</span></div>
<div style="position:absolute;left:82.97px;top:702.00px" class="cls_010"><span class="cls_010">if Input.is_action_pressed(dir):</span></div>
<div style="position:absolute;left:103.96px;top:713.25px" class="cls_010"><span class="cls_010">if move(dir):</span></div>
<div style="position:absolute;left:124.95px;top:724.50px" class="cls_010"><span class="cls_010">emit_signal('moved')</span></div>
<div style="position:absolute;left:5.00px;top:749.25px" class="cls_003"><span class="cls_003">Because it inherits all the behavior from </span><span class="cls_010">Character.gd</span><span class="cls_003">, the player will also have the </span><span class="cls_010">move()</span><span class="cls_003"> function. You</span></div>
<div style="position:absolute;left:5.00px;top:767.25px" class="cls_003"><span class="cls_003">just need to extend it with code to call </span><span class="cls_010">move()</span><span class="cls_003"> based on the input events. As you've seen before, you can</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:96240px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background123.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:3.31px" class="cls_003"><span class="cls_003">use the </span><span class="cls_010">process()</span><span class="cls_003"> function to check the input state each frame. However, only if </span><span class="cls_010">can_move</span><span class="cls_003"> allows it do you</span></div>
<div style="position:absolute;left:5.00px;top:21.31px" class="cls_003"><span class="cls_003">actually check the inputs and call </span><span class="cls_010">move()</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:54.00px" class="cls_003"><span class="cls_003">Because you used the names </span><span class="cls_010">up</span><span class="cls_003">, </span><span class="cls_010">down</span><span class="cls_003">, </span><span class="cls_010">left</span><span class="cls_003">, and </span><span class="cls_010">right</span><span class="cls_003"> for the input actions as well as the keys to</span></div>
<div style="position:absolute;left:5.00px;top:72.00px" class="cls_003"><span class="cls_003">the </span><span class="cls_010">moves</span><span class="cls_003"> and </span><span class="cls_010">raycasts</span><span class="cls_003"> dictionaries, you can loop through those keys and check each one as an input as</span></div>
<div style="position:absolute;left:5.00px;top:90.00px" class="cls_003"><span class="cls_003">well.</span></div>
<div style="position:absolute;left:5.00px;top:123.00px" class="cls_003"><span class="cls_003">Recall that </span><span class="cls_010">move()</span><span class="cls_003"> returns </span><span class="cls_010">true</span><span class="cls_003"> if it succeeds. If it does, the player emits the </span><span class="cls_010">moved</span><span class="cls_003"> signal, which you'll be</span></div>
<div style="position:absolute;left:5.00px;top:141.00px" class="cls_003"><span class="cls_003">able to use later with the enemies.</span></div>
<div style="position:absolute;left:5.00px;top:174.00px" class="cls_003"><span class="cls_003">Run the scene and try moving the player character around the screen.</span></div>
<div style="position:absolute;left:5.00px;top:207.00px" class="cls_003"><span class="cls_003">The player doesn't have a level to walk around on yet, but you can go ahead and add the code the</span></div>
<div style="position:absolute;left:5.00px;top:225.00px" class="cls_003"><span class="cls_003">player will need later. As the player moves around the level, it will encounter various objects and</span></div>
<div style="position:absolute;left:5.00px;top:243.00px" class="cls_003"><span class="cls_003">needs to respond to them. By using signals, you can add the code for this before you've even created</span></div>
<div style="position:absolute;left:5.00px;top:261.00px" class="cls_003"><span class="cls_003">the level. Add three more signals to the script:</span></div>
<div style="position:absolute;left:19.99px;top:295.50px" class="cls_010"><span class="cls_010">signal dead</span></div>
<div style="position:absolute;left:19.99px;top:306.75px" class="cls_010"><span class="cls_010">signal grabbed_key</span></div>
<div style="position:absolute;left:19.99px;top:318.00px" class="cls_010"><span class="cls_010">signal win</span></div>
<div style="position:absolute;left:5.00px;top:342.75px" class="cls_003"><span class="cls_003">Then, connect the </span><span class="cls_010">area_entered</span><span class="cls_003"> signal of the </span><span class="cls_010">Player</span><span class="cls_003"> and add this code:</span></div>
<div style="position:absolute;left:19.99px;top:377.25px" class="cls_010"><span class="cls_010">func _on_Player_area_entered( area ):</span></div>
<div style="position:absolute;left:40.99px;top:388.50px" class="cls_010"><span class="cls_010">if area.is_in_group('enemies'):</span></div>
<div style="position:absolute;left:61.98px;top:399.75px" class="cls_010"><span class="cls_010">emit_signal('dead')</span></div>
<div style="position:absolute;left:40.99px;top:411.00px" class="cls_010"><span class="cls_010">if area.has_method('pickup'):</span></div>
<div style="position:absolute;left:61.98px;top:422.25px" class="cls_010"><span class="cls_010">area.pickup()</span></div>
<div style="position:absolute;left:40.99px;top:433.50px" class="cls_010"><span class="cls_010">if area.type == 'key_red':</span></div>
<div style="position:absolute;left:61.98px;top:444.75px" class="cls_010"><span class="cls_010">emit_signal('grabbed_key')</span></div>
<div style="position:absolute;left:40.99px;top:456.00px" class="cls_010"><span class="cls_010">if area.type == 'star':</span></div>
<div style="position:absolute;left:61.98px;top:467.25px" class="cls_010"><span class="cls_010">emit_signal('win')</span></div>
<div style="position:absolute;left:5.00px;top:492.00px" class="cls_003"><span class="cls_003">Whenever the player encounters another </span><span class="cls_010">Area2D</span><span class="cls_003">, this function will run. If the object is an enemy, the</span></div>
<div style="position:absolute;left:5.00px;top:510.00px" class="cls_003"><span class="cls_003">player loses the game. Note the use of </span><span class="cls_010">has_method()</span><span class="cls_003">. This allows you to identify collectible objects by</span></div>
<div style="position:absolute;left:5.00px;top:528.00px" class="cls_003"><span class="cls_003">checking whether they have a </span><span class="cls_010">pickup()</span><span class="cls_003"> method and only call the method if it exists.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:97042px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background124.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Enemy scene</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Hopefully, you're seeing how inheritance works by now. You'll create the </span><span class="cls_010">Enemy</span><span class="cls_003"> scene using the same</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">procedure. Make a new scene inheriting from </span><span class="cls_010">Character.tscn</span><span class="cls_003"> and name it </span><span class="cls_010">Enemy</span><span class="cls_003">. Drag the mob</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">spritesheet, </span><span class="cls_010">res://assets/slime.png</span><span class="cls_003">, to the </span><span class="cls_010">Sprite</span><span class="cls_003">'s Texture.</span></div>
<div style="position:absolute;left:5.00px;top:148.50px" class="cls_003"><span class="cls_003">In the Collision section of the Inspector, set the Layer and Mask properties. Layer should be set to</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">enemies, while Mask should show walls and player.</span></div>
<div style="position:absolute;left:5.00px;top:199.50px" class="cls_003"><span class="cls_003">As you did with the </span><span class="cls_010">Player</span><span class="cls_003">, remove the existing script and attach a new script inheriting from</span></div>
<div style="position:absolute;left:5.00px;top:217.50px" class="cls_010"><span class="cls_010">Character.gd</span><span class="cls_003">:</span></div>
<div style="position:absolute;left:19.99px;top:252.00px" class="cls_010"><span class="cls_010">extends "res://character/Character.gd"</span></div>
<div style="position:absolute;left:19.99px;top:274.50px" class="cls_010"><span class="cls_010">func _ready():</span></div>
<div style="position:absolute;left:40.99px;top:285.75px" class="cls_010"><span class="cls_010">can_move = false</span></div>
<div style="position:absolute;left:40.99px;top:297.00px" class="cls_010"><span class="cls_010">facing = moves.keys()[randi() % 4]</span></div>
<div style="position:absolute;left:40.99px;top:308.25px" class="cls_010"><span class="cls_010">yield(get_tree().create_timer(0.5), 'timeout')</span></div>
<div style="position:absolute;left:40.99px;top:319.50px" class="cls_010"><span class="cls_010">can_move = true</span></div>
<div style="position:absolute;left:19.99px;top:342.00px" class="cls_010"><span class="cls_010">func _process(delta):</span></div>
<div style="position:absolute;left:40.99px;top:353.25px" class="cls_010"><span class="cls_010">if can_move:</span></div>
<div style="position:absolute;left:67.22px;top:364.50px" class="cls_010"><span class="cls_010">if not move(facing) or randi() % 10 > 5:</span></div>
<div style="position:absolute;left:88.22px;top:375.75px" class="cls_010"><span class="cls_010">facing = moves.keys()[randi() % 4]</span></div>
<div style="position:absolute;left:5.00px;top:400.50px" class="cls_003"><span class="cls_003">The code in the </span><span class="cls_010">_ready()</span><span class="cls_003"> function serves an important purpose: because the enemies are added to the</span></div>
<div style="position:absolute;left:5.00px;top:418.50px" class="cls_003"><span class="cls_003">tree </span><span class="cls_012">below</span><span class="cls_003"> the </span><span class="cls_010">TileMap</span><span class="cls_003"> nodes, they'll be processed first. You don't want the enemies to start moving</span></div>
<div style="position:absolute;left:5.00px;top:436.50px" class="cls_003"><span class="cls_003">before the walls have been processed, or they could step onto a wall tile and get stuck. You need to</span></div>
<div style="position:absolute;left:5.00px;top:454.50px" class="cls_003"><span class="cls_003">have a small delay before they start, which also serves to give the player a moment to prepare. To do</span></div>
<div style="position:absolute;left:5.00px;top:472.50px" class="cls_003"><span class="cls_003">this, rather than add a </span><span class="cls_010">Timer</span><span class="cls_003"> node to the scene, you can use the </span><span class="cls_010">create_timer()</span><span class="cls_003"> function of the </span><span class="cls_010">SceneTree</span><span class="cls_003"> to</span></div>
<div style="position:absolute;left:5.00px;top:490.50px" class="cls_003"><span class="cls_003">make a one-off timer, yielding execution until its timeout signal fires.</span></div>
<div style="position:absolute;left:52.98px;top:523.50px" class="cls_008"><span class="cls_008">GDScript's </span><span class="cls_011">yield()</span><span class="cls_008"> function provides a way to pause execution of a function until a later time, while allowing the</span></div>
<div style="position:absolute;left:52.98px;top:537.00px" class="cls_008"><span class="cls_008">rest of the game to continue running. When passed an object and a named signal, execution will resume when that</span></div>
<div style="position:absolute;left:52.98px;top:550.50px" class="cls_008"><span class="cls_008">object emits the given signal.</span></div>
<div style="position:absolute;left:5.00px;top:579.00px" class="cls_003"><span class="cls_003">Every frame, the enemy will move if it is able to. If it runs into a wall (that is, when </span><span class="cls_010">move()</span><span class="cls_003"> returns</span></div>
<div style="position:absolute;left:5.00px;top:597.00px" class="cls_010"><span class="cls_010">null</span><span class="cls_003">), or sometimes just randomly, it changes direction. The result will be an unpredictable (and hard</span></div>
<div style="position:absolute;left:5.00px;top:615.00px" class="cls_003"><span class="cls_003">to dodge!) enemy movement. Remember that you can adjust the </span><span class="cls_010">Player</span><span class="cls_003"> and </span><span class="cls_010">Enemy</span><span class="cls_003"> speeds independently</span></div>
<div style="position:absolute;left:5.00px;top:633.00px" class="cls_003"><span class="cls_003">in their scenes, or change </span><span class="cls_010">speed</span><span class="cls_003"> in the </span><span class="cls_010">Character</span><span class="cls_003"> scene and it will affect them both.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:97844px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background125.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Optional - turn-based movement</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">For a different style of game, you could put the </span><span class="cls_010">_process()</span><span class="cls_003"> movement code in a function</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">called </span><span class="cls_010">_on_Player_moved()</span><span class="cls_003"> instead, and connect it to the player's </span><span class="cls_010">moved</span><span class="cls_003"> signal. This would make the</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">enemies move only when the player does, giving the game more of a strategic feel, rather than one of</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">fast-paced action.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:98646px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background126.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Creating the level</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">In this section, you'll create the map where all the action will take place. As the name implies, you'll</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">probably want to make a maze-like level with lots of twists and turns.</span></div>
<div style="position:absolute;left:5.00px;top:130.50px" class="cls_003"><span class="cls_003">Here is a sample level:</span></div>
<div style="position:absolute;left:5.00px;top:386.25px" class="cls_003"><span class="cls_003">The player's goal is to reach the star. Locked doors can only be opened by picking up the key. The</span></div>
<div style="position:absolute;left:5.00px;top:404.25px" class="cls_003"><span class="cls_003">green dots mark the spawn locations of enemies, while the red dot marks the player's start location.</span></div>
<div style="position:absolute;left:5.00px;top:422.25px" class="cls_003"><span class="cls_003">The coins are extra items that can be picked up along the way for bonus points. Note that the entire</span></div>
<div style="position:absolute;left:5.00px;top:440.25px" class="cls_003"><span class="cls_003">level is larger than the display window. The </span><span class="cls_010">Camera</span><span class="cls_003"> will scroll the map as the player moves around it.</span></div>
<div style="position:absolute;left:5.00px;top:473.25px" class="cls_003"><span class="cls_003">You'll use the </span><span class="cls_010">TileMap</span><span class="cls_003"> node to create the map. There are several benefits to using a </span><span class="cls_010">TileMap</span><span class="cls_003"> for your</span></div>
<div style="position:absolute;left:5.00px;top:491.25px" class="cls_003"><span class="cls_003">level design. First, they make it possible to draw the level's layout by </span><span class="cls_012">painting</span><span class="cls_003"> the tiles onto a grid,</span></div>
<div style="position:absolute;left:5.00px;top:509.25px" class="cls_003"><span class="cls_003">which is much faster than placing individual </span><span class="cls_010">Sprite</span><span class="cls_003"> nodes one by one. Secondly, they allow for much</span></div>
<div style="position:absolute;left:5.00px;top:527.25px" class="cls_003"><span class="cls_003">larger levels because they are optimized for drawing large numbers of tiles efficiently by batching</span></div>
<div style="position:absolute;left:5.00px;top:545.25px" class="cls_003"><span class="cls_003">them together and only drawing the </span><span class="cls_012">chunks</span><span class="cls_003"> of the map that are visible at a given time. Finally, you can</span></div>
<div style="position:absolute;left:5.00px;top:563.25px" class="cls_003"><span class="cls_003">add collision shapes to individual tiles and the entire map will act as a single collider, simplifying</span></div>
<div style="position:absolute;left:5.00px;top:581.25px" class="cls_003"><span class="cls_003">your collision code.</span></div>
<div style="position:absolute;left:5.00px;top:614.25px" class="cls_003"><span class="cls_003">Once you've completed this section, you'll be able to create as many of these maps as you wish. You</span></div>
<div style="position:absolute;left:5.00px;top:632.25px" class="cls_003"><span class="cls_003">can put them in order to give a progression from level to level.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:99448px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background127.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Items</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">First, create a new scene for the collectable objects that the player can pick up. These items will be</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">spawned by the map when the game is run. Here is the scene tree:</span></div>
<div style="position:absolute;left:5.00px;top:267.75px" class="cls_003"><span class="cls_003">Leave the </span><span class="cls_010">Sprite</span><span class="cls_003"> Texture blank. Since you're using this object for multiple items, the texture can be set</span></div>
<div style="position:absolute;left:5.00px;top:285.75px" class="cls_003"><span class="cls_003">in the item's script when it's created.</span></div>
<div style="position:absolute;left:5.00px;top:318.75px" class="cls_003"><span class="cls_003">Set the </span><span class="cls_010">Pickup</span><span class="cls_003"> Collision Layer to items and its Mask to player. You don't want the enemies collecting</span></div>
<div style="position:absolute;left:5.00px;top:336.75px" class="cls_003"><span class="cls_003">the coins before you get there (although that might make for a fun variation on the game where you</span></div>
<div style="position:absolute;left:5.00px;top:354.75px" class="cls_003"><span class="cls_003">race to get as many coins as you can before the bad guys gobble them up).</span></div>
<div style="position:absolute;left:5.00px;top:387.75px" class="cls_003"><span class="cls_003">Give the </span><span class="cls_010">CollisionShape2D</span><span class="cls_003"> node a rectangle shape and set its extents to </span><span class="cls_010">(32, 32)</span><span class="cls_003"> (strictly speaking, you can</span></div>
<div style="position:absolute;left:5.00px;top:405.75px" class="cls_003"><span class="cls_003">use any shape, as the player will move all the way onto the tile and completely overlap the item</span></div>
<div style="position:absolute;left:5.00px;top:423.75px" class="cls_003"><span class="cls_003">anyway).</span></div>
<div style="position:absolute;left:5.00px;top:456.75px" class="cls_003"><span class="cls_003">Here is the script for the </span><span class="cls_010">Pickup</span><span class="cls_003">:</span></div>
<div style="position:absolute;left:19.99px;top:491.25px" class="cls_010"><span class="cls_010">extends Area2D</span></div>
<div style="position:absolute;left:19.99px;top:513.75px" class="cls_010"><span class="cls_010">var textures = {'coin': 'res://assets/coin.png',</span></div>
<div style="position:absolute;left:103.96px;top:525.00px" class="cls_010"><span class="cls_010">'key_red': 'res://assets/keyRed.png',</span></div>
<div style="position:absolute;left:103.96px;top:536.25px" class="cls_010"><span class="cls_010">'star': 'res://assets/star.png'}</span></div>
<div style="position:absolute;left:19.99px;top:547.50px" class="cls_010"><span class="cls_010">var type</span></div>
<div style="position:absolute;left:19.99px;top:570.00px" class="cls_010"><span class="cls_010">func _ready():</span></div>
<div style="position:absolute;left:40.99px;top:581.25px" class="cls_010"><span class="cls_010">$Tween.interpolate_property($Sprite, 'scale', Vector2(1, 1),</span></div>
<div style="position:absolute;left:61.98px;top:592.50px" class="cls_010"><span class="cls_010">Vector2(3, 3), 0.5, Tween.TRANS_QUAD, Tween.EASE_IN_OUT)</span></div>
<div style="position:absolute;left:40.99px;top:603.75px" class="cls_010"><span class="cls_010">$Tween.interpolate_property($Sprite, 'modulate',</span></div>
<div style="position:absolute;left:61.98px;top:615.00px" class="cls_010"><span class="cls_010">Color(1, 1, 1, 1), Color(1, 1, 1, 0), 0.5,</span></div>
<div style="position:absolute;left:61.98px;top:626.25px" class="cls_010"><span class="cls_010">Tween.TRANS_QUAD, Tween.EASE_IN_OUT)</span></div>
<div style="position:absolute;left:19.99px;top:648.75px" class="cls_010"><span class="cls_010">func init(_type, pos):</span></div>
<div style="position:absolute;left:40.99px;top:660.00px" class="cls_010"><span class="cls_010">$Sprite.texture = load(textures[_type])</span></div>
<div style="position:absolute;left:40.99px;top:671.25px" class="cls_010"><span class="cls_010">type = _type</span></div>
<div style="position:absolute;left:40.99px;top:682.50px" class="cls_010"><span class="cls_010">position = pos</span></div>
<div style="position:absolute;left:19.99px;top:705.00px" class="cls_010"><span class="cls_010">func pickup():</span></div>
<div style="position:absolute;left:40.99px;top:716.25px" class="cls_010"><span class="cls_010">$CollisionShape2D.disabled = true</span></div>
<div style="position:absolute;left:40.99px;top:727.50px" class="cls_010"><span class="cls_010">$Tween.start()</span></div>
<div style="position:absolute;left:5.00px;top:752.25px" class="cls_003"><span class="cls_003">The </span><span class="cls_010">type</span><span class="cls_003"> variable will be set when the item is created and used to determine what texture the object</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:100250px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background128.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:3.31px" class="cls_003"><span class="cls_003">should use. Using </span><span class="cls_010">_type</span><span class="cls_003"> as the variable name in the function argument lets you use the name without</span></div>
<div style="position:absolute;left:5.00px;top:21.31px" class="cls_003"><span class="cls_003">conflicting with </span><span class="cls_010">type</span><span class="cls_003">, which is already in use.</span></div>
<div style="position:absolute;left:52.98px;top:54.00px" class="cls_008"><span class="cls_008">Some programming languages use the notion of private functions or variables, meaning they are only used</span></div>
<div style="position:absolute;left:52.98px;top:67.50px" class="cls_008"><span class="cls_008">locally. The </span><span class="cls_011">_</span><span class="cls_008"> naming convention in GDScript is used to visually designate variables or functions that should be</span></div>
<div style="position:absolute;left:52.98px;top:81.00px" class="cls_008"><span class="cls_008">regarded as private. Note that they aren't actually any different from any other name; it is merely a visual</span></div>
<div style="position:absolute;left:52.98px;top:94.50px" class="cls_008"><span class="cls_008">indication for the programmer.</span></div>
<div style="position:absolute;left:5.00px;top:123.00px" class="cls_003"><span class="cls_003">The pickup effect using </span><span class="cls_010">Tween</span><span class="cls_003"> is similar to the one you used for the coins in Coin Dash—animating</span></div>
<div style="position:absolute;left:5.00px;top:141.00px" class="cls_003"><span class="cls_003">the scale and opacity of </span><span class="cls_010">Sprite</span><span class="cls_003">. Connect the </span><span class="cls_010">tween_completed</span><span class="cls_003"> signal of </span><span class="cls_010">Tween</span><span class="cls_003"> so that the item can be deleted</span></div>
<div style="position:absolute;left:5.00px;top:159.00px" class="cls_003"><span class="cls_003">when the effect has finished:</span></div>
<div style="position:absolute;left:19.99px;top:193.50px" class="cls_010"><span class="cls_010">func _on_Tween_tween_completed( object, key ):</span></div>
<div style="position:absolute;left:46.23px;top:204.75px" class="cls_010"><span class="cls_010">queue_free()</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:101052px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background129.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">TileSets</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">In order to draw a map using a </span><span class="cls_010">TileMap</span><span class="cls_003">, it must have a </span><span class="cls_010">TileSet</span><span class="cls_003"> assigned to it. The </span><span class="cls_010">TileSet</span><span class="cls_003"> contains all of</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">the individual tile textures, along with any collision shapes they may have.</span></div>
<div style="position:absolute;left:5.00px;top:130.50px" class="cls_003"><span class="cls_003">Depending on how many tiles you have, it can be time-consuming to create a </span><span class="cls_010">TileSet</span><span class="cls_003">, especially the</span></div>
<div style="position:absolute;left:5.00px;top:148.50px" class="cls_003"><span class="cls_003">first time. For that reason, there is a pre-generated </span><span class="cls_010">TileSet</span><span class="cls_003"> included in the </span><span class="cls_010">assets</span><span class="cls_003"> folder titled</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_010"><span class="cls_010">tileset.tres</span><span class="cls_003">. Feel free to use that instead, but please don't skip the following section. It contains useful</span></div>
<div style="position:absolute;left:5.00px;top:184.50px" class="cls_003"><span class="cls_003">information to help you understand how the </span><span class="cls_010">TileSet</span><span class="cls_003"> works.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:101854px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background130.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Creating a TileSet</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">A </span><span class="cls_010">TileSet</span><span class="cls_003"> in Godot is a type of </span><span class="cls_010">Resource</span><span class="cls_003">. Examples of other resources include Textures, Animations, and</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">Fonts. They are containers that hold a certain type of data, and are typically saved as </span><span class="cls_010">.tres</span><span class="cls_003"> files.</span></div>
<div style="position:absolute;left:52.98px;top:130.50px" class="cls_008"><span class="cls_008">By default, Godot saves files in text-based formats, indicated by the </span><span class="cls_011">t</span><span class="cls_008"> in </span><span class="cls_011">.tscn</span><span class="cls_008"> or </span><span class="cls_011">.tres</span><span class="cls_008">, for example. Text-based files</span></div>
<div style="position:absolute;left:52.98px;top:144.75px" class="cls_008"><span class="cls_008">are preferred over binary formats because they are human-readable. They are also more friendly for </span><span class="cls_016">Version</span></div>
<div style="position:absolute;left:52.98px;top:159.00px" class="cls_016"><span class="cls_016">Control Systems</span><span class="cls_008"> (</span><span class="cls_016">VCS</span><span class="cls_008">), which allow you to track file changes over the course of building your project.</span></div>
<div style="position:absolute;left:5.00px;top:187.50px" class="cls_003"><span class="cls_003">To make a </span><span class="cls_010">TileSet</span><span class="cls_003">, you create a scene with a set of </span><span class="cls_010">Sprite</span><span class="cls_003"> nodes containing the textures from your art</span></div>
<div style="position:absolute;left:5.00px;top:205.50px" class="cls_003"><span class="cls_003">assets. You can then add collisions and other properties to those </span><span class="cls_010">Sprite</span><span class="cls_003"> tiles. Once you've created all</span></div>
<div style="position:absolute;left:5.00px;top:223.50px" class="cls_003"><span class="cls_003">the tiles, you export the scene as a </span><span class="cls_010">TileSet</span><span class="cls_003"> resource, which can then be loaded by the </span><span class="cls_010">TileMap</span><span class="cls_003"> node.</span></div>
<div style="position:absolute;left:5.00px;top:256.50px" class="cls_003"><span class="cls_003">Here is a screenshot of the </span><span class="cls_010">TileSetMaker.tscn</span><span class="cls_003"> scene, containing the tiles you'll be using to build this</span></div>
<div style="position:absolute;left:5.00px;top:274.50px" class="cls_003"><span class="cls_003">game's levels:</span></div>
<div style="position:absolute;left:5.00px;top:714.00px" class="cls_003"><span class="cls_003">Start by adding a </span><span class="cls_010">Sprite</span><span class="cls_003"> node and setting its texture to </span><span class="cls_010">res://assets/sokoban_tilesheet.png</span><span class="cls_003">. To select a</span></div>
<div style="position:absolute;left:5.00px;top:732.00px" class="cls_003"><span class="cls_003">single tile, set the Region/Enabled property to On and click Texture Region at the bottom of the editor</span></div>
<div style="position:absolute;left:5.00px;top:750.00px" class="cls_003"><span class="cls_003">window to open the panel. Set Snap Mode to Grid Snap and the Step to 64px in both </span><span class="cls_012">x</span><span class="cls_003"> and </span><span class="cls_012">y</span><span class="cls_003">. Now,</span></div>
<div style="position:absolute;left:5.00px;top:768.00px" class="cls_003"><span class="cls_003">when you click and drag in the texture, it will only allow you to select 64 x 64 sections of the texture:</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:102656px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background131.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:263.25px" class="cls_003"><span class="cls_003">Give the Sprite an appropriate name (</span><span class="cls_010">crate_brown</span><span class="cls_003"> or </span><span class="cls_010">wall_red</span><span class="cls_003">, for example)—this name will appear as</span></div>
<div style="position:absolute;left:5.00px;top:281.25px" class="cls_003"><span class="cls_003">the tile's name in the </span><span class="cls_010">TileSet</span><span class="cls_003">. Add a </span><span class="cls_010">StaticBody2D</span><span class="cls_003"> as a child, and then add a </span><span class="cls_010">CollisionPolygon2D</span><span class="cls_003"> to that. It is</span></div>
<div style="position:absolute;left:5.00px;top:299.25px" class="cls_003"><span class="cls_003">important that the collision polygon be sized properly so that it aligns with the tiles placed next to it.</span></div>
<div style="position:absolute;left:5.00px;top:317.25px" class="cls_003"><span class="cls_003">The easiest way to do this is to turn on grid snapping in the editor window.</span></div>
<div style="position:absolute;left:5.00px;top:350.25px" class="cls_003"><span class="cls_003">Click the Use Snap button (it looks like a magnet) and then open the snap menu by clicking on the</span></div>
<div style="position:absolute;left:5.00px;top:368.25px" class="cls_003"><span class="cls_003">three dots next to it:</span></div>
<div style="position:absolute;left:5.00px;top:507.75px" class="cls_003"><span class="cls_003">Choose Configure Snap... and set the Grid Step to </span><span class="cls_010">64</span><span class="cls_003"> by </span><span class="cls_010">64</span><span class="cls_003">:</span></div>
<div style="position:absolute;left:5.00px;top:672.75px" class="cls_003"><span class="cls_003">Now, with the </span><span class="cls_010">CollisionPolygon2D</span><span class="cls_003"> selected, you can click in the four corners of the tile one by one to</span></div>
<div style="position:absolute;left:5.00px;top:690.75px" class="cls_003"><span class="cls_003">create a closed square (it will appear as a reddish orange):</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:103458px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background132.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:135.00px" class="cls_003"><span class="cls_003">This tile is now complete. You can duplicate it (</span><span class="cls_012">Ctrl</span><span class="cls_003"> + </span><span class="cls_012">D</span><span class="cls_003">) and make another, and you only need to</span></div>
<div style="position:absolute;left:5.00px;top:153.00px" class="cls_003"><span class="cls_003">change the texture region. Note that collision bodies are only needed on the wall tiles. The ground and</span></div>
<div style="position:absolute;left:5.00px;top:171.00px" class="cls_003"><span class="cls_003">item tiles should not have them.</span></div>
<div style="position:absolute;left:5.00px;top:204.00px" class="cls_003"><span class="cls_003">When you've created all your tiles, click Scene | Convert To | TileSet and save it with an appropriate</span></div>
<div style="position:absolute;left:5.00px;top:222.00px" class="cls_003"><span class="cls_003">name, such as </span><span class="cls_010">tileset.tres</span><span class="cls_003">. If you come back and edit the scene again, you'll need to redo the</span></div>
<div style="position:absolute;left:5.00px;top:240.00px" class="cls_003"><span class="cls_003">conversion. Pay special attention to the Merge With Existing option. If this is set to On, the current</span></div>
<div style="position:absolute;left:5.00px;top:258.00px" class="cls_003"><span class="cls_003">scene's tiles will be </span><span class="cls_012">merged</span><span class="cls_003"> with the ones already in the </span><span class="cls_010">tileset</span><span class="cls_003"> file. Sometimes, this can result in</span></div>
<div style="position:absolute;left:5.00px;top:276.00px" class="cls_003"><span class="cls_003">changes to the tile indices and change your map in unwanted ways. Take a look at the following</span></div>
<div style="position:absolute;left:5.00px;top:294.00px" class="cls_003"><span class="cls_003">screenshot:</span></div>
<div style="position:absolute;left:52.98px;top:631.50px" class="cls_011"><span class="cls_011">tres</span><span class="cls_008"> stands for text resource and is the most common format Godot stores its resource files in. Compare this with </span><span class="cls_011">tscn</span><span class="cls_008">,</span></div>
<div style="position:absolute;left:52.98px;top:645.00px" class="cls_008"><span class="cls_008">which is the text scene storage format.</span></div>
<div style="position:absolute;left:5.00px;top:675.00px" class="cls_003"><span class="cls_003">Your </span><span class="cls_010">TileSet</span><span class="cls_003"> resource is ready to use!</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:104260px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background133.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">TileMaps</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Now, let's make a new scene for the game level. The level will be a self-contained scene, and will</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">include the map and the player, and will handle spawning any items and enemies in the level. For the</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">root, use a </span><span class="cls_010">Node2D</span><span class="cls_003"> and name it </span><span class="cls_010">Level1</span><span class="cls_003"> (later, you can duplicate this node setup to create more levels).</span></div>
<div style="position:absolute;left:52.98px;top:148.50px" class="cls_008"><span class="cls_008">You can open the </span><span class="cls_011">Level1.tscn</span><span class="cls_008"> file from the assets folder to see the completed level scene from this section, although</span></div>
<div style="position:absolute;left:52.98px;top:162.00px" class="cls_008"><span class="cls_008">you're encouraged to create your own levels.</span></div>
<div style="position:absolute;left:5.00px;top:191.25px" class="cls_003"><span class="cls_003">When using </span><span class="cls_010">TileMap</span><span class="cls_003">, you will often want more than one tile object to appear in a given location. You</span></div>
<div style="position:absolute;left:5.00px;top:209.25px" class="cls_003"><span class="cls_003">might want to place a tree, for example, but also have a ground tile appear below it. This can be done</span></div>
<div style="position:absolute;left:5.00px;top:227.25px" class="cls_003"><span class="cls_003">by using </span><span class="cls_010">TileMap</span><span class="cls_003"> as many times as you like to create layers of data. For your level, you'll make three</span></div>
<div style="position:absolute;left:5.00px;top:245.25px" class="cls_003"><span class="cls_003">layers to display the ground, which the player can walk on; the walls, which are obstacles; and the</span></div>
<div style="position:absolute;left:5.00px;top:263.25px" class="cls_003"><span class="cls_003">collectible items, which are markers for spawning items like coins, keys, and enemies.</span></div>
<div style="position:absolute;left:5.00px;top:296.25px" class="cls_003"><span class="cls_003">Add a </span><span class="cls_010">TileMap</span><span class="cls_003"> and name it </span><span class="cls_010">Ground</span><span class="cls_003">. Drag the </span><span class="cls_010">tileset.tres</span><span class="cls_003"> into the Tile Set property and you'll see the tiles</span></div>
<div style="position:absolute;left:5.00px;top:314.25px" class="cls_003"><span class="cls_003">appear, ready to be used, on the right-hand side of the editor window:</span></div>
<div style="position:absolute;left:5.00px;top:673.50px" class="cls_003"><span class="cls_003">It's very easy to accidentally click and drag in the editor window and move your whole tile map. To</span></div>
<div style="position:absolute;left:5.00px;top:693.00px" class="cls_003"><span class="cls_003">prevent this, make sure you select the </span><span class="cls_010">Ground</span><span class="cls_003"> node and click the Lock button:</span></div>
<div style="position:absolute;left:5.00px;top:726.00px" class="cls_003"><span class="cls_003">Duplicate this </span><span class="cls_010">TileMap</span><span class="cls_003"> twice and name the new </span><span class="cls_010">TileMap</span><span class="cls_003"> nodes </span><span class="cls_010">Walls</span><span class="cls_003"> and </span><span class="cls_010">Items</span><span class="cls_003">. Remember that Godot</span></div>
<div style="position:absolute;left:5.00px;top:744.00px" class="cls_003"><span class="cls_003">draws objects in the order listed in the node tree, from top to bottom, so </span><span class="cls_010">Ground</span><span class="cls_003"> should be at the top,</span></div>
<div style="position:absolute;left:5.00px;top:762.00px" class="cls_003"><span class="cls_003">with </span><span class="cls_010">Walls</span><span class="cls_003"> and </span><span class="cls_010">Items</span><span class="cls_003"> underneath it.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:105062px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background134.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:3.00px" class="cls_003"><span class="cls_003">As you're drawing your level, be careful to note which layer you're drawing on! You should only</span></div>
<div style="position:absolute;left:5.00px;top:21.00px" class="cls_003"><span class="cls_003">place the item markers on the Items layer, for example, because that's where the code is going to look</span></div>
<div style="position:absolute;left:5.00px;top:39.00px" class="cls_003"><span class="cls_003">for objects to create. Don't place any other objects there, though, because the layer itself will be</span></div>
<div style="position:absolute;left:5.00px;top:57.00px" class="cls_003"><span class="cls_003">invisible during gameplay.</span></div>
<div style="position:absolute;left:5.00px;top:90.00px" class="cls_003"><span class="cls_003">Finally, add an instance of the </span><span class="cls_010">Player</span><span class="cls_003"> scene. Make sure the </span><span class="cls_010">Player</span><span class="cls_003"> node is below the three </span><span class="cls_010">TileMap</span><span class="cls_003"> nodes,</span></div>
<div style="position:absolute;left:5.00px;top:108.00px" class="cls_003"><span class="cls_003">so it will be drawn on top. The final scene tree should look like this:</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:105864px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background135.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Level script</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Now that the level is complete, attach a script to create the level behavior. This script will first scan</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">the </span><span class="cls_010">Items</span><span class="cls_003"> map to spawn any enemies and collectibles. It will also serve to monitor for events that</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">occur during gameplay, such as picking up a key or running into an enemy:</span></div>
<div style="position:absolute;left:19.99px;top:150.00px" class="cls_010"><span class="cls_010">extends Node2D</span></div>
<div style="position:absolute;left:19.99px;top:172.50px" class="cls_010"><span class="cls_010">export (PackedScene) var Enemy</span></div>
<div style="position:absolute;left:19.99px;top:183.75px" class="cls_010"><span class="cls_010">export (PackedScene) var Pickup</span></div>
<div style="position:absolute;left:19.99px;top:206.25px" class="cls_010"><span class="cls_010">onready var items = $Items</span></div>
<div style="position:absolute;left:19.99px;top:217.50px" class="cls_010"><span class="cls_010">var doors = []</span></div>
<div style="position:absolute;left:5.00px;top:242.25px" class="cls_003"><span class="cls_003">The first two variables contain references to the scenes that will need to be instanced from the </span><span class="cls_010">Items</span></div>
<div style="position:absolute;left:5.00px;top:260.25px" class="cls_003"><span class="cls_003">map. Since that particular map node will be referenced frequently, you can cache the </span><span class="cls_010">$Items</span><span class="cls_003"> lookup in</span></div>
<div style="position:absolute;left:5.00px;top:278.25px" class="cls_003"><span class="cls_003">a variable to save some time. Finally, an array called </span><span class="cls_010">doors</span><span class="cls_003"> will contain the door location(s) found on</span></div>
<div style="position:absolute;left:5.00px;top:296.25px" class="cls_003"><span class="cls_003">the map.</span></div>
<div style="position:absolute;left:5.00px;top:329.25px" class="cls_003"><span class="cls_003">Save the script and drag the </span><span class="cls_010">Enemy.tscn</span><span class="cls_003"> and </span><span class="cls_010">Pickup.tscn</span><span class="cls_003"> files into their respective properties in the</span></div>
<div style="position:absolute;left:5.00px;top:347.25px" class="cls_003"><span class="cls_003">Inspector.</span></div>
<div style="position:absolute;left:5.00px;top:380.25px" class="cls_003"><span class="cls_003">Now, add the following code for </span><span class="cls_010">_ready()</span><span class="cls_003">:</span></div>
<div style="position:absolute;left:19.99px;top:414.75px" class="cls_010"><span class="cls_010">func _ready():</span></div>
<div style="position:absolute;left:40.99px;top:426.00px" class="cls_010"><span class="cls_010">randomize()</span></div>
<div style="position:absolute;left:40.99px;top:437.25px" class="cls_010"><span class="cls_010">$Items.hide()</span></div>
<div style="position:absolute;left:40.99px;top:448.50px" class="cls_010"><span class="cls_010">set_camera_limits()</span></div>
<div style="position:absolute;left:40.99px;top:459.75px" class="cls_010"><span class="cls_010">var door_id = $Walls.tile_set.find_tile_by_name('door_red')</span></div>
<div style="position:absolute;left:40.99px;top:471.00px" class="cls_010"><span class="cls_010">for cell in $Walls.get_used_cells_by_id(door_id):</span></div>
<div style="position:absolute;left:61.98px;top:482.25px" class="cls_010"><span class="cls_010">doors.append(cell)</span></div>
<div style="position:absolute;left:40.99px;top:493.50px" class="cls_010"><span class="cls_010">spawn_items()</span></div>
<div style="position:absolute;left:40.99px;top:504.75px" class="cls_010"><span class="cls_010">$Player.connect('dead', self, 'game_over')</span></div>
<div style="position:absolute;left:40.99px;top:516.00px" class="cls_010"><span class="cls_010">$Player.connect('grabbed_key', self, '_on_Player_grabbed_key')</span></div>
<div style="position:absolute;left:40.99px;top:527.25px" class="cls_010"><span class="cls_010">$Player.connect('win', self, '_on_Player_win')</span></div>
<div style="position:absolute;left:5.00px;top:552.00px" class="cls_003"><span class="cls_003">The function starts by ensuring that the </span><span class="cls_010">Items</span><span class="cls_003"> tilemap is hidden. You don't want the player to see those</span></div>
<div style="position:absolute;left:5.00px;top:570.00px" class="cls_003"><span class="cls_003">tiles; they exist so the script can detect where to spawn items.</span></div>
<div style="position:absolute;left:5.00px;top:603.00px" class="cls_003"><span class="cls_003">Next, the camera limits must be set, ensuring that it can't scroll past the edges of the map. You'll create</span></div>
<div style="position:absolute;left:5.00px;top:621.00px" class="cls_003"><span class="cls_003">a function to handle that (see the following code).</span></div>
<div style="position:absolute;left:5.00px;top:654.00px" class="cls_003"><span class="cls_003">When the player finds a key, the door(s) need to be opened, so the next part searches the </span><span class="cls_010">Walls</span><span class="cls_003"> map for</span></div>
<div style="position:absolute;left:5.00px;top:672.00px" class="cls_003"><span class="cls_003">any </span><span class="cls_010">door_red</span><span class="cls_003"> tiles and stores them in an array. Note that you must first find the tile's </span><span class="cls_010">id</span><span class="cls_003"> from the </span><span class="cls_010">TileSet</span><span class="cls_003">,</span></div>
<div style="position:absolute;left:5.00px;top:690.00px" class="cls_003"><span class="cls_003">because the cells of the </span><span class="cls_010">TileMap</span><span class="cls_003"> only contain ID numbers that refer to the tile set.</span></div>
<div style="position:absolute;left:5.00px;top:723.00px" class="cls_003"><span class="cls_003">More on the </span><span class="cls_010">spawn_items()</span><span class="cls_003"> function follows.</span></div>
<div style="position:absolute;left:5.00px;top:756.00px" class="cls_003"><span class="cls_003">Finally, the </span><span class="cls_010">Player</span><span class="cls_003"> signals are all connected to functions that will process their results.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:106666px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background136.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:3.00px" class="cls_003"><span class="cls_003">Here's how to set the camera limits to match the size of the map:</span></div>
<div style="position:absolute;left:19.99px;top:37.50px" class="cls_010"><span class="cls_010">func set_camera_limits():</span></div>
<div style="position:absolute;left:40.99px;top:48.75px" class="cls_010"><span class="cls_010">var map_size = $Ground.get_used_rect()</span></div>
<div style="position:absolute;left:40.99px;top:60.00px" class="cls_010"><span class="cls_010">var cell_size = $Ground.cell_size</span></div>
<div style="position:absolute;left:40.99px;top:71.25px" class="cls_010"><span class="cls_010">$Player/Camera2D.limit_left = map_size.position.x * cell_size.x</span></div>
<div style="position:absolute;left:40.99px;top:82.50px" class="cls_010"><span class="cls_010">$Player/Camera2D.limit_top = map_size.position.y * cell_size.y</span></div>
<div style="position:absolute;left:40.99px;top:93.75px" class="cls_010"><span class="cls_010">$Player/Camera2D.limit_right = map_size.end.x * cell_size.x</span></div>
<div style="position:absolute;left:40.99px;top:105.00px" class="cls_010"><span class="cls_010">$Player/Camera2D.limit_bottom = map_size.end.y * cell_size.y</span></div>
<div style="position:absolute;left:5.00px;top:129.75px" class="cls_010"><span class="cls_010">get_used_rect()</span><span class="cls_003"> returns a </span><span class="cls_010">Vector2</span><span class="cls_003"> containing the size of the </span><span class="cls_010">Ground</span><span class="cls_003"> layer in cells. Multiplying this by the</span></div>
<div style="position:absolute;left:5.00px;top:147.75px" class="cls_010"><span class="cls_010">cell_size</span><span class="cls_003"> gives the total map size in pixels, which is used to set the four limit values on the </span><span class="cls_010">Camera</span><span class="cls_003"> node.</span></div>
<div style="position:absolute;left:5.00px;top:165.75px" class="cls_003"><span class="cls_003">Setting these limits ensures you won't see any </span><span class="cls_012">dead</span><span class="cls_003"> space outside the map when you move near the</span></div>
<div style="position:absolute;left:5.00px;top:183.75px" class="cls_003"><span class="cls_003">edge.</span></div>
<div style="position:absolute;left:5.00px;top:216.75px" class="cls_003"><span class="cls_003">Now, add the </span><span class="cls_010">spawn_items()</span><span class="cls_003"> function:</span></div>
<div style="position:absolute;left:19.99px;top:251.25px" class="cls_010"><span class="cls_010">func spawn_items():</span></div>
<div style="position:absolute;left:40.99px;top:262.50px" class="cls_010"><span class="cls_010">for cell in items.get_used_cells():</span></div>
<div style="position:absolute;left:61.98px;top:273.75px" class="cls_010"><span class="cls_010">var id = items.get_cellv(cell)</span></div>
<div style="position:absolute;left:61.98px;top:285.00px" class="cls_010"><span class="cls_010">var type = items.tile_set.tile_get_name(id)</span></div>
<div style="position:absolute;left:61.98px;top:296.25px" class="cls_010"><span class="cls_010">var pos = items.map_to_world(cell) + items.cell_size/2</span></div>
<div style="position:absolute;left:61.98px;top:307.50px" class="cls_010"><span class="cls_010">match type:</span></div>
<div style="position:absolute;left:82.97px;top:318.75px" class="cls_010"><span class="cls_010">'slime_spawn':</span></div>
<div style="position:absolute;left:103.96px;top:330.00px" class="cls_010"><span class="cls_010">var s = Enemy.instance()</span></div>
<div style="position:absolute;left:103.96px;top:341.25px" class="cls_010"><span class="cls_010">s.position = pos</span></div>
<div style="position:absolute;left:103.96px;top:352.50px" class="cls_010"><span class="cls_010">s.tile_size = items.cell_size</span></div>
<div style="position:absolute;left:103.96px;top:363.75px" class="cls_010"><span class="cls_010">add_child(s)</span></div>
<div style="position:absolute;left:82.97px;top:375.00px" class="cls_010"><span class="cls_010">'player_spawn':</span></div>
<div style="position:absolute;left:103.96px;top:386.25px" class="cls_010"><span class="cls_010">$Player.position = pos</span></div>
<div style="position:absolute;left:103.96px;top:397.50px" class="cls_010"><span class="cls_010">$Player.tile_size = items.cell_size</span></div>
<div style="position:absolute;left:82.97px;top:408.75px" class="cls_010"><span class="cls_010">'coin', 'key_red', 'star':</span></div>
<div style="position:absolute;left:103.96px;top:420.00px" class="cls_010"><span class="cls_010">var p = Pickup.instance()</span></div>
<div style="position:absolute;left:103.96px;top:431.25px" class="cls_010"><span class="cls_010">p.init(type, pos)</span></div>
<div style="position:absolute;left:103.96px;top:442.50px" class="cls_010"><span class="cls_010">add_child(p)</span></div>
<div style="position:absolute;left:5.00px;top:467.25px" class="cls_003"><span class="cls_003">This function looks for the tiles in the </span><span class="cls_010">Items</span><span class="cls_003"> layer, returned by </span><span class="cls_010">get_used_cells()</span><span class="cls_003">. Each cell has an </span><span class="cls_010">id</span><span class="cls_003"> that</span></div>
<div style="position:absolute;left:5.00px;top:485.25px" class="cls_003"><span class="cls_003">maps to a name in the </span><span class="cls_010">TileSet</span><span class="cls_003"> (the names that were assigned to each tile when the </span><span class="cls_010">TileSet</span><span class="cls_003"> was made). If</span></div>
<div style="position:absolute;left:5.00px;top:503.25px" class="cls_003"><span class="cls_003">you made your own tile set, make sure you use the names that match your tiles in this function. The</span></div>
<div style="position:absolute;left:5.00px;top:521.25px" class="cls_003"><span class="cls_003">names used in the preceding code match the tile set that was included in the asset download.</span></div>
<div style="position:absolute;left:5.00px;top:554.25px" class="cls_010"><span class="cls_010">map_to_world()</span><span class="cls_003"> converts the tile map position to pixel coordinates. This gives you the upper-left corner</span></div>
<div style="position:absolute;left:5.00px;top:572.25px" class="cls_003"><span class="cls_003">of the tile, so then you must add one half-size tile to find the center of the tile. Then, depending on</span></div>
<div style="position:absolute;left:5.00px;top:590.25px" class="cls_003"><span class="cls_003">what tile was found, the matching item object is instanced.</span></div>
<div style="position:absolute;left:5.00px;top:623.25px" class="cls_003"><span class="cls_003">Finally, add the three functions for the player signals:</span></div>
<div style="position:absolute;left:19.99px;top:657.75px" class="cls_010"><span class="cls_010">func game_over():</span></div>
<div style="position:absolute;left:40.99px;top:669.00px" class="cls_010"><span class="cls_010">pass</span></div>
<div style="position:absolute;left:19.99px;top:691.50px" class="cls_010"><span class="cls_010">func _on_Player_win():</span></div>
<div style="position:absolute;left:40.99px;top:702.75px" class="cls_010"><span class="cls_010">pass</span></div>
<div style="position:absolute;left:19.99px;top:734.25px" class="cls_010"><span class="cls_010">func _on_Player_grabbed_key():</span></div>
<div style="position:absolute;left:40.99px;top:745.50px" class="cls_010"><span class="cls_010">for cell in doors:</span></div>
<div style="position:absolute;left:61.98px;top:756.75px" class="cls_010"><span class="cls_010">$Walls.set_cellv(cell, -1)</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:107468px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background137.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:3.00px" class="cls_003"><span class="cls_003">The player signals </span><span class="cls_010">dead</span><span class="cls_003"> and </span><span class="cls_010">win</span><span class="cls_003"> should end the game and go to a Game Over screen (which you haven't</span></div>
<div style="position:absolute;left:5.00px;top:21.00px" class="cls_003"><span class="cls_003">created yet). Since you can't write the code for those functions yet, use </span><span class="cls_010">pass</span><span class="cls_003"> for the time being. The key</span></div>
<div style="position:absolute;left:5.00px;top:39.00px" class="cls_003"><span class="cls_003">pickup signal should remove any door tiles (by setting their tile index to </span><span class="cls_010">-1</span><span class="cls_003">, which means an empty</span></div>
<div style="position:absolute;left:5.00px;top:57.00px" class="cls_003"><span class="cls_003">tile).</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:108270px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background138.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Adding more levels</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">If you want to make another level, you just need to duplicate this scene tree and attach the same script</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">to it. The easiest way to do this is to use Scene | Save As and save the level as </span><span class="cls_010">Level2.tscn</span><span class="cls_003">. Then, you</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">can use some of the existing tiles or draw a whole new level layout.</span></div>
<div style="position:absolute;left:5.00px;top:148.50px" class="cls_003"><span class="cls_003">Feel free to do this with as many levels as you like, making sure to save them all in the </span><span class="cls_010">levels</span><span class="cls_003"> folder.</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">In the next section, you'll see how to link them together so that each level will lead to the next. Don't</span></div>
<div style="position:absolute;left:5.00px;top:184.50px" class="cls_003"><span class="cls_003">worry if you number them incorrectly; you'll be able to put them in whatever order you like.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:109072px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background139.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Game flow</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Now that you have the basic building blocks completed, you need to tie everything together. In this</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">section, you'll create:</span></div>
<div style="position:absolute;left:34.99px;top:129.75px" class="cls_003"><span class="cls_003">The Start and Game Over screens</span></div>
<div style="position:absolute;left:34.99px;top:147.00px" class="cls_003"><span class="cls_003">A global script to manage persistent data</span></div>
<div style="position:absolute;left:5.00px;top:180.00px" class="cls_003"><span class="cls_003">The basic flow of the game follows the following chart:</span></div>
<div style="position:absolute;left:5.00px;top:397.50px" class="cls_003"><span class="cls_003">The player is sent to the end screen whenever he/she dies, or when they reach and complete the last</span></div>
<div style="position:absolute;left:5.00px;top:415.50px" class="cls_003"><span class="cls_003">level. After a brief time, the end screen returns the player to the start screen so that a new game can</span></div>
<div style="position:absolute;left:5.00px;top:433.50px" class="cls_003"><span class="cls_003">be played.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:109874px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background140.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Start and end screens</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">You need two scenes for this part: a start or title screen that shows before the game (and lets the</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">player start the game), and a game over screen to notify the player that the game has ended.</span></div>
<div style="position:absolute;left:5.00px;top:130.50px" class="cls_003"><span class="cls_003">Make a new scene and add a </span><span class="cls_010">Control</span><span class="cls_003"> node named </span><span class="cls_010">StartScreen</span><span class="cls_003">. Add a Label as a child and</span></div>
<div style="position:absolute;left:5.00px;top:148.50px" class="cls_003"><span class="cls_003">add </span><span class="cls_010">res://assets/Unique.ttf</span><span class="cls_003"> as a new </span><span class="cls_010">DynamicFont</span><span class="cls_003"> with a font size of </span><span class="cls_010">64</span><span class="cls_003">. Set the Align and Valign properties</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">to Center and the Text to </span><span class="cls_010">Escape the Maze!</span><span class="cls_003">. In the Layout menu, select Full Rect. Now, duplicate this</span></div>
<div style="position:absolute;left:5.00px;top:184.50px" class="cls_003"><span class="cls_003">node and set the second label's Text to Press &lt;space>.</span></div>
<div style="position:absolute;left:5.00px;top:217.50px" class="cls_003"><span class="cls_003">For this demonstration, the </span><span class="cls_010">StartScreen</span><span class="cls_003"> is being kept very plain. Once you have it working, feel free to</span></div>
<div style="position:absolute;left:5.00px;top:235.50px" class="cls_003"><span class="cls_003">add decorations, or even an </span><span class="cls_010">AnimationPlayer</span><span class="cls_003"> to make a player Sprite run across the screen.</span></div>
<div style="position:absolute;left:5.00px;top:268.50px" class="cls_003"><span class="cls_003">Choose Scene | Save As to save another copy of this scene and name it </span><span class="cls_010">EndScreen</span><span class="cls_003">. Delete the second</span></div>
<div style="position:absolute;left:5.00px;top:286.50px" class="cls_010"><span class="cls_010">Label</span><span class="cls_003"> (the one that says Press &lt;space>) and add a </span><span class="cls_010">Timer</span><span class="cls_003"> node. Set the Autostart property to On, One</span></div>
<div style="position:absolute;left:5.00px;top:304.50px" class="cls_003"><span class="cls_003">Shot to On, and Wait Time to </span><span class="cls_010">3</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:337.50px" class="cls_003"><span class="cls_003">The </span><span class="cls_010">Timer</span><span class="cls_003"> will send the game back to the </span><span class="cls_010">StartScreen</span><span class="cls_003"> after it expires.</span></div>
<div style="position:absolute;left:5.00px;top:370.50px" class="cls_003"><span class="cls_003">However, before you can connect these other scenes together, you need to understand how to work</span></div>
<div style="position:absolute;left:5.00px;top:388.50px" class="cls_003"><span class="cls_003">with persistent data and </span><span class="cls_012">Autoloads</span><span class="cls_003">.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:110676px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background141.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Globals</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">It is a very common scenario in game development that you have some data that needs to persist</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">across multiple scenes. Data that is part of a scene is lost when the scene is switched, so persistent</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">data must reside somewhere outside the current scene.</span></div>
<div style="position:absolute;left:5.00px;top:148.50px" class="cls_003"><span class="cls_003">Godot solves this problem with the use of AutoLoads. These are scripts or nodes that are</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">automatically loaded in every scene. Because Godot does not support global variables, an autoload</span></div>
<div style="position:absolute;left:5.00px;top:184.50px" class="cls_003"><span class="cls_003">acts like a </span><span class="cls_012">Singleton.</span><span class="cls_003"> This is a node (with attached script) that is automatically loaded in </span><span class="cls_012">every</span></div>
<div style="position:absolute;left:5.00px;top:202.50px" class="cls_003"><span class="cls_003">scene. Common uses for AutoLoads include storing global data (score, player data, and so on),</span></div>
<div style="position:absolute;left:5.00px;top:220.50px" class="cls_003"><span class="cls_003">handling scene switching functions, or any other functions that need to be independent of the currently</span></div>
<div style="position:absolute;left:5.00px;top:238.50px" class="cls_003"><span class="cls_003">running scene.</span></div>
<div style="position:absolute;left:52.98px;top:272.25px" class="cls_016"><span class="cls_016">Singleton</span><span class="cls_008"> is a well-known pattern in programming which describes a class that only allows for a single instance of</span></div>
<div style="position:absolute;left:52.98px;top:285.75px" class="cls_008"><span class="cls_008">itself, and provides direct access to its member variables and functions. In game development, it is often used for</span></div>
<div style="position:absolute;left:52.98px;top:299.25px" class="cls_008"><span class="cls_008">persistent data that needs to be accessible by various parts of the game.</span></div>
<div style="position:absolute;left:5.00px;top:327.75px" class="cls_003"><span class="cls_003">When deciding if you need a singleton, ask yourself whether the object or data needs to </span><span class="cls_012">always</span><span class="cls_003"> exist</span></div>
<div style="position:absolute;left:5.00px;top:345.75px" class="cls_003"><span class="cls_003">and if there will always be </span><span class="cls_012">only one</span><span class="cls_003"> instance of that object.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:111478px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background142.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Global script</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">First, make a new script by clicking File | New in the Script window. Make sure it inherits from </span><span class="cls_010">Node</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">(this is the default), and in the </span><span class="cls_010">Path</span><span class="cls_003"> field, set the name to </span><span class="cls_010">Global.gd</span><span class="cls_003">. Click Create and add the following</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">code to the new script:</span></div>
<div style="position:absolute;left:19.99px;top:150.00px" class="cls_010"><span class="cls_010">extends Node</span></div>
<div style="position:absolute;left:19.99px;top:172.50px" class="cls_010"><span class="cls_010">var levels = ['res://levels/Level1.tscn',</span></div>
<div style="position:absolute;left:93.46px;top:183.75px" class="cls_010"><span class="cls_010">'res://levels/Level2.tscn']</span></div>
<div style="position:absolute;left:19.99px;top:195.00px" class="cls_010"><span class="cls_010">var current_level</span></div>
<div style="position:absolute;left:19.99px;top:217.50px" class="cls_010"><span class="cls_010">var start_screen = 'res://ui/StartScreen.tscn'</span></div>
<div style="position:absolute;left:19.99px;top:228.75px" class="cls_010"><span class="cls_010">var end_screen = 'res://ui/EndScreen.tscn'</span></div>
<div style="position:absolute;left:19.99px;top:251.25px" class="cls_010"><span class="cls_010">func new_game():</span></div>
<div style="position:absolute;left:40.99px;top:262.50px" class="cls_010"><span class="cls_010">current_level = -1</span></div>
<div style="position:absolute;left:40.99px;top:273.75px" class="cls_010"><span class="cls_010">next_level()</span></div>
<div style="position:absolute;left:19.99px;top:296.25px" class="cls_010"><span class="cls_010">func game_over():</span></div>
<div style="position:absolute;left:40.99px;top:307.50px" class="cls_010"><span class="cls_010">get_tree().change_scene(end_screen)</span></div>
<div style="position:absolute;left:19.99px;top:330.00px" class="cls_010"><span class="cls_010">func next_level():</span></div>
<div style="position:absolute;left:40.99px;top:341.25px" class="cls_010"><span class="cls_010">current_level += 1</span></div>
<div style="position:absolute;left:40.99px;top:352.50px" class="cls_010"><span class="cls_010">if current_level >= Global.levels.size():</span></div>
<div style="position:absolute;left:61.98px;top:363.75px" class="cls_010"><span class="cls_010"># no more levels to load :(</span></div>
<div style="position:absolute;left:61.98px;top:375.00px" class="cls_010"><span class="cls_010">game_over()</span></div>
<div style="position:absolute;left:40.99px;top:386.25px" class="cls_010"><span class="cls_010">else:</span></div>
<div style="position:absolute;left:61.98px;top:397.50px" class="cls_010"><span class="cls_010">get_tree().change_scene(levels[current_level])</span></div>
<div style="position:absolute;left:5.00px;top:422.25px" class="cls_003"><span class="cls_003">This script provides a number of functions you'll need.</span></div>
<div style="position:absolute;left:5.00px;top:455.25px" class="cls_003"><span class="cls_003">Most of the work is done by the </span><span class="cls_010">change_scene()</span><span class="cls_003"> method of the </span><span class="cls_010">SceneTree</span><span class="cls_003">. The </span><span class="cls_010">SceneTree</span><span class="cls_003"> represents the</span></div>
<div style="position:absolute;left:5.00px;top:473.25px" class="cls_003"><span class="cls_003">foundation of the currently running scene. When a scene is loaded or a new node is added, it becomes</span></div>
<div style="position:absolute;left:5.00px;top:491.25px" class="cls_003"><span class="cls_003">a member of the </span><span class="cls_010">SceneTree</span><span class="cls_003">. </span><span class="cls_010">change_scene()</span><span class="cls_003"> replaces the current scene with a given one.</span></div>
<div style="position:absolute;left:5.00px;top:524.25px" class="cls_003"><span class="cls_003">The </span><span class="cls_010">next_level()</span><span class="cls_003"> function progresses through the list of levels you've made, which are listed in the</span></div>
<div style="position:absolute;left:5.00px;top:542.25px" class="cls_010"><span class="cls_010">levels</span><span class="cls_003"> array. If you reach the end of the list, the game ends.</span></div>
<div style="position:absolute;left:5.00px;top:575.25px" class="cls_003"><span class="cls_003">To add this script as an autoload, open Project Settings and click on the AutoLoad tab. Click the ..</span></div>
<div style="position:absolute;left:5.00px;top:593.25px" class="cls_003"><span class="cls_003">button next to Path and select your </span><span class="cls_010">Global.gd</span><span class="cls_003"> script. The node Name will automatically be set to Global</span></div>
<div style="position:absolute;left:5.00px;top:611.25px" class="cls_003"><span class="cls_003">(this is the name you'll use to reference the node in your scripts, as shown in the following</span></div>
<div style="position:absolute;left:5.00px;top:629.25px" class="cls_003"><span class="cls_003">screenshot):</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:112280px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background143.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:180.00px" class="cls_003"><span class="cls_003">Now, you can access any of the global script's properties by using its name in any script across your</span></div>
<div style="position:absolute;left:5.00px;top:198.00px" class="cls_003"><span class="cls_003">whole game, for example, </span><span class="cls_010">Global.current_level</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:231.00px" class="cls_003"><span class="cls_003">Attach the following script to the </span><span class="cls_010">StartScreen</span><span class="cls_003">:</span></div>
<div style="position:absolute;left:19.99px;top:265.50px" class="cls_010"><span class="cls_010">extends Control</span></div>
<div style="position:absolute;left:19.99px;top:288.00px" class="cls_010"><span class="cls_010">func _input(event):</span></div>
<div style="position:absolute;left:40.99px;top:299.25px" class="cls_010"><span class="cls_010">if event.is_action_pressed('ui_select'):</span></div>
<div style="position:absolute;left:61.98px;top:310.50px" class="cls_010"><span class="cls_010">Global.new_game()</span></div>
<div style="position:absolute;left:5.00px;top:335.25px" class="cls_003"><span class="cls_003">This script waits for the spacebar to be pressed and then calls the </span><span class="cls_010">new_game()</span><span class="cls_003"> function of </span><span class="cls_010">Global</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:368.25px" class="cls_003"><span class="cls_003">Add this one to </span><span class="cls_010">EndScreen</span><span class="cls_003">:</span></div>
<div style="position:absolute;left:19.99px;top:402.75px" class="cls_010"><span class="cls_010">extends Control</span></div>
<div style="position:absolute;left:19.99px;top:425.25px" class="cls_010"><span class="cls_010">func _on_Timer_timeout():</span></div>
<div style="position:absolute;left:40.99px;top:436.50px" class="cls_010"><span class="cls_010">get_tree().change_scene(Global.start_screen)</span></div>
<div style="position:absolute;left:5.00px;top:461.25px" class="cls_003"><span class="cls_003">You'll also need to connect the </span><span class="cls_010">timeout</span><span class="cls_003"> signal of </span><span class="cls_010">Timer</span><span class="cls_003">. To do this, you have to create the script first,</span></div>
<div style="position:absolute;left:5.00px;top:479.25px" class="cls_003"><span class="cls_003">then the </span><span class="cls_010">Connect</span><span class="cls_003"> button will create the new function for you.</span></div>
<div style="position:absolute;left:5.00px;top:512.25px" class="cls_003"><span class="cls_003">In the </span><span class="cls_010">Level.gd</span><span class="cls_003"> script, you can now fill in the remaining two functions:</span></div>
<div style="position:absolute;left:19.99px;top:546.75px" class="cls_010"><span class="cls_010">func _on_Player_win():</span></div>
<div style="position:absolute;left:40.99px;top:558.00px" class="cls_010"><span class="cls_010">Global.next_level()</span></div>
<div style="position:absolute;left:19.99px;top:580.50px" class="cls_010"><span class="cls_010">func game_over():</span></div>
<div style="position:absolute;left:40.99px;top:591.75px" class="cls_010"><span class="cls_010">Global.game_over()</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:113082px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background144.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Score</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">The global singleton is a great place to keep the player's score so that it will be persistent from level</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">to level. Start by adding a </span><span class="cls_010">var score</span><span class="cls_003"> variable at the top of the file, and then in </span><span class="cls_010">new_game()</span><span class="cls_003">, add </span><span class="cls_010">score = 0</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:130.50px" class="cls_003"><span class="cls_003">Now, you need to add a point whenever a coin is collected. Go to </span><span class="cls_010">Pickup.gd</span><span class="cls_003"> and add </span><span class="cls_010">signal coin_pickup</span><span class="cls_003"> at</span></div>
<div style="position:absolute;left:5.00px;top:148.50px" class="cls_003"><span class="cls_003">the top. You can emit this signal in the </span><span class="cls_010">pickup()</span><span class="cls_003"> function:</span></div>
<div style="position:absolute;left:19.99px;top:183.00px" class="cls_010"><span class="cls_010">func pickup():</span></div>
<div style="position:absolute;left:40.99px;top:194.25px" class="cls_010"><span class="cls_010">match type:</span></div>
<div style="position:absolute;left:61.98px;top:205.50px" class="cls_010"><span class="cls_010">'coin':</span></div>
<div style="position:absolute;left:82.97px;top:216.75px" class="cls_010"><span class="cls_010">emit_signal('coin_pickup', 1)</span></div>
<div style="position:absolute;left:40.99px;top:228.00px" class="cls_010"><span class="cls_010">$CollisionShape2D.disabled = true</span></div>
<div style="position:absolute;left:40.99px;top:239.25px" class="cls_010"><span class="cls_010">$Tween.start()</span></div>
<div style="position:absolute;left:5.00px;top:264.00px" class="cls_003"><span class="cls_003">The value of </span><span class="cls_010">1</span><span class="cls_003"> is included here in case you want to later change the number of points that coins are</span></div>
<div style="position:absolute;left:5.00px;top:282.00px" class="cls_003"><span class="cls_003">worth, or add other objects that add different point amounts. This signal will be used to update the</span></div>
<div style="position:absolute;left:5.00px;top:300.00px" class="cls_003"><span class="cls_003">display, so now you can create the </span><span class="cls_010">HUD</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:333.00px" class="cls_003"><span class="cls_003">Make a new scene with a </span><span class="cls_010">CanvasLayer</span><span class="cls_003"> named </span><span class="cls_010">HUD</span><span class="cls_003"> and save the scene. Add a </span><span class="cls_010">MarginContainer</span><span class="cls_003"> node as a</span></div>
<div style="position:absolute;left:5.00px;top:351.00px" class="cls_003"><span class="cls_003">child, and under that, a </span><span class="cls_010">Label</span><span class="cls_003"> named </span><span class="cls_010">ScoreLabel</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:384.00px" class="cls_003"><span class="cls_003">Set the </span><span class="cls_010">MarginContainer</span><span class="cls_003"> Layout to Top Wide and its four margin properties (found under Custom</span></div>
<div style="position:absolute;left:5.00px;top:402.00px" class="cls_003"><span class="cls_003">Constants) all to </span><span class="cls_010">20</span><span class="cls_003">. Add the same Custom Font properties you used before for the start and end</span></div>
<div style="position:absolute;left:5.00px;top:420.00px" class="cls_003"><span class="cls_003">screens, then attach a script:</span></div>
<div style="position:absolute;left:19.99px;top:454.50px" class="cls_010"><span class="cls_010">extends CanvasLayer</span></div>
<div style="position:absolute;left:19.99px;top:477.00px" class="cls_010"><span class="cls_010">func _ready():</span></div>
<div style="position:absolute;left:40.99px;top:488.25px" class="cls_010"><span class="cls_010">$MarginContainer/ScoreLabel.text = str(Global.score)</span></div>
<div style="position:absolute;left:19.99px;top:510.75px" class="cls_010"><span class="cls_010">func update_score(value):</span></div>
<div style="position:absolute;left:40.99px;top:522.00px" class="cls_010"><span class="cls_010">Global.score += value</span></div>
<div style="position:absolute;left:40.99px;top:533.25px" class="cls_010"><span class="cls_010">$MarginContainer/ScoreLabel.text = str(Global.score)</span></div>
<div style="position:absolute;left:5.00px;top:558.00px" class="cls_003"><span class="cls_003">Add an instance of the </span><span class="cls_010">HUD</span><span class="cls_003"> to the </span><span class="cls_010">Level</span><span class="cls_003"> scene. Remember from the previous project that the </span><span class="cls_010">CanvasLayer</span></div>
<div style="position:absolute;left:5.00px;top:576.00px" class="cls_003"><span class="cls_003">node will remain on top of the rest of the game. It will also ignore any camera movement, so the</span></div>
<div style="position:absolute;left:5.00px;top:594.00px" class="cls_003"><span class="cls_003">display will remain fixed in place as the player moves around the level.</span></div>
<div style="position:absolute;left:5.00px;top:627.00px" class="cls_003"><span class="cls_003">Finally, in the </span><span class="cls_010">Level.gd</span><span class="cls_003"> script, when you spawn a new collectible object, connect the signal to the </span><span class="cls_010">HUD</span></div>
<div style="position:absolute;left:5.00px;top:645.00px" class="cls_003"><span class="cls_003">function:</span></div>
<div style="position:absolute;left:40.99px;top:679.50px" class="cls_010"><span class="cls_010">'coin', 'key_red', 'star':</span></div>
<div style="position:absolute;left:61.98px;top:690.75px" class="cls_010"><span class="cls_010">var p = Pickup.instance()</span></div>
<div style="position:absolute;left:61.98px;top:702.00px" class="cls_010"><span class="cls_010">p.init(type, pos)</span></div>
<div style="position:absolute;left:61.98px;top:713.25px" class="cls_010"><span class="cls_010">add_child(p)</span></div>
<div style="position:absolute;left:61.98px;top:724.50px" class="cls_010"><span class="cls_010">p.connect('coin_pickup', $HUD, 'update_score')</span></div>
<div style="position:absolute;left:5.00px;top:749.25px" class="cls_003"><span class="cls_003">Run the game and collect a few coins to confirm that the score is updating.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:113884px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background145.jpg" width=612 height=792></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:113884px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background146.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Saving the High Score</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Many games require you to save some kind of information between play sessions. This is information</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">that you want to remain available, even when the application itself has quit. Examples include saved</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">games, user-created content, or downloadable resource packs. For this game, you'll save a High</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">Score value that will persist across game sessions.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:114686px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background147.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Reading and writing files</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">As you've seen before, Godot keeps all resources stored as files in the project folder. From code,</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">these are accessible under the </span><span class="cls_010">res://</span><span class="cls_003"> folder path. For example, </span><span class="cls_010">res://project.godot</span><span class="cls_003"> will always point to</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">the current project's configuration file, no matter where on your computer the project is actually</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">stored.</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">However, the </span><span class="cls_010">res://</span><span class="cls_003"> filesystem is set as read-only for safety when the project is run. It is also read-</span></div>
<div style="position:absolute;left:5.00px;top:184.50px" class="cls_003"><span class="cls_003">only when the project is exported. Any data that needs to be retained by the user is placed in the</span></div>
<div style="position:absolute;left:5.00px;top:202.50px" class="cls_010"><span class="cls_010">user://</span><span class="cls_003"> file path. Where this folder physically exists will vary depending on what platform the game is</span></div>
<div style="position:absolute;left:5.00px;top:220.50px" class="cls_003"><span class="cls_003">running on.</span></div>
<div style="position:absolute;left:52.98px;top:253.50px" class="cls_008"><span class="cls_008">You can find the current platform's user-writable data folder using </span><span class="cls_011">OS.get_user_data_dir()</span><span class="cls_008">. Add a </span><span class="cls_011">print()</span><span class="cls_008"> statement to the</span></div>
<div style="position:absolute;left:52.98px;top:267.00px" class="cls_011"><span class="cls_011">ready()</span><span class="cls_008"> function of one of your scripts to see what the location is on your system.</span></div>
<div style="position:absolute;left:5.00px;top:296.25px" class="cls_003"><span class="cls_003">Reading and writing to files is accomplished using a </span><span class="cls_010">File</span><span class="cls_003"> object. This object is used to open the file in</span></div>
<div style="position:absolute;left:5.00px;top:314.25px" class="cls_003"><span class="cls_003">read and/or write mode, and can also be used to test for a file's existence.</span></div>
<div style="position:absolute;left:5.00px;top:347.25px" class="cls_003"><span class="cls_003">Add the following code to </span><span class="cls_010">Global.gd</span><span class="cls_003">:</span></div>
<div style="position:absolute;left:19.99px;top:381.75px" class="cls_010"><span class="cls_010">var highscore = 0</span></div>
<div style="position:absolute;left:19.99px;top:393.00px" class="cls_010"><span class="cls_010">var score_file = "user://highscore.txt"</span></div>
<div style="position:absolute;left:19.99px;top:415.50px" class="cls_010"><span class="cls_010">func setup():</span></div>
<div style="position:absolute;left:40.99px;top:426.75px" class="cls_010"><span class="cls_010">var f = File.new()</span></div>
<div style="position:absolute;left:40.99px;top:438.00px" class="cls_010"><span class="cls_010">if f.file_exists(score_file):</span></div>
<div style="position:absolute;left:61.98px;top:449.25px" class="cls_010"><span class="cls_010">f.open(score_file, File.READ)</span></div>
<div style="position:absolute;left:61.98px;top:460.50px" class="cls_010"><span class="cls_010">var content = f.get_as_text()</span></div>
<div style="position:absolute;left:61.98px;top:471.75px" class="cls_010"><span class="cls_010">highscore = int(content)</span></div>
<div style="position:absolute;left:61.98px;top:483.00px" class="cls_010"><span class="cls_010">f.close()</span></div>
<div style="position:absolute;left:5.00px;top:507.75px" class="cls_003"><span class="cls_003">You first need to test whether the file exists. If it does, you can read the value, which is being stored</span></div>
<div style="position:absolute;left:5.00px;top:525.75px" class="cls_003"><span class="cls_003">as human-readable text, and assign it to the </span><span class="cls_010">highscore</span><span class="cls_003"> variable. Binary data can also be stored in files,</span></div>
<div style="position:absolute;left:5.00px;top:543.75px" class="cls_003"><span class="cls_003">if needed, but text will allow you to look at the file yourself and check that everything is working.</span></div>
<div style="position:absolute;left:5.00px;top:576.75px" class="cls_003"><span class="cls_003">Add the following code to check if the player has beat the previous high score:</span></div>
<div style="position:absolute;left:19.99px;top:611.25px" class="cls_010"><span class="cls_010">func game_over():</span></div>
<div style="position:absolute;left:40.99px;top:622.50px" class="cls_010"><span class="cls_010">if score > highscore:</span></div>
<div style="position:absolute;left:61.98px;top:633.75px" class="cls_010"><span class="cls_010">highscore = score</span></div>
<div style="position:absolute;left:61.98px;top:645.00px" class="cls_010"><span class="cls_010">save_score()</span></div>
<div style="position:absolute;left:40.99px;top:656.25px" class="cls_010"><span class="cls_010">get_tree().change_scene(end_screen)</span></div>
<div style="position:absolute;left:19.99px;top:678.75px" class="cls_010"><span class="cls_010">func save_score():</span></div>
<div style="position:absolute;left:40.99px;top:690.00px" class="cls_010"><span class="cls_010">var f = File.new()</span></div>
<div style="position:absolute;left:40.99px;top:701.25px" class="cls_010"><span class="cls_010">f.open(score_file, File.WRITE)</span></div>
<div style="position:absolute;left:40.99px;top:712.50px" class="cls_010"><span class="cls_010">f.store_string(str(highscore))</span></div>
<div style="position:absolute;left:40.99px;top:723.75px" class="cls_010"><span class="cls_010">f.close()</span></div>
<div style="position:absolute;left:5.00px;top:748.50px" class="cls_003"><span class="cls_003">The </span><span class="cls_010">save_score()</span><span class="cls_003"> function opens the file to write the new value. Note that if the file doesn't exist,</span></div>
<div style="position:absolute;left:5.00px;top:766.50px" class="cls_003"><span class="cls_003">opening in </span><span class="cls_010">WRITE</span><span class="cls_003"> mode will automatically create it.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:115488px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background148.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:3.00px" class="cls_003"><span class="cls_003">Next, you need to call the </span><span class="cls_010">setup()</span><span class="cls_003"> function when the game starts, so add this to </span><span class="cls_010">Global.gd</span><span class="cls_003">:</span></div>
<div style="position:absolute;left:19.99px;top:37.50px" class="cls_010"><span class="cls_010">func _ready():</span></div>
<div style="position:absolute;left:40.99px;top:48.75px" class="cls_010"><span class="cls_010">setup()</span></div>
<div style="position:absolute;left:5.00px;top:73.50px" class="cls_003"><span class="cls_003">Finally, to display the high score, add another </span><span class="cls_010">Label</span><span class="cls_003"> node to the </span><span class="cls_010">StartScreen</span><span class="cls_003"> scene (you can duplicate</span></div>
<div style="position:absolute;left:5.00px;top:91.50px" class="cls_003"><span class="cls_003">one of the existing ones). Arrange it below the other Labels (or in whatever order you like) and name</span></div>
<div style="position:absolute;left:5.00px;top:109.50px" class="cls_003"><span class="cls_003">it </span><span class="cls_010">ScoreNotice</span><span class="cls_003">. Add the following to the script:</span></div>
<div style="position:absolute;left:19.99px;top:144.00px" class="cls_010"><span class="cls_010">func _ready():</span></div>
<div style="position:absolute;left:40.99px;top:155.25px" class="cls_010"><span class="cls_010">$ScoreNotice.text = "High Score: " + str(Global.highscore)</span></div>
<div style="position:absolute;left:5.00px;top:180.00px" class="cls_003"><span class="cls_003">Run the game and check that your high score is increasing (when you beat it) and persisting when you</span></div>
<div style="position:absolute;left:5.00px;top:198.00px" class="cls_003"><span class="cls_003">quit and start the game again.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:116290px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background149.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Finishing touches</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Now that the main functionality of the game is complete, you can add a few more features to polish it</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">up a little bit.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:117092px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background150.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Death animation</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">When the enemy hits the player, you can add a small animation rather than just ending the game. The</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">effect will spin the character around while shrinking its scale property.</span></div>
<div style="position:absolute;left:5.00px;top:141.00px" class="cls_003"><span class="cls_003">Start by selecting the </span><span class="cls_010">AnimationPlayer</span><span class="cls_003"> node of the </span><span class="cls_010">Player</span><span class="cls_003"> and clicking the New Animation button:</span></div>
<div style="position:absolute;left:5.00px;top:159.00px" class="cls_003"><span class="cls_003">Name the new animation </span><span class="cls_010">die</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:192.00px" class="cls_003"><span class="cls_003">In this animation, you'll be animating the Sprite's Rotation Degrees and Scale properties. Find the</span></div>
<div style="position:absolute;left:5.00px;top:213.00px" class="cls_003"><span class="cls_003">Rotation Degrees property in the Inspector and click the key,</span></div>
<div style="position:absolute;left:386.59px;top:213.00px" class="cls_003"><span class="cls_003">, to add a track. Move the scrubber</span></div>
<div style="position:absolute;left:5.00px;top:231.00px" class="cls_003"><span class="cls_003">to the end of the animation, change Rotation Degrees to 360, and click the key again. Try playing the</span></div>
<div style="position:absolute;left:5.00px;top:249.00px" class="cls_003"><span class="cls_003">animation to see the character spin.</span></div>
<div style="position:absolute;left:52.98px;top:282.00px" class="cls_008"><span class="cls_008">Keep in mind that while degrees are typically used for Inspector properties, when writing code most Godot</span></div>
<div style="position:absolute;left:52.98px;top:295.50px" class="cls_008"><span class="cls_008">functions expect angles to be measured in radians.</span></div>
<div style="position:absolute;left:5.00px;top:324.75px" class="cls_003"><span class="cls_003">Now, do the same thing with the </span><span class="cls_012">Scale</span><span class="cls_003"> property. Add a keyframe (at the beginning!) for </span><span class="cls_010">(1, 1)</span><span class="cls_003"> and then</span></div>
<div style="position:absolute;left:5.00px;top:342.75px" class="cls_003"><span class="cls_003">another at the end with the scale set to </span><span class="cls_010">(0.2, 0.2)</span><span class="cls_003">. Try playing the animation again to see the results.</span></div>
<div style="position:absolute;left:5.00px;top:375.75px" class="cls_003"><span class="cls_003">The new animation needs to be triggered when the player hits an enemy. Add the following code to</span></div>
<div style="position:absolute;left:5.00px;top:393.75px" class="cls_003"><span class="cls_003">the player's </span><span class="cls_010">_on_Player_area_entered()</span><span class="cls_003"> function:</span></div>
<div style="position:absolute;left:19.99px;top:428.25px" class="cls_010"><span class="cls_010">if area.is_in_group('enemies'):</span></div>
<div style="position:absolute;left:40.99px;top:439.50px" class="cls_010"><span class="cls_010">area.hide()</span></div>
<div style="position:absolute;left:40.99px;top:450.75px" class="cls_010"><span class="cls_010">set_process(false)</span></div>
<div style="position:absolute;left:40.99px;top:462.00px" class="cls_010"><span class="cls_010">$CollisionShape2D.disabled = true</span></div>
<div style="position:absolute;left:40.99px;top:473.25px" class="cls_010"><span class="cls_010">$AnimationPlayer.play("die")</span></div>
<div style="position:absolute;left:40.99px;top:484.50px" class="cls_010"><span class="cls_010">yield($AnimationPlayer, 'animation_finished')</span></div>
<div style="position:absolute;left:40.99px;top:495.75px" class="cls_010"><span class="cls_010">emit_signal('dead')</span></div>
<div style="position:absolute;left:5.00px;top:520.50px" class="cls_003"><span class="cls_003">The added code takes care of a few things that need to happen. First, hiding the enemy that was hit</span></div>
<div style="position:absolute;left:5.00px;top:538.50px" class="cls_003"><span class="cls_003">makes sure that it doesn't cover the player and prevent you from seeing our new animation. Next, you</span></div>
<div style="position:absolute;left:5.00px;top:556.50px" class="cls_003"><span class="cls_003">use </span><span class="cls_010">set_process(false)</span><span class="cls_003"> to stop the </span><span class="cls_010">_process()</span><span class="cls_003"> function from running so that the player can't keep moving</span></div>
<div style="position:absolute;left:5.00px;top:574.50px" class="cls_003"><span class="cls_003">during the animation. You also need to disable the player's collision detection so that it doesn't detect</span></div>
<div style="position:absolute;left:5.00px;top:592.50px" class="cls_003"><span class="cls_003">another enemy if it happens to wander by.</span></div>
<div style="position:absolute;left:5.00px;top:625.50px" class="cls_003"><span class="cls_003">After starting the </span><span class="cls_010">die</span><span class="cls_003"> animation, you need to let it finish before emitting the </span><span class="cls_010">dead</span><span class="cls_003"> signal, so </span><span class="cls_010">yield</span><span class="cls_003"> is used</span></div>
<div style="position:absolute;left:5.00px;top:643.50px" class="cls_003"><span class="cls_003">to wait for the signal from </span><span class="cls_010">AnimationPlayer</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:676.50px" class="cls_003"><span class="cls_003">Try running the game and getting hit by an enemy to see the animation. If everything works fine, you'll</span></div>
<div style="position:absolute;left:5.00px;top:694.50px" class="cls_003"><span class="cls_003">notice something wrong on the next playthrough: the player is tiny! The animation ends with the</span></div>
<div style="position:absolute;left:5.00px;top:712.50px" class="cls_003"><span class="cls_003">Sprite's Scale set to </span><span class="cls_010">(0.2, 0.2)</span><span class="cls_003"> and nothing is setting it back to normal size. Add the following to the</span></div>
<div style="position:absolute;left:5.00px;top:730.50px" class="cls_003"><span class="cls_003">Player's script so that the scale will always start at the right value:</span></div>
<div style="position:absolute;left:19.99px;top:765.00px" class="cls_010"><span class="cls_010">func _ready():</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:117894px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background151.jpg" width=612 height=792></div>
<div style="position:absolute;left:40.99px;top:4.43px" class="cls_010"><span class="cls_010">$Sprite.scale = Vector2(1, 1)</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:118696px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background152.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Sound effects</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">There are six sound effects in the </span><span class="cls_010">res://assets/audio</span><span class="cls_003"> folder for you to use in the game. These audio files</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">are in OGG format. By default, Godot sets OGG files to loop when imported. Select the OGG files in</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">the FileSystem tab (you can use </span><span class="cls_012">Shift</span><span class="cls_003"> + Click to select multiple files) and click the Import tab on</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">the right-hand side of the editor window. Uncheck Loop and click the Reimport button:</span></div>
<div style="position:absolute;left:5.00px;top:315.00px" class="cls_003"><span class="cls_003">First, add the pickup sounds for the items. Add two </span><span class="cls_010">AudioStreamPlayer</span><span class="cls_003"> nodes to the </span><span class="cls_010">Pickup</span><span class="cls_003"> scene and name</span></div>
<div style="position:absolute;left:5.00px;top:333.00px" class="cls_003"><span class="cls_003">them </span><span class="cls_010">KeyPickup</span><span class="cls_003"> and </span><span class="cls_010">CoinPickup</span><span class="cls_003">. Drag the corresponding audio file into the Stream property of each node.</span></div>
<div style="position:absolute;left:5.00px;top:366.00px" class="cls_003"><span class="cls_003">You can also adjust the sound's volume via its Volume Db property, as shown in the following</span></div>
<div style="position:absolute;left:5.00px;top:384.00px" class="cls_003"><span class="cls_003">screenshot:</span></div>
<div style="position:absolute;left:5.00px;top:561.00px" class="cls_003"><span class="cls_003">Add the following code to the beginning of the </span><span class="cls_010">pickup()</span><span class="cls_003"> function:</span></div>
<div style="position:absolute;left:19.99px;top:595.50px" class="cls_010"><span class="cls_010">match type:</span></div>
<div style="position:absolute;left:40.99px;top:606.75px" class="cls_010"><span class="cls_010">'coin':</span></div>
<div style="position:absolute;left:61.98px;top:618.00px" class="cls_010"><span class="cls_010">emit_signal('coin_pickup', 1)</span></div>
<div style="position:absolute;left:61.98px;top:629.25px" class="cls_010"><span class="cls_010">$CoinPickup.play()</span></div>
<div style="position:absolute;left:40.99px;top:640.50px" class="cls_010"><span class="cls_010">'key_red':</span></div>
<div style="position:absolute;left:61.98px;top:651.75px" class="cls_010"><span class="cls_010">$KeyPickup.play()</span></div>
<div style="position:absolute;left:5.00px;top:676.50px" class="cls_003"><span class="cls_003">The other sound effects will be added to the </span><span class="cls_010">Player</span><span class="cls_003"> scene. Add three of the </span><span class="cls_010">AudioStreamPlayer</span><span class="cls_003"> and name</span></div>
<div style="position:absolute;left:5.00px;top:694.50px" class="cls_003"><span class="cls_003">them </span><span class="cls_010">Win</span><span class="cls_003">, </span><span class="cls_010">Lose</span><span class="cls_003">, and </span><span class="cls_010">Footsteps</span><span class="cls_003">, adding the matching sound file to each node's Stream. Update</span></div>
<div style="position:absolute;left:5.00px;top:712.50px" class="cls_003"><span class="cls_003">the </span><span class="cls_010">_on_Player_area_entered()</span><span class="cls_003"> function as follows:</span></div>
<div style="position:absolute;left:40.99px;top:747.00px" class="cls_010"><span class="cls_010">if area.type == 'star':</span></div>
<div style="position:absolute;left:61.98px;top:758.25px" class="cls_010"><span class="cls_010">$Win.play()</span></div>
<div style="position:absolute;left:61.98px;top:769.50px" class="cls_010"><span class="cls_010">$CollisionShape2D.disabled = true</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:119498px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background153.jpg" width=612 height=792></div>
<div style="position:absolute;left:61.98px;top:4.81px" class="cls_010"><span class="cls_010">yield($Win, "finished")</span></div>
<div style="position:absolute;left:61.98px;top:15.75px" class="cls_010"><span class="cls_010">emit_signal('win')</span></div>
<div style="position:absolute;left:5.00px;top:40.50px" class="cls_003"><span class="cls_003">You need to disable the collision and </span><span class="cls_010">yield</span><span class="cls_003"> for the sound to finish, or else it would be instantly</span></div>
<div style="position:absolute;left:5.00px;top:58.50px" class="cls_003"><span class="cls_003">terminated by the next level loading. This way, the player has time to hear the sound before moving</span></div>
<div style="position:absolute;left:5.00px;top:76.50px" class="cls_003"><span class="cls_003">on.</span></div>
<div style="position:absolute;left:5.00px;top:109.50px" class="cls_003"><span class="cls_003">To play the footsteps, add </span><span class="cls_010">$Footsteps.play()</span><span class="cls_003"> after </span><span class="cls_010">if move(dir):</span><span class="cls_003"> in the </span><span class="cls_010">_process()</span><span class="cls_003"> function. Note: you may</span></div>
<div style="position:absolute;left:5.00px;top:127.50px" class="cls_003"><span class="cls_003">want to reduce the sound of the footsteps so that they don't overwhelm everything; they should be</span></div>
<div style="position:absolute;left:5.00px;top:145.50px" class="cls_003"><span class="cls_003">subtle background sounds. In the </span><span class="cls_010">Footsteps</span><span class="cls_003"> node, set the Volume Db property to </span><span class="cls_010">-30</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:178.50px" class="cls_003"><span class="cls_003">Finally, to play the </span><span class="cls_010">Lose</span><span class="cls_003"> sound, add it to the enemy collision code here:</span></div>
<div style="position:absolute;left:19.99px;top:224.25px" class="cls_010"><span class="cls_010">if area.is_in_group('enemies'):</span></div>
<div style="position:absolute;left:40.99px;top:235.50px" class="cls_010"><span class="cls_010">area.hide()</span></div>
<div style="position:absolute;left:40.99px;top:246.75px" class="cls_010"><span class="cls_010">$CollisionShape2D.disabled = true</span></div>
<div style="position:absolute;left:40.99px;top:258.00px" class="cls_010"><span class="cls_010">set_process(false)</span></div>
<div style="position:absolute;left:40.99px;top:269.25px" class="cls_010"><span class="cls_010">$Lose.play()</span></div>
<div style="position:absolute;left:40.99px;top:280.50px" class="cls_010"><span class="cls_010">$AnimationPlayer.play("die")</span></div>
<div style="position:absolute;left:40.99px;top:291.75px" class="cls_010"><span class="cls_010">yield($Lose, 'finished')</span></div>
<div style="position:absolute;left:40.99px;top:303.00px" class="cls_010"><span class="cls_010">emit_signal('dead')</span></div>
<div style="position:absolute;left:5.00px;top:327.75px" class="cls_003"><span class="cls_003">Note that you need to change the yield function. Since the sound is slightly longer than the animation,</span></div>
<div style="position:absolute;left:5.00px;top:345.75px" class="cls_003"><span class="cls_003">it will get cut off if you end it on the animation's completion. Alternatively, you could adjust the</span></div>
<div style="position:absolute;left:5.00px;top:363.75px" class="cls_003"><span class="cls_003">duration of the animation to match the length of the sound.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:120300px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background154.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Summary</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">In this project, you have learned how to take advantage of Godot's inheritance system to organize and</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">share code between different objects in your game. This is a very powerful tool that you should keep</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">in mind whenever you start building a new game. If you start making multiple objects that repeat the</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">same properties and/or code, you should probably stop and think about what you're doing. Ask</span></div>
<div style="position:absolute;left:5.00px;top:151.50px" class="cls_003"><span class="cls_003">yourself: </span><span class="cls_012">can I use inheritance here to share what these objects have in common?</span><span class="cls_003"> In a bigger game</span></div>
<div style="position:absolute;left:5.00px;top:169.50px" class="cls_003"><span class="cls_003">with many more objects, this can save you a large amount of time.</span></div>
<div style="position:absolute;left:5.00px;top:202.50px" class="cls_003"><span class="cls_003">You saw how the </span><span class="cls_010">TileMap</span><span class="cls_003"> node works and how it allows you to quickly design maps and spawn new</span></div>
<div style="position:absolute;left:5.00px;top:220.50px" class="cls_003"><span class="cls_003">objects. They have many uses across many game genres. As you'll see later in this book, TileMaps are</span></div>
<div style="position:absolute;left:5.00px;top:238.50px" class="cls_003"><span class="cls_003">also ideal for designing platform game levels as well.</span></div>
<div style="position:absolute;left:5.00px;top:271.50px" class="cls_003"><span class="cls_003">You were also introduced to the </span><span class="cls_012">AutoLoad</span><span class="cls_003"> feature, which allows you to create a global script that</span></div>
<div style="position:absolute;left:5.00px;top:289.50px" class="cls_003"><span class="cls_003">contains persistent data used across multiple scenes. You also learned how to implement grid-based</span></div>
<div style="position:absolute;left:5.00px;top:307.50px" class="cls_003"><span class="cls_003">movement and used the </span><span class="cls_010">AnimationPlayer</span><span class="cls_003"> to work with spritesheet animations.</span></div>
<div style="position:absolute;left:5.00px;top:340.50px" class="cls_003"><span class="cls_003">In the next chapter, you'll learn about Godot's powerful physics body: the </span><span class="cls_010">RigidBody2D</span><span class="cls_003">. You'll use it to</span></div>
<div style="position:absolute;left:5.00px;top:358.50px" class="cls_003"><span class="cls_003">create a game in a classic genre: the space shooter.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:121102px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background155.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Space Rocks</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">By now, you should be getting more comfortable with working in Godot; adding nodes, creating</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">scripts, modifying properties in the Inspector, and so on. As you progress through this book, you won't</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">be forced to rehash the basics again and again. If you find yourself stuck, or feeling like you don't</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">quite remember how something is done, feel free to jump back to a previous project where it was</span></div>
<div style="position:absolute;left:5.00px;top:151.50px" class="cls_003"><span class="cls_003">explained in more detail. As you repeat the more common actions in Godot, they will start to feel</span></div>
<div style="position:absolute;left:5.00px;top:169.50px" class="cls_003"><span class="cls_003">more and more familiar. At the same time, each chapter will introduce you to more nodes and</span></div>
<div style="position:absolute;left:5.00px;top:187.50px" class="cls_003"><span class="cls_003">techniques to expand your understanding of Godot's features.</span></div>
<div style="position:absolute;left:5.00px;top:220.50px" class="cls_003"><span class="cls_003">In this next project, you'll make a space shooter game similar to the arcade classic Asteroids. The</span></div>
<div style="position:absolute;left:5.00px;top:238.50px" class="cls_003"><span class="cls_003">player will control a ship that can rotate and move in any direction. The goal will be to avoid the</span></div>
<div style="position:absolute;left:5.00px;top:256.50px" class="cls_003"><span class="cls_003">floating </span><span class="cls_012">space rocks</span><span class="cls_003"> and shoot them with the ship's laser. Refer to the following screenshot:</span></div>
<div style="position:absolute;left:5.00px;top:437.25px" class="cls_003"><span class="cls_003">You will learn about the following key topics in this project:</span></div>
<div style="position:absolute;left:34.99px;top:469.50px" class="cls_003"><span class="cls_003">Physics using </span><span class="cls_010">RigidBody2D</span></div>
<div style="position:absolute;left:34.99px;top:486.75px" class="cls_003"><span class="cls_003">Finite State Machines</span></div>
<div style="position:absolute;left:34.99px;top:504.00px" class="cls_003"><span class="cls_003">Building a dynamic, scalable UI</span></div>
<div style="position:absolute;left:34.99px;top:521.25px" class="cls_003"><span class="cls_003">Sound and music</span></div>
<div style="position:absolute;left:34.99px;top:538.50px" class="cls_003"><span class="cls_003">Particle effects</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:121904px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background156.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Project setup</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Create a new project and download the project assets from </span><span class="cls_009">https://github.com/PacktPublishing/Godot-Game-E</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_009"><span class="cls_009">ngine-Projects/releases</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:130.50px" class="cls_003"><span class="cls_003">For this project, you'll set up custom input actions using the Input Map. Using this feature, you can</span></div>
<div style="position:absolute;left:5.00px;top:148.50px" class="cls_003"><span class="cls_003">define custom events and assign different keys, mouse events, or other inputs to them. This allows for</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">more flexibility in designing your game, as your code can be written to respond to the </span><span class="cls_010">jump</span><span class="cls_003"> input, for</span></div>
<div style="position:absolute;left:5.00px;top:184.50px" class="cls_003"><span class="cls_003">example, without needing to know exactly what input the user pressed to make the event happen. This</span></div>
<div style="position:absolute;left:5.00px;top:202.50px" class="cls_003"><span class="cls_003">allows you to make the same code work on different devices, even if they have different hardware. In</span></div>
<div style="position:absolute;left:5.00px;top:220.50px" class="cls_003"><span class="cls_003">addition, since many gamers expect to be able to customize a game's inputs, this enables you to</span></div>
<div style="position:absolute;left:5.00px;top:238.50px" class="cls_003"><span class="cls_003">provide that option to the user as well.</span></div>
<div style="position:absolute;left:5.00px;top:271.50px" class="cls_003"><span class="cls_003">To set up the inputs for this game, open Project | Project Settings and select the Input Map tab.</span></div>
<div style="position:absolute;left:5.00px;top:304.50px" class="cls_003"><span class="cls_003">You'll need to create four new input actions: </span><span class="cls_010">rotate_left</span><span class="cls_003">, </span><span class="cls_010">rotate_right</span><span class="cls_003">, </span><span class="cls_010">thrust</span><span class="cls_003">, and </span><span class="cls_010">shoot</span><span class="cls_003">. Type the name of</span></div>
<div style="position:absolute;left:5.00px;top:322.50px" class="cls_003"><span class="cls_003">each action into the Action box and click Add. Then, for each action, click the + button and select the</span></div>
<div style="position:absolute;left:5.00px;top:340.50px" class="cls_003"><span class="cls_003">type of input to assign. For example, to allow the player to use both the arrow keys and the popular</span></div>
<div style="position:absolute;left:5.00px;top:358.50px" class="cls_003"><span class="cls_003">WASD alternative, the setup will look like this:</span></div>
<div style="position:absolute;left:5.00px;top:631.50px" class="cls_003"><span class="cls_003">If you have a gamepad or other controller connected to your computer, you can also add its inputs to</span></div>
<div style="position:absolute;left:5.00px;top:649.50px" class="cls_003"><span class="cls_003">the actions in the same way. Note: we're only considering button-style inputs at this stage, so while</span></div>
<div style="position:absolute;left:5.00px;top:667.50px" class="cls_003"><span class="cls_003">you'll be able to use a d-pad for this project, using an analog joystick would require changes to the</span></div>
<div style="position:absolute;left:5.00px;top:685.50px" class="cls_003"><span class="cls_003">project's code.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:122706px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background157.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Rigid body physics</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">In game development, you often need to know when two objects in the game space intersect or come</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">into contact. This is known as </span><span class="cls_012">collision detection</span><span class="cls_003">. When a collision is detected, you typically want</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">something to happen. This is known as </span><span class="cls_012">collision response</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:148.50px" class="cls_003"><span class="cls_003">Godot offers three kinds of physics bodies, grouped under the </span><span class="cls_010">PhysicsBody2D</span><span class="cls_003"> object type:</span></div>
<div style="position:absolute;left:34.99px;top:180.75px" class="cls_010"><span class="cls_010">StaticBody2D</span><span class="cls_003">: A static body is one that is not moved by the physics engine. It participates in</span></div>
<div style="position:absolute;left:34.99px;top:198.00px" class="cls_003"><span class="cls_003">collision detection, but does not move in response to the collision. This type of body is most</span></div>
<div style="position:absolute;left:34.99px;top:215.25px" class="cls_003"><span class="cls_003">often used for objects that are part of the environment or do not need to have any dynamic</span></div>
<div style="position:absolute;left:34.99px;top:232.50px" class="cls_003"><span class="cls_003">behavior, such as walls or the ground.</span></div>
<div style="position:absolute;left:34.99px;top:264.75px" class="cls_010"><span class="cls_010">RigidBody2D</span><span class="cls_003">: This is the physics body in Godot that provides simulated physics. This means that</span></div>
<div style="position:absolute;left:34.99px;top:282.00px" class="cls_003"><span class="cls_003">you don't control a </span><span class="cls_010">RigidBody2D</span><span class="cls_003"> directly. Instead, you apply forces to it (gravity, impulses, and so</span></div>
<div style="position:absolute;left:34.99px;top:299.25px" class="cls_003"><span class="cls_003">on) and Godot's built-in physics engine calculates the resultant movement, including collisions,</span></div>
<div style="position:absolute;left:34.99px;top:316.50px" class="cls_003"><span class="cls_003">bouncing, rotating, and other effects.</span></div>
<div style="position:absolute;left:34.99px;top:348.75px" class="cls_010"><span class="cls_010">KinematicBody2D</span><span class="cls_003">: This body type provides collision detection, but no physics. All movement must</span></div>
<div style="position:absolute;left:34.99px;top:366.00px" class="cls_003"><span class="cls_003">be implemented in code, and you must implement any collision response yourself. Kinematic</span></div>
<div style="position:absolute;left:34.99px;top:383.25px" class="cls_003"><span class="cls_003">bodies are most often used for player characters or other actors that require </span><span class="cls_012">arcade-style</span><span class="cls_003"> physics</span></div>
<div style="position:absolute;left:34.99px;top:400.50px" class="cls_003"><span class="cls_003">rather than realistic simulation.</span></div>
<div style="position:absolute;left:5.00px;top:433.50px" class="cls_003"><span class="cls_003">Understanding when to use a particular physics body type is a big part of building your game. Using</span></div>
<div style="position:absolute;left:5.00px;top:451.50px" class="cls_003"><span class="cls_003">the right node can simplify your development, while trying to force the wrong node to do the job can</span></div>
<div style="position:absolute;left:5.00px;top:469.50px" class="cls_003"><span class="cls_003">lead to frustration and poor results. As you work with each type of body, you'll come to learn their</span></div>
<div style="position:absolute;left:5.00px;top:487.50px" class="cls_003"><span class="cls_003">pros and cons and get a feel for when they can help build what you need.</span></div>
<div style="position:absolute;left:5.00px;top:520.50px" class="cls_003"><span class="cls_003">In this project, you'll be using the </span><span class="cls_010">RigidBody2D</span><span class="cls_003"> node for the player ship as well as the </span><span class="cls_012">space rocks</span></div>
<div style="position:absolute;left:5.00px;top:538.50px" class="cls_003"><span class="cls_003">themselves. You'll learn about the other body types in later chapters.</span></div>
<div style="position:absolute;left:5.00px;top:571.50px" class="cls_003"><span class="cls_003">Individual </span><span class="cls_010">RigidBody2D</span><span class="cls_003"> nodes have many properties you can use to customize their behavior, such as</span></div>
<div style="position:absolute;left:5.00px;top:589.50px" class="cls_010"><span class="cls_010">Mass</span><span class="cls_003">, </span><span class="cls_010">Friction</span><span class="cls_003">, or </span><span class="cls_010">Bounce</span><span class="cls_003">. These properties can be set in the Inspector:</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:123508px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background158.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:209.25px" class="cls_003"><span class="cls_003">Rigid bodies are also affected by the world's properties, which can be set in the Project Settings</span></div>
<div style="position:absolute;left:5.00px;top:227.25px" class="cls_003"><span class="cls_003">under Physics | 2D. These settings apply to all bodies in the world. Refer to the following screenshot:</span></div>
<div style="position:absolute;left:5.00px;top:500.25px" class="cls_003"><span class="cls_003">In most cases, you won't need to modify these settings. However, note that by default, gravity has a</span></div>
<div style="position:absolute;left:5.00px;top:518.25px" class="cls_003"><span class="cls_003">value of </span><span class="cls_010">98</span><span class="cls_003"> and a direction of </span><span class="cls_010">(0, 1)</span><span class="cls_003"> (downward). If you want to change the world gravity, you can do</span></div>
<div style="position:absolute;left:5.00px;top:536.25px" class="cls_003"><span class="cls_003">that here. You should also be aware of the last two properties, Default Linear Damp and Default</span></div>
<div style="position:absolute;left:5.00px;top:554.25px" class="cls_003"><span class="cls_003">Angular Damp. These properties control how quickly a body will lose forward speed and rotation</span></div>
<div style="position:absolute;left:5.00px;top:572.25px" class="cls_003"><span class="cls_003">speed, respectively. Setting them to lower values will make the world feel frictionless, while using</span></div>
<div style="position:absolute;left:5.00px;top:590.25px" class="cls_003"><span class="cls_003">larger values will feel like your objects are moving through mud.</span></div>
<div style="position:absolute;left:52.98px;top:623.25px" class="cls_011"><span class="cls_011">Area2D</span><span class="cls_008"> nodes can also be used to affect rigid body physics by using the Space Override property. Custom gravity</span></div>
<div style="position:absolute;left:52.98px;top:636.75px" class="cls_008"><span class="cls_008">and damping values will then be applied to any bodies that enter the area.</span></div>
<div style="position:absolute;left:5.00px;top:666.75px" class="cls_003"><span class="cls_003">Since this game will be taking place in outer space, gravity won't be needed, so set Default Gravity</span></div>
<div style="position:absolute;left:5.00px;top:684.75px" class="cls_003"><span class="cls_003">to </span><span class="cls_010">0</span><span class="cls_003">. You can leave the other settings as they are.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:124310px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background159.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Player ship</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">The player ship is the heart of the game. Most of the code you'll write for this project will be about</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">making the ship work. It will be controlled in the classic Asteroids style, with left/right rotation and</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">forward thrust. It will also detect the shoot input to allow the player to fire the laser and destroy the</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">floating rocks.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:125112px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background160.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Body setup and physics</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Create a new scene and add a </span><span class="cls_010">RigidBody2D</span><span class="cls_003"> named </span><span class="cls_010">Player</span><span class="cls_003"> as the root node, with </span><span class="cls_010">Sprite</span><span class="cls_003"> and </span><span class="cls_010">CollisionShape2D</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">children. Add the </span><span class="cls_010">res://assets/player_ship.png</span><span class="cls_003"> image to the Texture property of the </span><span class="cls_010">Sprite</span><span class="cls_003">. The ship image</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">is quite large, so set the Scale property of the </span><span class="cls_010">Sprite</span><span class="cls_003"> to </span><span class="cls_010">(0.5, 0.5)</span><span class="cls_003">and its Rotation to </span><span class="cls_010">90</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:52.98px;top:148.50px" class="cls_008"><span class="cls_008">The image for the ship is drawn pointing upwards. In Godot, a rotation of </span><span class="cls_011">0</span><span class="cls_008"> degrees points to the right (along the x</span></div>
<div style="position:absolute;left:52.98px;top:162.00px" class="cls_008"><span class="cls_008">axis). This means you need to set the Rotation of the </span><span class="cls_011">Sprite</span><span class="cls_008"> node to </span><span class="cls_011">90</span><span class="cls_008"> so it will match the body's direction.</span></div>
<div style="position:absolute;left:5.00px;top:191.25px" class="cls_003"><span class="cls_003">In the Shape property of </span><span class="cls_010">CollisionShape2D</span><span class="cls_003">, add a </span><span class="cls_010">CircleShape2D</span><span class="cls_003"> and scale it to cover the image as closely</span></div>
<div style="position:absolute;left:5.00px;top:209.25px" class="cls_003"><span class="cls_003">as possible (remember not to move the rectangular size handles):</span></div>
<div style="position:absolute;left:5.00px;top:441.00px" class="cls_003"><span class="cls_003">Save the scene. When working on larger-scale projects, it is recommended to organize your scenes</span></div>
<div style="position:absolute;left:5.00px;top:459.00px" class="cls_003"><span class="cls_003">and scripts into folders based on each game object. For example, if you make a </span><span class="cls_010">player</span><span class="cls_003"> folder, you can</span></div>
<div style="position:absolute;left:5.00px;top:477.00px" class="cls_003"><span class="cls_003">save player-related files there. This makes it easier to find and modify your files rather than having</span></div>
<div style="position:absolute;left:5.00px;top:495.00px" class="cls_003"><span class="cls_003">them all together in a single folder. While this project is relatively small, it's a good habit to adopt as</span></div>
<div style="position:absolute;left:5.00px;top:513.00px" class="cls_003"><span class="cls_003">your projects grow in size and complexity.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:125914px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background161.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">State machines</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">The player ship can be in a number of different states during gameplay. For example, when </span><span class="cls_012">alive,</span><span class="cls_003"> the</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">ship is visible and can be controlled by the player, but is vulnerable to being hit by rocks. On the</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">other hand, when </span><span class="cls_012">invulnerable, </span><span class="cls_003">the ship should appear semi-transparent and immune to damage.</span></div>
<div style="position:absolute;left:5.00px;top:148.50px" class="cls_003"><span class="cls_003">One way that programmers often handle situations like this is to add Boolean flag variables to the</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">code. For example, the </span><span class="cls_010">invulnerable</span><span class="cls_003"> flag is set to </span><span class="cls_010">true</span><span class="cls_003"> when the player spawns, or when the </span><span class="cls_010">alive</span><span class="cls_003"> flag is</span></div>
<div style="position:absolute;left:5.00px;top:184.50px" class="cls_003"><span class="cls_003">set to </span><span class="cls_010">false</span><span class="cls_003"> when the player is dead. However, this can lead to errors and strange situations where</span></div>
<div style="position:absolute;left:5.00px;top:202.50px" class="cls_003"><span class="cls_003">both the </span><span class="cls_010">alive</span><span class="cls_003"> and </span><span class="cls_010">invulnerable</span><span class="cls_003"> flags are set to </span><span class="cls_010">true</span><span class="cls_003"> at the same time. What happens when a rock hits the</span></div>
<div style="position:absolute;left:5.00px;top:220.50px" class="cls_003"><span class="cls_003">player in this situation? The two states are mutually exclusive, so this shouldn't be allowed to happen.</span></div>
<div style="position:absolute;left:5.00px;top:253.50px" class="cls_003"><span class="cls_003">One solution to this problem is to use a </span><span class="cls_002">Finite State Machine</span><span class="cls_003"> (</span><span class="cls_002">FSM</span><span class="cls_003">). When using an FSM, an entity</span></div>
<div style="position:absolute;left:5.00px;top:271.50px" class="cls_003"><span class="cls_003">can only be in one state at a given time. To design your FSM, you define some number of states and</span></div>
<div style="position:absolute;left:5.00px;top:289.50px" class="cls_003"><span class="cls_003">what events or actions can cause a transition from one state to another.</span></div>
<div style="position:absolute;left:5.00px;top:322.50px" class="cls_003"><span class="cls_003">The following diagram outlines the FSM for the player ship:</span></div>
<div style="position:absolute;left:5.00px;top:521.25px" class="cls_003"><span class="cls_003">There are four states, and the arrows indicate what transitions are allowed, as well as what event</span></div>
<div style="position:absolute;left:5.00px;top:539.25px" class="cls_003"><span class="cls_003">triggers the transition. By checking the current state, you can decide what the player is allowed to do.</span></div>
<div style="position:absolute;left:5.00px;top:557.25px" class="cls_003"><span class="cls_003">For example, in the </span><span class="cls_002">DEAD</span><span class="cls_003"> state, don't allow input, or in the </span><span class="cls_002">INVULNERABLE</span><span class="cls_003"> state, don't allow</span></div>
<div style="position:absolute;left:5.00px;top:575.25px" class="cls_003"><span class="cls_003">shooting.</span></div>
<div style="position:absolute;left:5.00px;top:608.25px" class="cls_003"><span class="cls_003">Advanced FSM implementations can become quite complex, and the details are beyond the scope of</span></div>
<div style="position:absolute;left:5.00px;top:626.25px" class="cls_003"><span class="cls_003">this book (see the </span><span class="cls_017">Appendix</span><span class="cls_003"> for further reading). In the purest sense, you technically won't be creating a</span></div>
<div style="position:absolute;left:5.00px;top:644.25px" class="cls_003"><span class="cls_003">true FSM, but for the purposes of this project, it will be sufficient to illustrate the concept and keep</span></div>
<div style="position:absolute;left:5.00px;top:662.25px" class="cls_003"><span class="cls_003">you from running into the Boolean flag problem.</span></div>
<div style="position:absolute;left:5.00px;top:695.25px" class="cls_003"><span class="cls_003">Add a script to the </span><span class="cls_010">Player</span><span class="cls_003"> node and start by creating the skeleton of the FSM implementation:</span></div>
<div style="position:absolute;left:19.99px;top:729.75px" class="cls_010"><span class="cls_010">extends RigidBody2D</span></div>
<div style="position:absolute;left:19.99px;top:752.25px" class="cls_010"><span class="cls_010">enum {INIT, ALIVE, INVULNERABLE, DEAD}</span></div>
<div style="position:absolute;left:19.99px;top:763.50px" class="cls_010"><span class="cls_010">var state = null</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:126716px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background162.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:3.00px" class="cls_003"><span class="cls_003">An </span><span class="cls_010">enum</span><span class="cls_003"> (short for enumeration) is a convenient way to create a set of constants. The </span><span class="cls_010">enum</span><span class="cls_003"> statement in</span></div>
<div style="position:absolute;left:5.00px;top:21.00px" class="cls_003"><span class="cls_003">the preceding code snippet is equivalent to the following code:</span></div>
<div style="position:absolute;left:19.99px;top:55.50px" class="cls_010"><span class="cls_010">const INIT = 0</span></div>
<div style="position:absolute;left:19.99px;top:66.75px" class="cls_010"><span class="cls_010">const ALIVE = 1</span></div>
<div style="position:absolute;left:19.99px;top:78.00px" class="cls_010"><span class="cls_010">const INVULNERABLE = 2</span></div>
<div style="position:absolute;left:19.99px;top:89.25px" class="cls_010"><span class="cls_010">const DEAD = 3</span></div>
<div style="position:absolute;left:5.00px;top:114.00px" class="cls_003"><span class="cls_003">You can also assign a name to an </span><span class="cls_010">enum</span><span class="cls_003">, which is useful when you have more than one collection of</span></div>
<div style="position:absolute;left:5.00px;top:132.00px" class="cls_003"><span class="cls_003">constants in a single script. For example:</span></div>
<div style="position:absolute;left:19.99px;top:166.50px" class="cls_010"><span class="cls_010">enum States {INIT, ALIVE}</span></div>
<div style="position:absolute;left:19.99px;top:189.00px" class="cls_010"><span class="cls_010">var state = States.INIT</span></div>
<div style="position:absolute;left:5.00px;top:213.75px" class="cls_003"><span class="cls_003">However, this isn't needed in this script, as you'll only be using the one </span><span class="cls_010">enum</span><span class="cls_003"> to track the ship's states.</span></div>
<div style="position:absolute;left:5.00px;top:246.75px" class="cls_003"><span class="cls_003">Next, create the </span><span class="cls_010">change_state</span><span class="cls_003"> function to handle state transitions:</span></div>
<div style="position:absolute;left:19.99px;top:281.25px" class="cls_010"><span class="cls_010">func _ready():</span></div>
<div style="position:absolute;left:40.99px;top:292.50px" class="cls_010"><span class="cls_010">change_state(ALIVE)</span></div>
<div style="position:absolute;left:19.99px;top:315.00px" class="cls_010"><span class="cls_010">func change_state(new_state):</span></div>
<div style="position:absolute;left:40.99px;top:326.25px" class="cls_010"><span class="cls_010">match new_state:</span></div>
<div style="position:absolute;left:61.98px;top:337.50px" class="cls_010"><span class="cls_010">INIT:</span></div>
<div style="position:absolute;left:82.97px;top:348.75px" class="cls_010"><span class="cls_010">$CollisionShape2D.disabled = true</span></div>
<div style="position:absolute;left:61.98px;top:360.00px" class="cls_010"><span class="cls_010">ALIVE:</span></div>
<div style="position:absolute;left:82.97px;top:371.25px" class="cls_010"><span class="cls_010">$CollisionShape2D.disabled = false</span></div>
<div style="position:absolute;left:61.98px;top:382.50px" class="cls_010"><span class="cls_010">INVULNERABLE:</span></div>
<div style="position:absolute;left:82.97px;top:393.75px" class="cls_010"><span class="cls_010">$CollisionShape2D.disabled = true</span></div>
<div style="position:absolute;left:61.98px;top:405.00px" class="cls_010"><span class="cls_010">DEAD:</span></div>
<div style="position:absolute;left:82.97px;top:416.25px" class="cls_010"><span class="cls_010">$CollisionShape2D.disabled = true</span></div>
<div style="position:absolute;left:40.99px;top:427.50px" class="cls_010"><span class="cls_010">state = new_state</span></div>
<div style="position:absolute;left:5.00px;top:452.25px" class="cls_003"><span class="cls_003">Whenever you need to change the state of the player, you'll call the </span><span class="cls_010">change_state()</span><span class="cls_003"> function and pass it</span></div>
<div style="position:absolute;left:5.00px;top:470.25px" class="cls_003"><span class="cls_003">the value of the new state. Then, by using a </span><span class="cls_010">match</span><span class="cls_003"> statement, you can execute whatever code should</span></div>
<div style="position:absolute;left:5.00px;top:488.25px" class="cls_003"><span class="cls_003">accompany the transition to the new state. To illustrate this, the </span><span class="cls_010">CollisionShape2D</span><span class="cls_003"> is being</span></div>
<div style="position:absolute;left:5.00px;top:506.25px" class="cls_003"><span class="cls_003">enabled/disabled by the </span><span class="cls_010">new_state</span><span class="cls_003"> value. In </span><span class="cls_010">_ready()</span><span class="cls_003">, you specify the initial state—currently </span><span class="cls_010">ALIVE</span><span class="cls_003"> so that</span></div>
<div style="position:absolute;left:5.00px;top:524.25px" class="cls_003"><span class="cls_003">you can test, but you'll change it to </span><span class="cls_010">INIT</span><span class="cls_003"> later.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:127518px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background163.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Controls</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Add the following variables to the script:</span></div>
<div style="position:absolute;left:19.99px;top:114.00px" class="cls_010"><span class="cls_010">export (int) var engine_power</span></div>
<div style="position:absolute;left:19.99px;top:125.25px" class="cls_010"><span class="cls_010">export (int) var spin_power</span></div>
<div style="position:absolute;left:19.99px;top:147.75px" class="cls_010"><span class="cls_010">var thrust = Vector2()</span></div>
<div style="position:absolute;left:19.99px;top:159.00px" class="cls_010"><span class="cls_010">var rotation_dir = 0</span></div>
<div style="position:absolute;left:5.00px;top:183.75px" class="cls_010"><span class="cls_010">engine_power</span><span class="cls_003"> and </span><span class="cls_010">spin_power</span><span class="cls_003"> control how fast the ship can accelerate and turn. In the Inspector, set them to</span></div>
<div style="position:absolute;left:5.00px;top:201.75px" class="cls_010"><span class="cls_010">500</span><span class="cls_003"> and </span><span class="cls_010">15000</span><span class="cls_003">, respectively. </span><span class="cls_010">thrust</span><span class="cls_003"> will represent the force being applied by the ship's engine: either </span><span class="cls_010">(0,</span></div>
<div style="position:absolute;left:5.00px;top:219.75px" class="cls_010"><span class="cls_010">0)</span><span class="cls_003"> when coasting, or a vector with the length of </span><span class="cls_010">engine_power</span><span class="cls_003"> when powered on. </span><span class="cls_010">rotation_dir</span><span class="cls_003"> will</span></div>
<div style="position:absolute;left:5.00px;top:237.75px" class="cls_003"><span class="cls_003">represent what direction the ship is turning in and apply a torque, or rotational force.</span></div>
<div style="position:absolute;left:5.00px;top:270.75px" class="cls_003"><span class="cls_003">By default, the physics settings provide some </span><span class="cls_012">damping</span><span class="cls_003">, which reduces a body's velocity and spin. In</span></div>
<div style="position:absolute;left:5.00px;top:288.75px" class="cls_003"><span class="cls_003">space, there's no friction, so for realism there shouldn't be any damping at all. However, for an</span></div>
<div style="position:absolute;left:5.00px;top:306.75px" class="cls_003"><span class="cls_003">arcade-style feel, it's preferable that the ship should stop when you let go of the keys. In the Inspector,</span></div>
<div style="position:absolute;left:5.00px;top:324.75px" class="cls_003"><span class="cls_003">set the player's Linear/Damp to </span><span class="cls_010">1</span><span class="cls_003"> and its Angular/Damp to </span><span class="cls_010">5</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:357.75px" class="cls_003"><span class="cls_003">The next step is to detect the input and move the ship:</span></div>
<div style="position:absolute;left:19.99px;top:392.25px" class="cls_010"><span class="cls_010">func _process(delta):</span></div>
<div style="position:absolute;left:40.99px;top:403.50px" class="cls_010"><span class="cls_010">get_input()</span></div>
<div style="position:absolute;left:19.99px;top:426.00px" class="cls_010"><span class="cls_010">func get_input():</span></div>
<div style="position:absolute;left:40.99px;top:437.25px" class="cls_010"><span class="cls_010">thrust = Vector2()</span></div>
<div style="position:absolute;left:40.99px;top:448.50px" class="cls_010"><span class="cls_010">if state in [DEAD, INIT]:</span></div>
<div style="position:absolute;left:61.98px;top:459.75px" class="cls_010"><span class="cls_010">return</span></div>
<div style="position:absolute;left:40.99px;top:471.00px" class="cls_010"><span class="cls_010">if Input.is_action_pressed("thrust"):</span></div>
<div style="position:absolute;left:61.98px;top:482.25px" class="cls_010"><span class="cls_010">thrust = Vector2(engine_power, 0)</span></div>
<div style="position:absolute;left:40.99px;top:493.50px" class="cls_010"><span class="cls_010">rotation_dir = 0</span></div>
<div style="position:absolute;left:40.99px;top:504.75px" class="cls_010"><span class="cls_010">if Input.is_action_pressed("rotate_right"):</span></div>
<div style="position:absolute;left:61.98px;top:516.00px" class="cls_010"><span class="cls_010">rotation_dir += 1</span></div>
<div style="position:absolute;left:40.99px;top:527.25px" class="cls_010"><span class="cls_010">if Input.is_action_pressed("rotate_left"):</span></div>
<div style="position:absolute;left:61.98px;top:538.50px" class="cls_010"><span class="cls_010">rotation_dir -= 1</span></div>
<div style="position:absolute;left:19.99px;top:561.00px" class="cls_010"><span class="cls_010">func _physics_process(delta):</span></div>
<div style="position:absolute;left:40.99px;top:572.25px" class="cls_010"><span class="cls_010">set_applied_force(thrust.rotated(rotation))</span></div>
<div style="position:absolute;left:40.99px;top:583.50px" class="cls_010"><span class="cls_010">set_applied_torque(spin_power * rotation_dir)</span></div>
<div style="position:absolute;left:5.00px;top:619.50px" class="cls_003"><span class="cls_003">The </span><span class="cls_010">get_input()</span><span class="cls_003"> function captures the key actions and sets the ship's thrust on or off, and the rotation</span></div>
<div style="position:absolute;left:5.00px;top:637.50px" class="cls_003"><span class="cls_003">direction (</span><span class="cls_010">rotation_dir</span><span class="cls_003">) to a positive or negative value (representing clockwise or counter-clockwise</span></div>
<div style="position:absolute;left:5.00px;top:655.50px" class="cls_003"><span class="cls_003">rotation). This function is called every frame in </span><span class="cls_010">_process()</span><span class="cls_003">. Note that if the state is </span><span class="cls_010">INIT</span><span class="cls_003"> or </span><span class="cls_010">DEAD</span><span class="cls_003">,</span></div>
<div style="position:absolute;left:5.00px;top:673.50px" class="cls_010"><span class="cls_010">get_input()</span><span class="cls_003"> will exit by using </span><span class="cls_010">return</span><span class="cls_003"> before checking for key actions.</span></div>
<div style="position:absolute;left:5.00px;top:706.50px" class="cls_003"><span class="cls_003">When using physics bodies, their movement and related functions should be called in</span></div>
<div style="position:absolute;left:5.00px;top:724.50px" class="cls_010"><span class="cls_010">_physics_process()</span><span class="cls_003">. Here, you can use </span><span class="cls_010">set_applied_force()</span><span class="cls_003"> to apply the engine thrust in whatever direction</span></div>
<div style="position:absolute;left:5.00px;top:742.50px" class="cls_003"><span class="cls_003">the ship is facing. Then, you can use </span><span class="cls_010">set_applied_torque()</span><span class="cls_003"> to cause the ship to rotate.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:128320px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background164.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:3.00px" class="cls_003"><span class="cls_003">Play the scene and you should be able to fly around freely.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:129122px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background165.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Screen wrap</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Another feature of classic 2D arcade games is </span><span class="cls_012">screen wrap</span><span class="cls_003">. If the player goes off one side of the</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">screen, they </span><span class="cls_012">appear</span><span class="cls_003"> on the other side. In practice, you teleport or instantaneously change the ship's</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">position to the opposite side. Add the following to the class variables at the top of the script:</span></div>
<div style="position:absolute;left:19.99px;top:150.00px" class="cls_010"><span class="cls_010">var screensize = Vector2()</span></div>
<div style="position:absolute;left:5.00px;top:174.75px" class="cls_003"><span class="cls_003">And add this to </span><span class="cls_010">_ready()</span><span class="cls_003">:</span></div>
<div style="position:absolute;left:19.99px;top:209.25px" class="cls_010"><span class="cls_010">screensize = get_viewport().get_visible_rect().size</span></div>
<div style="position:absolute;left:5.00px;top:234.00px" class="cls_003"><span class="cls_003">Later, the game's main script will handle setting </span><span class="cls_010">screensize</span><span class="cls_003"> for all of the game's objects, but for now,</span></div>
<div style="position:absolute;left:5.00px;top:252.00px" class="cls_003"><span class="cls_003">this will allow you to test the screen wrapping with just the player scene.</span></div>
<div style="position:absolute;left:5.00px;top:285.00px" class="cls_003"><span class="cls_003">When first approaching this problem, you might think you could use the body's </span><span class="cls_010">position</span><span class="cls_003"> property and, if</span></div>
<div style="position:absolute;left:5.00px;top:303.00px" class="cls_003"><span class="cls_003">it exceeds the bounds of the screen, set it to the opposite side. However, when using </span><span class="cls_010">RigidBody2D</span><span class="cls_003">, you</span></div>
<div style="position:absolute;left:5.00px;top:321.00px" class="cls_003"><span class="cls_003">can't directly set its </span><span class="cls_010">position</span><span class="cls_003">, because that would conflict with the movement that the physics engine is</span></div>
<div style="position:absolute;left:5.00px;top:339.00px" class="cls_003"><span class="cls_003">calculating. A common mistake is to try adding something like this to </span><span class="cls_010">_physics_process()</span><span class="cls_003">:</span></div>
<div style="position:absolute;left:19.99px;top:373.50px" class="cls_010"><span class="cls_010">func _physics_process(delta):</span></div>
<div style="position:absolute;left:40.99px;top:384.75px" class="cls_010"><span class="cls_010">if position.x > screensize.x:</span></div>
<div style="position:absolute;left:61.98px;top:396.00px" class="cls_010"><span class="cls_010">position.x = 0</span></div>
<div style="position:absolute;left:40.99px;top:407.25px" class="cls_010"><span class="cls_010">if position.x &lt; 0:</span></div>
<div style="position:absolute;left:61.98px;top:418.50px" class="cls_010"><span class="cls_010">position.x = screensize.x</span></div>
<div style="position:absolute;left:40.99px;top:429.75px" class="cls_010"><span class="cls_010">if position.y > screensize.y:</span></div>
<div style="position:absolute;left:61.98px;top:441.00px" class="cls_010"><span class="cls_010">position.y = 0</span></div>
<div style="position:absolute;left:40.99px;top:452.25px" class="cls_010"><span class="cls_010">if position.y &lt; 0:</span></div>
<div style="position:absolute;left:61.98px;top:463.50px" class="cls_010"><span class="cls_010">position.y = screensize.y</span></div>
<div style="position:absolute;left:40.99px;top:474.75px" class="cls_010"><span class="cls_010">set_applied_force(thrust.rotated(rotation))</span></div>
<div style="position:absolute;left:40.99px;top:486.00px" class="cls_010"><span class="cls_010">set_applied_torque(rotation_dir * spin_thrust)</span></div>
<div style="position:absolute;left:5.00px;top:510.75px" class="cls_003"><span class="cls_003">This will fail, trapping the player on the edge of the screen (and occasionally </span><span class="cls_012">glitching</span><span class="cls_003"> unpredictably</span></div>
<div style="position:absolute;left:5.00px;top:528.75px" class="cls_003"><span class="cls_003">at the corners). So, why doesn't this work? The Godot documentation recommends </span><span class="cls_010">_physics_process()</span></div>
<div style="position:absolute;left:5.00px;top:546.75px" class="cls_003"><span class="cls_003">for physics-related code—it even has </span><span class="cls_012">physics</span><span class="cls_003"> in the name. It makes sense at first glance that this</span></div>
<div style="position:absolute;left:5.00px;top:564.75px" class="cls_003"><span class="cls_003">should work correctly.</span></div>
<div style="position:absolute;left:5.00px;top:597.75px" class="cls_003"><span class="cls_003">In fact, the correct way to solve this problem is </span><span class="cls_012">not</span><span class="cls_003"> to use </span><span class="cls_010">_physics_process()</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:630.75px" class="cls_003"><span class="cls_003">To quote the </span><span class="cls_010">RigidBody2D</span><span class="cls_003"> docs:</span></div>
<div style="position:absolute;left:5.00px;top:663.75px" class="cls_008"><span class="cls_008">"You should not change a RigidBody2D's position or linear_velocity every frame or even very often. If you need to directly</span></div>
<div style="position:absolute;left:5.00px;top:677.25px" class="cls_008"><span class="cls_008">affect the body's state, use _integrate_forces, which allows you to directly access the physics state."</span></div>
<div style="position:absolute;left:5.00px;top:705.75px" class="cls_003"><span class="cls_003">And in the description for </span><span class="cls_010">_integrate_forces()</span><span class="cls_003">:</span></div>
<div style="position:absolute;left:5.00px;top:738.75px" class="cls_008"><span class="cls_008">"(It) Allows you to read and safely modify the simulation state for the object. Use this instead of _physics_process if you need to</span></div>
<div style="position:absolute;left:5.00px;top:752.25px" class="cls_008"><span class="cls_008">directly change the body's position or other physics properties. (emphasis added)"</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:129924px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background166.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:3.00px" class="cls_003"><span class="cls_003">The answer is to change the physics callback to </span><span class="cls_010">_integrate_forces()</span><span class="cls_003">, which gives you access to the</span></div>
<div style="position:absolute;left:5.00px;top:21.00px" class="cls_003"><span class="cls_003">body's </span><span class="cls_010">Physics2DDirectBodyState</span><span class="cls_003">. This is a Godot object containing a great deal of useful information</span></div>
<div style="position:absolute;left:5.00px;top:38.85px" class="cls_003"><span class="cls_003">about the current physics state of the body. In the case of location, the key piece of information is the</span></div>
<div style="position:absolute;left:5.00px;top:57.00px" class="cls_003"><span class="cls_003">body's </span><span class="cls_010">Transform2D</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:90.00px" class="cls_003"><span class="cls_003">A </span><span class="cls_012">transform</span><span class="cls_003"> is a matrix representing one or more transformations in 2D space such as translation,</span></div>
<div style="position:absolute;left:5.00px;top:108.00px" class="cls_003"><span class="cls_003">rotation, and/or scaling. The translation (that is, position) information is found by accessing</span></div>
<div style="position:absolute;left:5.00px;top:126.00px" class="cls_003"><span class="cls_003">the </span><span class="cls_010">origin</span><span class="cls_003"> property of the </span><span class="cls_010">Transform2D</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:159.00px" class="cls_003"><span class="cls_003">Using this information, you can implement the wrap around effect by changing </span><span class="cls_010">_physics_process()</span><span class="cls_003"> to</span></div>
<div style="position:absolute;left:5.00px;top:177.00px" class="cls_010"><span class="cls_010">_integrate_forces()</span><span class="cls_003"> and altering the transform's origin:</span></div>
<div style="position:absolute;left:19.99px;top:211.50px" class="cls_010"><span class="cls_010">func _integrate_forces(physics_state):</span></div>
<div style="position:absolute;left:40.99px;top:222.75px" class="cls_010"><span class="cls_010">set_applied_force(thrust.rotated(rotation))</span></div>
<div style="position:absolute;left:40.99px;top:234.00px" class="cls_010"><span class="cls_010">set_applied_torque(spin_power * rotation_dir)</span></div>
<div style="position:absolute;left:40.99px;top:245.25px" class="cls_010"><span class="cls_010">var xform = physics_state.get_transform()</span></div>
<div style="position:absolute;left:40.99px;top:256.50px" class="cls_010"><span class="cls_010">if xform.origin.x > screensize.x:</span></div>
<div style="position:absolute;left:61.98px;top:267.75px" class="cls_010"><span class="cls_010">xform.origin.x = 0</span></div>
<div style="position:absolute;left:40.99px;top:279.00px" class="cls_010"><span class="cls_010">if xform.origin.x &lt; 0:</span></div>
<div style="position:absolute;left:61.98px;top:290.25px" class="cls_010"><span class="cls_010">xform.origin.x = screensize.x</span></div>
<div style="position:absolute;left:40.99px;top:301.50px" class="cls_010"><span class="cls_010">if xform.origin.y > screensize.y:</span></div>
<div style="position:absolute;left:61.98px;top:312.75px" class="cls_010"><span class="cls_010">xform.origin.y = 0</span></div>
<div style="position:absolute;left:40.99px;top:324.00px" class="cls_010"><span class="cls_010">if xform.origin.y &lt; 0:</span></div>
<div style="position:absolute;left:61.98px;top:335.25px" class="cls_010"><span class="cls_010">xform.origin.y = screensize.y</span></div>
<div style="position:absolute;left:40.99px;top:346.50px" class="cls_010"><span class="cls_010">physics_state.set_transform(xform)</span></div>
<div style="position:absolute;left:5.00px;top:371.25px" class="cls_003"><span class="cls_003">Note that the function's argument name has been changed to </span><span class="cls_010">physics_state</span><span class="cls_003"> from its default: </span><span class="cls_010">state</span><span class="cls_003">. This is</span></div>
<div style="position:absolute;left:5.00px;top:389.25px" class="cls_003"><span class="cls_003">to prevent any possible confusion with the already existing </span><span class="cls_010">state</span><span class="cls_003"> variable, which tracks what FSM</span></div>
<div style="position:absolute;left:5.00px;top:407.25px" class="cls_003"><span class="cls_003">state the player is currently assigned to.</span></div>
<div style="position:absolute;left:5.00px;top:440.25px" class="cls_003"><span class="cls_003">Run the scene again and check that everything is working as expected. Make sure you try wrapping</span></div>
<div style="position:absolute;left:5.00px;top:458.25px" class="cls_003"><span class="cls_003">around in all four directions. A common mistake is to accidentally flip a greater-than or less-than</span></div>
<div style="position:absolute;left:5.00px;top:476.25px" class="cls_003"><span class="cls_003">sign, so check that first if you're having a problem with one or more screen edges.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:130726px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background167.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Shooting</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Now, it's time to give your ship some weapons. When pressing the </span><span class="cls_010">shoot</span><span class="cls_003"> action, a bullet should be</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">spawned at the front of the ship and travel in a straight line until it exits the screen. Then, the gun isn't</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">allowed to fire again until a small amount of time has passed.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:131528px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background168.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Bullet scene</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">This is the node setup for the bullet:</span></div>
<div style="position:absolute;left:34.99px;top:111.75px" class="cls_010"><span class="cls_010">Area2D</span><span class="cls_003"> (named </span><span class="cls_010">Bullet</span><span class="cls_003">)</span></div>
<div style="position:absolute;left:34.99px;top:135.00px" class="cls_010"><span class="cls_010">Sprite</span></div>
<div style="position:absolute;left:34.99px;top:152.25px" class="cls_010"><span class="cls_010">CollisionShape2D</span></div>
<div style="position:absolute;left:34.99px;top:169.50px" class="cls_010"><span class="cls_010">VisibilityNotifier2D</span></div>
<div style="position:absolute;left:5.00px;top:196.50px" class="cls_003"><span class="cls_003">Use </span><span class="cls_010">res://assets/laser.png</span><span class="cls_003"> from the assets folder for the texture of the </span><span class="cls_010">Sprite</span><span class="cls_003">, and a </span><span class="cls_010">CapsuleShape2D</span><span class="cls_003"> for the</span></div>
<div style="position:absolute;left:5.00px;top:214.50px" class="cls_003"><span class="cls_003">collision shape. You'll have to set the Rotation of the </span><span class="cls_010">CollisionShape2D</span><span class="cls_003"> to </span><span class="cls_010">90</span><span class="cls_003"> so that it will fit correctly.</span></div>
<div style="position:absolute;left:5.00px;top:232.50px" class="cls_003"><span class="cls_003">You should also scale the </span><span class="cls_010">Sprite</span><span class="cls_003"> down to half size (</span><span class="cls_010">(0.5, 0.5)</span><span class="cls_003">).</span></div>
<div style="position:absolute;left:5.00px;top:265.50px" class="cls_003"><span class="cls_003">Add the following script to the </span><span class="cls_010">Bullet</span><span class="cls_003"> node:</span></div>
<div style="position:absolute;left:19.99px;top:300.00px" class="cls_010"><span class="cls_010">extends Area2D</span></div>
<div style="position:absolute;left:19.99px;top:322.50px" class="cls_010"><span class="cls_010">export (int) var speed</span></div>
<div style="position:absolute;left:19.99px;top:333.75px" class="cls_010"><span class="cls_010">var velocity = Vector2()</span></div>
<div style="position:absolute;left:19.99px;top:356.25px" class="cls_010"><span class="cls_010">func start(pos, dir):</span></div>
<div style="position:absolute;left:40.99px;top:367.50px" class="cls_010"><span class="cls_010">position = pos</span></div>
<div style="position:absolute;left:40.99px;top:378.75px" class="cls_010"><span class="cls_010">rotation = dir</span></div>
<div style="position:absolute;left:40.99px;top:390.00px" class="cls_010"><span class="cls_010">velocity = Vector2(speed, 0).rotated(dir)</span></div>
<div style="position:absolute;left:19.99px;top:412.50px" class="cls_010"><span class="cls_010">func _process(delta):</span></div>
<div style="position:absolute;left:40.99px;top:423.75px" class="cls_010"><span class="cls_010">position += velocity * delta</span></div>
<div style="position:absolute;left:5.00px;top:466.50px" class="cls_003"><span class="cls_003">Set the exported </span><span class="cls_010">speed</span><span class="cls_003"> property to </span><span class="cls_010">1000</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:499.50px" class="cls_003"><span class="cls_003">The </span><span class="cls_010">VisibilityNotifier2D</span><span class="cls_003"> is a node that can inform you (using signals) whenever a node becomes</span></div>
<div style="position:absolute;left:5.00px;top:517.50px" class="cls_003"><span class="cls_003">visible/invisible. You can use this to automatically delete a bullet when it goes off screen. Connect</span></div>
<div style="position:absolute;left:5.00px;top:535.50px" class="cls_003"><span class="cls_003">the </span><span class="cls_010">screen_exited</span><span class="cls_003"> signal of </span><span class="cls_010">VisibilityNotifier2D</span><span class="cls_003"> and add this:</span></div>
<div style="position:absolute;left:19.99px;top:570.00px" class="cls_010"><span class="cls_010">func _on_VisibilityNotifier2D_screen_exited():</span></div>
<div style="position:absolute;left:40.99px;top:581.25px" class="cls_010"><span class="cls_010">queue_free()</span></div>
<div style="position:absolute;left:5.00px;top:606.00px" class="cls_003"><span class="cls_003">Finally, connect the bullet's </span><span class="cls_010">body_entered</span><span class="cls_003"> signal so that you can detect when the bullet hits a rock. The</span></div>
<div style="position:absolute;left:5.00px;top:624.00px" class="cls_003"><span class="cls_003">bullet doesn't need to </span><span class="cls_012">know</span><span class="cls_003"> anything about rocks, just that it has hit something. When you create the</span></div>
<div style="position:absolute;left:5.00px;top:642.00px" class="cls_003"><span class="cls_003">rocks, you'll add them to a group called </span><span class="cls_010">rocks</span><span class="cls_003"> and give them an </span><span class="cls_010">explode()</span><span class="cls_003"> method:</span></div>
<div style="position:absolute;left:19.99px;top:676.50px" class="cls_010"><span class="cls_010">func _on_Bullet_body_entered( body ):</span></div>
<div style="position:absolute;left:40.99px;top:687.75px" class="cls_010"><span class="cls_010">if body.is_in_group('rocks'):</span></div>
<div style="position:absolute;left:61.98px;top:699.00px" class="cls_010"><span class="cls_010">body.explode()</span></div>
<div style="position:absolute;left:61.98px;top:710.25px" class="cls_010"><span class="cls_010">queue_free()</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:132330px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background169.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Firing bullets</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Now, you need instances of the bullet to be created whenever the player fires. However, if you make</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">the bullet a child of the player, then it will move and rotate along with the player instead of moving</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">independently. Instead, the bullet should be added as a child of the main scene. One way to do this</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">would be to use </span><span class="cls_010">get_parent().add_child()</span><span class="cls_003">, since the </span><span class="cls_010">Main</span><span class="cls_003"> scene will be the parent of the player when the</span></div>
<div style="position:absolute;left:5.00px;top:151.50px" class="cls_003"><span class="cls_003">game is running. However, this would mean you could no longer run the </span><span class="cls_010">Player</span><span class="cls_003"> scene by itself like you</span></div>
<div style="position:absolute;left:5.00px;top:169.50px" class="cls_003"><span class="cls_003">have been doing, because </span><span class="cls_010">get_parent()</span><span class="cls_003"> would produce an error. Or, if in the </span><span class="cls_010">Main</span><span class="cls_003"> scene you decided to</span></div>
<div style="position:absolute;left:5.00px;top:187.50px" class="cls_003"><span class="cls_003">arrange things differently, making the player a child of some other node, the bullet wouldn't be added</span></div>
<div style="position:absolute;left:5.00px;top:205.50px" class="cls_003"><span class="cls_003">where you expect.</span></div>
<div style="position:absolute;left:52.98px;top:238.50px" class="cls_008"><span class="cls_008">In general, it is a bad idea to write code that assumes a fixed tree layout. Especially try to avoid using </span><span class="cls_011">get_parent()</span><span class="cls_008"> if</span></div>
<div style="position:absolute;left:52.98px;top:252.00px" class="cls_008"><span class="cls_008">at all possible. You may find it difficult to think this way at first, but it will result in a much more modular design</span></div>
<div style="position:absolute;left:52.98px;top:265.50px" class="cls_008"><span class="cls_008">and prevent some common mistakes.</span></div>
<div style="position:absolute;left:5.00px;top:294.00px" class="cls_003"><span class="cls_003">Instead, the player will </span><span class="cls_012">give</span><span class="cls_003"> the bullet to the main scene using a signal. In this way, the </span><span class="cls_010">Player</span><span class="cls_003"> scene</span></div>
<div style="position:absolute;left:5.00px;top:312.00px" class="cls_003"><span class="cls_003">doesn't need to </span><span class="cls_012">know</span><span class="cls_003"> anything about how the </span><span class="cls_010">Main</span><span class="cls_003"> scene is set up, or even if the </span><span class="cls_010">Main</span><span class="cls_003"> scene exists.</span></div>
<div style="position:absolute;left:5.00px;top:330.00px" class="cls_003"><span class="cls_003">Producing the bullet and handing it off is the </span><span class="cls_010">Player</span><span class="cls_003"> object's only responsibility.</span></div>
<div style="position:absolute;left:5.00px;top:363.00px" class="cls_003"><span class="cls_003">Add a </span><span class="cls_010">Position2D</span><span class="cls_003"> node to the player and name it </span><span class="cls_010">Muzzle</span><span class="cls_003">. This will mark the </span><span class="cls_012">muzzle</span><span class="cls_003"> of the gun—the</span></div>
<div style="position:absolute;left:5.00px;top:381.00px" class="cls_003"><span class="cls_003">location where the bullet will spawn. Set its Position to </span><span class="cls_010">(50, 0)</span><span class="cls_003"> to place it directly in front of the ship.</span></div>
<div style="position:absolute;left:5.00px;top:414.00px" class="cls_003"><span class="cls_003">Next, add a </span><span class="cls_010">Timer</span><span class="cls_003"> node named </span><span class="cls_010">GunTimer</span><span class="cls_003">. This will provide a </span><span class="cls_012">cooldown</span><span class="cls_003"> to the gun, preventing a new</span></div>
<div style="position:absolute;left:5.00px;top:432.00px" class="cls_003"><span class="cls_003">bullet from firing until a certain amount of time has passed. Check the One Shot and Autoplay boxes.</span></div>
<div style="position:absolute;left:5.00px;top:465.00px" class="cls_003"><span class="cls_003">Add these new variables to the player's script:</span></div>
<div style="position:absolute;left:19.99px;top:499.50px" class="cls_010"><span class="cls_010">signal shoot</span></div>
<div style="position:absolute;left:19.99px;top:522.00px" class="cls_010"><span class="cls_010">export (PackedScene) var Bullet</span></div>
<div style="position:absolute;left:19.99px;top:533.25px" class="cls_010"><span class="cls_010">export (float) var fire_rate</span></div>
<div style="position:absolute;left:19.99px;top:555.75px" class="cls_010"><span class="cls_010">var can_shoot = true</span></div>
<div style="position:absolute;left:5.00px;top:580.50px" class="cls_003"><span class="cls_003">Drag the </span><span class="cls_010">Bullet.tscn</span><span class="cls_003"> onto the new Bullet property in the Inspector, and set the Fire Rate to </span><span class="cls_010">0.25</span><span class="cls_003"> (this</span></div>
<div style="position:absolute;left:5.00px;top:598.50px" class="cls_003"><span class="cls_003">value is in seconds).</span></div>
<div style="position:absolute;left:5.00px;top:631.50px" class="cls_003"><span class="cls_003">Add this to </span><span class="cls_010">_ready()</span><span class="cls_003">:</span></div>
<div style="position:absolute;left:19.99px;top:666.00px" class="cls_010"><span class="cls_010">$GunTimer.wait_time = fire_rate</span></div>
<div style="position:absolute;left:5.00px;top:690.75px" class="cls_003"><span class="cls_003">And this to </span><span class="cls_010">get_input()</span><span class="cls_003">:</span></div>
<div style="position:absolute;left:19.99px;top:725.25px" class="cls_010"><span class="cls_010">if Input.is_action_pressed("shoot") and can_shoot:</span></div>
<div style="position:absolute;left:40.99px;top:736.50px" class="cls_010"><span class="cls_010">shoot()</span></div>
<div style="position:absolute;left:5.00px;top:761.25px" class="cls_003"><span class="cls_003">Now, create the </span><span class="cls_010">shoot()</span><span class="cls_003"> function, which will handle creating the bullet(s):</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:133132px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background170.jpg" width=612 height=792></div>
<div style="position:absolute;left:19.99px;top:4.50px" class="cls_010"><span class="cls_010">func shoot():</span></div>
<div style="position:absolute;left:40.99px;top:15.75px" class="cls_010"><span class="cls_010">if state == INVULNERABLE:</span></div>
<div style="position:absolute;left:61.98px;top:27.00px" class="cls_010"><span class="cls_010">return</span></div>
<div style="position:absolute;left:40.99px;top:38.25px" class="cls_010"><span class="cls_010">emit_signal("shoot", Bullet, $Muzzle.global_position, rotation)</span></div>
<div style="position:absolute;left:40.99px;top:49.50px" class="cls_010"><span class="cls_010">can_shoot = false</span></div>
<div style="position:absolute;left:40.99px;top:60.75px" class="cls_010"><span class="cls_010">$GunTimer.start()</span></div>
<div style="position:absolute;left:5.00px;top:85.50px" class="cls_003"><span class="cls_003">When emitting the </span><span class="cls_010">shoot</span><span class="cls_003"> signal, you pass the </span><span class="cls_010">Bullet</span><span class="cls_003"> itself plus its starting position and direction. Then,</span></div>
<div style="position:absolute;left:5.00px;top:103.50px" class="cls_003"><span class="cls_003">you disable shooting with the </span><span class="cls_010">can_shoot</span><span class="cls_003"> flag and start the </span><span class="cls_010">GunTimer</span><span class="cls_003">. To allow the gun to shoot again,</span></div>
<div style="position:absolute;left:5.00px;top:121.50px" class="cls_003"><span class="cls_003">connect the </span><span class="cls_010">timeout</span><span class="cls_003"> signal of the </span><span class="cls_010">GunTimer</span><span class="cls_003">:</span></div>
<div style="position:absolute;left:19.99px;top:156.00px" class="cls_010"><span class="cls_010">func _on_GunTimer_timeout():</span></div>
<div style="position:absolute;left:40.99px;top:167.25px" class="cls_010"><span class="cls_010">can_shoot = true</span></div>
<div style="position:absolute;left:5.00px;top:192.00px" class="cls_003"><span class="cls_003">Now, make your Main scene. Add a </span><span class="cls_010">Node</span><span class="cls_003"> named </span><span class="cls_010">Main</span><span class="cls_003"> and a </span><span class="cls_010">Sprite</span><span class="cls_003"> named </span><span class="cls_010">Background</span><span class="cls_003">. Use</span></div>
<div style="position:absolute;left:5.00px;top:210.00px" class="cls_010"><span class="cls_010">res://assets/space_background.png</span><span class="cls_003"> as the Texture</span><span class="cls_012">.</span><span class="cls_003"> Add an instance of the </span><span class="cls_010">Player</span><span class="cls_003"> to the scene.</span></div>
<div style="position:absolute;left:5.00px;top:243.00px" class="cls_003"><span class="cls_003">Add a script to </span><span class="cls_010">Main</span><span class="cls_003">, then connect the </span><span class="cls_010">Player</span><span class="cls_003"> node's </span><span class="cls_010">shoot</span><span class="cls_003"> signal, and add the following to the created</span></div>
<div style="position:absolute;left:5.00px;top:261.00px" class="cls_003"><span class="cls_003">function:</span></div>
<div style="position:absolute;left:19.99px;top:295.50px" class="cls_010"><span class="cls_010">func _on_Player_shoot(bullet, pos, dir):</span></div>
<div style="position:absolute;left:40.99px;top:306.75px" class="cls_010"><span class="cls_010">var b = bullet.instance()</span></div>
<div style="position:absolute;left:40.99px;top:318.00px" class="cls_010"><span class="cls_010">b.start(pos, dir)</span></div>
<div style="position:absolute;left:40.99px;top:329.25px" class="cls_010"><span class="cls_010">add_child(b)</span></div>
<div style="position:absolute;left:5.00px;top:354.00px" class="cls_003"><span class="cls_003">Play the </span><span class="cls_010">Main</span><span class="cls_003"> scene and test that you can fly and shoot.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:133934px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background171.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Rocks</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">The goal of the game is to destroy the floating space rocks, so, now that you can shoot, it's time to add</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">them. Like the ship, the rocks will also be </span><span class="cls_010">RigidBody2D</span><span class="cls_003">, which will make them travel in a straight line at</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">a steady speed unless disturbed. They'll also bounce off each other in a realistic fashion. To make</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">things more interesting, rocks will start out large and, when you shoot them, break into multiple</span></div>
<div style="position:absolute;left:5.00px;top:151.50px" class="cls_003"><span class="cls_003">smaller rocks.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:134736px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background172.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Scene setup</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Start a new scene by making a </span><span class="cls_010">RigidBody2D</span><span class="cls_003">, naming it </span><span class="cls_010">Rock</span><span class="cls_003">, and adding a </span><span class="cls_010">Sprite</span><span class="cls_003"> using the</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_010"><span class="cls_010">res://assets/rock.png</span><span class="cls_003"> texture. Add a </span><span class="cls_010">CollisionShape2D</span><span class="cls_003">, but </span><span class="cls_012">don't</span><span class="cls_003"> add a shape to it yet. Because you'll be</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">spawning different-sized rocks, the collision shape will need to be set in the code and adjusted to the</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">correct size.</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">Set the Bounce property of the </span><span class="cls_010">Rock</span><span class="cls_003"> to </span><span class="cls_010">1</span><span class="cls_003"> and both Linear/Damp and Angular/Damp to </span><span class="cls_010">0</span><span class="cls_003">.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:135538px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background173.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Variable size</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Attach a script and define the member variables:</span></div>
<div style="position:absolute;left:19.99px;top:114.00px" class="cls_010"><span class="cls_010">extends RigidBody2D</span></div>
<div style="position:absolute;left:19.99px;top:136.50px" class="cls_010"><span class="cls_010">var screensize = Vector2()</span></div>
<div style="position:absolute;left:19.99px;top:147.75px" class="cls_010"><span class="cls_010">var size</span></div>
<div style="position:absolute;left:19.99px;top:159.00px" class="cls_010"><span class="cls_010">var radius</span></div>
<div style="position:absolute;left:19.99px;top:170.25px" class="cls_010"><span class="cls_010">var scale_factor = 0.2</span></div>
<div style="position:absolute;left:5.00px;top:195.00px" class="cls_003"><span class="cls_003">The </span><span class="cls_010">Main</span><span class="cls_003"> script will handle spawning new rocks, both at the beginning of a level as well as the smaller</span></div>
<div style="position:absolute;left:5.00px;top:213.00px" class="cls_003"><span class="cls_003">rocks that will appear after a large one explodes. A large rock will have a </span><span class="cls_010">size</span><span class="cls_003"> of </span><span class="cls_010">3</span><span class="cls_003"> and break into</span></div>
<div style="position:absolute;left:5.00px;top:231.00px" class="cls_003"><span class="cls_003">rocks of size </span><span class="cls_010">2</span><span class="cls_003">, and so on. The </span><span class="cls_010">scale_factor</span><span class="cls_003"> is multiplied by </span><span class="cls_010">size</span><span class="cls_003"> to set the sprite's scale, the collision</span></div>
<div style="position:absolute;left:5.00px;top:249.00px" class="cls_003"><span class="cls_003">radius, and so on. You can adjust it later to change how big each category of rock is.</span></div>
<div style="position:absolute;left:5.00px;top:282.00px" class="cls_003"><span class="cls_003">All of this will be set by the </span><span class="cls_010">start()</span><span class="cls_003"> method:</span></div>
<div style="position:absolute;left:19.99px;top:316.50px" class="cls_010"><span class="cls_010">func start(pos, vel, _size):</span></div>
<div style="position:absolute;left:40.99px;top:327.75px" class="cls_010"><span class="cls_010">position = pos</span></div>
<div style="position:absolute;left:40.99px;top:339.00px" class="cls_010"><span class="cls_010">size = _size</span></div>
<div style="position:absolute;left:40.99px;top:350.25px" class="cls_010"><span class="cls_010">mass = 1.5 * size</span></div>
<div style="position:absolute;left:40.99px;top:361.50px" class="cls_010"><span class="cls_010">$Sprite.scale = Vector2(1, 1) * scale_factor * size</span></div>
<div style="position:absolute;left:40.99px;top:372.75px" class="cls_010"><span class="cls_010">radius = int($Sprite.texture.get_size().x / 2 * scale_factor * size)</span></div>
<div style="position:absolute;left:40.99px;top:384.00px" class="cls_010"><span class="cls_010">var shape = CircleShape2D.new()</span></div>
<div style="position:absolute;left:40.99px;top:395.25px" class="cls_010"><span class="cls_010">shape.radius = radius</span></div>
<div style="position:absolute;left:40.99px;top:406.50px" class="cls_010"><span class="cls_010">$CollisionShape2D.shape = shape</span></div>
<div style="position:absolute;left:40.99px;top:417.75px" class="cls_010"><span class="cls_010">linear_velocity = vel</span></div>
<div style="position:absolute;left:40.99px;top:429.00px" class="cls_010"><span class="cls_010">angular_velocity = rand_range(-1.5, 1.5)</span></div>
<div style="position:absolute;left:5.00px;top:453.75px" class="cls_003"><span class="cls_003">Here is where you calculate the correct collision shape based on the rock's </span><span class="cls_010">size</span><span class="cls_003"> and add it to the</span></div>
<div style="position:absolute;left:5.00px;top:471.75px" class="cls_010"><span class="cls_010">CollisionShape2D</span><span class="cls_003">. Note that since </span><span class="cls_010">size</span><span class="cls_003"> is already in use as a class variable, you can use </span><span class="cls_010">_size</span><span class="cls_003"> for the</span></div>
<div style="position:absolute;left:5.00px;top:489.75px" class="cls_003"><span class="cls_003">function argument.</span></div>
<div style="position:absolute;left:5.00px;top:522.75px" class="cls_003"><span class="cls_003">The rocks also need to wrap around the screen, so use the same technique you used for the </span><span class="cls_010">Player</span><span class="cls_003">:</span></div>
<div style="position:absolute;left:19.99px;top:557.25px" class="cls_010"><span class="cls_010">func _integrate_forces(physics_state):</span></div>
<div style="position:absolute;left:40.99px;top:568.50px" class="cls_010"><span class="cls_010">var xform = physics_state.get_transform()</span></div>
<div style="position:absolute;left:40.99px;top:579.75px" class="cls_010"><span class="cls_010">if xform.origin.x > screensize.x + radius:</span></div>
<div style="position:absolute;left:56.73px;top:591.00px" class="cls_010"><span class="cls_010">xform.origin.x = 0 - radius</span></div>
<div style="position:absolute;left:40.99px;top:602.25px" class="cls_010"><span class="cls_010">if xform.origin.x &lt; 0 - radius:</span></div>
<div style="position:absolute;left:56.73px;top:613.50px" class="cls_010"><span class="cls_010">xform.origin.x = screensize.x + radius</span></div>
<div style="position:absolute;left:40.99px;top:624.75px" class="cls_010"><span class="cls_010">if xform.origin.y > screensize.y + radius:</span></div>
<div style="position:absolute;left:56.73px;top:636.00px" class="cls_010"><span class="cls_010">xform.origin.y = 0 - radius</span></div>
<div style="position:absolute;left:40.99px;top:647.25px" class="cls_010"><span class="cls_010">if xform.origin.y &lt; 0 - radius:</span></div>
<div style="position:absolute;left:56.73px;top:658.50px" class="cls_010"><span class="cls_010">xform.origin.y = screensize.y + radius</span></div>
<div style="position:absolute;left:40.99px;top:669.75px" class="cls_010"><span class="cls_010">physics_state.set_transform(xform)</span></div>
<div style="position:absolute;left:5.00px;top:694.50px" class="cls_003"><span class="cls_003">The difference here is that including the body's </span><span class="cls_010">radius</span><span class="cls_003"> results in smoother-looking teleportation. The</span></div>
<div style="position:absolute;left:5.00px;top:712.50px" class="cls_003"><span class="cls_003">rock will appear to fully exit the screen before entering at the opposite side. You may want to do the</span></div>
<div style="position:absolute;left:5.00px;top:730.50px" class="cls_003"><span class="cls_003">same thing with the player ship. Try it and see which effect you like better.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:136340px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background174.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Instancing</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">When new rocks are spawned, the main scene will need to pick a random start location. To do this,</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">you could use some geometry to pick a random point along the perimeter of the screen, but instead you</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">can take advantage of yet another Godot node type. You'll draw a path around the edge of the screen,</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">and the script will pick a random location along the path. Add a </span><span class="cls_010">Path2D</span><span class="cls_003"> node and name it </span><span class="cls_010">RockPath</span><span class="cls_003">. When</span></div>
<div style="position:absolute;left:5.00px;top:151.50px" class="cls_003"><span class="cls_003">you click on the </span><span class="cls_010">Path2D</span><span class="cls_003">, you will see some new buttons appear at the top of the editor:</span></div>
<div style="position:absolute;left:5.00px;top:238.50px" class="cls_003"><span class="cls_003">Select the middle one (Add Point) to draw the path by clicking to add the points shown. To make the</span></div>
<div style="position:absolute;left:5.00px;top:256.50px" class="cls_003"><span class="cls_003">points align, make sure Snap to grid is checked. This option is found under the Snapping Options</span></div>
<div style="position:absolute;left:5.00px;top:274.50px" class="cls_003"><span class="cls_003">button to the left of the </span><span class="cls_010">Lock</span><span class="cls_003"> button. It appears as a series of three vertical dots. Refer to the following</span></div>
<div style="position:absolute;left:5.00px;top:292.50px" class="cls_003"><span class="cls_003">screenshot:</span></div>
<div style="position:absolute;left:5.00px;top:460.50px" class="cls_003"><span class="cls_003">Draw the points in the order shown in the following screenshot. After clicking the fourth point, click</span></div>
<div style="position:absolute;left:5.00px;top:478.50px" class="cls_003"><span class="cls_003">the Close Curve button (</span><span class="cls_002">5</span><span class="cls_003">) and your path will be complete:</span></div>
<div style="position:absolute;left:5.00px;top:762.75px" class="cls_003"><span class="cls_003">Now that the path is defined, add a </span><span class="cls_010">PathFollow2D</span><span class="cls_003"> node as a child of </span><span class="cls_010">RockPath</span><span class="cls_003"> and name it </span><span class="cls_010">RockSpawn</span><span class="cls_003">. This</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:137142px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background175.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:3.31px" class="cls_003"><span class="cls_003">node's purpose is to automatically follow a path as it moves, using its </span><span class="cls_010">set_offset()</span><span class="cls_003"> method. The higher</span></div>
<div style="position:absolute;left:5.00px;top:21.31px" class="cls_003"><span class="cls_003">the offset, the further along the path it goes. Since our path is closed, it will loop around if the offset</span></div>
<div style="position:absolute;left:5.00px;top:39.00px" class="cls_003"><span class="cls_003">value is bigger than the path's length.</span></div>
<div style="position:absolute;left:5.00px;top:72.00px" class="cls_003"><span class="cls_003">Next, add a </span><span class="cls_010">Node</span><span class="cls_003"> and name it </span><span class="cls_010">Rocks</span><span class="cls_003">. This node will serve as a container to hold all the rocks. By</span></div>
<div style="position:absolute;left:5.00px;top:90.00px" class="cls_003"><span class="cls_003">checking its number of children, you can tell if there are any rocks remaining.</span></div>
<div style="position:absolute;left:5.00px;top:123.00px" class="cls_003"><span class="cls_003">Now, add this to </span><span class="cls_010">Main.gd</span><span class="cls_003">:</span></div>
<div style="position:absolute;left:19.99px;top:157.50px" class="cls_010"><span class="cls_010">export (PackedScene) var Rock</span></div>
<div style="position:absolute;left:19.99px;top:180.00px" class="cls_010"><span class="cls_010">func _ready():</span></div>
<div style="position:absolute;left:40.99px;top:191.25px" class="cls_010"><span class="cls_010">randomize()</span></div>
<div style="position:absolute;left:40.99px;top:202.50px" class="cls_010"><span class="cls_010">screensize = get_viewport().get_visible_rect().size</span></div>
<div style="position:absolute;left:40.99px;top:213.75px" class="cls_010"><span class="cls_010">$Player.screensize = screensize</span></div>
<div style="position:absolute;left:40.99px;top:225.00px" class="cls_010"><span class="cls_010">for i in range(3):</span></div>
<div style="position:absolute;left:61.98px;top:236.25px" class="cls_010"><span class="cls_010">spawn_rock(3)</span></div>
<div style="position:absolute;left:5.00px;top:261.00px" class="cls_003"><span class="cls_003">The script starts by getting the </span><span class="cls_010">screensize</span><span class="cls_003"> and passing that to the </span><span class="cls_010">Player</span><span class="cls_003">. Then, it spawns three rocks of</span></div>
<div style="position:absolute;left:5.00px;top:279.00px" class="cls_003"><span class="cls_003">size </span><span class="cls_010">3</span><span class="cls_003"> using </span><span class="cls_010">spawn_rock()</span><span class="cls_003">, which is defined in the following code. Don't forget to drag </span><span class="cls_010">Rock.tscn</span><span class="cls_003"> onto</span></div>
<div style="position:absolute;left:5.00px;top:297.00px" class="cls_003"><span class="cls_003">the Rock property in the Inspector:</span></div>
<div style="position:absolute;left:19.99px;top:331.50px" class="cls_010"><span class="cls_010">func spawn_rock(size, pos=null, vel=null):</span></div>
<div style="position:absolute;left:40.99px;top:342.75px" class="cls_010"><span class="cls_010">if !pos:</span></div>
<div style="position:absolute;left:61.98px;top:354.00px" class="cls_010"><span class="cls_010">$RockPath/RockSpawn.set_offset(randi())</span></div>
<div style="position:absolute;left:61.98px;top:365.25px" class="cls_010"><span class="cls_010">pos = $RockPath/RockSpawn.position</span></div>
<div style="position:absolute;left:40.99px;top:376.50px" class="cls_010"><span class="cls_010">if !vel:</span></div>
<div style="position:absolute;left:61.98px;top:387.75px" class="cls_010"><span class="cls_010">vel = Vector2(1, 0).rotated(rand_range(0, 2*PI)) * rand_range(100, 150)</span></div>
<div style="position:absolute;left:40.99px;top:399.00px" class="cls_010"><span class="cls_010">var r = Rock.instance()</span></div>
<div style="position:absolute;left:40.99px;top:410.25px" class="cls_010"><span class="cls_010">r.screensize = screensize</span></div>
<div style="position:absolute;left:40.99px;top:421.50px" class="cls_010"><span class="cls_010">r.start(pos, vel, size)</span></div>
<div style="position:absolute;left:40.99px;top:432.75px" class="cls_010"><span class="cls_010">$Rocks.add_child(r)</span></div>
<div style="position:absolute;left:5.00px;top:457.50px" class="cls_003"><span class="cls_003">This function will serve two purposes. When called with only a size parameter, it picks a random</span></div>
<div style="position:absolute;left:5.00px;top:475.50px" class="cls_003"><span class="cls_003">position along the </span><span class="cls_010">RockPath</span><span class="cls_003"> and a random velocity. However, if those values are also provided, it will</span></div>
<div style="position:absolute;left:5.00px;top:493.50px" class="cls_003"><span class="cls_003">use them instead. This will let you spawn the smaller rocks at the location of the explosion.</span></div>
<div style="position:absolute;left:5.00px;top:526.50px" class="cls_003"><span class="cls_003">Run the game and you should see three rocks floating around. However, your bullets don't affect them.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:137944px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background176.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Exploding rocks</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">The </span><span class="cls_010">Bullet</span><span class="cls_003"> is checking for bodies in the </span><span class="cls_010">rocks</span><span class="cls_003"> group, so in the </span><span class="cls_010">Rock</span><span class="cls_003"> scene, click on the Node tab and</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">choose Groups. Type </span><span class="cls_010">rocks</span><span class="cls_003"> and click Add:</span></div>
<div style="position:absolute;left:5.00px;top:278.25px" class="cls_003"><span class="cls_003">Now, if you run the game and shoot a rock, you'll see an error message because the bullet is trying to</span></div>
<div style="position:absolute;left:5.00px;top:296.25px" class="cls_003"><span class="cls_003">call the rock's </span><span class="cls_010">explode()</span><span class="cls_003"> method, which you haven't defined yet. This method needs to do three things:</span></div>
<div style="position:absolute;left:34.99px;top:328.50px" class="cls_003"><span class="cls_003">Remove the rock</span></div>
<div style="position:absolute;left:34.99px;top:345.75px" class="cls_003"><span class="cls_003">Play an explosion animation</span></div>
<div style="position:absolute;left:34.99px;top:363.00px" class="cls_003"><span class="cls_003">Notify </span><span class="cls_010">Main</span><span class="cls_003"> to spawn new, smaller rocks</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:138746px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background177.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Explosion scene</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">The explosion will be a separate scene, which you can add to the </span><span class="cls_010">Rock</span><span class="cls_003"> and later to the </span><span class="cls_010">Player</span><span class="cls_003">. It will</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">contain two nodes:</span></div>
<div style="position:absolute;left:34.99px;top:129.75px" class="cls_010"><span class="cls_010">Sprite</span><span class="cls_003"> (named </span><span class="cls_010">Explosion</span><span class="cls_003">)</span></div>
<div style="position:absolute;left:34.99px;top:153.00px" class="cls_010"><span class="cls_010">AnimationPlayer</span></div>
<div style="position:absolute;left:5.00px;top:180.00px" class="cls_003"><span class="cls_003">For the sprite's Texture, use </span><span class="cls_010">res://assets/explosion.png</span><span class="cls_003">. You'll notice that this is a sprite sheet—an image</span></div>
<div style="position:absolute;left:5.00px;top:198.00px" class="cls_003"><span class="cls_003">made up of 64 smaller images laid out in a grid pattern. These images are the individual frames of the</span></div>
<div style="position:absolute;left:5.00px;top:216.00px" class="cls_003"><span class="cls_003">animation. You'll often find animations packaged this way, and Godot's </span><span class="cls_010">Sprite</span><span class="cls_003"> node supports using</span></div>
<div style="position:absolute;left:5.00px;top:234.00px" class="cls_003"><span class="cls_003">them as individual frames.</span></div>
<div style="position:absolute;left:5.00px;top:267.00px" class="cls_003"><span class="cls_003">In the Inspector, find the sprite's Animation section. Set the Vframes and Hframes both to </span><span class="cls_010">8</span><span class="cls_003">. This will</span></div>
<div style="position:absolute;left:5.00px;top:285.00px" class="cls_012"><span class="cls_012">slice</span><span class="cls_003"> the sprite sheet into its individual images. You can verify this by changing the Frame property to</span></div>
<div style="position:absolute;left:5.00px;top:303.00px" class="cls_003"><span class="cls_003">different values between </span><span class="cls_010">0</span><span class="cls_003"> and </span><span class="cls_010">63</span><span class="cls_003">. Make sure to set Frames back to </span><span class="cls_010">0</span><span class="cls_003"> when finished:</span></div>
<div style="position:absolute;left:5.00px;top:559.50px" class="cls_003"><span class="cls_003">The </span><span class="cls_010">AnimationPlayer</span><span class="cls_003"> can be used to animate any property of any node. You'll use the </span><span class="cls_010">AnimationPlayer</span><span class="cls_003"> to</span></div>
<div style="position:absolute;left:5.00px;top:577.50px" class="cls_003"><span class="cls_003">change the Frame property over time. Start by clicking on the node and you'll see the Animation panel</span></div>
<div style="position:absolute;left:5.00px;top:595.50px" class="cls_003"><span class="cls_003">open at the bottom, as shown in the following screenshot:</span></div>
<div style="position:absolute;left:5.00px;top:753.75px" class="cls_003"><span class="cls_003">Click the New Animation button and name it </span><span class="cls_010">explosion</span><span class="cls_003">. Set the Length to </span><span class="cls_010">0.64</span><span class="cls_003"> and the Step to </span><span class="cls_010">0.01</span><span class="cls_003">. Now,</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:139548px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background178.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:3.31px" class="cls_003"><span class="cls_003">click on the </span><span class="cls_010">Sprite</span><span class="cls_003"> node and you'll notice that each property in the Inspector now has a key button next</span></div>
<div style="position:absolute;left:5.00px;top:21.31px" class="cls_003"><span class="cls_003">to it. Each time you click on the key, you create a keyframe in the current animation. The key button</span></div>
<div style="position:absolute;left:5.00px;top:39.31px" class="cls_003"><span class="cls_003">next to the Frame property also has a </span><span class="cls_010">+</span><span class="cls_003"> symbol on it, indicating that it will automatically increment the</span></div>
<div style="position:absolute;left:5.00px;top:57.00px" class="cls_003"><span class="cls_003">value when you add a key frame.</span></div>
<div style="position:absolute;left:5.00px;top:90.00px" class="cls_003"><span class="cls_003">Click the key and confirm that you want to create a new animation track. Note that the Frame property</span></div>
<div style="position:absolute;left:5.00px;top:108.00px" class="cls_003"><span class="cls_003">has incremented to </span><span class="cls_010">1</span><span class="cls_003">. Click the key button repeatedly until you have reached the final frame (</span><span class="cls_010">63</span><span class="cls_003">).</span></div>
<div style="position:absolute;left:5.00px;top:141.00px" class="cls_003"><span class="cls_003">Click the Play button in the Animation panel to see the animation being played.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:140350px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background179.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Adding to Rock</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">In the </span><span class="cls_010">Rock</span><span class="cls_003"> scene, add an instance of </span><span class="cls_010">Explosion</span><span class="cls_003"> and add this line to </span><span class="cls_010">start()</span><span class="cls_003">:</span></div>
<div style="position:absolute;left:19.99px;top:114.00px" class="cls_010"><span class="cls_010">$Explosion.scale = Vector2(0.75, 0.75) * size</span></div>
<div style="position:absolute;left:5.00px;top:138.75px" class="cls_003"><span class="cls_003">This will ensure that the explosion is scaled to match the rock's size.</span></div>
<div style="position:absolute;left:5.00px;top:171.75px" class="cls_003"><span class="cls_003">Add a signal called </span><span class="cls_010">exploded</span><span class="cls_003"> at the top of the script, then add the </span><span class="cls_010">explode()</span><span class="cls_003"> function, which will be</span></div>
<div style="position:absolute;left:5.00px;top:189.75px" class="cls_003"><span class="cls_003">called when the bullet hits the rock:</span></div>
<div style="position:absolute;left:19.99px;top:224.25px" class="cls_010"><span class="cls_010">func explode():</span></div>
<div style="position:absolute;left:40.99px;top:235.50px" class="cls_010"><span class="cls_010">layers = 0</span></div>
<div style="position:absolute;left:40.99px;top:246.75px" class="cls_010"><span class="cls_010">$Sprite.hide()</span></div>
<div style="position:absolute;left:40.99px;top:258.00px" class="cls_010"><span class="cls_010">$Explosion/AnimationPlayer.play("explosion")</span></div>
<div style="position:absolute;left:40.99px;top:269.25px" class="cls_010"><span class="cls_010">emit_signal("exploded", size, radius, position, linear_velocity)</span></div>
<div style="position:absolute;left:40.99px;top:280.50px" class="cls_010"><span class="cls_010">linear_velocity = Vector2()</span></div>
<div style="position:absolute;left:40.99px;top:291.75px" class="cls_010"><span class="cls_010">angular_velocity = 0</span></div>
<div style="position:absolute;left:5.00px;top:316.50px" class="cls_003"><span class="cls_003">The </span><span class="cls_010">layers</span><span class="cls_003"> property ensures that the explosion will be drawn on top of the other sprites on the screen.</span></div>
<div style="position:absolute;left:5.00px;top:334.50px" class="cls_003"><span class="cls_003">Then, you will send a signal that will let </span><span class="cls_010">Main</span><span class="cls_003"> know to spawn new rocks. This signal also needs to</span></div>
<div style="position:absolute;left:5.00px;top:352.50px" class="cls_003"><span class="cls_003">pass the necessary data so that the new rocks will have the right properties.</span></div>
<div style="position:absolute;left:5.00px;top:385.50px" class="cls_003"><span class="cls_003">When the animation finishes playing, the </span><span class="cls_010">AnimationPlayer</span><span class="cls_003"> will emit a signal. To connect it, you need to</span></div>
<div style="position:absolute;left:5.00px;top:403.50px" class="cls_003"><span class="cls_003">make the </span><span class="cls_010">AnimationPlayer</span><span class="cls_003"> node visible. Right-click on the instanced Explosion and select Editable</span></div>
<div style="position:absolute;left:5.00px;top:421.50px" class="cls_003"><span class="cls_003">Children, then select the </span><span class="cls_010">AnimationPlayer</span><span class="cls_003"> and connect its </span><span class="cls_010">animation_finished</span><span class="cls_003"> signal. Make sure to select the</span></div>
<div style="position:absolute;left:5.00px;top:439.50px" class="cls_010"><span class="cls_010">Rock</span><span class="cls_003"> in the Connect to Node section. The end of the animation means it is safe to delete the rock:</span></div>
<div style="position:absolute;left:19.99px;top:474.00px" class="cls_010"><span class="cls_010">func _on_AnimationPlayer_animation_finished( name ):</span></div>
<div style="position:absolute;left:40.99px;top:485.25px" class="cls_010"><span class="cls_010">queue_free()</span></div>
<div style="position:absolute;left:5.00px;top:510.00px" class="cls_003"><span class="cls_003">Now, test the game and check that you can see explosions when you shoot the rocks. At this point,</span></div>
<div style="position:absolute;left:5.00px;top:528.00px" class="cls_003"><span class="cls_003">your rock scene should look like this:</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:141152px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background180.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Spawning smaller rocks</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">The </span><span class="cls_010">Rock</span><span class="cls_003"> is emitting the signal, but it needs to be connected in </span><span class="cls_010">Main</span><span class="cls_003">. You can't use the Node tab to</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">connect it, because the </span><span class="cls_010">Rock</span><span class="cls_003"> instances are being created in code. Signals can be connected in code as</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">well. Add this line to the end of </span><span class="cls_010">spawn_rock()</span><span class="cls_003">:</span></div>
<div style="position:absolute;left:19.99px;top:150.00px" class="cls_010"><span class="cls_010">r.connect('exploded', self, '_on_Rock_exploded')</span></div>
<div style="position:absolute;left:5.00px;top:174.75px" class="cls_003"><span class="cls_003">This connects the rock's signal to a function in </span><span class="cls_010">Main</span><span class="cls_003"> called </span><span class="cls_010">_on_Rock_exploded()</span><span class="cls_003">. Create that function,</span></div>
<div style="position:absolute;left:5.00px;top:192.75px" class="cls_003"><span class="cls_003">which will be called whenever a rock sends its </span><span class="cls_010">exploded</span><span class="cls_003"> signal:</span></div>
<div style="position:absolute;left:19.99px;top:227.25px" class="cls_010"><span class="cls_010">func _on_Rock_exploded(size, radius, pos, vel):</span></div>
<div style="position:absolute;left:40.99px;top:238.50px" class="cls_010"><span class="cls_010">if size &lt;= 1:</span></div>
<div style="position:absolute;left:61.98px;top:249.75px" class="cls_010"><span class="cls_010">return</span></div>
<div style="position:absolute;left:40.99px;top:261.00px" class="cls_010"><span class="cls_010">for offset in [-1, 1]:</span></div>
<div style="position:absolute;left:61.98px;top:272.25px" class="cls_010"><span class="cls_010">var dir = (pos - $Player.position).normalized().tangent() * offset</span></div>
<div style="position:absolute;left:61.98px;top:283.50px" class="cls_010"><span class="cls_010">var newpos = pos + dir * radius</span></div>
<div style="position:absolute;left:61.98px;top:294.75px" class="cls_010"><span class="cls_010">var newvel = dir * vel.length() * 1.1</span></div>
<div style="position:absolute;left:61.98px;top:306.00px" class="cls_010"><span class="cls_010">spawn_rock(size - 1, newpos, newvel)</span></div>
<div style="position:absolute;left:5.00px;top:330.75px" class="cls_003"><span class="cls_003">In this function, two new rocks are created unless the rock that was just destroyed was the smallest</span></div>
<div style="position:absolute;left:5.00px;top:348.75px" class="cls_003"><span class="cls_003">size it can be. The </span><span class="cls_010">offset</span><span class="cls_003"> loop variable will ensure that they spawn and travel in opposite directions</span></div>
<div style="position:absolute;left:5.00px;top:366.75px" class="cls_003"><span class="cls_003">(that is, one will be the negative of the other). The </span><span class="cls_010">dir</span><span class="cls_003"> variable finds the vector between the player</span></div>
<div style="position:absolute;left:5.00px;top:384.75px" class="cls_003"><span class="cls_003">and the rock, then uses </span><span class="cls_010">tangent()</span><span class="cls_003"> to find the perpendicular to that vector. This ensures that the new</span></div>
<div style="position:absolute;left:5.00px;top:402.75px" class="cls_003"><span class="cls_003">rocks travel away from the player:</span></div>
<div style="position:absolute;left:5.00px;top:615.00px" class="cls_003"><span class="cls_003">Play the game once again and check that everything is working as expected.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:141954px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background181.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">UI</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Creating a game UI can be very complex, or at least time-consuming. Precisely placing individual</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">elements and ensuring they work on different-sized screens and devices is the least interesting part of</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">game development for many programmers. Godot provides a wide variety of Control nodes to assist</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">in this process. Learning how to use the various Control nodes will help lessen the pain of creating</span></div>
<div style="position:absolute;left:5.00px;top:151.50px" class="cls_003"><span class="cls_003">your game's UI.</span></div>
<div style="position:absolute;left:5.00px;top:184.50px" class="cls_003"><span class="cls_003">For this game, you don't need a very complex UI. The game needs to provide the following</span></div>
<div style="position:absolute;left:5.00px;top:202.50px" class="cls_003"><span class="cls_003">information and interactions:</span></div>
<div style="position:absolute;left:34.99px;top:234.75px" class="cls_003"><span class="cls_003">Start button</span></div>
<div style="position:absolute;left:34.99px;top:252.00px" class="cls_003"><span class="cls_003">Status message (Get Ready or Game Over)</span></div>
<div style="position:absolute;left:34.99px;top:269.25px" class="cls_003"><span class="cls_003">Score</span></div>
<div style="position:absolute;left:34.99px;top:286.50px" class="cls_003"><span class="cls_003">Lives counter</span></div>
<div style="position:absolute;left:5.00px;top:319.50px" class="cls_003"><span class="cls_003">The following is a preview of what you will be able to create:</span></div>
<div style="position:absolute;left:5.00px;top:465.75px" class="cls_003"><span class="cls_003">Create a new scene, and add a </span><span class="cls_010">CanvasLayer</span><span class="cls_003"> with the name </span><span class="cls_010">HUD</span><span class="cls_003"> as its root node. The UI will be built on</span></div>
<div style="position:absolute;left:5.00px;top:483.75px" class="cls_003"><span class="cls_003">this layer by using Godot's </span><span class="cls_010">Control</span><span class="cls_003"> Layout features.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:142756px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background182.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Layout</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Godot's </span><span class="cls_010">Control</span><span class="cls_003"> nodes include a number of specialized containers. These nodes can be nested inside</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">each other to create the precise layout you need. For example, a </span><span class="cls_010">MarginContainer</span><span class="cls_003"> will automatically add</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">padding around its contents, while </span><span class="cls_010">HBoxContainer</span><span class="cls_003"> and </span><span class="cls_010">VBoxContainer</span><span class="cls_003"> organize their contents in rows or</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">columns, respectively.</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">Start by adding a </span><span class="cls_010">MarginContainer</span><span class="cls_003">, which will hold the score and lives counter. Under the Layout menu,</span></div>
<div style="position:absolute;left:5.00px;top:184.50px" class="cls_003"><span class="cls_003">select Top Wide. Then, scroll down to the Custom Constants section and set all four margins to </span><span class="cls_010">20</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:217.50px" class="cls_003"><span class="cls_003">Next, add an </span><span class="cls_010">HBoxContainer</span><span class="cls_003">, which will hold the score counter on the left and the lives counter on the</span></div>
<div style="position:absolute;left:5.00px;top:235.50px" class="cls_003"><span class="cls_003">right. Under this container, add a </span><span class="cls_010">Label</span><span class="cls_003"> (name it </span><span class="cls_010">ScoreLabel</span><span class="cls_003">) and another </span><span class="cls_010">HBoxContainer</span><span class="cls_003"> (name it</span></div>
<div style="position:absolute;left:5.00px;top:253.50px" class="cls_010"><span class="cls_010">LivesCounter</span><span class="cls_003">).</span></div>
<div style="position:absolute;left:5.00px;top:286.50px" class="cls_003"><span class="cls_003">Set the </span><span class="cls_010">ScoreLabel</span><span class="cls_003"> Text to </span><span class="cls_010">0</span><span class="cls_003"> and, under </span><span class="cls_010">Size Flags</span><span class="cls_003">, set Horizontal to Fill, Expand. Under Custom Fonts,</span></div>
<div style="position:absolute;left:5.00px;top:304.50px" class="cls_003"><span class="cls_003">add a </span><span class="cls_010">DynamicFont</span><span class="cls_003"> like you did in </span><span class="cls_009">Chapter 1</span><span class="cls_003">, </span><span class="cls_012">Introduction</span><span class="cls_003">, using </span><span class="cls_010">res://assets/kenvector_future_thin.ttf</span><span class="cls_003"> from</span></div>
<div style="position:absolute;left:5.00px;top:322.50px" class="cls_003"><span class="cls_003">the </span><span class="cls_010">assets</span><span class="cls_003"> folder and setting the size to </span><span class="cls_010">64</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:355.50px" class="cls_003"><span class="cls_003">Under the </span><span class="cls_010">LivesCounter</span><span class="cls_003">, add a </span><span class="cls_010">TextureRect</span><span class="cls_003"> and name it </span><span class="cls_010">L1</span><span class="cls_003">. Drag </span><span class="cls_010">res://assets/player_small.png</span><span class="cls_003"> into the Texture</span></div>
<div style="position:absolute;left:5.00px;top:373.50px" class="cls_003"><span class="cls_003">property and set the Stretch Mode to Keep Aspect Centered. Make sure you have the </span><span class="cls_010">L1</span><span class="cls_003"> node selected</span></div>
<div style="position:absolute;left:5.00px;top:391.50px" class="cls_003"><span class="cls_003">and press Duplicate (</span><span class="cls_012">Ctrl</span><span class="cls_003"> + </span><span class="cls_012">D</span><span class="cls_003">) two times to create </span><span class="cls_010">L2</span><span class="cls_003"> and </span><span class="cls_010">L3</span><span class="cls_003"> (they'll be named automatically). During</span></div>
<div style="position:absolute;left:5.00px;top:409.50px" class="cls_003"><span class="cls_003">the game, the </span><span class="cls_010">HUD</span><span class="cls_003"> will show/hide these three textures to indicate how many lives the user has left.</span></div>
<div style="position:absolute;left:5.00px;top:442.50px" class="cls_003"><span class="cls_003">In a larger, more complicated UI, you could save this section as its own scene and embed it in other</span></div>
<div style="position:absolute;left:5.00px;top:460.50px" class="cls_003"><span class="cls_003">sections of the UI. However, this game only needs a few more pieces for its UI, so it's fine to combine</span></div>
<div style="position:absolute;left:5.00px;top:478.50px" class="cls_003"><span class="cls_003">them all in one scene.</span></div>
<div style="position:absolute;left:5.00px;top:511.50px" class="cls_003"><span class="cls_003">As a child of the </span><span class="cls_010">HUD</span><span class="cls_003"> node, add a </span><span class="cls_010">TextureButton</span><span class="cls_003"> (named </span><span class="cls_010">StartButton</span><span class="cls_003">), a </span><span class="cls_010">Label</span><span class="cls_003"> (named </span><span class="cls_010">MessageLabel</span><span class="cls_003">), and a</span></div>
<div style="position:absolute;left:5.00px;top:529.50px" class="cls_010"><span class="cls_010">Timer</span><span class="cls_003"> (named </span><span class="cls_010">MessageTimer</span><span class="cls_003">).</span></div>
<div style="position:absolute;left:5.00px;top:562.50px" class="cls_003"><span class="cls_003">In the </span><span class="cls_010">res://assets</span><span class="cls_003"> folder, there are two textures for the </span><span class="cls_010">StartButton</span><span class="cls_003">, one normal (</span><span class="cls_010">play_button.png</span><span class="cls_003">) and one</span></div>
<div style="position:absolute;left:5.00px;top:580.50px" class="cls_003"><span class="cls_003">to show when the mouse is hovering over it (</span><span class="cls_010">play_button_h.png</span><span class="cls_003">). Drag these to the Textures/Normal and</span></div>
<div style="position:absolute;left:5.00px;top:598.50px" class="cls_003"><span class="cls_003">Textures/Hover properties, respectively. In the Layout menu, choose Center.</span></div>
<div style="position:absolute;left:5.00px;top:631.50px" class="cls_003"><span class="cls_003">For the </span><span class="cls_010">MessageLabel</span><span class="cls_003">, make sure you set the font first before specifying the layout, or it won't be</span></div>
<div style="position:absolute;left:5.00px;top:649.50px" class="cls_003"><span class="cls_003">centered properly. You can use the same settings you used for the </span><span class="cls_010">ScoreLabel</span><span class="cls_003">. After setting the font, set</span></div>
<div style="position:absolute;left:5.00px;top:667.50px" class="cls_003"><span class="cls_003">the layout to Full Rect.</span></div>
<div style="position:absolute;left:5.00px;top:700.50px" class="cls_003"><span class="cls_003">Finally, set the One Shot property of </span><span class="cls_010">MessageTimer</span><span class="cls_003"> to On and its Wait Time to </span><span class="cls_010">2</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:733.50px" class="cls_003"><span class="cls_003">When finished, your UI's scene tree should look like this:</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:143558px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background183.jpg" width=612 height=792></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:144360px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background184.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">UI functions</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">You've completed the UI layout, so now let's add a script to </span><span class="cls_010">HUD</span><span class="cls_003"> so you can add the functionality:</span></div>
<div style="position:absolute;left:19.99px;top:114.00px" class="cls_010"><span class="cls_010">extends CanvasLayer</span></div>
<div style="position:absolute;left:19.99px;top:136.50px" class="cls_010"><span class="cls_010">signal start_game</span></div>
<div style="position:absolute;left:19.99px;top:159.00px" class="cls_010"><span class="cls_010">onready var lives_counter = [$MarginContainer/HBoxContainer/LivesCounter/L1,</span></div>
<div style="position:absolute;left:172.18px;top:170.25px" class="cls_010"><span class="cls_010">$MarginContainer/HBoxContainer/LivesCounter/L2,</span></div>
<div style="position:absolute;left:172.18px;top:181.50px" class="cls_010"><span class="cls_010">$MarginContainer/HBoxContainer/LivesCounter/L3]</span></div>
<div style="position:absolute;left:5.00px;top:206.25px" class="cls_003"><span class="cls_003">The </span><span class="cls_010">start_game</span><span class="cls_003"> signal will be emitted when the player clicks the </span><span class="cls_010">StartButton</span><span class="cls_003">. The </span><span class="cls_010">lives_counter</span><span class="cls_003"> variable is</span></div>
<div style="position:absolute;left:5.00px;top:224.25px" class="cls_003"><span class="cls_003">an array holding references to the three life counter images. The names are fairly long, so make sure</span></div>
<div style="position:absolute;left:5.00px;top:242.25px" class="cls_003"><span class="cls_003">to let the editor's autocomplete fill them in for you to avoid mistakes.</span></div>
<div style="position:absolute;left:5.00px;top:275.25px" class="cls_003"><span class="cls_003">Next, you need functions to handle updating the displayed information:</span></div>
<div style="position:absolute;left:19.99px;top:309.75px" class="cls_010"><span class="cls_010">func show_message(message):</span></div>
<div style="position:absolute;left:40.99px;top:321.00px" class="cls_010"><span class="cls_010">$MessageLabel.text = message</span></div>
<div style="position:absolute;left:40.99px;top:332.25px" class="cls_010"><span class="cls_010">$MessageLabel.show()</span></div>
<div style="position:absolute;left:40.99px;top:343.50px" class="cls_010"><span class="cls_010">$MessageTimer.start()</span></div>
<div style="position:absolute;left:19.99px;top:366.00px" class="cls_010"><span class="cls_010">func update_score(value):</span></div>
<div style="position:absolute;left:40.99px;top:377.25px" class="cls_010"><span class="cls_010">$MarginContainer/MarginContainer/HBoxContainer/ScoreLabel.text = str(value)</span></div>
<div style="position:absolute;left:19.99px;top:399.75px" class="cls_010"><span class="cls_010">func update_lives(value):</span></div>
<div style="position:absolute;left:40.99px;top:411.00px" class="cls_010"><span class="cls_010">for item in range(3):</span></div>
<div style="position:absolute;left:61.98px;top:422.25px" class="cls_010"><span class="cls_010">lives_counter[item].visible = value > item</span></div>
<div style="position:absolute;left:5.00px;top:447.00px" class="cls_003"><span class="cls_003">Each function will be called when a value changes to update the display.</span></div>
<div style="position:absolute;left:5.00px;top:480.00px" class="cls_003"><span class="cls_003">Next, add a function to handle the </span><span class="cls_010">Game Over</span><span class="cls_003"> state:</span></div>
<div style="position:absolute;left:19.99px;top:514.50px" class="cls_010"><span class="cls_010">func game_over():</span></div>
<div style="position:absolute;left:40.99px;top:525.75px" class="cls_010"><span class="cls_010">show_message("Game Over")</span></div>
<div style="position:absolute;left:40.99px;top:537.00px" class="cls_010"><span class="cls_010">yield($MessageTimer, "timeout")</span></div>
<div style="position:absolute;left:40.99px;top:548.25px" class="cls_010"><span class="cls_010">$StartButton.show()</span></div>
<div style="position:absolute;left:5.00px;top:573.00px" class="cls_003"><span class="cls_003">Now, connect the </span><span class="cls_010">pressed</span><span class="cls_003"> signal of the </span><span class="cls_010">StartButton</span><span class="cls_003"> so that it can emit the signal to </span><span class="cls_010">Main</span><span class="cls_003">:</span></div>
<div style="position:absolute;left:19.99px;top:607.50px" class="cls_010"><span class="cls_010">func _on_StartButton_pressed():</span></div>
<div style="position:absolute;left:40.99px;top:618.75px" class="cls_010"><span class="cls_010">$StartButton.hide()</span></div>
<div style="position:absolute;left:40.99px;top:630.00px" class="cls_010"><span class="cls_010">emit_signal("start_game")</span></div>
<div style="position:absolute;left:5.00px;top:654.75px" class="cls_003"><span class="cls_003">Finally, connect the </span><span class="cls_010">timeout</span><span class="cls_003"> signal of </span><span class="cls_010">MessageTimer</span><span class="cls_003"> so that it can hide the message:</span></div>
<div style="position:absolute;left:19.99px;top:689.25px" class="cls_010"><span class="cls_010">func _on_MessageTimer_timeout():</span></div>
<div style="position:absolute;left:40.99px;top:700.50px" class="cls_010"><span class="cls_010">$MessageLabel.hide()</span></div>
<div style="position:absolute;left:40.99px;top:711.75px" class="cls_010"><span class="cls_010">$MessageLabel.text = ''</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:145162px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background185.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Main scene code</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Now, you can add an instance of the </span><span class="cls_010">HUD</span><span class="cls_003"> to the </span><span class="cls_010">Main</span><span class="cls_003"> scene. Add the following variables to </span><span class="cls_010">Main.gd</span><span class="cls_003">:</span></div>
<div style="position:absolute;left:19.99px;top:114.00px" class="cls_010"><span class="cls_010">var level = 0</span></div>
<div style="position:absolute;left:19.99px;top:125.25px" class="cls_010"><span class="cls_010">var score = 0</span></div>
<div style="position:absolute;left:19.99px;top:136.50px" class="cls_010"><span class="cls_010">var playing = false</span></div>
<div style="position:absolute;left:5.00px;top:161.25px" class="cls_003"><span class="cls_003">These will track the named quantities. The following code will handle starting a new game:</span></div>
<div style="position:absolute;left:19.99px;top:195.75px" class="cls_010"><span class="cls_010">func new_game():</span></div>
<div style="position:absolute;left:40.99px;top:207.00px" class="cls_010"><span class="cls_010">for rock in $Rocks.get_children():</span></div>
<div style="position:absolute;left:61.98px;top:218.25px" class="cls_010"><span class="cls_010">rock.queue_free()</span></div>
<div style="position:absolute;left:40.99px;top:229.50px" class="cls_010"><span class="cls_010">level = 0</span></div>
<div style="position:absolute;left:40.99px;top:240.75px" class="cls_010"><span class="cls_010">score = 0</span></div>
<div style="position:absolute;left:40.99px;top:252.00px" class="cls_010"><span class="cls_010">$HUD.update_score(score)</span></div>
<div style="position:absolute;left:40.99px;top:263.25px" class="cls_010"><span class="cls_010">$Player.start()</span></div>
<div style="position:absolute;left:40.99px;top:274.50px" class="cls_010"><span class="cls_010">$HUD.show_message("Get Ready!")</span></div>
<div style="position:absolute;left:40.99px;top:285.75px" class="cls_010"><span class="cls_010">yield($HUD/MessageTimer, "timeout")</span></div>
<div style="position:absolute;left:40.99px;top:297.00px" class="cls_010"><span class="cls_010">playing = true</span></div>
<div style="position:absolute;left:40.99px;top:308.25px" class="cls_010"><span class="cls_010">new_level()</span></div>
<div style="position:absolute;left:5.00px;top:333.00px" class="cls_003"><span class="cls_003">First, you need to make sure that you remove any existing rocks that are left over from the previous</span></div>
<div style="position:absolute;left:5.00px;top:351.00px" class="cls_003"><span class="cls_003">game and initialize the variables. Don't worry about the </span><span class="cls_010">start()</span><span class="cls_003"> function on the player; you'll add that</span></div>
<div style="position:absolute;left:5.00px;top:369.00px" class="cls_003"><span class="cls_003">soon.</span></div>
<div style="position:absolute;left:5.00px;top:402.00px" class="cls_003"><span class="cls_003">After showing the </span><span class="cls_010">"Get Ready!"</span><span class="cls_003"> message, you will use </span><span class="cls_010">yield</span><span class="cls_003"> to wait for the message to disappear before</span></div>
<div style="position:absolute;left:5.00px;top:420.00px" class="cls_003"><span class="cls_003">actually starting the level:</span></div>
<div style="position:absolute;left:19.99px;top:454.50px" class="cls_010"><span class="cls_010">func new_level():</span></div>
<div style="position:absolute;left:40.99px;top:465.75px" class="cls_010"><span class="cls_010">level += 1</span></div>
<div style="position:absolute;left:40.99px;top:477.00px" class="cls_010"><span class="cls_010">$HUD.show_message("Wave %s" % level)</span></div>
<div style="position:absolute;left:40.99px;top:488.25px" class="cls_010"><span class="cls_010">for i in range(level):</span></div>
<div style="position:absolute;left:61.98px;top:499.50px" class="cls_010"><span class="cls_010">spawn_rock(3)</span></div>
<div style="position:absolute;left:5.00px;top:524.25px" class="cls_003"><span class="cls_003">This function will be called every time the level changes. It announces the level number and spawns a</span></div>
<div style="position:absolute;left:5.00px;top:542.25px" class="cls_003"><span class="cls_003">number of rocks to match. Note—since you initialized </span><span class="cls_010">level</span><span class="cls_003"> to </span><span class="cls_010">0,</span><span class="cls_003"> this will set it to </span><span class="cls_010">1</span><span class="cls_003"> for the first level.</span></div>
<div style="position:absolute;left:5.00px;top:575.25px" class="cls_003"><span class="cls_003">To detect whether the level has ended, you continually check how many children the </span><span class="cls_010">Rocks</span><span class="cls_003"> node has:</span></div>
<div style="position:absolute;left:19.99px;top:609.75px" class="cls_010"><span class="cls_010">func _process(delta):</span></div>
<div style="position:absolute;left:40.99px;top:621.00px" class="cls_010"><span class="cls_010">if playing and $Rocks.get_child_count() == 0:</span></div>
<div style="position:absolute;left:61.98px;top:632.25px" class="cls_010"><span class="cls_010">new_level()</span></div>
<div style="position:absolute;left:5.00px;top:657.00px" class="cls_003"><span class="cls_003">Now, you need to connect the HUD's </span><span class="cls_010">start_game</span><span class="cls_003"> signal (emitted when the Play button is pressed) to the</span></div>
<div style="position:absolute;left:5.00px;top:675.00px" class="cls_010"><span class="cls_010">new_game()</span><span class="cls_003"> function. Select the </span><span class="cls_010">HUD</span><span class="cls_003">, click on the Node tab, and connect the </span><span class="cls_010">start_game</span><span class="cls_003"> signal. Set Make</span></div>
<div style="position:absolute;left:5.00px;top:693.00px" class="cls_003"><span class="cls_003">Function to Off and type </span><span class="cls_010">new_game</span><span class="cls_003"> in the Method In Node field.</span></div>
<div style="position:absolute;left:5.00px;top:726.00px" class="cls_003"><span class="cls_003">Next, add the following function to handle what happens when the game ends:</span></div>
<div style="position:absolute;left:19.99px;top:760.50px" class="cls_010"><span class="cls_010">func game_over():</span></div>
<div style="position:absolute;left:40.99px;top:771.75px" class="cls_010"><span class="cls_010">playing = false</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:145964px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background186.jpg" width=612 height=792></div>
<div style="position:absolute;left:40.99px;top:4.81px" class="cls_010"><span class="cls_010">$HUD.game_over()</span></div>
<div style="position:absolute;left:5.00px;top:29.25px" class="cls_003"><span class="cls_003">Play the game and check that pressing the Play button starts the game. Note that the </span><span class="cls_010">Player</span><span class="cls_003"> is currently</span></div>
<div style="position:absolute;left:5.00px;top:47.25px" class="cls_003"><span class="cls_003">stuck in the </span><span class="cls_010">INIT</span><span class="cls_003"> state, so you can't fly around yet—the </span><span class="cls_010">Player</span><span class="cls_003"> doesn't know the game has started.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:146766px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background187.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Player code</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Add a new signal and a new variable to </span><span class="cls_010">Player.gd</span><span class="cls_003">:</span></div>
<div style="position:absolute;left:19.99px;top:114.00px" class="cls_010"><span class="cls_010">signal lives_changed</span></div>
<div style="position:absolute;left:19.99px;top:136.50px" class="cls_010"><span class="cls_010">var lives = 0 setget set_lives</span></div>
<div style="position:absolute;left:5.00px;top:161.25px" class="cls_003"><span class="cls_003">The </span><span class="cls_010">setget</span><span class="cls_003"> statement in GDScript allows you to specify a function that will be called whenever the</span></div>
<div style="position:absolute;left:5.00px;top:179.25px" class="cls_003"><span class="cls_003">value of a given variable is changed. This means that when </span><span class="cls_010">lives</span><span class="cls_003"> decreases, you can emit a signal to</span></div>
<div style="position:absolute;left:5.00px;top:197.25px" class="cls_003"><span class="cls_003">let the </span><span class="cls_010">HUD</span><span class="cls_003"> know it needs to update the display:</span></div>
<div style="position:absolute;left:19.99px;top:231.75px" class="cls_010"><span class="cls_010">func set_lives(value):</span></div>
<div style="position:absolute;left:40.99px;top:243.00px" class="cls_010"><span class="cls_010">lives = value</span></div>
<div style="position:absolute;left:40.99px;top:254.25px" class="cls_010"><span class="cls_010">emit_signal("lives_changed", lives)</span></div>
<div style="position:absolute;left:5.00px;top:279.00px" class="cls_003"><span class="cls_003">The </span><span class="cls_010">start()</span><span class="cls_003"> function is called by </span><span class="cls_010">Main</span><span class="cls_003"> when a new game starts:</span></div>
<div style="position:absolute;left:19.99px;top:313.50px" class="cls_010"><span class="cls_010">func start():</span></div>
<div style="position:absolute;left:40.99px;top:324.75px" class="cls_010"><span class="cls_010">$Sprite.show()</span></div>
<div style="position:absolute;left:40.99px;top:336.00px" class="cls_010"><span class="cls_010">self.lives = 3</span></div>
<div style="position:absolute;left:40.99px;top:347.25px" class="cls_010"><span class="cls_010">change_state(ALIVE)</span></div>
<div style="position:absolute;left:52.98px;top:357.00px" class="cls_008"><span class="cls_008">When using </span><span class="cls_011">setget</span><span class="cls_008">, if you access the variable locally (in the local script), you must put </span><span class="cls_011">self.</span><span class="cls_008"> in front of the variable</span></div>
<div style="position:absolute;left:52.98px;top:370.50px" class="cls_008"><span class="cls_008">name. If you don't, the </span><span class="cls_011">setget</span><span class="cls_008"> function will not be called.</span></div>
<div style="position:absolute;left:5.00px;top:399.75px" class="cls_003"><span class="cls_003">Now, you need to connect this signal from the </span><span class="cls_010">Player</span><span class="cls_003"> to the </span><span class="cls_010">update_lives</span><span class="cls_003"> method in the </span><span class="cls_010">HUD</span><span class="cls_003">. In </span><span class="cls_010">Main</span><span class="cls_003">, click</span></div>
<div style="position:absolute;left:5.00px;top:417.75px" class="cls_003"><span class="cls_003">on the </span><span class="cls_010">Player</span><span class="cls_003"> instance and find its </span><span class="cls_010">lives_changed</span><span class="cls_003"> signal in the Node tab. Click Connect, and in the</span></div>
<div style="position:absolute;left:5.00px;top:435.75px" class="cls_003"><span class="cls_003">connection window, under Connect to Node, choose the </span><span class="cls_010">HUD</span><span class="cls_003">. For Method In Node, type </span><span class="cls_010">update_lives</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:453.75px" class="cls_003"><span class="cls_003">Make sure you have Make Function off, and click Connect, as shown in the following screenshot:</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:147568px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background188.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Game over</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">In this section, you'll make the player detect when it is hit by rocks, add an invulnerability feature, and</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">end the game when the player runs out of lives.</span></div>
<div style="position:absolute;left:5.00px;top:130.50px" class="cls_003"><span class="cls_003">Add an instance of the </span><span class="cls_010">Explosion</span><span class="cls_003"> to the </span><span class="cls_010">Player</span><span class="cls_003">, as well as a </span><span class="cls_010">Timer</span><span class="cls_003"> node (named </span><span class="cls_010">InvulnerabilityTimer</span><span class="cls_003">). In the</span></div>
<div style="position:absolute;left:5.00px;top:148.50px" class="cls_003"><span class="cls_003">Inspector, set the Wait Time of </span><span class="cls_010">InvulnerabilityTimer</span><span class="cls_003"> to </span><span class="cls_010">2</span><span class="cls_003"> and its One Shot to On. Add this to the top of</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_010"><span class="cls_010">Player.gd</span><span class="cls_003">:</span></div>
<div style="position:absolute;left:19.99px;top:201.00px" class="cls_010"><span class="cls_010">signal dead</span></div>
<div style="position:absolute;left:5.00px;top:225.75px" class="cls_003"><span class="cls_003">This signal will notify the </span><span class="cls_010">Main</span><span class="cls_003"> scene that the player has run out of lives and the game is over. Before</span></div>
<div style="position:absolute;left:5.00px;top:243.75px" class="cls_003"><span class="cls_003">that, however, you need to update the state machine to do a little more with each state:</span></div>
<div style="position:absolute;left:19.99px;top:278.25px" class="cls_010"><span class="cls_010">func change_state(new_state):</span></div>
<div style="position:absolute;left:40.99px;top:289.50px" class="cls_010"><span class="cls_010">match new_state:</span></div>
<div style="position:absolute;left:61.98px;top:300.75px" class="cls_010"><span class="cls_010">INIT:</span></div>
<div style="position:absolute;left:82.97px;top:312.00px" class="cls_010"><span class="cls_010">$CollisionShape2D.disabled = true</span></div>
<div style="position:absolute;left:82.97px;top:323.25px" class="cls_010"><span class="cls_010">$Sprite.modulate.a = 0.5</span></div>
<div style="position:absolute;left:61.98px;top:334.50px" class="cls_010"><span class="cls_010">ALIVE:</span></div>
<div style="position:absolute;left:82.97px;top:345.75px" class="cls_010"><span class="cls_010">$CollisionShape2D.disabled = false</span></div>
<div style="position:absolute;left:82.97px;top:357.00px" class="cls_010"><span class="cls_010">$Sprite.modulate.a = 1.0</span></div>
<div style="position:absolute;left:61.98px;top:368.25px" class="cls_010"><span class="cls_010">INVULNERABLE:</span></div>
<div style="position:absolute;left:82.97px;top:379.50px" class="cls_010"><span class="cls_010">$CollisionShape2D.disabled = true</span></div>
<div style="position:absolute;left:82.97px;top:390.75px" class="cls_010"><span class="cls_010">$Sprite.modulate.a = 0.5</span></div>
<div style="position:absolute;left:82.97px;top:402.00px" class="cls_010"><span class="cls_010">$InvulnerabilityTimer.start()</span></div>
<div style="position:absolute;left:61.98px;top:413.25px" class="cls_010"><span class="cls_010">DEAD:</span></div>
<div style="position:absolute;left:82.97px;top:424.50px" class="cls_010"><span class="cls_010">$CollisionShape2D.disabled = true</span></div>
<div style="position:absolute;left:82.97px;top:435.75px" class="cls_010"><span class="cls_010">$Sprite.hide()</span></div>
<div style="position:absolute;left:82.97px;top:447.00px" class="cls_010"><span class="cls_010">linear_velocity = Vector2()</span></div>
<div style="position:absolute;left:82.97px;top:458.25px" class="cls_010"><span class="cls_010">emit_signal("dead")</span></div>
<div style="position:absolute;left:40.99px;top:469.50px" class="cls_010"><span class="cls_010">state = new_state</span></div>
<div style="position:absolute;left:5.00px;top:512.25px" class="cls_003"><span class="cls_003">The </span><span class="cls_010">modulate.a</span><span class="cls_003"> property of a sprite sets its alpha channel (transparency). Setting it to </span><span class="cls_010">0.5</span><span class="cls_003"> makes it semi-</span></div>
<div style="position:absolute;left:5.00px;top:530.25px" class="cls_003"><span class="cls_003">transparent, while </span><span class="cls_010">1.0</span><span class="cls_003"> is solid.</span></div>
<div style="position:absolute;left:5.00px;top:563.25px" class="cls_003"><span class="cls_003">After entering the </span><span class="cls_010">INVULNERABLE</span><span class="cls_003"> state, you start the </span><span class="cls_010">InvulnerabilityTimer</span><span class="cls_003">. Connect its </span><span class="cls_010">timeout</span><span class="cls_003"> signal:</span></div>
<div style="position:absolute;left:19.99px;top:597.75px" class="cls_010"><span class="cls_010">func _on_InvulnerabilityTimer_timeout():</span></div>
<div style="position:absolute;left:40.99px;top:609.00px" class="cls_010"><span class="cls_010">change_state(ALIVE)</span></div>
<div style="position:absolute;left:5.00px;top:633.75px" class="cls_003"><span class="cls_003">Also, connect the </span><span class="cls_010">animation_finished</span><span class="cls_003"> signal from the </span><span class="cls_010">Explosion</span><span class="cls_003"> animation like you did in the </span><span class="cls_010">Rock</span><span class="cls_003"> scene:</span></div>
<div style="position:absolute;left:19.99px;top:668.25px" class="cls_010"><span class="cls_010">func _on_AnimationPlayer_animation_finished( name ):</span></div>
<div style="position:absolute;left:40.99px;top:679.50px" class="cls_010"><span class="cls_010">$Explosion.hide()</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:148370px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background189.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Detecting collisions between physics bodies</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">When you fly around, the player ship bounces off the rocks, because both bodies are </span><span class="cls_010">RigidBody2D</span><span class="cls_003"> nodes.</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">However, if you want to make something happen when two rigid bodies collide, you need to enable</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">contact monitoring. Select the </span><span class="cls_010">Player</span><span class="cls_003"> node and in the Inspector, set Contact Monitoring to On. By</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">default, no contacts are reported, so you must also set Contacts Reported to </span><span class="cls_010">1</span><span class="cls_003">. Now, the body will</span></div>
<div style="position:absolute;left:5.00px;top:151.50px" class="cls_003"><span class="cls_003">emit a signal when it contacts another body. Click on the Node tab and connect the </span><span class="cls_010">body_entered</span><span class="cls_003"> signal:</span></div>
<div style="position:absolute;left:19.99px;top:186.00px" class="cls_010"><span class="cls_010">func _on_Player_body_entered( body ):</span></div>
<div style="position:absolute;left:40.99px;top:197.25px" class="cls_010"><span class="cls_010">if body.is_in_group('rocks'):</span></div>
<div style="position:absolute;left:61.98px;top:208.50px" class="cls_010"><span class="cls_010">body.explode()</span></div>
<div style="position:absolute;left:61.98px;top:219.75px" class="cls_010"><span class="cls_010">$Explosion.show()</span></div>
<div style="position:absolute;left:61.98px;top:231.00px" class="cls_010"><span class="cls_010">$Explosion/AnimationPlayer.play("explosion")</span></div>
<div style="position:absolute;left:61.98px;top:242.25px" class="cls_010"><span class="cls_010">self.lives -= 1</span></div>
<div style="position:absolute;left:61.98px;top:253.50px" class="cls_010"><span class="cls_010">if lives &lt;= 0:</span></div>
<div style="position:absolute;left:82.97px;top:264.75px" class="cls_010"><span class="cls_010">change_state(DEAD)</span></div>
<div style="position:absolute;left:61.98px;top:276.00px" class="cls_010"><span class="cls_010">else:</span></div>
<div style="position:absolute;left:82.97px;top:287.25px" class="cls_010"><span class="cls_010">change_state(INVULNERABLE)</span></div>
<div style="position:absolute;left:5.00px;top:312.00px" class="cls_003"><span class="cls_003">Now, go to the </span><span class="cls_010">Main</span><span class="cls_003"> scene and connect the Player's </span><span class="cls_010">dead</span><span class="cls_003"> signal to the </span><span class="cls_010">game_over()</span><span class="cls_003"> function. Play the game</span></div>
<div style="position:absolute;left:5.00px;top:330.00px" class="cls_003"><span class="cls_003">and try running into a rock. Your ship should explode, become invulnerable (for two seconds), and</span></div>
<div style="position:absolute;left:5.00px;top:348.00px" class="cls_003"><span class="cls_003">lose one life. Check that the game ends if you get hit three times.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:149172px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background190.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Pausing the game</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Many games require some sort of pause mode to allow the player to take a break in the action. In</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">Godot, pausing is a function of the scene tree and can be set using </span><span class="cls_010">get_tree().paused = true</span><span class="cls_003">. When the</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_010"><span class="cls_010">SceneTree</span><span class="cls_003"> is paused, three things happen:</span></div>
<div style="position:absolute;left:34.99px;top:147.75px" class="cls_003"><span class="cls_003">The physics thread stops running</span></div>
<div style="position:absolute;left:34.99px;top:165.00px" class="cls_010"><span class="cls_010">_process</span><span class="cls_003"> and </span><span class="cls_010">_physics_process</span><span class="cls_003"> are no longer called, so no code in those methods is run</span></div>
<div style="position:absolute;left:34.99px;top:182.25px" class="cls_010"><span class="cls_010">_input</span><span class="cls_003"> and </span><span class="cls_010">_input_event</span><span class="cls_003"> are also not called</span></div>
<div style="position:absolute;left:5.00px;top:215.25px" class="cls_003"><span class="cls_003">When the pause mode is triggered, every node in the running game can react accordingly, based on</span></div>
<div style="position:absolute;left:5.00px;top:233.25px" class="cls_003"><span class="cls_003">how you've configured it. This behavior is set via the node's Pause/Mode property, which you'll find</span></div>
<div style="position:absolute;left:5.00px;top:251.25px" class="cls_003"><span class="cls_003">all the way at the bottom of the Inspector list.</span></div>
<div style="position:absolute;left:5.00px;top:284.25px" class="cls_003"><span class="cls_003">The pause mode can be set to three values: </span><span class="cls_010">INHERIT</span><span class="cls_003"> (the default value), </span><span class="cls_010">STOP</span><span class="cls_003">, and </span><span class="cls_010">PROCESS</span><span class="cls_003">. </span><span class="cls_010">STOP</span><span class="cls_003"> means the</span></div>
<div style="position:absolute;left:5.00px;top:302.25px" class="cls_003"><span class="cls_003">node will cease processing while the tree is paused, while </span><span class="cls_010">PROCESS</span><span class="cls_003"> sets the node to continue running,</span></div>
<div style="position:absolute;left:5.00px;top:320.25px" class="cls_003"><span class="cls_003">ignoring the paused state of the tree. Because it would be very tedious to set this property on every</span></div>
<div style="position:absolute;left:5.00px;top:338.25px" class="cls_003"><span class="cls_003">node in the whole game, </span><span class="cls_010">INHERIT</span><span class="cls_003"> lets the node use the same pause mode as its parent.</span></div>
<div style="position:absolute;left:5.00px;top:371.25px" class="cls_003"><span class="cls_003">Open the Input Map tab (in Project Settings) and create a new input action called </span><span class="cls_010">pause</span><span class="cls_003">. Choose a key</span></div>
<div style="position:absolute;left:5.00px;top:389.25px" class="cls_003"><span class="cls_003">you'd like to use to toggle pause mode; for example, P is a good choice.</span></div>
<div style="position:absolute;left:5.00px;top:422.25px" class="cls_003"><span class="cls_003">Next, add the following function to </span><span class="cls_010">Main.gd</span><span class="cls_003"> to respond to the input action:</span></div>
<div style="position:absolute;left:19.99px;top:456.75px" class="cls_010"><span class="cls_010">func _input(event):</span></div>
<div style="position:absolute;left:40.99px;top:468.00px" class="cls_010"><span class="cls_010">if event.is_action_pressed('pause'):</span></div>
<div style="position:absolute;left:61.98px;top:479.25px" class="cls_010"><span class="cls_010">if not playing:</span></div>
<div style="position:absolute;left:82.97px;top:490.50px" class="cls_010"><span class="cls_010">return</span></div>
<div style="position:absolute;left:40.99px;top:501.75px" class="cls_010"><span class="cls_010">get_tree().paused = not get_tree().paused</span></div>
<div style="position:absolute;left:40.99px;top:513.00px" class="cls_010"><span class="cls_010">if get_tree().paused:</span></div>
<div style="position:absolute;left:61.98px;top:524.25px" class="cls_010"><span class="cls_010">$HUD/MessageLabel.text = "Paused"</span></div>
<div style="position:absolute;left:61.98px;top:535.50px" class="cls_010"><span class="cls_010">$HUD/MessageLabel.show()</span></div>
<div style="position:absolute;left:40.99px;top:546.75px" class="cls_010"><span class="cls_010">else:</span></div>
<div style="position:absolute;left:61.98px;top:558.00px" class="cls_010"><span class="cls_010">$HUD/MessageLabel.text = ""</span></div>
<div style="position:absolute;left:61.98px;top:569.25px" class="cls_010"><span class="cls_010">$HUD/MessageLabel.hide()</span></div>
<div style="position:absolute;left:5.00px;top:594.00px" class="cls_003"><span class="cls_003">If you ran the game now, you'd have a problem—all nodes are paused, including </span><span class="cls_010">Main</span><span class="cls_003">. This means that</span></div>
<div style="position:absolute;left:5.00px;top:612.00px" class="cls_003"><span class="cls_003">since it isn't processing </span><span class="cls_010">_input</span><span class="cls_003">, it can't detect the input again to unpause the game! To fix this, you need</span></div>
<div style="position:absolute;left:5.00px;top:630.00px" class="cls_003"><span class="cls_003">to set the Pause/Mode of </span><span class="cls_010">Main</span><span class="cls_003"> to </span><span class="cls_010">PROCESS</span><span class="cls_003">. Now, you have the opposite problem: all the nodes below </span><span class="cls_010">Main</span></div>
<div style="position:absolute;left:5.00px;top:648.00px" class="cls_003"><span class="cls_003">inherit this setting. This is fine for most of the nodes, but you need to set the mode to </span><span class="cls_010">STOP</span><span class="cls_003"> on these</span></div>
<div style="position:absolute;left:5.00px;top:666.00px" class="cls_003"><span class="cls_003">three nodes: </span><span class="cls_010">Player</span><span class="cls_003">, </span><span class="cls_010">Rocks</span><span class="cls_003">, and </span><span class="cls_010">HUD</span><span class="cls_003">.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:149974px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background191.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Enemies</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Space is filled with more dangers than just rocks. In this section, you'll create an enemy spaceship</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">that will periodically appear and shoot at the player.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:150776px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background192.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Following a path</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">When the enemy appears, it should follow a path across the screen. To keep it from looking too</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">repetitive, you can create multiple paths and randomly choose one when the enemy starts.</span></div>
<div style="position:absolute;left:5.00px;top:130.50px" class="cls_003"><span class="cls_003">Create a new scene and add a </span><span class="cls_010">Node</span><span class="cls_003">. Name it </span><span class="cls_010">EnemyPaths</span><span class="cls_003"> and save the scene. To draw the path, add a</span></div>
<div style="position:absolute;left:5.00px;top:148.50px" class="cls_010"><span class="cls_010">Path2D</span><span class="cls_003"> node. As you saw earlier, this node allows you to draw a series of connected points. When you</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">add the node, a new menu bar appears:</span></div>
<div style="position:absolute;left:5.00px;top:244.50px" class="cls_003"><span class="cls_003">These buttons let you draw and modify the path's points. Click the one with the + symbol to add</span></div>
<div style="position:absolute;left:5.00px;top:262.50px" class="cls_003"><span class="cls_003">points. Click to start the path somewhere just outside the game window (the bluish-purple rectangle),</span></div>
<div style="position:absolute;left:5.00px;top:280.50px" class="cls_003"><span class="cls_003">and then click a few more points to create a curve. Don't worry about making it smooth just yet:</span></div>
<div style="position:absolute;left:5.00px;top:477.00px" class="cls_003"><span class="cls_003">When the enemy ship follows the path, it will not look very smooth when it hits the sharp corners. To</span></div>
<div style="position:absolute;left:5.00px;top:495.00px" class="cls_003"><span class="cls_003">smooth the curve, click the second button in the path toolbar (its tooltip says Select Control Points).</span></div>
<div style="position:absolute;left:5.00px;top:513.00px" class="cls_003"><span class="cls_003">Now, if you click and drag any of the curve's points, you will add a control point that allows you to</span></div>
<div style="position:absolute;left:5.00px;top:531.00px" class="cls_003"><span class="cls_003">angle and curve the line. Smoothing the preceding line results in something like this:</span></div>
<div style="position:absolute;left:5.00px;top:734.25px" class="cls_003"><span class="cls_003">Add a few more </span><span class="cls_010">Path2D</span><span class="cls_003"> nodes to the scene and draw the paths however you like. Adding loops and</span></div>
<div style="position:absolute;left:5.00px;top:752.25px" class="cls_003"><span class="cls_003">curves rather than straight lines will make the enemy look more dynamic (and make it harder to hit).</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:151578px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background193.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:3.31px" class="cls_003"><span class="cls_003">Remember that the first point you click will be the start of the path, so make sure to place them on</span></div>
<div style="position:absolute;left:5.00px;top:21.00px" class="cls_003"><span class="cls_003">different sides of the screen, for variety. Here are three example paths:</span></div>
<div style="position:absolute;left:5.00px;top:223.50px" class="cls_003"><span class="cls_003">Save the scene. You'll add this to the enemy's scene to give it the paths it can follow.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:152380px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background194.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Enemy scene</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Create a new scene for the Enemy, using an </span><span class="cls_010">Area2D</span><span class="cls_003"> as its root node. Add a </span><span class="cls_010">Sprite</span><span class="cls_003"> and use</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_010"><span class="cls_010">res://assets/enemy_saucer.png</span><span class="cls_003"> as its Texture. Set the Animation/HFrames to </span><span class="cls_010">3</span><span class="cls_003"> so that you can choose</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">between the different-colored ships:</span></div>
<div style="position:absolute;left:5.00px;top:217.50px" class="cls_003"><span class="cls_003">As you've done before, add a </span><span class="cls_010">CollisionShape2D</span><span class="cls_003"> and give it a </span><span class="cls_010">CircleShape2D</span><span class="cls_003"> scaled to cover the sprite</span></div>
<div style="position:absolute;left:5.00px;top:235.50px" class="cls_003"><span class="cls_003">image. Next, add an instance of the </span><span class="cls_010">EnemyPaths</span><span class="cls_003"> scene and an </span><span class="cls_010">AnimationPlayer</span><span class="cls_003">. In the </span><span class="cls_010">AnimationPlayer</span><span class="cls_003">, you'll</span></div>
<div style="position:absolute;left:5.00px;top:253.50px" class="cls_003"><span class="cls_003">need two animations: one to make the saucer spin as it moves, and the other to create a flash effect</span></div>
<div style="position:absolute;left:5.00px;top:271.50px" class="cls_003"><span class="cls_003">when the saucer is hit:</span></div>
<div style="position:absolute;left:34.99px;top:304.50px" class="cls_002"><span class="cls_002">Rotate animation</span><span class="cls_003">: Add a new animation named </span><span class="cls_010">rotate</span><span class="cls_003"> and set its </span><span class="cls_012">Length</span><span class="cls_003"> to </span><span class="cls_010">3</span><span class="cls_003">. Add a keyframe</span></div>
<div style="position:absolute;left:34.99px;top:321.75px" class="cls_003"><span class="cls_003">for the </span><span class="cls_010">Sprite</span><span class="cls_003"> Transform/Rotation Degrees property after setting it to </span><span class="cls_010">0</span><span class="cls_003">, then drag the play bar to</span></div>
<div style="position:absolute;left:34.99px;top:339.00px" class="cls_003"><span class="cls_003">the end and add a keyframe with the rotation set to </span><span class="cls_010">360</span><span class="cls_003">. Click the Loop button and the Autoplay</span></div>
<div style="position:absolute;left:34.99px;top:356.25px" class="cls_003"><span class="cls_003">button.</span></div>
<div style="position:absolute;left:34.99px;top:389.25px" class="cls_002"><span class="cls_002">Hit animation</span><span class="cls_003">: Add a second animation named </span><span class="cls_010">flash</span><span class="cls_003">. Set its </span><span class="cls_012">Length</span><span class="cls_003"> to </span><span class="cls_010">0.25</span><span class="cls_003"> and the </span><span class="cls_012">Step</span><span class="cls_003"> to </span><span class="cls_010">0.01</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:34.99px;top:406.50px" class="cls_003"><span class="cls_003">The property you'll be animating is the Sprite's Modulate (found under </span><span class="cls_012">Visibility</span><span class="cls_003">). Add a</span></div>
<div style="position:absolute;left:34.99px;top:423.75px" class="cls_003"><span class="cls_003">keyframe for Modulate to create the track, then move the scrubber to </span><span class="cls_010">0.04</span><span class="cls_003"> and change the</span></div>
<div style="position:absolute;left:34.99px;top:441.00px" class="cls_003"><span class="cls_003">Modulate color to red. Move forward another </span><span class="cls_010">0.04</span><span class="cls_003"> and change the color back to white.</span></div>
<div style="position:absolute;left:5.00px;top:474.00px" class="cls_003"><span class="cls_003">Repeat this process two more times so that you have three flashes in total.</span></div>
<div style="position:absolute;left:5.00px;top:507.00px" class="cls_003"><span class="cls_003">Add an instance of the </span><span class="cls_010">Explosion</span><span class="cls_003"> scene as you did with the other objects. Also, like you did with the</span></div>
<div style="position:absolute;left:5.00px;top:525.00px" class="cls_003"><span class="cls_003">rocks, connect the explosion's </span><span class="cls_010">AnimationPlayer</span><span class="cls_003"> </span><span class="cls_010">animation_finished</span><span class="cls_003"> signal and set it to delete the enemy</span></div>
<div style="position:absolute;left:5.00px;top:543.00px" class="cls_003"><span class="cls_003">when the explosion finishes:</span></div>
<div style="position:absolute;left:19.99px;top:577.50px" class="cls_010"><span class="cls_010">func _on_AnimationPlayer_animation_finished(anim_name):</span></div>
<div style="position:absolute;left:40.99px;top:588.75px" class="cls_010"><span class="cls_010">queue_free()</span></div>
<div style="position:absolute;left:5.00px;top:613.50px" class="cls_003"><span class="cls_003">Next, add a </span><span class="cls_010">Timer</span><span class="cls_003"> node called </span><span class="cls_010">GunTimer</span><span class="cls_003"> that will control how often the enemy shoots at the player. Set its</span></div>
<div style="position:absolute;left:5.00px;top:631.50px" class="cls_003"><span class="cls_003">Wait Time to </span><span class="cls_010">1.5</span><span class="cls_003"> and Autostart to </span><span class="cls_010">On</span><span class="cls_003">. Connect its </span><span class="cls_010">timeout</span><span class="cls_003"> signal, but leave the code reading </span><span class="cls_010">pass</span><span class="cls_003"> for now.</span></div>
<div style="position:absolute;left:5.00px;top:664.50px" class="cls_003"><span class="cls_003">Finally, click on the </span><span class="cls_010">Area2D</span><span class="cls_003"> and the Node tab and add it to a group called </span><span class="cls_010">enemies</span><span class="cls_003">. As with the rocks, this</span></div>
<div style="position:absolute;left:5.00px;top:682.50px" class="cls_003"><span class="cls_003">will give you a way to identify the object, even if there are multiple enemies on the screen at the same</span></div>
<div style="position:absolute;left:5.00px;top:700.50px" class="cls_003"><span class="cls_003">time.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:153182px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background195.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Moving the Enemy</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Attach a script to the </span><span class="cls_010">Enemy</span><span class="cls_003"> scene. To begin, you'll make the code that will select a path and move the</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">enemy along it:</span></div>
<div style="position:absolute;left:19.99px;top:132.00px" class="cls_010"><span class="cls_010">extends Area2D</span></div>
<div style="position:absolute;left:19.99px;top:154.50px" class="cls_010"><span class="cls_010">signal shoot</span></div>
<div style="position:absolute;left:19.99px;top:177.00px" class="cls_010"><span class="cls_010">export (PackedScene) var Bullet</span></div>
<div style="position:absolute;left:19.99px;top:188.25px" class="cls_010"><span class="cls_010">export (int) var speed = 150</span></div>
<div style="position:absolute;left:19.99px;top:199.50px" class="cls_010"><span class="cls_010">export (int) var health = 3</span></div>
<div style="position:absolute;left:19.99px;top:222.00px" class="cls_010"><span class="cls_010">var follow</span></div>
<div style="position:absolute;left:19.99px;top:233.25px" class="cls_010"><span class="cls_010">var target = null</span></div>
<div style="position:absolute;left:19.99px;top:255.75px" class="cls_010"><span class="cls_010">func _ready():</span></div>
<div style="position:absolute;left:40.99px;top:267.00px" class="cls_010"><span class="cls_010">$Sprite.frame = randi() % 3</span></div>
<div style="position:absolute;left:40.99px;top:278.25px" class="cls_010"><span class="cls_010">var path = $EnemyPaths.get_children()[randi() % $EnemyPaths.get_child_count()]</span></div>
<div style="position:absolute;left:40.99px;top:289.50px" class="cls_010"><span class="cls_010">follow = PathFollow2D.new()</span></div>
<div style="position:absolute;left:40.99px;top:300.75px" class="cls_010"><span class="cls_010">path.add_child(follow)</span></div>
<div style="position:absolute;left:40.99px;top:312.00px" class="cls_010"><span class="cls_010">follow.loop = false</span></div>
<div style="position:absolute;left:5.00px;top:336.75px" class="cls_003"><span class="cls_003">A </span><span class="cls_010">PathFollow2D</span><span class="cls_003"> node is one that can automatically move along a parent </span><span class="cls_010">Path2D</span><span class="cls_003">. By default, it is set to loop</span></div>
<div style="position:absolute;left:5.00px;top:354.75px" class="cls_003"><span class="cls_003">around the path, so you need to manually set the property to </span><span class="cls_010">false</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:387.75px" class="cls_003"><span class="cls_003">The next step is to move along the path:</span></div>
<div style="position:absolute;left:19.99px;top:422.25px" class="cls_010"><span class="cls_010">func _process(delta):</span></div>
<div style="position:absolute;left:40.99px;top:433.50px" class="cls_010"><span class="cls_010">follow.offset += speed * delta</span></div>
<div style="position:absolute;left:40.99px;top:444.75px" class="cls_010"><span class="cls_010">position = follow.global_position</span></div>
<div style="position:absolute;left:40.99px;top:456.00px" class="cls_010"><span class="cls_010">if follow.unit_offset > 1:</span></div>
<div style="position:absolute;left:61.98px;top:467.25px" class="cls_010"><span class="cls_010">queue_free()</span></div>
<div style="position:absolute;left:5.00px;top:492.00px" class="cls_003"><span class="cls_003">You can detect the end of the path when </span><span class="cls_010">offset</span><span class="cls_003"> is greater than the total path length. However, it's more</span></div>
<div style="position:absolute;left:5.00px;top:510.00px" class="cls_003"><span class="cls_003">straightforward to use </span><span class="cls_010">unit_offset</span><span class="cls_003">, which varies from zero to one over the length of the path.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:153984px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background196.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Spawning enemies</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Open the </span><span class="cls_010">Main</span><span class="cls_003"> scene and add a </span><span class="cls_010">Timer</span><span class="cls_003"> node called </span><span class="cls_010">EnemyTimer</span><span class="cls_003">. Set its One Shot property to </span><span class="cls_010">On</span><span class="cls_003">. Then, in</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_010"><span class="cls_010">Main.gd</span><span class="cls_003">, add a variable to reference your enemy scene (drag it into the Inspector after saving the</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">script):</span></div>
<div style="position:absolute;left:19.99px;top:150.00px" class="cls_010"><span class="cls_010">export (PackedScene) var Enemy</span></div>
<div style="position:absolute;left:5.00px;top:174.75px" class="cls_003"><span class="cls_003">Add the following code to </span><span class="cls_010">new_level()</span><span class="cls_003">:</span></div>
<div style="position:absolute;left:19.99px;top:209.25px" class="cls_010"><span class="cls_010">$EnemyTimer.wait_time = rand_range(5, 10)</span></div>
<div style="position:absolute;left:19.99px;top:220.50px" class="cls_010"><span class="cls_010">$EnemyTimer.start()</span></div>
<div style="position:absolute;left:5.00px;top:245.25px" class="cls_003"><span class="cls_003">Connect the </span><span class="cls_010">EnemyTimer</span><span class="cls_003"> </span><span class="cls_010">timeout</span><span class="cls_003"> signal, and add the following:</span></div>
<div style="position:absolute;left:19.99px;top:279.75px" class="cls_010"><span class="cls_010">func _on_EnemyTimer_timeout():</span></div>
<div style="position:absolute;left:40.99px;top:291.00px" class="cls_010"><span class="cls_010">var e = Enemy.instance()</span></div>
<div style="position:absolute;left:40.99px;top:302.25px" class="cls_010"><span class="cls_010">add_child(e)</span></div>
<div style="position:absolute;left:40.99px;top:313.50px" class="cls_010"><span class="cls_010">e.target = $Player</span></div>
<div style="position:absolute;left:40.99px;top:324.75px" class="cls_010"><span class="cls_010">e.connect('shoot', self, '_on_Player_shoot')</span></div>
<div style="position:absolute;left:40.99px;top:336.00px" class="cls_010"><span class="cls_010">$EnemyTimer.wait_time = rand_range(20, 40)</span></div>
<div style="position:absolute;left:40.99px;top:347.25px" class="cls_010"><span class="cls_010">$EnemyTimer.start()</span></div>
<div style="position:absolute;left:5.00px;top:372.00px" class="cls_003"><span class="cls_003">This code instances the enemy whenever the </span><span class="cls_010">EnemyTimer</span><span class="cls_003"> times out. When you add shooting to the enemy,</span></div>
<div style="position:absolute;left:5.00px;top:390.00px" class="cls_003"><span class="cls_003">it will use the same process you used for the </span><span class="cls_010">Player</span><span class="cls_003">, so you can reuse the same bullet-spawning</span></div>
<div style="position:absolute;left:5.00px;top:408.00px" class="cls_003"><span class="cls_003">function, which is </span><span class="cls_010">_on_Player_shoot()</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:441.00px" class="cls_003"><span class="cls_003">Play the game, and you should see a flying saucer appear that will fly along one of your paths.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:154786px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background197.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Enemy shooting and collisions</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">The enemy needs to shoot at the player as well as react when hit by the player or the player's bullets.</span></div>
<div style="position:absolute;left:5.00px;top:112.50px" class="cls_003"><span class="cls_003">Open the </span><span class="cls_010">Bullet</span><span class="cls_003"> scene and choose Save Scene As to save it as </span><span class="cls_010">EnemyBullet.tscn</span><span class="cls_003"> (afterwards, don't forget</span></div>
<div style="position:absolute;left:5.00px;top:130.50px" class="cls_003"><span class="cls_003">to rename the root node as well). Remove the script by selecting the root node and clicking the Clear</span></div>
<div style="position:absolute;left:5.00px;top:148.50px" class="cls_003"><span class="cls_003">the script button:</span></div>
<div style="position:absolute;left:5.00px;top:243.00px" class="cls_003"><span class="cls_003">You also need to disconnect the signal connections by clicking the Node tab and choosing Disconnect:</span></div>
<div style="position:absolute;left:5.00px;top:432.75px" class="cls_003"><span class="cls_003">There is also a different texture in the </span><span class="cls_010">assets</span><span class="cls_003"> folder you can use to make the enemy bullet appear</span></div>
<div style="position:absolute;left:5.00px;top:450.75px" class="cls_003"><span class="cls_003">distinct from the player's.</span></div>
<div style="position:absolute;left:5.00px;top:483.75px" class="cls_003"><span class="cls_003">The script will be very much the same as the regular bullet. Connect the area's </span><span class="cls_010">body_entered</span><span class="cls_003"> signal and</span></div>
<div style="position:absolute;left:5.00px;top:501.75px" class="cls_003"><span class="cls_003">the </span><span class="cls_010">screen_exited</span><span class="cls_003"> signal of </span><span class="cls_010">VisibilityNotifier2D</span><span class="cls_003">:</span></div>
<div style="position:absolute;left:19.99px;top:536.25px" class="cls_010"><span class="cls_010">extends Area2D</span></div>
<div style="position:absolute;left:19.99px;top:558.75px" class="cls_010"><span class="cls_010">export (int) var speed</span></div>
<div style="position:absolute;left:19.99px;top:581.25px" class="cls_010"><span class="cls_010">var velocity = Vector2()</span></div>
<div style="position:absolute;left:19.99px;top:603.75px" class="cls_010"><span class="cls_010">func start(_position, _direction):</span></div>
<div style="position:absolute;left:40.99px;top:615.00px" class="cls_010"><span class="cls_010">position = _position</span></div>
<div style="position:absolute;left:40.99px;top:626.25px" class="cls_010"><span class="cls_010">velocity = Vector2(speed, 0).rotated(_direction)</span></div>
<div style="position:absolute;left:40.99px;top:637.50px" class="cls_010"><span class="cls_010">rotation = _direction</span></div>
<div style="position:absolute;left:19.99px;top:660.00px" class="cls_010"><span class="cls_010">func _process(delta):</span></div>
<div style="position:absolute;left:40.99px;top:671.25px" class="cls_010"><span class="cls_010">position += velocity * delta</span></div>
<div style="position:absolute;left:19.99px;top:693.75px" class="cls_010"><span class="cls_010">func _on_EnemyBullet_body_entered(body):</span></div>
<div style="position:absolute;left:40.99px;top:705.00px" class="cls_010"><span class="cls_010">queue_free()</span></div>
<div style="position:absolute;left:19.99px;top:727.50px" class="cls_010"><span class="cls_010">func _on_VisibilityNotifier2D_screen_exited():</span></div>
<div style="position:absolute;left:40.99px;top:738.75px" class="cls_010"><span class="cls_010">queue_free()</span></div>
<div style="position:absolute;left:5.00px;top:763.50px" class="cls_003"><span class="cls_003">For now, the bullet won't do any damage to the player. You'll be adding a shield to the player in the</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:155588px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background198.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:3.31px" class="cls_003"><span class="cls_003">next section, so you can add that at the same time.</span></div>
<div style="position:absolute;left:5.00px;top:36.00px" class="cls_003"><span class="cls_003">Save the scene and drag it into the Bullet property on the </span><span class="cls_010">Enemy</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:69.00px" class="cls_003"><span class="cls_003">In </span><span class="cls_010">Enemy.gd</span><span class="cls_003">, add the </span><span class="cls_010">shoot</span><span class="cls_003"> function:</span></div>
<div style="position:absolute;left:19.99px;top:103.50px" class="cls_010"><span class="cls_010">func shoot():</span></div>
<div style="position:absolute;left:40.99px;top:114.75px" class="cls_010"><span class="cls_010">var dir = target.global_position - global_position</span></div>
<div style="position:absolute;left:40.99px;top:126.00px" class="cls_010"><span class="cls_010">dir = dir.rotated(rand_range(-0.1, 0.1)).angle()</span></div>
<div style="position:absolute;left:40.99px;top:137.25px" class="cls_010"><span class="cls_010">emit_signal('shoot', Bullet, global_position, dir)</span></div>
<div style="position:absolute;left:5.00px;top:162.00px" class="cls_003"><span class="cls_003">First, you must find the vector pointing to the player's position, then add a little bit of randomness to it</span></div>
<div style="position:absolute;left:5.00px;top:180.00px" class="cls_003"><span class="cls_003">so that the bullets don't follow exactly the same path.</span></div>
<div style="position:absolute;left:5.00px;top:213.00px" class="cls_003"><span class="cls_003">For an extra challenge, you can make the enemy shoot in </span><span class="cls_012">pulses</span><span class="cls_003">, or multiple rapid shots:</span></div>
<div style="position:absolute;left:19.99px;top:247.50px" class="cls_010"><span class="cls_010">func shoot_pulse(n, delay):</span></div>
<div style="position:absolute;left:40.99px;top:258.75px" class="cls_010"><span class="cls_010">for i in range(n):</span></div>
<div style="position:absolute;left:61.98px;top:270.00px" class="cls_010"><span class="cls_010">shoot()</span></div>
<div style="position:absolute;left:61.98px;top:281.25px" class="cls_010"><span class="cls_010">yield(get_tree().create_timer(delay), 'timeout')</span></div>
<div style="position:absolute;left:5.00px;top:306.00px" class="cls_003"><span class="cls_003">This function creates a given number of bullets with </span><span class="cls_010">delay</span><span class="cls_003"> time between them. You can use this</span></div>
<div style="position:absolute;left:5.00px;top:324.00px" class="cls_003"><span class="cls_003">whenever the </span><span class="cls_010">GunTimer</span><span class="cls_003"> triggers a shot:</span></div>
<div style="position:absolute;left:19.99px;top:358.50px" class="cls_010"><span class="cls_010">func _on_GunTimer_timeout():</span></div>
<div style="position:absolute;left:40.99px;top:369.75px" class="cls_010"><span class="cls_010">shoot_pulse(3, 0.15)</span></div>
<div style="position:absolute;left:5.00px;top:394.50px" class="cls_003"><span class="cls_003">This will shoot a pulse of </span><span class="cls_010">3</span><span class="cls_003"> bullets with </span><span class="cls_010">0.15</span><span class="cls_003"> seconds between them. Tough to dodge!</span></div>
<div style="position:absolute;left:5.00px;top:427.50px" class="cls_003"><span class="cls_003">Next, the enemy needs to take damage when it's hit by a shot from the player. It will flash using the</span></div>
<div style="position:absolute;left:5.00px;top:445.50px" class="cls_003"><span class="cls_003">animation you made, and then explode when its health reaches </span><span class="cls_010">0</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:478.50px" class="cls_003"><span class="cls_003">Add these functions to </span><span class="cls_010">Enemy.gd</span><span class="cls_003">:</span></div>
<div style="position:absolute;left:19.99px;top:513.00px" class="cls_010"><span class="cls_010">func take_damage(amount):</span></div>
<div style="position:absolute;left:40.99px;top:524.25px" class="cls_010"><span class="cls_010">health -= amount</span></div>
<div style="position:absolute;left:40.99px;top:535.50px" class="cls_010"><span class="cls_010">$AnimationPlayer.play('flash')</span></div>
<div style="position:absolute;left:40.99px;top:546.75px" class="cls_010"><span class="cls_010">if health &lt;= 0:</span></div>
<div style="position:absolute;left:61.98px;top:558.00px" class="cls_010"><span class="cls_010">explode()</span></div>
<div style="position:absolute;left:40.99px;top:569.25px" class="cls_010"><span class="cls_010">yield($AnimationPlayer, 'animation_finished')</span></div>
<div style="position:absolute;left:40.99px;top:580.50px" class="cls_010"><span class="cls_010">$AnimationPlayer.play('rotate')</span></div>
<div style="position:absolute;left:19.99px;top:603.00px" class="cls_010"><span class="cls_010">func explode():</span></div>
<div style="position:absolute;left:40.99px;top:614.25px" class="cls_010"><span class="cls_010">speed = 0</span></div>
<div style="position:absolute;left:40.99px;top:625.50px" class="cls_010"><span class="cls_010">$GunTimer.stop()</span></div>
<div style="position:absolute;left:40.99px;top:636.75px" class="cls_010"><span class="cls_010">$CollisionShape2D.disabled = true</span></div>
<div style="position:absolute;left:40.99px;top:648.00px" class="cls_010"><span class="cls_010">$Sprite.hide()</span></div>
<div style="position:absolute;left:40.99px;top:659.25px" class="cls_010"><span class="cls_010">$Explosion.show()</span></div>
<div style="position:absolute;left:40.99px;top:670.50px" class="cls_010"><span class="cls_010">$Explosion/AnimationPlayer.play("explosion")</span></div>
<div style="position:absolute;left:40.99px;top:681.75px" class="cls_010"><span class="cls_010">$ExplodeSound.play()</span></div>
<div style="position:absolute;left:5.00px;top:706.50px" class="cls_003"><span class="cls_003">Also, connect the area's </span><span class="cls_010">body_entered</span><span class="cls_003"> signal so the enemy will explode if the player runs into it:</span></div>
<div style="position:absolute;left:19.99px;top:741.00px" class="cls_010"><span class="cls_010">func _on_Enemy_body_entered(body):</span></div>
<div style="position:absolute;left:40.99px;top:752.25px" class="cls_010"><span class="cls_010">if body.name == 'Player':</span></div>
<div style="position:absolute;left:61.98px;top:763.50px" class="cls_010"><span class="cls_010">pass</span></div>
<div style="position:absolute;left:40.99px;top:774.75px" class="cls_010"><span class="cls_010">explode()</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:156390px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background199.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:3.00px" class="cls_003"><span class="cls_003">Again, you're waiting for the player shield to add the damage to the player, so leave the </span><span class="cls_010">pass</span></div>
<div style="position:absolute;left:5.00px;top:21.00px" class="cls_003"><span class="cls_003">placeholder there for now.</span></div>
<div style="position:absolute;left:5.00px;top:54.00px" class="cls_003"><span class="cls_003">Right now, the player's bullet is only detecting physics bodies because its </span><span class="cls_010">body_entered</span><span class="cls_003"> signal is</span></div>
<div style="position:absolute;left:5.00px;top:72.00px" class="cls_003"><span class="cls_003">connected. However, the enemy is an </span><span class="cls_010">Area2D</span><span class="cls_003">, so it will not trigger that signal. To detect the enemy, you</span></div>
<div style="position:absolute;left:5.00px;top:90.00px" class="cls_003"><span class="cls_003">need to also connect the  </span><span class="cls_010">area_entered</span><span class="cls_003"> signal:</span></div>
<div style="position:absolute;left:19.99px;top:124.50px" class="cls_010"><span class="cls_010">func _on_Bullet_area_entered(area):</span></div>
<div style="position:absolute;left:40.99px;top:135.75px" class="cls_010"><span class="cls_010">if area.is_in_group('enemies'):</span></div>
<div style="position:absolute;left:61.98px;top:147.00px" class="cls_010"><span class="cls_010">area.take_damage(1)</span></div>
<div style="position:absolute;left:40.99px;top:158.25px" class="cls_010"><span class="cls_010">queue_free()</span></div>
<div style="position:absolute;left:5.00px;top:183.00px" class="cls_003"><span class="cls_003">Try playing the game again and you'll be doing battle with an aggressive alien opponent! Verify that</span></div>
<div style="position:absolute;left:5.00px;top:201.00px" class="cls_003"><span class="cls_003">all the collision combinations are being handled. Also note that the enemy's bullets can be blocked by</span></div>
<div style="position:absolute;left:5.00px;top:219.00px" class="cls_003"><span class="cls_003">rocks—maybe you can hide behind them for cover!</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:157192px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background200.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Additional features</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">The structure of the game is complete. You can start the game, play it through, and when it ends, play</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">again. In this section, you'll add some additional effects and features to the game to improve the</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">gameplay experience. Effects is a broad term and can mean many different techniques, but in this</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">case, you'll specifically address three things:</span></div>
<div style="position:absolute;left:34.99px;top:166.50px" class="cls_002"><span class="cls_002">Sound effects and music: </span><span class="cls_003">Audio is very often overlooked, but can be a very effective part of</span></div>
<div style="position:absolute;left:34.99px;top:183.75px" class="cls_003"><span class="cls_003">game design. Good sound improves the </span><span class="cls_012">feel</span><span class="cls_003"> of the game. Bad or annoying sounds can create</span></div>
<div style="position:absolute;left:34.99px;top:201.00px" class="cls_003"><span class="cls_003">boredom or frustration. You'll add some action-packed background music, and some sound</span></div>
<div style="position:absolute;left:34.99px;top:218.25px" class="cls_003"><span class="cls_003">effects for several actions in the game.</span></div>
<div style="position:absolute;left:34.99px;top:251.25px" class="cls_002"><span class="cls_002">Particles: </span><span class="cls_003">Particle effects are images, usually small, that are generated in large numbers and</span></div>
<div style="position:absolute;left:34.99px;top:268.50px" class="cls_003"><span class="cls_003">animated by a particle system. They can be used for a countless number of impressive visual</span></div>
<div style="position:absolute;left:34.99px;top:285.75px" class="cls_003"><span class="cls_003">effects. Godot's particle system is quite powerful; too powerful to fully explore here, but you'll</span></div>
<div style="position:absolute;left:34.99px;top:303.00px" class="cls_003"><span class="cls_003">learn enough to get started experimenting with it.</span></div>
<div style="position:absolute;left:34.99px;top:336.00px" class="cls_002"><span class="cls_002">Player shield: </span><span class="cls_003">If you're finding the game too hard, especially on higher levels where there are a</span></div>
<div style="position:absolute;left:34.99px;top:353.25px" class="cls_003"><span class="cls_003">lot of rocks, adding a shield to the player will greatly increase your chances of survival. You can</span></div>
<div style="position:absolute;left:34.99px;top:370.50px" class="cls_003"><span class="cls_003">also make larger rocks do more damage to the shield than smaller ones. You'll also make a nice</span></div>
<div style="position:absolute;left:34.99px;top:387.75px" class="cls_003"><span class="cls_003">display bar on the HUD to show the player's remaining shield level.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:157994px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background201.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Sound/music</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">In the </span><span class="cls_010">res://assets/sounds</span><span class="cls_003"> folder are several audio files containing different sounds in the OggVorbis</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">format. By default, Godot sets </span><span class="cls_010">.ogg</span><span class="cls_003"> files to loop when imported. In the case of </span><span class="cls_010">explosion.ogg</span><span class="cls_003">,</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_010"><span class="cls_010">laser_blast.ogg</span><span class="cls_003">, and </span><span class="cls_010">levelup.ogg</span><span class="cls_003">, you don't want the sounds to loop, so you need to change the import</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">settings for those files. To do this, select the file in the FileSystem dock, and then click the Import tab</span></div>
<div style="position:absolute;left:5.00px;top:151.50px" class="cls_003"><span class="cls_003">located next to the Scene tab on the right-hand side of the editor window. Uncheck the box next to</span></div>
<div style="position:absolute;left:5.00px;top:169.50px" class="cls_003"><span class="cls_003">Loop and click Reimport. Do this for each of the three sounds. Refer to the following screenshot:</span></div>
<div style="position:absolute;left:5.00px;top:402.75px" class="cls_003"><span class="cls_003">To play a sound, it needs to be loaded by an </span><span class="cls_010">AudioStreamPlayer</span><span class="cls_003"> node. Add two of these nodes to the </span><span class="cls_010">Player</span></div>
<div style="position:absolute;left:5.00px;top:420.75px" class="cls_003"><span class="cls_003">scene, naming them </span><span class="cls_010">LaserSound</span><span class="cls_003"> and </span><span class="cls_010">EngineSound</span><span class="cls_003">. Drag the respective sound into each node's Stream</span></div>
<div style="position:absolute;left:5.00px;top:438.75px" class="cls_003"><span class="cls_003">property in the Inspector. To play the sound when shooting, add the following line to </span><span class="cls_010">shoot()</span><span class="cls_003"> in</span></div>
<div style="position:absolute;left:5.00px;top:456.75px" class="cls_010"><span class="cls_010">Player.gd</span><span class="cls_003">:</span></div>
<div style="position:absolute;left:19.99px;top:491.25px" class="cls_010"><span class="cls_010">$LaserSound.play()</span></div>
<div style="position:absolute;left:5.00px;top:516.00px" class="cls_003"><span class="cls_003">Play the game and try shooting. If you find the sound a bit too loud, you can adjust the Volume Db</span></div>
<div style="position:absolute;left:5.00px;top:534.00px" class="cls_003"><span class="cls_003">property. Try a value of </span><span class="cls_010">-10</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:567.00px" class="cls_003"><span class="cls_003">The engine sound works a little differently. It needs to play when the thrust is on, but if you try to just</span></div>
<div style="position:absolute;left:5.00px;top:585.00px" class="cls_010"><span class="cls_010">play()</span><span class="cls_003"> the sound in the </span><span class="cls_010">get_input()</span><span class="cls_003"> function, it will restart the sound every frame as long as you have the</span></div>
<div style="position:absolute;left:5.00px;top:603.00px" class="cls_003"><span class="cls_003">input pressed. This doesn't sound good, so you only want to start playing the sound if it isn't already</span></div>
<div style="position:absolute;left:5.00px;top:621.00px" class="cls_003"><span class="cls_003">playing. Here is the relevant section from the </span><span class="cls_010">get_input()</span><span class="cls_003"> function:</span></div>
<div style="position:absolute;left:19.99px;top:655.50px" class="cls_010"><span class="cls_010">if Input.is_action_pressed("thrust"):</span></div>
<div style="position:absolute;left:40.99px;top:666.75px" class="cls_010"><span class="cls_010">thrust = Vector2(engine_power, 0)</span></div>
<div style="position:absolute;left:40.99px;top:678.00px" class="cls_010"><span class="cls_010">if not $EngineSound.playing:</span></div>
<div style="position:absolute;left:61.98px;top:689.25px" class="cls_010"><span class="cls_010">$EngineSound.play()</span></div>
<div style="position:absolute;left:25.24px;top:700.50px" class="cls_010"><span class="cls_010">else:</span></div>
<div style="position:absolute;left:46.23px;top:711.75px" class="cls_010"><span class="cls_010">$EngineSound.stop()</span></div>
<div style="position:absolute;left:5.00px;top:736.50px" class="cls_003"><span class="cls_003">Note that a problem can occur—if the player dies while holding down the thrust key, the engine sound</span></div>
<div style="position:absolute;left:5.00px;top:754.50px" class="cls_003"><span class="cls_003">will remain stuck on. This can be solved by adding </span><span class="cls_010">$EngineSound.stop()</span><span class="cls_003"> to the </span><span class="cls_010">DEAD</span><span class="cls_003"> state in </span><span class="cls_010">change_state()</span><span class="cls_003">.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:158796px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background202.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:3.00px" class="cls_003"><span class="cls_003">In the </span><span class="cls_010">Main</span><span class="cls_003"> scene, add three more </span><span class="cls_010">AudioStreamPlayer</span><span class="cls_003"> nodes: </span><span class="cls_010">ExplodeSound</span><span class="cls_003">, </span><span class="cls_010">LevelupSound</span><span class="cls_003">, and </span><span class="cls_010">Music</span><span class="cls_003">. In their</span></div>
<div style="position:absolute;left:5.00px;top:21.00px" class="cls_003"><span class="cls_003">Stream properties, drop </span><span class="cls_010">explosion.ogg</span><span class="cls_003">, </span><span class="cls_010">levelup.ogg</span><span class="cls_003">, and </span><span class="cls_010">Funky-Gameplay_Looping.ogg</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:54.00px" class="cls_003"><span class="cls_003">Add </span><span class="cls_010">$ExplodeSound.play()</span><span class="cls_003"> as the first line of </span><span class="cls_010">_on_Rock_exploded()</span><span class="cls_003">, and add </span><span class="cls_010">$LevelupSound.play()</span><span class="cls_003"> to </span><span class="cls_010">new_level()</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:87.00px" class="cls_003"><span class="cls_003">To start/stop the music, add </span><span class="cls_010">$Music.play()</span><span class="cls_003"> to </span><span class="cls_010">new_game()</span><span class="cls_003"> and </span><span class="cls_010">$Music.stop()</span><span class="cls_003"> to </span><span class="cls_010">game_over()</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:120.00px" class="cls_003"><span class="cls_003">The Enemy also needs an </span><span class="cls_010">ExplodeSound</span><span class="cls_003"> and a </span><span class="cls_010">ShootSound</span><span class="cls_003">. You can use the same explosion as the player,</span></div>
<div style="position:absolute;left:5.00px;top:138.00px" class="cls_003"><span class="cls_003">but there is an </span><span class="cls_010">enemy_laser.wav</span><span class="cls_003"> sound to use for the shot.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:159598px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background203.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Particles</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">The player ship's thrust is a perfect use for particles, creating a streaming flame from the engine. Add</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">a </span><span class="cls_010">Particles2D</span><span class="cls_003"> node to the </span><span class="cls_010">Player</span><span class="cls_003"> scene and name it </span><span class="cls_010">Exhaust</span><span class="cls_003">. You might want to zoom in on the ship image</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">while you're doing this part.</span></div>
<div style="position:absolute;left:5.00px;top:148.50px" class="cls_003"><span class="cls_003">When first created, the </span><span class="cls_010">Particles2D</span><span class="cls_003"> node has a warning: </span><span class="cls_012">A material to process the particles is not</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_012"><span class="cls_012">assigned</span><span class="cls_003">. Particles will not be emitted until you assign a </span><span class="cls_010">Process Material</span><span class="cls_003"> in the Inspector. Two types of</span></div>
<div style="position:absolute;left:5.00px;top:184.50px" class="cls_003"><span class="cls_003">materials are possible: </span><span class="cls_010">ShaderMaterial</span><span class="cls_003"> and </span><span class="cls_010">ParticlesMaterial</span><span class="cls_003">. </span><span class="cls_010">ShaderMaterial</span><span class="cls_003"> allows you to write shader</span></div>
<div style="position:absolute;left:5.00px;top:202.50px" class="cls_003"><span class="cls_003">code in a GLSL-like language, while </span><span class="cls_010">ParticlesMaterial</span><span class="cls_003"> is configured in the Inspector. Next to Particles</span></div>
<div style="position:absolute;left:5.00px;top:220.50px" class="cls_003"><span class="cls_003">Material, click the down-arrow and choose New ParticlesMaterial.</span></div>
<div style="position:absolute;left:5.00px;top:253.50px" class="cls_003"><span class="cls_003">You'll see a line of white dots streaming down from the center of the player ship. Your challenge now</span></div>
<div style="position:absolute;left:5.00px;top:271.50px" class="cls_003"><span class="cls_003">is to turn those into an exhaust flame.</span></div>
<div style="position:absolute;left:5.00px;top:304.50px" class="cls_003"><span class="cls_003">There are a very large number of properties to choose from when configuring particles, especially</span></div>
<div style="position:absolute;left:5.00px;top:322.50px" class="cls_003"><span class="cls_003">under </span><span class="cls_010">ParticlesMaterial</span><span class="cls_003">. Before starting on that, set these properties of the </span><span class="cls_010">Particles2D</span><span class="cls_003">:</span></div>
<div style="position:absolute;left:34.99px;top:354.75px" class="cls_003"><span class="cls_003">Amount: </span><span class="cls_010">25</span></div>
<div style="position:absolute;left:34.99px;top:372.00px" class="cls_003"><span class="cls_003">Transform/Position</span><span class="cls_012">: </span><span class="cls_010">(-28, 0)</span></div>
<div style="position:absolute;left:34.99px;top:389.25px" class="cls_003"><span class="cls_003">Transform/Rotation: </span><span class="cls_010">180</span></div>
<div style="position:absolute;left:34.99px;top:406.50px" class="cls_003"><span class="cls_003">Visibility/Show Behind Parent: </span><span class="cls_010">On</span></div>
<div style="position:absolute;left:5.00px;top:439.50px" class="cls_003"><span class="cls_003">Now, click on the </span><span class="cls_010">ParticlesMaterial</span><span class="cls_003">. This is where you'll find the majority of the properties that affect</span></div>
<div style="position:absolute;left:5.00px;top:457.50px" class="cls_003"><span class="cls_003">the particles' behavior. Start with Emission Shape—change it to Box. This will reveal Box Extents,</span></div>
<div style="position:absolute;left:5.00px;top:475.50px" class="cls_003"><span class="cls_003">which should be set to </span><span class="cls_010">(1, 5, 1)</span><span class="cls_003">. Now, the particles are emitted over a small area instead of a single</span></div>
<div style="position:absolute;left:5.00px;top:493.50px" class="cls_003"><span class="cls_003">point.</span></div>
<div style="position:absolute;left:5.00px;top:526.50px" class="cls_003"><span class="cls_003">Next, set Spread/Spread to </span><span class="cls_010">0</span><span class="cls_003"> and Gravity/Gravity to </span><span class="cls_010">(0, 0, 0)</span><span class="cls_003">. Now, the particles aren't falling or</span></div>
<div style="position:absolute;left:5.00px;top:544.50px" class="cls_003"><span class="cls_003">spreading out, but they are moving very slowly.</span></div>
<div style="position:absolute;left:5.00px;top:577.50px" class="cls_003"><span class="cls_003">The next property is Initial Velocity. Set Velocity to </span><span class="cls_010">400</span><span class="cls_003">. Then, scroll down to Scale and set it to </span><span class="cls_010">8</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:610.50px" class="cls_003"><span class="cls_003">To make the size change over time, you can set a Scale Curve. Click on New CurveTexture and click</span></div>
<div style="position:absolute;left:5.00px;top:628.50px" class="cls_003"><span class="cls_003">on it. A new panel labeled Curve will appear. The left-hand dot represents the starting scale, and the</span></div>
<div style="position:absolute;left:5.00px;top:646.50px" class="cls_003"><span class="cls_003">right-hand dot represents the end. Drag the right-hand dot down until your curve looks something like</span></div>
<div style="position:absolute;left:5.00px;top:664.50px" class="cls_003"><span class="cls_003">this:</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:160400px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background204.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:108.75px" class="cls_003"><span class="cls_003">Now, the particles are shrinking as they age. Click the left arrow at the top of the Inspector to go back</span></div>
<div style="position:absolute;left:5.00px;top:126.75px" class="cls_003"><span class="cls_003">to the previous section.</span></div>
<div style="position:absolute;left:5.00px;top:159.75px" class="cls_003"><span class="cls_003">The final section to adjust is Color. To make the particles appear like a flame, the particles should</span></div>
<div style="position:absolute;left:5.00px;top:177.75px" class="cls_003"><span class="cls_003">start out a bright orange-yellow and shift to red while fading out. In the Color Ramp property, click</span></div>
<div style="position:absolute;left:5.00px;top:195.75px" class="cls_003"><span class="cls_003">on New GradientTexture. Then, in the Gradient property, choose New Gradient:</span></div>
<div style="position:absolute;left:5.00px;top:404.25px" class="cls_003"><span class="cls_003">The sliders labeled 1 and 2 select the starting and ending colors, while 3 shows what color is set on</span></div>
<div style="position:absolute;left:5.00px;top:422.25px" class="cls_003"><span class="cls_003">the currently selected slider. Click on slider 1 and then click 3 to choose an orange color, then click</span></div>
<div style="position:absolute;left:5.00px;top:440.25px" class="cls_003"><span class="cls_003">on slider 2 and set it to a deep red.</span></div>
<div style="position:absolute;left:5.00px;top:473.25px" class="cls_003"><span class="cls_003">Now that we can see what the particles are doing, they are lasting far too long. Go back to the </span><span class="cls_010">Exhaust</span></div>
<div style="position:absolute;left:5.00px;top:491.25px" class="cls_003"><span class="cls_003">node and change the Lifetime to </span><span class="cls_010">0.1</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:524.25px" class="cls_003"><span class="cls_003">Hopefully, your ship's exhaust looks somewhat like a flame. If it doesn't, feel free to adjust the</span></div>
<div style="position:absolute;left:5.00px;top:542.25px" class="cls_010"><span class="cls_010">ParticlesMaterial</span><span class="cls_003"> properties until you are happy with it.</span></div>
<div style="position:absolute;left:5.00px;top:575.25px" class="cls_003"><span class="cls_003">Now that the ship's </span><span class="cls_010">Exhaust</span><span class="cls_003"> is configured, it needs to be turned on/off based on the player input. Go to</span></div>
<div style="position:absolute;left:5.00px;top:593.25px" class="cls_003"><span class="cls_003">the player script and add </span><span class="cls_010">$Exhaust.emitting = false</span><span class="cls_003"> at the beginning of </span><span class="cls_010">get_input()</span><span class="cls_003">. Then, add</span></div>
<div style="position:absolute;left:5.00px;top:611.25px" class="cls_010"><span class="cls_010">$Exhaust.emitting = true</span><span class="cls_003"> under the </span><span class="cls_010">if</span><span class="cls_003"> statement that checks for thrust input.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:161202px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background205.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Enemy trail</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">You can also use particles to make a trail effect behind the enemy. Add a </span><span class="cls_010">Particles2D</span><span class="cls_003"> to the enemy</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">scene and set the properties as follows:</span></div>
<div style="position:absolute;left:34.99px;top:129.75px" class="cls_003"><span class="cls_003">Amount: </span><span class="cls_010">20</span></div>
<div style="position:absolute;left:34.99px;top:147.00px" class="cls_003"><span class="cls_003">Local Coords: </span><span class="cls_010">Off</span></div>
<div style="position:absolute;left:34.99px;top:164.25px" class="cls_003"><span class="cls_003">Texture: </span><span class="cls_010">res://assets/corona.png</span></div>
<div style="position:absolute;left:34.99px;top:181.50px" class="cls_003"><span class="cls_003">Show Behind Parent: </span><span class="cls_010">On</span></div>
<div style="position:absolute;left:5.00px;top:214.50px" class="cls_003"><span class="cls_003">Note that the effect texture you're using is white on a black background. This image needs its blend</span></div>
<div style="position:absolute;left:5.00px;top:232.50px" class="cls_003"><span class="cls_003">mode changed. To do this, on the particle node, find the Material property (it is in the </span><span class="cls_010">CanvasItem</span></div>
<div style="position:absolute;left:5.00px;top:250.50px" class="cls_003"><span class="cls_003">section). Select New CanvasItemMaterial and, in the resulting material, change the Blend Mode to</span></div>
<div style="position:absolute;left:5.00px;top:268.50px" class="cls_010"><span class="cls_010">Add</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:301.50px" class="cls_003"><span class="cls_003">Now, create a </span><span class="cls_010">ParticlesMaterial</span><span class="cls_003"> like you did previously, and use these settings:</span></div>
<div style="position:absolute;left:34.99px;top:333.75px" class="cls_003"><span class="cls_003">Emission Shape:</span></div>
<div style="position:absolute;left:64.98px;top:351.00px" class="cls_003"><span class="cls_003">Shape: Box</span></div>
<div style="position:absolute;left:64.98px;top:368.25px" class="cls_003"><span class="cls_003">Box Extents: (</span><span class="cls_010">25</span><span class="cls_003">, </span><span class="cls_010">25</span><span class="cls_003">, </span><span class="cls_010">1</span><span class="cls_003">)</span></div>
<div style="position:absolute;left:34.99px;top:385.50px" class="cls_003"><span class="cls_003">Spread: </span><span class="cls_010">25</span></div>
<div style="position:absolute;left:34.99px;top:402.75px" class="cls_003"><span class="cls_003">Gravity: (0, 0, 0)</span></div>
<div style="position:absolute;left:5.00px;top:435.75px" class="cls_003"><span class="cls_003">Now, create a </span><span class="cls_010">ScaleCurve</span><span class="cls_003"> like you did for the player exhaust. This time, make the curve look something</span></div>
<div style="position:absolute;left:5.00px;top:453.75px" class="cls_003"><span class="cls_003">like the following:</span></div>
<div style="position:absolute;left:5.00px;top:595.50px" class="cls_003"><span class="cls_003">Try running the game and see how it looks. Feel free to tinker with the settings until you have</span></div>
<div style="position:absolute;left:5.00px;top:613.50px" class="cls_003"><span class="cls_003">something you like.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:162004px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background206.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Player shield</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">In this section, you'll add a shield to the player and a display element to the </span><span class="cls_010">HUD</span><span class="cls_003"> showing the current</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">shield level.</span></div>
<div style="position:absolute;left:5.00px;top:130.50px" class="cls_003"><span class="cls_003">First, add the following to the top of the </span><span class="cls_010">Player.gd</span><span class="cls_003"> script:</span></div>
<div style="position:absolute;left:19.99px;top:165.00px" class="cls_010"><span class="cls_010">signal shield_changed</span></div>
<div style="position:absolute;left:19.99px;top:187.50px" class="cls_010"><span class="cls_010">export (int) var max_shield</span></div>
<div style="position:absolute;left:19.99px;top:198.75px" class="cls_010"><span class="cls_010">export (float) var shield_regen</span></div>
<div style="position:absolute;left:19.99px;top:221.25px" class="cls_010"><span class="cls_010">var shield = 0 setget set_shield</span></div>
<div style="position:absolute;left:5.00px;top:246.00px" class="cls_003"><span class="cls_003">The </span><span class="cls_010">shield</span><span class="cls_003"> variable will work similarly to </span><span class="cls_010">lives</span><span class="cls_003">, emitting a signal to the </span><span class="cls_010">HUD</span><span class="cls_003"> whenever it changes. Save</span></div>
<div style="position:absolute;left:5.00px;top:264.00px" class="cls_003"><span class="cls_003">the script and set </span><span class="cls_010">max_shield</span><span class="cls_003"> to </span><span class="cls_010">100</span><span class="cls_003"> and </span><span class="cls_010">shield_regen</span><span class="cls_003"> to </span><span class="cls_010">5</span><span class="cls_003"> in the Inspector.</span></div>
<div style="position:absolute;left:5.00px;top:297.00px" class="cls_003"><span class="cls_003">Next, add the following function, which handles changing the shield's value:</span></div>
<div style="position:absolute;left:19.99px;top:331.50px" class="cls_010"><span class="cls_010">func set_shield(value):</span></div>
<div style="position:absolute;left:40.99px;top:342.75px" class="cls_010"><span class="cls_010">if value > max_shield:</span></div>
<div style="position:absolute;left:61.98px;top:354.00px" class="cls_010"><span class="cls_010">value = max_shield</span></div>
<div style="position:absolute;left:40.99px;top:365.25px" class="cls_010"><span class="cls_010">shield = value</span></div>
<div style="position:absolute;left:40.99px;top:376.50px" class="cls_010"><span class="cls_010">emit_signal("shield_changed", shield/max_shield)</span></div>
<div style="position:absolute;left:40.99px;top:387.75px" class="cls_010"><span class="cls_010">if shield &lt;= 0:</span></div>
<div style="position:absolute;left:61.98px;top:399.00px" class="cls_010"><span class="cls_010">self.lives -= 1</span></div>
<div style="position:absolute;left:5.00px;top:423.75px" class="cls_003"><span class="cls_003">Also, since some things, such as regeneration, may add to the shield's value, you need to make sure it</span></div>
<div style="position:absolute;left:5.00px;top:441.75px" class="cls_003"><span class="cls_003">doesn't go above the maximum allowed value. Then, when you send the </span><span class="cls_010">shield_changed</span><span class="cls_003"> signal, you pass</span></div>
<div style="position:absolute;left:5.00px;top:459.75px" class="cls_003"><span class="cls_003">the ratio of </span><span class="cls_010">shield/max_shield</span><span class="cls_003">. This way, the HUD's display doesn't need to know anything about the</span></div>
<div style="position:absolute;left:5.00px;top:477.75px" class="cls_003"><span class="cls_003">actual values, just the shield's relative state.</span></div>
<div style="position:absolute;left:5.00px;top:510.75px" class="cls_003"><span class="cls_003">Add this line to </span><span class="cls_010">start()</span><span class="cls_003"> and to </span><span class="cls_010">set_lives()</span><span class="cls_003">:</span></div>
<div style="position:absolute;left:40.99px;top:545.25px" class="cls_010"><span class="cls_010">self.shield = max_shield</span></div>
<div style="position:absolute;left:5.00px;top:570.00px" class="cls_003"><span class="cls_003">Hitting a rock will damage the shield, and bigger rocks should do more damage:</span></div>
<div style="position:absolute;left:19.99px;top:604.50px" class="cls_010"><span class="cls_010">func _on_Player_body_entered( body ):</span></div>
<div style="position:absolute;left:40.99px;top:615.75px" class="cls_010"><span class="cls_010">if body.is_in_group('rocks'):</span></div>
<div style="position:absolute;left:61.98px;top:627.00px" class="cls_010"><span class="cls_010">body.explode()</span></div>
<div style="position:absolute;left:61.98px;top:638.25px" class="cls_010"><span class="cls_010">$Explosion.show()</span></div>
<div style="position:absolute;left:61.98px;top:649.50px" class="cls_010"><span class="cls_010">$Explosion/AnimationPlayer.play("explosion")</span></div>
<div style="position:absolute;left:61.98px;top:660.75px" class="cls_010"><span class="cls_010">self.shield -= body.size * 25</span></div>
<div style="position:absolute;left:5.00px;top:685.50px" class="cls_003"><span class="cls_003">The enemy's bullets should also do damage, so make this change to </span><span class="cls_010">EnemyBullet.gd</span><span class="cls_003">:</span></div>
<div style="position:absolute;left:19.99px;top:720.00px" class="cls_010"><span class="cls_010">func _on_EnemyBullet_body_entered(body):</span></div>
<div style="position:absolute;left:40.99px;top:731.25px" class="cls_010"><span class="cls_010">if body.name == 'Player':</span></div>
<div style="position:absolute;left:61.98px;top:742.50px" class="cls_010"><span class="cls_010">body.shield -= 15</span></div>
<div style="position:absolute;left:40.99px;top:753.75px" class="cls_010"><span class="cls_010">queue_free()</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:162806px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background207.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:3.00px" class="cls_003"><span class="cls_003">Also, running into the enemy should damage the player, so update this in </span><span class="cls_010">Enemy.gd</span><span class="cls_003">:</span></div>
<div style="position:absolute;left:19.99px;top:37.50px" class="cls_010"><span class="cls_010">func _on_Enemy_body_entered(body):</span></div>
<div style="position:absolute;left:40.99px;top:48.75px" class="cls_010"><span class="cls_010">if body.name == 'Player':</span></div>
<div style="position:absolute;left:61.98px;top:60.00px" class="cls_010"><span class="cls_010">body.shield -= 50</span></div>
<div style="position:absolute;left:61.98px;top:71.25px" class="cls_010"><span class="cls_010">explode()</span></div>
<div style="position:absolute;left:5.00px;top:96.00px" class="cls_003"><span class="cls_003">The last addition to the player script is to regenerate the shield each frame. Add this line to </span><span class="cls_010">_process()</span><span class="cls_003">:</span></div>
<div style="position:absolute;left:40.99px;top:130.50px" class="cls_010"><span class="cls_010">self.shield += shield_regen * delta</span></div>
<div style="position:absolute;left:5.00px;top:155.25px" class="cls_003"><span class="cls_003">The next step is to add the display element to the </span><span class="cls_010">HUD</span><span class="cls_003">. Rather than display the shield's value in a </span><span class="cls_010">Label</span><span class="cls_003">,</span></div>
<div style="position:absolute;left:5.00px;top:173.25px" class="cls_003"><span class="cls_003">you'll use a </span><span class="cls_010">TextureProgress</span><span class="cls_003"> node. This is a </span><span class="cls_010">Control</span><span class="cls_003"> node that is a type of </span><span class="cls_010">ProgressBar</span><span class="cls_003">: a node that displays</span></div>
<div style="position:absolute;left:5.00px;top:191.25px" class="cls_003"><span class="cls_003">a given value as a filled bar. The </span><span class="cls_010">TextureProgress</span><span class="cls_003"> node allows you to assign a texture to be used for the</span></div>
<div style="position:absolute;left:5.00px;top:209.25px" class="cls_003"><span class="cls_003">bar's display.</span></div>
<div style="position:absolute;left:5.00px;top:242.25px" class="cls_003"><span class="cls_003">In the existing </span><span class="cls_010">HBoxContainer</span><span class="cls_003">, add </span><span class="cls_010">TextureRect</span><span class="cls_003"> and </span><span class="cls_010">TextureProgress</span><span class="cls_003">. Place them after the </span><span class="cls_010">ScoreLabel</span><span class="cls_003"> and before</span></div>
<div style="position:absolute;left:5.00px;top:260.25px" class="cls_003"><span class="cls_003">the </span><span class="cls_010">LivesCounter</span><span class="cls_003">. Change the name of the </span><span class="cls_010">TextureProgress</span><span class="cls_003"> to ShieldBar. Your node setup should look like</span></div>
<div style="position:absolute;left:5.00px;top:278.25px" class="cls_003"><span class="cls_003">this:</span></div>
<div style="position:absolute;left:5.00px;top:559.50px" class="cls_003"><span class="cls_003">Drag the </span><span class="cls_010">res://assets/shield_gold.png</span><span class="cls_003"> texture into the </span><span class="cls_012">Texture</span><span class="cls_003"> property of </span><span class="cls_010">TextureRect</span><span class="cls_003">. This will be an icon</span></div>
<div style="position:absolute;left:5.00px;top:577.50px" class="cls_003"><span class="cls_003">indicating what the bar is displaying.</span></div>
<div style="position:absolute;left:5.00px;top:610.50px" class="cls_003"><span class="cls_003">The ShieldBar has three texture properties: Under, Over, and Progress. Progress is the texture that</span></div>
<div style="position:absolute;left:5.00px;top:628.50px" class="cls_003"><span class="cls_003">will be displayed as the bar's value. Drag </span><span class="cls_010">res://assets/barHorizontal_green_mid 200.png</span><span class="cls_003"> into this property.</span></div>
<div style="position:absolute;left:5.00px;top:646.50px" class="cls_003"><span class="cls_003">The other two texture properties allow you to customize the appearance by setting an image to be</span></div>
<div style="position:absolute;left:5.00px;top:664.50px" class="cls_003"><span class="cls_003">drawn below or above the progress texture. Drag </span><span class="cls_010">res://assets/glassPanel_200.png</span><span class="cls_003"> into the </span><span class="cls_012">Over</span><span class="cls_003"> texture</span></div>
<div style="position:absolute;left:5.00px;top:682.50px" class="cls_003"><span class="cls_003">property.</span></div>
<div style="position:absolute;left:5.00px;top:715.50px" class="cls_003"><span class="cls_003">In the </span><span class="cls_012">Range</span><span class="cls_003"> section, you can set the numeric properties of the bar. Min Value and Max Value should</span></div>
<div style="position:absolute;left:5.00px;top:733.50px" class="cls_003"><span class="cls_003">be set to </span><span class="cls_010">0</span><span class="cls_003"> and </span><span class="cls_010">100</span><span class="cls_003">, as this bar will be showing the percentage value of the shield, not its raw value.</span></div>
<div style="position:absolute;left:5.00px;top:751.50px" class="cls_003"><span class="cls_003">Value is the property that controls the currently displayed fill value. Change it to </span><span class="cls_010">75</span><span class="cls_003"> to see the bar</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:163608px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background208.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:3.00px" class="cls_003"><span class="cls_003">partly filled. Also, set its Horizontal size flags to Fill, Expand.</span></div>
<div style="position:absolute;left:5.00px;top:36.00px" class="cls_003"><span class="cls_003">Now, you can update the HUD script to control the shield bar. Add these variables at the top:</span></div>
<div style="position:absolute;left:19.99px;top:70.50px" class="cls_010"><span class="cls_010">onready var ShieldBar = $MarginContainer/HBoxContainer/ShieldBar</span></div>
<div style="position:absolute;left:19.99px;top:81.75px" class="cls_010"><span class="cls_010">var red_bar = preload("res://assets/barHorizontal_red_mid 200.png")</span></div>
<div style="position:absolute;left:19.99px;top:93.00px" class="cls_010"><span class="cls_010">var green_bar = preload("res://assets/barHorizontal_green_mid 200.png")</span></div>
<div style="position:absolute;left:19.99px;top:104.25px" class="cls_010"><span class="cls_010">var yellow_bar = preload("res://assets/barHorizontal_yellow_mid 200.png")</span></div>
<div style="position:absolute;left:5.00px;top:129.00px" class="cls_003"><span class="cls_003">In addition to the green bar texture, you also have red and yellow bars in the </span><span class="cls_010">assets</span><span class="cls_003"> folder. This will</span></div>
<div style="position:absolute;left:5.00px;top:147.00px" class="cls_003"><span class="cls_003">allow you to change the shield's color as the value decreases. Loading the textures in this way makes</span></div>
<div style="position:absolute;left:5.00px;top:165.00px" class="cls_003"><span class="cls_003">them easier to access later in the script when you want to assign the appropriate image to the</span></div>
<div style="position:absolute;left:5.00px;top:183.00px" class="cls_010"><span class="cls_010">TextureProgress</span><span class="cls_003"> node:</span></div>
<div style="position:absolute;left:19.99px;top:217.50px" class="cls_010"><span class="cls_010">func update_shield(value):</span></div>
<div style="position:absolute;left:40.99px;top:228.75px" class="cls_010"><span class="cls_010">ShieldBar.texture_progress = green_bar</span></div>
<div style="position:absolute;left:40.99px;top:240.00px" class="cls_010"><span class="cls_010">if value &lt; 40:</span></div>
<div style="position:absolute;left:61.98px;top:251.25px" class="cls_010"><span class="cls_010">ShieldBar.texture_progress = red_bar</span></div>
<div style="position:absolute;left:40.99px;top:262.50px" class="cls_010"><span class="cls_010">elif value &lt; 70:</span></div>
<div style="position:absolute;left:61.98px;top:273.75px" class="cls_010"><span class="cls_010">ShieldBar.texture_progress = yellow_bar</span></div>
<div style="position:absolute;left:40.99px;top:285.00px" class="cls_010"><span class="cls_010">ShieldBar.value = value</span></div>
<div style="position:absolute;left:5.00px;top:309.75px" class="cls_003"><span class="cls_003">Lastly, click on the </span><span class="cls_010">Main</span><span class="cls_003"> scene's </span><span class="cls_010">Player</span><span class="cls_003"> node and connect the </span><span class="cls_010">shield_changed</span><span class="cls_003"> signal to the </span><span class="cls_010">update_shield()</span></div>
<div style="position:absolute;left:5.00px;top:327.75px" class="cls_003"><span class="cls_003">function you just created. Run the game and verify that you can see the shield and that it is working.</span></div>
<div style="position:absolute;left:5.00px;top:345.75px" class="cls_003"><span class="cls_003">You may want to increase or decrease the regeneration rate to adjust it to a speed you like.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:164410px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background209.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Summary</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">In this chapter, you learned how to work with </span><span class="cls_010">RigidBody2D</span><span class="cls_003"> nodes and learned more about how Godot's</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">physics works. You also implemented a basic Finite State Machine—something you'll find more and</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">more useful as your projects grow larger. You saw how </span><span class="cls_010">Container</span><span class="cls_003"> nodes help organize and keep UI</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">nodes aligned. Finally, you added some sound effects and got your first taste of advanced visual</span></div>
<div style="position:absolute;left:5.00px;top:151.50px" class="cls_003"><span class="cls_003">effects by using the </span><span class="cls_010">AnimationPlayer</span><span class="cls_003"> and </span><span class="cls_010">Particles2D</span><span class="cls_003"> nodes.</span></div>
<div style="position:absolute;left:5.00px;top:184.50px" class="cls_003"><span class="cls_003">You also created a number of game objects using the standard Godot hierarchies, such as</span></div>
<div style="position:absolute;left:5.00px;top:202.50px" class="cls_010"><span class="cls_010">CollisionShapes</span><span class="cls_003"> being attached to </span><span class="cls_010">CollisionObjects</span><span class="cls_003">. At this point, some of these node configurations should</span></div>
<div style="position:absolute;left:5.00px;top:220.50px" class="cls_003"><span class="cls_003">be starting to look familiar to you.</span></div>
<div style="position:absolute;left:5.00px;top:253.50px" class="cls_003"><span class="cls_003">Before moving on, look through the project again. Play it. Make sure you understand what each scene</span></div>
<div style="position:absolute;left:5.00px;top:271.50px" class="cls_003"><span class="cls_003">is doing, and read through the scripts to review how everything connects together.</span></div>
<div style="position:absolute;left:5.00px;top:304.50px" class="cls_003"><span class="cls_003">In the next chapter, you'll learn about kinematic bodies, and use them to create a side-scrolling</span></div>
<div style="position:absolute;left:5.00px;top:322.50px" class="cls_003"><span class="cls_003">platform game.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:165212px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background210.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Jungle Jump (Platformer)</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">In this chapter, you'll build a classic </span><span class="cls_012">platform</span><span class="cls_003">, style game in the tradition of </span><span class="cls_012">Super Mario</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_012"><span class="cls_012">Bros.</span><span class="cls_003"> Platform games are a very popular genre, and understanding how they work can help you make</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">a variety of different game styles. The physics of platformers can be deceptively complex, and you'll</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">see how Godot's </span><span class="cls_010">KinematicBody2D</span><span class="cls_003"> physics node has features to help you implement the character</span></div>
<div style="position:absolute;left:5.00px;top:151.50px" class="cls_003"><span class="cls_003">controller features you need for a satisfying experience. Take a look at the following screenshot:</span></div>
<div style="position:absolute;left:5.00px;top:414.75px" class="cls_003"><span class="cls_003">In this project, you will learn about:</span></div>
<div style="position:absolute;left:34.99px;top:447.00px" class="cls_003"><span class="cls_003">Using the </span><span class="cls_010">KinematicBody2D</span><span class="cls_003"> physics node</span></div>
<div style="position:absolute;left:34.99px;top:464.25px" class="cls_003"><span class="cls_003">Combining animations and user input to produce complex character behavior</span></div>
<div style="position:absolute;left:34.99px;top:481.50px" class="cls_003"><span class="cls_003">Creating an infinitely scrolling background using ParallaxLayers</span></div>
<div style="position:absolute;left:34.99px;top:498.75px" class="cls_003"><span class="cls_003">Organizing your project and planning for expansion</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:166014px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background211.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Project setup</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Create a new project. Before you download the assets from the link that follows, you need to prepare</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">the import settings for the game art. The art assets for this project use a </span><span class="cls_012">pixel art</span><span class="cls_003"> style, which means</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">they look best when not filtered, which is Godot's default setting for textures. </span><span class="cls_002">Filtering</span><span class="cls_003"> is a method by</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">which the pixels of an image are smoothed. It can improve the look of some art, but not pixel-based</span></div>
<div style="position:absolute;left:5.00px;top:151.50px" class="cls_003"><span class="cls_003">images:</span></div>
<div style="position:absolute;left:5.00px;top:327.00px" class="cls_003"><span class="cls_003">It's inconvenient to have to disable this for every image, so Godot allows you to customize the default</span></div>
<div style="position:absolute;left:5.00px;top:345.00px" class="cls_003"><span class="cls_003">import settings. Click on the </span><span class="cls_010">icon.png</span><span class="cls_003"> file in the FileSystem dock, then click the Import tab next to the</span></div>
<div style="position:absolute;left:5.00px;top:363.00px" class="cls_003"><span class="cls_003">Scene tab on the right. This window allows you to change the import settings for the file you've</span></div>
<div style="position:absolute;left:5.00px;top:381.00px" class="cls_003"><span class="cls_003">selected. Uncheck the Filter property, then click Preset and choose Set as Default for 'Texture'. This</span></div>
<div style="position:absolute;left:5.00px;top:399.00px" class="cls_003"><span class="cls_003">way, all images will be imported with filtering disabled. Refer to the following screenshot:</span></div>
<div style="position:absolute;left:52.98px;top:670.50px" class="cls_008"><span class="cls_008">If you've already imported images, their import settings won't be updated automatically. After changing the default,</span></div>
<div style="position:absolute;left:52.98px;top:684.00px" class="cls_008"><span class="cls_008">you'll have to reimport any existing images. You can select multiple files in the FileSystem dock and click the</span></div>
<div style="position:absolute;left:52.98px;top:697.50px" class="cls_008"><span class="cls_008">Reimport button to apply the settings to many files at once.</span></div>
<div style="position:absolute;left:5.00px;top:726.00px" class="cls_003"><span class="cls_003">Now, you can download the game assets from the following link and unzip them in your project</span></div>
<div style="position:absolute;left:5.00px;top:744.00px" class="cls_003"><span class="cls_003">folder. Godot will import all the images with the new default settings, </span><span class="cls_009">https://github.com/PacktPublishing/</span></div>
<div style="position:absolute;left:5.00px;top:762.75px" class="cls_009"><span class="cls_009"> </span><A HREF="https://github.com/PacktPublishing/Godot-Game-Engine-Projects/releases">Godot-Game-Engine-Projects/releases</A> </div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:166816px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background212.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:3.00px" class="cls_003"><span class="cls_003">Next, open Project | Project Settings</span><span class="cls_012"> </span><span class="cls_003">and under Rendering/Quality, set Use Pixel Snap to </span><span class="cls_010">On</span><span class="cls_003">. This will</span></div>
<div style="position:absolute;left:5.00px;top:21.00px" class="cls_003"><span class="cls_003">ensure that all images will be aligned properly—something that will be very important when you're</span></div>
<div style="position:absolute;left:5.00px;top:39.00px" class="cls_003"><span class="cls_003">designing your game's levels.</span></div>
<div style="position:absolute;left:5.00px;top:72.00px" class="cls_003"><span class="cls_003">While you have the settings window open, go to the Display/Window section and change</span></div>
<div style="position:absolute;left:5.00px;top:90.00px" class="cls_003"><span class="cls_003">Stretch/Mode to </span><span class="cls_010">2d</span><span class="cls_003"> and Aspect to </span><span class="cls_010">expand</span><span class="cls_003">. These settings will allow the user to resize the game window</span></div>
<div style="position:absolute;left:5.00px;top:108.00px" class="cls_003"><span class="cls_003">while preserving the image's quality. Once the project has been completed, you'll be able to see the</span></div>
<div style="position:absolute;left:5.00px;top:126.00px" class="cls_003"><span class="cls_003">effects of this setting.</span></div>
<div style="position:absolute;left:5.00px;top:159.00px" class="cls_003"><span class="cls_003">Next, set up the collision layer names so that it will be more convenient to set up collisions between</span></div>
<div style="position:absolute;left:5.00px;top:177.00px" class="cls_003"><span class="cls_003">different types of objects. Go to Layer Names/2d Physics and name the first four layers like this:</span></div>
<div style="position:absolute;left:5.00px;top:404.25px" class="cls_003"><span class="cls_003">Finally, add the following actions for the player controls in the Input Map tab under Project | Project</span></div>
<div style="position:absolute;left:5.00px;top:422.25px" class="cls_003"><span class="cls_003">Settings:</span></div>
<div style="position:absolute;left:14.75px;top:460.50px" class="cls_002"><span class="cls_002">Action Name</span></div>
<div style="position:absolute;left:388.84px;top:460.50px" class="cls_002"><span class="cls_002">Key(s)</span></div>
<div style="position:absolute;left:14.75px;top:487.50px" class="cls_003"><span class="cls_003">right</span></div>
<div style="position:absolute;left:388.84px;top:487.50px" class="cls_003"><span class="cls_003">D, →</span></div>
<div style="position:absolute;left:14.75px;top:514.50px" class="cls_003"><span class="cls_003">left</span></div>
<div style="position:absolute;left:388.84px;top:514.50px" class="cls_003"><span class="cls_003">A, ←</span></div>
<div style="position:absolute;left:14.75px;top:541.50px" class="cls_003"><span class="cls_003">jump</span></div>
<div style="position:absolute;left:388.84px;top:541.50px" class="cls_003"><span class="cls_003">Space</span></div>
<div style="position:absolute;left:14.75px;top:568.50px" class="cls_003"><span class="cls_003">crouch</span></div>
<div style="position:absolute;left:388.84px;top:568.50px" class="cls_003"><span class="cls_003">S, ↓</span></div>
<div style="position:absolute;left:14.75px;top:595.50px" class="cls_003"><span class="cls_003">climb</span></div>
<div style="position:absolute;left:388.84px;top:595.50px" class="cls_003"><span class="cls_003">W, ↑</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:167618px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background213.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Introducing kinematic bodies</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">A platform game requires gravity, collisions, jumping, and other physics behavior, so you might think</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">that </span><span class="cls_010">RigidBody2D</span><span class="cls_003"> would be the perfect choice to implement the character's movement. In practice,</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">however, you'll find that the </span><span class="cls_012">realistic</span><span class="cls_003"> physics of the rigid body are not desirable for a platform</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">character. To the player, realism is less important than responsive control and an </span><span class="cls_012">action</span><span class="cls_003"> feel. As the</span></div>
<div style="position:absolute;left:5.00px;top:151.50px" class="cls_003"><span class="cls_003">developer, you therefore want to have precise control over the character's movements and collision</span></div>
<div style="position:absolute;left:5.00px;top:169.50px" class="cls_003"><span class="cls_003">response. For this reason, a kinematic body is usually the better choice for a platform character.</span></div>
<div style="position:absolute;left:5.00px;top:202.50px" class="cls_003"><span class="cls_003">The </span><span class="cls_010">KinematicBody2D</span><span class="cls_003"> node is designed for implementing bodies that are to be controlled directly by the</span></div>
<div style="position:absolute;left:5.00px;top:220.50px" class="cls_003"><span class="cls_003">user or via code. These nodes detect collisions with other bodies when moving, but are not affected</span></div>
<div style="position:absolute;left:5.00px;top:238.50px" class="cls_003"><span class="cls_003">by global physics properties like gravity or friction. This doesn't mean that a kinematic body can't be</span></div>
<div style="position:absolute;left:5.00px;top:256.50px" class="cls_003"><span class="cls_003">affected by gravity and other forces, just that you must calculate those forces and their effects in code;</span></div>
<div style="position:absolute;left:5.00px;top:274.50px" class="cls_003"><span class="cls_003">the engine will not move a kinematic body automatically.</span></div>
<div style="position:absolute;left:5.00px;top:307.50px" class="cls_003"><span class="cls_003">When moving </span><span class="cls_010">KinematicBody2D</span><span class="cls_003">, as with </span><span class="cls_010">RigidBody2D</span><span class="cls_003">, you should not set its </span><span class="cls_010">position</span><span class="cls_003"> directly. Instead, you use</span></div>
<div style="position:absolute;left:5.00px;top:325.50px" class="cls_003"><span class="cls_003">either the </span><span class="cls_010">move_and_collide()</span><span class="cls_003"> or </span><span class="cls_010">move_and_slide()</span><span class="cls_003"> methods. These methods move the body along a given</span></div>
<div style="position:absolute;left:5.00px;top:343.50px" class="cls_003"><span class="cls_003">vector and instantly stop if a collision is detected with another body. After </span><span class="cls_010">KinematicBody2D</span><span class="cls_003"> has collided,</span></div>
<div style="position:absolute;left:5.00px;top:361.50px" class="cls_003"><span class="cls_003">any </span><span class="cls_012">collision response</span><span class="cls_003"> must be coded manually.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:168420px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background214.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Collision response</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">After a collision, you may want the body to bounce, to slide along a wall, or to alter the properties of</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">the object it hit. The way you handle collision response depends on which method you used to move</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">the body.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:169222px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background215.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">move_and_collide</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">When using </span><span class="cls_010">move_and_collide()</span><span class="cls_003">, the function returns a </span><span class="cls_010">KinematicCollision2D</span><span class="cls_003"> object upon collision. This</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">object contains information about the collision and the colliding body. You can use this information to</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">determine the response. Note that the function returns </span><span class="cls_010">null</span><span class="cls_003"> when the movement was completed</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">successfully with no collision.</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">For example, if you want the body to bounce off of the colliding object, you could use the following</span></div>
<div style="position:absolute;left:5.00px;top:184.50px" class="cls_003"><span class="cls_003">script:</span></div>
<div style="position:absolute;left:19.99px;top:219.00px" class="cls_010"><span class="cls_010">extends KinematicBody2D</span></div>
<div style="position:absolute;left:19.99px;top:241.50px" class="cls_010"><span class="cls_010">var velocity = Vector2(250, 250)</span></div>
<div style="position:absolute;left:19.99px;top:264.00px" class="cls_010"><span class="cls_010">func _physics_process(delta):</span></div>
<div style="position:absolute;left:40.99px;top:275.25px" class="cls_010"><span class="cls_010">var collide = move_and_collide(velocity * delta)</span></div>
<div style="position:absolute;left:40.99px;top:286.50px" class="cls_010"><span class="cls_010">if collide:</span></div>
<div style="position:absolute;left:61.98px;top:297.75px" class="cls_010"><span class="cls_010">velocity = velocity.bounce(collide.normal)</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:170024px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background216.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">move_and_slide</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Sliding is a very common option for collision response. Imagine a player moving along walls in a</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">top-down game or running up and down slopes in a platformer. While it's possible to code this</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">response yourself after using </span><span class="cls_010">move_and_collide()</span><span class="cls_003">, </span><span class="cls_010">move_and_slide()</span><span class="cls_003"> provides a convenient way to implement</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">sliding movement. When using this method, the body will automatically slide along the colliding</span></div>
<div style="position:absolute;left:5.00px;top:151.50px" class="cls_003"><span class="cls_003">surface. In addition, sliding collisions allow you to use methods like </span><span class="cls_010">is_on_floor()</span><span class="cls_003"> to detect the</span></div>
<div style="position:absolute;left:5.00px;top:169.50px" class="cls_003"><span class="cls_003">orientation of the colliding surface.</span></div>
<div style="position:absolute;left:5.00px;top:202.50px" class="cls_003"><span class="cls_003">Since this project will require not just moving along the ground, but also running up and down slopes,</span></div>
<div style="position:absolute;left:5.00px;top:220.50px" class="cls_010"><span class="cls_010">move_and_slide()</span><span class="cls_003"> is going to play a large role in your player's movement. You'll see how it works as you</span></div>
<div style="position:absolute;left:5.00px;top:238.50px" class="cls_003"><span class="cls_003">build up the player object.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:170826px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background217.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Player scene</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Open a new scene and add a </span><span class="cls_010">KinematicBody2D</span><span class="cls_003"> object named </span><span class="cls_010">Player</span><span class="cls_003"> as the root and save the scene (don't</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">forget to click the Make children unselectable button). When saving the </span><span class="cls_010">Player</span><span class="cls_003"> scene, you should also</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">create a new folder to contain it. This will help keep your project folder organized as you add more</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">scenes and scripts.</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">As you've done in other projects, you'll include all the nodes that the player character needs to</span></div>
<div style="position:absolute;left:5.00px;top:184.50px" class="cls_003"><span class="cls_003">function in the </span><span class="cls_010">Player</span><span class="cls_003"> scene. For this game, that means handling collisions with various game objects,</span></div>
<div style="position:absolute;left:5.00px;top:202.50px" class="cls_003"><span class="cls_003">including platforms, enemies, and collectibles; displaying animations for actions, such as running or</span></div>
<div style="position:absolute;left:5.00px;top:220.50px" class="cls_003"><span class="cls_003">jumping; and a camera to follow the player around the level.</span></div>
<div style="position:absolute;left:5.00px;top:253.50px" class="cls_003"><span class="cls_003">Scripting the various animations can quickly become unmanageable, so you'll use a </span><span class="cls_012">finite state</span></div>
<div style="position:absolute;left:5.00px;top:271.50px" class="cls_012"><span class="cls_012">machine</span><span class="cls_003"> to manage and track the player's state. See </span><span class="cls_009">Chapter 3</span><span class="cls_003">, </span><span class="cls_012">Escape the Maze</span><span class="cls_003">, to review how the</span></div>
<div style="position:absolute;left:5.00px;top:289.50px" class="cls_003"><span class="cls_003">simplified FSM was built. You'll follow a similar pattern for this project.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:171628px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background218.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Collision Layer/Mask</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">A body's collision layer property sets what layer(s) the body is found on. </span><span class="cls_010">Player</span><span class="cls_003"> needs to be assigned</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">to the player layer you named in Project Settings.</span></div>
<div style="position:absolute;left:5.00px;top:130.50px" class="cls_003"><span class="cls_003">The Collision/Mask property allows you to set what types of objects the body will detect. Set</span></div>
<div style="position:absolute;left:5.00px;top:148.50px" class="cls_003"><span class="cls_003">the Player layer to </span><span class="cls_010">player</span><span class="cls_003"> and its mask to environment, enemies, and collectibles (</span><span class="cls_010">1</span><span class="cls_003">, </span><span class="cls_010">3</span><span class="cls_003">, and </span><span class="cls_010">4</span><span class="cls_003">):</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:172430px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background219.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Sprite</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Add a Sprite node to </span><span class="cls_010">Player</span><span class="cls_003">. Drag the </span><span class="cls_010">res://assets/player_sheet.png</span><span class="cls_003"> file from the FileSystem dock and</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">drop it in the Texture property of the </span><span class="cls_010">Sprite</span><span class="cls_003">. The player animation is saved in the form of a sprite</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">sheet:</span></div>
<div style="position:absolute;left:5.00px;top:194.25px" class="cls_003"><span class="cls_003">You'll use </span><span class="cls_010">AnimationPlayer</span><span class="cls_003"> to handle the animations, so in the Animation properties of </span><span class="cls_010">Sprite</span><span class="cls_003">, set</span></div>
<div style="position:absolute;left:5.00px;top:212.25px" class="cls_003"><span class="cls_003">Vframes to </span><span class="cls_010">1</span><span class="cls_003"> and Hframes to </span><span class="cls_010">19</span><span class="cls_003">. Set Frame to </span><span class="cls_010">7</span><span class="cls_003"> to begin, as this is the frame that shows the character</span></div>
<div style="position:absolute;left:5.00px;top:230.25px" class="cls_003"><span class="cls_003">standing still (it's the first frame of the </span><span class="cls_010">idle</span><span class="cls_003"> animation):</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:173232px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background220.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Collision shape</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">As with other physics bodies, </span><span class="cls_010">KinematicBody2D</span><span class="cls_003"> needs a shape assigned to define its collision bounds.</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">Add a </span><span class="cls_010">CollisionShape2D</span><span class="cls_003"> object and create a new </span><span class="cls_010">RectangleShape2D</span><span class="cls_003"> object inside it. When sizing the</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">rectangle, you want it to reach the bottom of the image but not be quite as wide. In general, making the</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">collision shape a bit smaller than the image will result in a better </span><span class="cls_012">feel</span><span class="cls_003"> when playing, avoiding the</span></div>
<div style="position:absolute;left:5.00px;top:151.50px" class="cls_003"><span class="cls_003">experience of hitting something that looks like it wouldn't result in a collision.</span></div>
<div style="position:absolute;left:5.00px;top:184.50px" class="cls_003"><span class="cls_003">You'll also need to offset the shape a small amount to make it fit. Setting Position to </span><span class="cls_010">(0, 5)</span><span class="cls_003"> works well.</span></div>
<div style="position:absolute;left:5.00px;top:202.50px" class="cls_003"><span class="cls_003">When you're done, it should look approximately like this:</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:174034px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background221.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Shapes</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Some developers prefer a capsule shape over a rectangle shape for sidescrolling characters. A</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">capsule is a pill-shaped collision that's rounded on both ends:</span></div>
<div style="position:absolute;left:5.00px;top:271.50px" class="cls_003"><span class="cls_003">However, while this shape might seem to </span><span class="cls_012">cover</span><span class="cls_003"> the sprite better, it can lead to difficulties when</span></div>
<div style="position:absolute;left:5.00px;top:289.50px" class="cls_003"><span class="cls_003">implementing platformer-style movement. For example, when standing too near the edge of a</span></div>
<div style="position:absolute;left:5.00px;top:307.50px" class="cls_003"><span class="cls_003">platform, the character may slide off due to the rounded bottom, which can be very frustrating for the</span></div>
<div style="position:absolute;left:5.00px;top:325.50px" class="cls_003"><span class="cls_003">player.</span></div>
<div style="position:absolute;left:5.00px;top:358.50px" class="cls_003"><span class="cls_003">In some cases, depending on the complexity of your character and its interactions with other</span></div>
<div style="position:absolute;left:5.00px;top:376.50px" class="cls_003"><span class="cls_003">objects, you may want to add multiple shapes to the same object. You might have one shape at the</span></div>
<div style="position:absolute;left:5.00px;top:394.50px" class="cls_003"><span class="cls_003">character's feet to detect ground collisions, another on its body to detect damage (sometimes called a</span></div>
<div style="position:absolute;left:5.00px;top:412.50px" class="cls_003"><span class="cls_003">hurtbox), and yet another covering the player's front to detect contact with walls.</span></div>
<div style="position:absolute;left:5.00px;top:445.50px" class="cls_003"><span class="cls_003">It's recommended that you stick to </span><span class="cls_010">RectangleShape2D</span><span class="cls_003">, as shown in the preceding screenshot, for this</span></div>
<div style="position:absolute;left:5.00px;top:463.50px" class="cls_003"><span class="cls_003">character. However, once you've finished the project, you should try changing the player's collision</span></div>
<div style="position:absolute;left:5.00px;top:481.50px" class="cls_003"><span class="cls_003">shape to </span><span class="cls_010">CapsuleShape2D</span><span class="cls_003"> and observing the resulting behavior. If you like it better, feel free to use it</span></div>
<div style="position:absolute;left:5.00px;top:499.50px" class="cls_003"><span class="cls_003">instead.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:174836px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background222.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Animations</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Add an </span><span class="cls_010">AnimationPlayer</span><span class="cls_003"> node to the </span><span class="cls_010">Player</span><span class="cls_003"> scene. You'll use this node to change the Frame property</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">on </span><span class="cls_010">Sprite</span><span class="cls_003"> to display the character's animations. Start by making a new animation named </span><span class="cls_010">idle</span><span class="cls_003">:</span></div>
<div style="position:absolute;left:5.00px;top:279.75px" class="cls_003"><span class="cls_003">Set Length to </span><span class="cls_010">0.4</span><span class="cls_003"> seconds and keep Step at </span><span class="cls_010">0.1</span><span class="cls_003"> seconds. Change the Frame of </span><span class="cls_010">Sprite</span><span class="cls_003"> to </span><span class="cls_010">7</span><span class="cls_003"> and click the</span></div>
<div style="position:absolute;left:5.00px;top:297.75px" class="cls_003"><span class="cls_003">Add keyframe button next to the Frame property to create a new animation track, then press it again,</span></div>
<div style="position:absolute;left:5.00px;top:315.75px" class="cls_003"><span class="cls_003">noting that it automatically increments the Frame property:</span></div>
<div style="position:absolute;left:5.00px;top:414.75px" class="cls_003"><span class="cls_003">Continue pressing it until you have frames </span><span class="cls_010">7</span><span class="cls_003"> through </span><span class="cls_010">10</span><span class="cls_003">. Finally, click the Enable/Disable</span></div>
<div style="position:absolute;left:5.00px;top:432.75px" class="cls_003"><span class="cls_003">looping button to enable looping and then press Play to view your animation. Your animation setup</span></div>
<div style="position:absolute;left:5.00px;top:450.75px" class="cls_003"><span class="cls_003">should look like this:</span></div>
<div style="position:absolute;left:5.00px;top:648.00px" class="cls_003"><span class="cls_003">Now you need to repeat the process for the other animations. See the following table for a list of</span></div>
<div style="position:absolute;left:5.00px;top:666.00px" class="cls_003"><span class="cls_003">settings:</span></div>
<div style="position:absolute;left:14.75px;top:704.25px" class="cls_002"><span class="cls_002">name</span></div>
<div style="position:absolute;left:137.69px;top:704.25px" class="cls_002"><span class="cls_002">length</span></div>
<div style="position:absolute;left:245.65px;top:704.25px" class="cls_002"><span class="cls_002">frames</span></div>
<div style="position:absolute;left:496.05px;top:704.25px" class="cls_002"><span class="cls_002">looping</span></div>
<div style="position:absolute;left:14.75px;top:736.50px" class="cls_010"><span class="cls_010">idle</span></div>
<div style="position:absolute;left:137.69px;top:736.50px" class="cls_010"><span class="cls_010">0.4</span></div>
<div style="position:absolute;left:245.65px;top:736.50px" class="cls_010"><span class="cls_010">7, 8, 9 ,10</span></div>
<div style="position:absolute;left:496.05px;top:731.25px" class="cls_003"><span class="cls_003">on</span></div>
<div style="position:absolute;left:14.75px;top:763.50px" class="cls_010"><span class="cls_010">run</span></div>
<div style="position:absolute;left:137.69px;top:763.50px" class="cls_010"><span class="cls_010">0.5</span></div>
<div style="position:absolute;left:245.65px;top:763.50px" class="cls_010"><span class="cls_010">13, 14, 15, 16, 17, 18</span></div>
<div style="position:absolute;left:496.05px;top:758.25px" class="cls_003"><span class="cls_003">on</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:175638px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background223.jpg" width=612 height=792></div>
<div style="position:absolute;left:14.75px;top:7.50px" class="cls_010"><span class="cls_010">hurt</span></div>
<div style="position:absolute;left:137.69px;top:7.50px" class="cls_010"><span class="cls_010">0.2</span></div>
<div style="position:absolute;left:245.65px;top:7.50px" class="cls_010"><span class="cls_010">5, 6</span></div>
<div style="position:absolute;left:496.05px;top:2.56px" class="cls_003"><span class="cls_003">on</span></div>
<div style="position:absolute;left:14.75px;top:34.50px" class="cls_010"><span class="cls_010">jump_up</span></div>
<div style="position:absolute;left:137.69px;top:34.50px" class="cls_010"><span class="cls_010">0.1</span></div>
<div style="position:absolute;left:245.65px;top:34.50px" class="cls_010"><span class="cls_010">11</span></div>
<div style="position:absolute;left:496.05px;top:29.25px" class="cls_003"><span class="cls_003">off</span></div>
<div style="position:absolute;left:14.75px;top:61.50px" class="cls_010"><span class="cls_010">jump_down</span></div>
<div style="position:absolute;left:137.69px;top:61.50px" class="cls_010"><span class="cls_010">0.1</span></div>
<div style="position:absolute;left:245.65px;top:61.50px" class="cls_010"><span class="cls_010">12</span></div>
<div style="position:absolute;left:496.05px;top:56.25px" class="cls_003"><span class="cls_003">0ff</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:176440px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background224.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Finishing up the scene tree</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Add </span><span class="cls_010">Camera2D</span><span class="cls_003"> to the </span><span class="cls_010">Player</span><span class="cls_003"> scene. This node will keep the game window centered on the player as it</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">moves around the level. You can also use it to zoom in on the player, since the pixel art is relatively</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">small. Remember, since you set filtering off in the import settings, the player's texture will remain</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">pixelated and blocky when zoomed in.</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">To enable the camera, click the Current property to </span><span class="cls_010">On</span><span class="cls_003">, then set the Zoom property to </span><span class="cls_010">(0.4, 0.4)</span><span class="cls_003">. Values</span></div>
<div style="position:absolute;left:5.00px;top:184.50px" class="cls_003"><span class="cls_003">smaller than one zoom the camera in, while larger values zoom it out.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:177242px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background225.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Player states</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">The player character has a wide variety of behaviors, such as jumping, running, and crouching.</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">Coding such behaviors can become very complex and hard to manage. One solution is to use Boolean</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">variables (</span><span class="cls_010">is_jumping</span><span class="cls_003"> or </span><span class="cls_010">is_running</span><span class="cls_003">, for example), but this leads to possibly confusing states (what if</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_010"><span class="cls_010">is_crouching</span><span class="cls_003"> and </span><span class="cls_010">is_jumping</span><span class="cls_003"> are both </span><span class="cls_010">true</span><span class="cls_003">?) and quickly leads to spaghetti code.</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">A better solution to this problem is to use a state machine to handle the player's current state and</span></div>
<div style="position:absolute;left:5.00px;top:184.50px" class="cls_003"><span class="cls_003">control the transitions to other states. Finite state machines were discussed in </span><span class="cls_009">Chapter 3</span><span class="cls_003">, </span><span class="cls_012">Escape the</span></div>
<div style="position:absolute;left:5.00px;top:202.50px" class="cls_012"><span class="cls_012">Maze</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:235.50px" class="cls_003"><span class="cls_003">Here is a diagram of the player's states and the transitions between them:</span></div>
<div style="position:absolute;left:5.00px;top:545.25px" class="cls_003"><span class="cls_003">As you can see, state machine diagrams can become quite complex, even with a relatively small</span></div>
<div style="position:absolute;left:5.00px;top:563.25px" class="cls_003"><span class="cls_003">number of states.</span></div>
<div style="position:absolute;left:52.98px;top:596.25px" class="cls_008"><span class="cls_008">Note that while the spritesheet contains animations for them, the CROUCH and CLIMB animations are not</span></div>
<div style="position:absolute;left:52.98px;top:609.75px" class="cls_008"><span class="cls_008">included here. This is to keep the number of states manageable at the beginning of the project. Later, you'll have</span></div>
<div style="position:absolute;left:52.98px;top:623.25px" class="cls_008"><span class="cls_008">the opportunity to add them to the player's state machine.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:178044px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background226.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Player script</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Attach a new script to the </span><span class="cls_010">Player</span><span class="cls_003"> node. Add the following code to create the player's state machine:</span></div>
<div style="position:absolute;left:19.99px;top:114.00px" class="cls_010"><span class="cls_010">extends KinematicBody2D</span></div>
<div style="position:absolute;left:19.99px;top:125.25px" class="cls_010"><span class="cls_010">enum {IDLE, RUN, JUMP, HURT, DEAD}</span></div>
<div style="position:absolute;left:19.99px;top:136.50px" class="cls_010"><span class="cls_010">var state</span></div>
<div style="position:absolute;left:19.99px;top:147.75px" class="cls_010"><span class="cls_010">var anim</span></div>
<div style="position:absolute;left:19.99px;top:159.00px" class="cls_010"><span class="cls_010">var new_anim</span></div>
<div style="position:absolute;left:19.99px;top:181.50px" class="cls_010"><span class="cls_010">func ready():</span></div>
<div style="position:absolute;left:40.99px;top:192.75px" class="cls_010"><span class="cls_010">change_state(IDLE)</span></div>
<div style="position:absolute;left:19.99px;top:215.25px" class="cls_010"><span class="cls_010">func change_state(new_state):</span></div>
<div style="position:absolute;left:40.99px;top:226.50px" class="cls_010"><span class="cls_010">state = new_state</span></div>
<div style="position:absolute;left:40.99px;top:237.75px" class="cls_010"><span class="cls_010">match state:</span></div>
<div style="position:absolute;left:61.98px;top:249.00px" class="cls_010"><span class="cls_010">IDLE:</span></div>
<div style="position:absolute;left:82.97px;top:260.25px" class="cls_010"><span class="cls_010">new_anim = 'idle'</span></div>
<div style="position:absolute;left:61.98px;top:271.50px" class="cls_010"><span class="cls_010">RUN:</span></div>
<div style="position:absolute;left:82.97px;top:282.75px" class="cls_010"><span class="cls_010">new_anim = 'run'</span></div>
<div style="position:absolute;left:61.98px;top:294.00px" class="cls_010"><span class="cls_010">HURT:</span></div>
<div style="position:absolute;left:82.97px;top:305.25px" class="cls_010"><span class="cls_010">new_anim = 'hurt'</span></div>
<div style="position:absolute;left:61.98px;top:316.50px" class="cls_010"><span class="cls_010">JUMP:</span></div>
<div style="position:absolute;left:82.97px;top:327.75px" class="cls_010"><span class="cls_010">new_anim = 'jump_up'</span></div>
<div style="position:absolute;left:61.98px;top:339.00px" class="cls_010"><span class="cls_010">DEAD:</span></div>
<div style="position:absolute;left:82.97px;top:350.25px" class="cls_010"><span class="cls_010">hide()</span></div>
<div style="position:absolute;left:19.99px;top:372.75px" class="cls_010"><span class="cls_010">func _physics_process(delta):</span></div>
<div style="position:absolute;left:40.99px;top:384.00px" class="cls_010"><span class="cls_010">if new_anim != anim:</span></div>
<div style="position:absolute;left:61.98px;top:395.25px" class="cls_010"><span class="cls_010">anim = new_anim</span></div>
<div style="position:absolute;left:61.98px;top:406.50px" class="cls_010"><span class="cls_010">$AnimationPlayer.play(anim)</span></div>
<div style="position:absolute;left:5.00px;top:431.25px" class="cls_003"><span class="cls_003">Once again, you're using </span><span class="cls_010">enum</span><span class="cls_003"> to list the allowed states for the system. When you want to change the</span></div>
<div style="position:absolute;left:5.00px;top:449.25px" class="cls_003"><span class="cls_003">player's state, you'll call </span><span class="cls_010">change_state()</span><span class="cls_003">, for example: </span><span class="cls_010">change_state(IDLE)</span><span class="cls_003">. For now, the script only changes</span></div>
<div style="position:absolute;left:5.00px;top:467.25px" class="cls_003"><span class="cls_003">the animation value, but you'll add more state functionality later.</span></div>
<div style="position:absolute;left:5.00px;top:500.25px" class="cls_003"><span class="cls_003">You may be asking, </span><span class="cls_012">why not just play the animation when the state changes? Why this new_anim</span></div>
<div style="position:absolute;left:5.00px;top:518.25px" class="cls_012"><span class="cls_012">business?</span><span class="cls_003"> This is because when you call </span><span class="cls_010">play()</span><span class="cls_003"> on </span><span class="cls_010">AnimationPlayer</span><span class="cls_003">, it starts the animation from the</span></div>
<div style="position:absolute;left:5.00px;top:536.25px" class="cls_003"><span class="cls_003">beginning. If you did that while running, for example, you'd only see the first frame of the run</span></div>
<div style="position:absolute;left:5.00px;top:554.25px" class="cls_003"><span class="cls_003">animation as it restarted every frame. By using the </span><span class="cls_010">new_anim</span><span class="cls_003"> variable, you can let the current animation</span></div>
<div style="position:absolute;left:5.00px;top:572.25px" class="cls_003"><span class="cls_003">continue to play smoothly until you want it to change.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:178846px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background227.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Player movement</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">The player needs three controls—left, right, and jump. The combination of the current state plus</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">which keys are pressed will trigger a state change if the transition is allowed by the state rules. Add</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">the </span><span class="cls_010">get_input()</span><span class="cls_003"> function to process the inputs and determine the result:</span></div>
<div style="position:absolute;left:19.99px;top:150.00px" class="cls_010"><span class="cls_010">extends KinematicBody2D</span></div>
<div style="position:absolute;left:19.99px;top:172.50px" class="cls_010"><span class="cls_010">export (int) var run_speed</span></div>
<div style="position:absolute;left:19.99px;top:183.75px" class="cls_010"><span class="cls_010">export (int) var jump_speed</span></div>
<div style="position:absolute;left:19.99px;top:195.00px" class="cls_010"><span class="cls_010">export (int) var gravity</span></div>
<div style="position:absolute;left:19.99px;top:217.50px" class="cls_010"><span class="cls_010">enum {IDLE, RUN, JUMP, HURT, DEAD}</span></div>
<div style="position:absolute;left:19.99px;top:228.75px" class="cls_010"><span class="cls_010">var state</span></div>
<div style="position:absolute;left:19.99px;top:240.00px" class="cls_010"><span class="cls_010">var anim</span></div>
<div style="position:absolute;left:19.99px;top:251.25px" class="cls_010"><span class="cls_010">var new_anim</span></div>
<div style="position:absolute;left:19.99px;top:262.50px" class="cls_010"><span class="cls_010">var velocity = Vector2()</span></div>
<div style="position:absolute;left:19.99px;top:285.00px" class="cls_010"><span class="cls_010">func get_input():</span></div>
<div style="position:absolute;left:40.99px;top:296.25px" class="cls_010"><span class="cls_010">if state == HURT:</span></div>
<div style="position:absolute;left:61.98px;top:307.50px" class="cls_010"><span class="cls_010">return # don't allow movement during hurt state</span></div>
<div style="position:absolute;left:40.99px;top:318.75px" class="cls_010"><span class="cls_010">var right = Input.is_action_pressed('right')</span></div>
<div style="position:absolute;left:40.99px;top:330.00px" class="cls_010"><span class="cls_010">var left = Input.is_action_pressed('left')</span></div>
<div style="position:absolute;left:40.99px;top:341.25px" class="cls_010"><span class="cls_010">var jump = Input.is_action_just_pressed('jump')</span></div>
<div style="position:absolute;left:40.99px;top:363.75px" class="cls_010"><span class="cls_010"># movement occurs in all states</span></div>
<div style="position:absolute;left:40.99px;top:375.00px" class="cls_010"><span class="cls_010">velocity.x = 0</span></div>
<div style="position:absolute;left:40.99px;top:386.25px" class="cls_010"><span class="cls_010">if right:</span></div>
<div style="position:absolute;left:61.98px;top:397.50px" class="cls_010"><span class="cls_010">velocity.x += run_speed</span></div>
<div style="position:absolute;left:61.98px;top:408.75px" class="cls_010"><span class="cls_010">$Sprite.flip_h = false</span></div>
<div style="position:absolute;left:40.99px;top:420.00px" class="cls_010"><span class="cls_010">if left:</span></div>
<div style="position:absolute;left:61.98px;top:431.25px" class="cls_010"><span class="cls_010">velocity.x -= run_speed</span></div>
<div style="position:absolute;left:61.98px;top:442.50px" class="cls_010"><span class="cls_010">$Sprite.flip_h = true</span></div>
<div style="position:absolute;left:40.99px;top:453.75px" class="cls_010"><span class="cls_010"># only allow jumping when on the ground</span></div>
<div style="position:absolute;left:40.99px;top:465.00px" class="cls_010"><span class="cls_010">if jump and is_on_floor():</span></div>
<div style="position:absolute;left:61.98px;top:476.25px" class="cls_010"><span class="cls_010">change_state(JUMP)</span></div>
<div style="position:absolute;left:61.98px;top:487.50px" class="cls_010"><span class="cls_010">velocity.y = jump_speed</span></div>
<div style="position:absolute;left:40.99px;top:498.75px" class="cls_010"><span class="cls_010"># IDLE transitions to RUN when moving</span></div>
<div style="position:absolute;left:40.99px;top:510.00px" class="cls_010"><span class="cls_010">if state == IDLE and velocity.x != 0:</span></div>
<div style="position:absolute;left:61.98px;top:521.25px" class="cls_010"><span class="cls_010">change_state(RUN)</span></div>
<div style="position:absolute;left:40.99px;top:532.50px" class="cls_010"><span class="cls_010"># RUN transitions to IDLE when standing still</span></div>
<div style="position:absolute;left:40.99px;top:543.75px" class="cls_010"><span class="cls_010">if state == RUN and velocity.x == 0:</span></div>
<div style="position:absolute;left:61.98px;top:555.00px" class="cls_010"><span class="cls_010">change_state(IDLE)</span></div>
<div style="position:absolute;left:40.99px;top:566.25px" class="cls_010"><span class="cls_010"># transition to JUMP when falling off an edge</span></div>
<div style="position:absolute;left:40.99px;top:577.50px" class="cls_010"><span class="cls_010">if state in [IDLE, RUN] and !is_on_floor():</span></div>
<div style="position:absolute;left:61.98px;top:588.75px" class="cls_010"><span class="cls_010">change_state(JUMP)</span></div>
<div style="position:absolute;left:5.00px;top:613.50px" class="cls_003"><span class="cls_003">Note that the jump check is using </span><span class="cls_010">is_action_just_pressed()</span><span class="cls_003"> rather than </span><span class="cls_010">is_action_pressed()</span><span class="cls_003">. While the latter</span></div>
<div style="position:absolute;left:5.00px;top:631.50px" class="cls_003"><span class="cls_003">always returns </span><span class="cls_010">true</span><span class="cls_003"> as long as the key is held down, the former is only </span><span class="cls_010">true</span><span class="cls_003"> in the frame after the key</span></div>
<div style="position:absolute;left:5.00px;top:649.50px" class="cls_003"><span class="cls_003">was pressed. This means that the player must press the jump key each time they want to jump.</span></div>
<div style="position:absolute;left:5.00px;top:682.50px" class="cls_003"><span class="cls_003">Now, call this function from </span><span class="cls_010">_physics_process()</span><span class="cls_003">, add the pull of gravity to the player's </span><span class="cls_010">velocity</span><span class="cls_003">, and call</span></div>
<div style="position:absolute;left:5.00px;top:700.50px" class="cls_003"><span class="cls_003">the </span><span class="cls_010">move_and_slide()</span><span class="cls_003"> method to move the body:</span></div>
<div style="position:absolute;left:19.99px;top:735.00px" class="cls_010"><span class="cls_010">func _physics_process(delta):</span></div>
<div style="position:absolute;left:40.99px;top:746.25px" class="cls_010"><span class="cls_010">velocity.y += gravity * delta</span></div>
<div style="position:absolute;left:40.99px;top:757.50px" class="cls_010"><span class="cls_010">get_input()</span></div>
<div style="position:absolute;left:40.99px;top:768.75px" class="cls_010"><span class="cls_010">if new_anim != anim:</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:179648px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background228.jpg" width=612 height=792></div>
<div style="position:absolute;left:61.98px;top:4.81px" class="cls_010"><span class="cls_010">anim = new_anim</span></div>
<div style="position:absolute;left:61.98px;top:16.06px" class="cls_010"><span class="cls_010">$AnimationPlayer.play(anim)</span></div>
<div style="position:absolute;left:40.99px;top:27.31px" class="cls_010"><span class="cls_010"># move the player</span></div>
<div style="position:absolute;left:40.99px;top:38.25px" class="cls_010"><span class="cls_010">velocity = move_and_slide(velocity, Vector2(0, -1))</span></div>
<div style="position:absolute;left:5.00px;top:63.00px" class="cls_003"><span class="cls_003">The second parameter of </span><span class="cls_010">move_and_slide()</span><span class="cls_003"> is a </span><span class="cls_012">normal</span><span class="cls_003"> vector, indicating what surface direction the</span></div>
<div style="position:absolute;left:5.00px;top:81.00px" class="cls_003"><span class="cls_003">engine should consider to be the ground. In physics and geometry, a </span><span class="cls_012">normal</span><span class="cls_003"> is a vector perpendicular</span></div>
<div style="position:absolute;left:5.00px;top:99.00px" class="cls_003"><span class="cls_003">to a surface, defining the direction a surface is facing. Using </span><span class="cls_010">(0, -1)</span><span class="cls_003">, which is a vector pointing</span></div>
<div style="position:absolute;left:5.00px;top:117.00px" class="cls_003"><span class="cls_003">upwards, the top of a horizontal surface will be considered as ground. Refer to the following</span></div>
<div style="position:absolute;left:5.00px;top:135.00px" class="cls_003"><span class="cls_003">screenshot:</span></div>
<div style="position:absolute;left:5.00px;top:270.75px" class="cls_003"><span class="cls_003">After moving with </span><span class="cls_010">move_and_slide()</span><span class="cls_003">, the physics engine will use this information to set the value of the</span></div>
<div style="position:absolute;left:5.00px;top:288.75px" class="cls_010"><span class="cls_010">is_on_floor()</span><span class="cls_003">, </span><span class="cls_010">is_on_wall()</span><span class="cls_003"> and </span><span class="cls_010">is_on_ceiling</span><span class="cls_003"> methods. You can use this fact to detect when the jump ends</span></div>
<div style="position:absolute;left:5.00px;top:306.75px" class="cls_003"><span class="cls_003">by adding this after the move:</span></div>
<div style="position:absolute;left:40.99px;top:341.25px" class="cls_010"><span class="cls_010">if state == JUMP and is_on_floor():</span></div>
<div style="position:absolute;left:61.98px;top:352.50px" class="cls_010"><span class="cls_010">change_state(IDLE)</span></div>
<div style="position:absolute;left:5.00px;top:377.25px" class="cls_003"><span class="cls_003">Finally, the jump will look better if the animation switches from </span><span class="cls_010">jump_up</span><span class="cls_003"> to </span><span class="cls_010">jump_down</span><span class="cls_003"> when falling:</span></div>
<div style="position:absolute;left:40.99px;top:411.75px" class="cls_010"><span class="cls_010">if state == JUMP and velocity.y > 0:</span></div>
<div style="position:absolute;left:271.89px;top:411.75px" class="cls_010"><span class="cls_010">new_anim = 'jump_down'Testing the moves</span></div>
<div style="position:absolute;left:5.00px;top:436.50px" class="cls_003"><span class="cls_003">At this point, it would be a good idea to test out the movement and make sure everything is working.</span></div>
<div style="position:absolute;left:5.00px;top:454.50px" class="cls_003"><span class="cls_003">You can't just run the player scene though, because the player will just start falling without a surface</span></div>
<div style="position:absolute;left:5.00px;top:472.50px" class="cls_003"><span class="cls_003">to stand on.</span></div>
<div style="position:absolute;left:5.00px;top:505.50px" class="cls_003"><span class="cls_003">Create a new scene and add a </span><span class="cls_010">Node</span><span class="cls_003"> called </span><span class="cls_010">Main</span><span class="cls_003"> (later, this will become your real main scene). Add an</span></div>
<div style="position:absolute;left:5.00px;top:523.50px" class="cls_003"><span class="cls_003">instance of the </span><span class="cls_010">Player</span><span class="cls_003">, then add a </span><span class="cls_010">StaticBody2D</span><span class="cls_003"> with a rectangular </span><span class="cls_010">CollisionShape2D</span><span class="cls_003">. Stretch the collision</span></div>
<div style="position:absolute;left:5.00px;top:541.50px" class="cls_003"><span class="cls_003">shape horizontally so that it's wide enough to walk back and forth on (like a platform) and place it</span></div>
<div style="position:absolute;left:5.00px;top:559.50px" class="cls_003"><span class="cls_003">below the character:</span></div>
<div style="position:absolute;left:5.00px;top:737.25px" class="cls_003"><span class="cls_003">Press Play Scene and you should see the player stop falling and run the </span><span class="cls_010">idle</span><span class="cls_003"> animation when it hits the</span></div>
<div style="position:absolute;left:5.00px;top:755.25px" class="cls_003"><span class="cls_003">static body.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:180450px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background229.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:3.00px" class="cls_003"><span class="cls_003">Before moving on, make sure that all the movement and animations are working correctly. Run and</span></div>
<div style="position:absolute;left:5.00px;top:21.00px" class="cls_003"><span class="cls_003">jump in all directions and check that the correct animations are playing whenever the state changes. If</span></div>
<div style="position:absolute;left:5.00px;top:39.00px" class="cls_003"><span class="cls_003">you find any problems, review the previous sections and make sure you didn't miss a step.</span></div>
<div style="position:absolute;left:5.00px;top:72.00px" class="cls_003"><span class="cls_003">Later, once the level is complete, the player will be passed a spawn location. To handle this, add this</span></div>
<div style="position:absolute;left:5.00px;top:90.00px" class="cls_003"><span class="cls_003">function to the </span><span class="cls_010">Player.gd</span><span class="cls_003"> script:</span></div>
<div style="position:absolute;left:19.99px;top:124.50px" class="cls_010"><span class="cls_010">func start(pos):</span></div>
<div style="position:absolute;left:40.99px;top:135.75px" class="cls_010"><span class="cls_010">position = pos</span></div>
<div style="position:absolute;left:40.99px;top:147.00px" class="cls_010"><span class="cls_010">show()</span></div>
<div style="position:absolute;left:40.99px;top:158.25px" class="cls_010"><span class="cls_010">change_state(IDLE)</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:181252px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background230.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Player health</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Eventually, the player is going to encounter danger, so you should add a damage system. The player</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">will start with three </span><span class="cls_012">hearts</span><span class="cls_003"> and lose one each time they are damaged.</span></div>
<div style="position:absolute;left:5.00px;top:130.50px" class="cls_003"><span class="cls_003">Add the following to the top of the script:</span></div>
<div style="position:absolute;left:19.99px;top:165.00px" class="cls_010"><span class="cls_010">signal life_changed</span></div>
<div style="position:absolute;left:19.99px;top:176.25px" class="cls_010"><span class="cls_010">signal dead</span></div>
<div style="position:absolute;left:19.99px;top:198.75px" class="cls_010"><span class="cls_010">var life</span></div>
<div style="position:absolute;left:5.00px;top:223.50px" class="cls_003"><span class="cls_003">The </span><span class="cls_010">life_changed</span><span class="cls_003"> signal will be emitted whenever the value of </span><span class="cls_010">life</span><span class="cls_003"> changes, notifying the display to</span></div>
<div style="position:absolute;left:5.00px;top:241.50px" class="cls_003"><span class="cls_003">update. </span><span class="cls_010">dead</span><span class="cls_003"> will be emitted when </span><span class="cls_010">life</span><span class="cls_003"> reaches </span><span class="cls_010">0</span><span class="cls_003">. Add these two lines to the </span><span class="cls_010">start()</span><span class="cls_003"> function:</span></div>
<div style="position:absolute;left:40.99px;top:276.00px" class="cls_010"><span class="cls_010">life = 3</span></div>
<div style="position:absolute;left:40.99px;top:287.25px" class="cls_010"><span class="cls_010">emit_signal('life_changed', life)</span></div>
<div style="position:absolute;left:5.00px;top:312.00px" class="cls_003"><span class="cls_003">There are two possible ways for the player to be hurt: running into a </span><span class="cls_012">spike</span><span class="cls_003"> object in the environment,</span></div>
<div style="position:absolute;left:5.00px;top:330.00px" class="cls_003"><span class="cls_003">or being hit by an enemy. In either event, the following function can be called:</span></div>
<div style="position:absolute;left:19.99px;top:364.50px" class="cls_010"><span class="cls_010">func hurt():</span></div>
<div style="position:absolute;left:40.99px;top:375.75px" class="cls_010"><span class="cls_010">if state != HURT:</span></div>
<div style="position:absolute;left:61.98px;top:387.00px" class="cls_010"><span class="cls_010">change_state(HURT)</span></div>
<div style="position:absolute;left:5.00px;top:411.75px" class="cls_003"><span class="cls_003">This is being nice to the player: if they're already hurt, they can't get hurt again (at least for the brief</span></div>
<div style="position:absolute;left:5.00px;top:429.75px" class="cls_003"><span class="cls_003">time until the </span><span class="cls_012">hurt</span><span class="cls_003"> animation has stopped playing).</span></div>
<div style="position:absolute;left:5.00px;top:462.75px" class="cls_003"><span class="cls_003">There are several things to do when the state changes to </span><span class="cls_010">HURT</span><span class="cls_003"> in </span><span class="cls_010">change_state()</span><span class="cls_003">:</span></div>
<div style="position:absolute;left:19.99px;top:497.25px" class="cls_010"><span class="cls_010">HURT:</span></div>
<div style="position:absolute;left:40.99px;top:508.50px" class="cls_010"><span class="cls_010">new_anim = 'hurt'</span></div>
<div style="position:absolute;left:40.99px;top:519.75px" class="cls_010"><span class="cls_010">velocity.y = -200</span></div>
<div style="position:absolute;left:40.99px;top:531.00px" class="cls_010"><span class="cls_010">velocity.x = -100 * sign(velocity.x)</span></div>
<div style="position:absolute;left:40.99px;top:542.25px" class="cls_010"><span class="cls_010">life -= 1</span></div>
<div style="position:absolute;left:40.99px;top:553.50px" class="cls_010"><span class="cls_010">emit_signal('life_changed', life)</span></div>
<div style="position:absolute;left:40.99px;top:564.75px" class="cls_010"><span class="cls_010">yield(get_tree().create_timer(0.5), 'timeout')</span></div>
<div style="position:absolute;left:40.99px;top:576.00px" class="cls_010"><span class="cls_010">change_state(IDLE)</span></div>
<div style="position:absolute;left:40.99px;top:587.25px" class="cls_010"><span class="cls_010">if life &lt;= 0:</span></div>
<div style="position:absolute;left:61.98px;top:598.50px" class="cls_010"><span class="cls_010">change_state(DEAD)</span></div>
<div style="position:absolute;left:19.99px;top:609.75px" class="cls_010"><span class="cls_010">DEAD:</span></div>
<div style="position:absolute;left:40.99px;top:621.00px" class="cls_010"><span class="cls_010">emit_signal('dead')</span></div>
<div style="position:absolute;left:40.99px;top:632.25px" class="cls_010"><span class="cls_010">hide()</span></div>
<div style="position:absolute;left:5.00px;top:657.00px" class="cls_003"><span class="cls_003">Not only does does the player lose a life, but they are also bounced up and away from the damaging</span></div>
<div style="position:absolute;left:5.00px;top:675.00px" class="cls_003"><span class="cls_003">object. After a short time, the state changes back to </span><span class="cls_010">IDLE</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:708.00px" class="cls_003"><span class="cls_003">Also, input will be disabled while the player is in the </span><span class="cls_010">HURT</span><span class="cls_003"> state. Add this to the beginning of</span></div>
<div style="position:absolute;left:5.00px;top:726.00px" class="cls_010"><span class="cls_010">get_input()</span><span class="cls_003">:</span></div>
<div style="position:absolute;left:19.99px;top:760.50px" class="cls_010"><span class="cls_010">if state == HURT:</span></div>
<div style="position:absolute;left:40.99px;top:771.75px" class="cls_010"><span class="cls_010">return</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:182054px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background231.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:3.00px" class="cls_003"><span class="cls_003">Now, the player is ready to take damage once the rest of the game is set up.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:182856px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background232.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Collectible items</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Before you start making the level, you need to create some pickups for the player to collect, since</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">those will be part of the level as well. The </span><span class="cls_010">assets/sprites</span><span class="cls_003"> folder contains sprite sheets for two types of</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">collectibles: cherries and gems.</span></div>
<div style="position:absolute;left:5.00px;top:148.50px" class="cls_003"><span class="cls_003">Rather than make separate scenes for each type of item, you can use a single scene and merely swap</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">out the sprite sheet texture. Both objects will have the same behavior: animating in place and</span></div>
<div style="position:absolute;left:5.00px;top:184.50px" class="cls_003"><span class="cls_003">disappearing (that is, being collected) when contacted by the player. You can also add a </span><span class="cls_010">Tween</span></div>
<div style="position:absolute;left:5.00px;top:202.50px" class="cls_003"><span class="cls_003">animation for the pickup (see </span><span class="cls_009">Chapter 1</span><span class="cls_003">, </span><span class="cls_012">Introduction</span><span class="cls_003">, for an example).</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:183658px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background233.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Collectible scene</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Start the new scene with an </span><span class="cls_010">Area2D</span><span class="cls_003"> and name it </span><span class="cls_010">Collectible</span><span class="cls_003">. An area is a good choice for these objects</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">because you want to detect when the player contacts them (using the </span><span class="cls_010">body_entered</span><span class="cls_003"> signal), but you don't</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">need collision response from them. In the Inspector, set the Collision/Layer to collectibles (layer 4)</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">and the Collision/Mask to player (layer 2). This will ensure that only the </span><span class="cls_010">Player</span><span class="cls_003"> node will be able to</span></div>
<div style="position:absolute;left:5.00px;top:151.50px" class="cls_003"><span class="cls_003">collect an item while the enemies will pass right through.</span></div>
<div style="position:absolute;left:5.00px;top:184.50px" class="cls_003"><span class="cls_003">Add three child nodes: </span><span class="cls_010">Sprite</span><span class="cls_003">, </span><span class="cls_010">CollisionShape2D</span><span class="cls_003">, and </span><span class="cls_010">AnimationPlayer</span><span class="cls_003">, then drag the </span><span class="cls_010">res://assets/cherry.png</span></div>
<div style="position:absolute;left:5.00px;top:202.50px" class="cls_003"><span class="cls_003">Sprite sheet into the Sprite's Texture. Set the Vframes to </span><span class="cls_010">1</span><span class="cls_003"> and Hframes to </span><span class="cls_010">5</span><span class="cls_003">. Add a rectangle shape</span></div>
<div style="position:absolute;left:5.00px;top:220.50px" class="cls_003"><span class="cls_003">to </span><span class="cls_010">CollisionShape2D</span><span class="cls_003"> and size it appropriately.</span></div>
<div style="position:absolute;left:52.98px;top:253.50px" class="cls_008"><span class="cls_008">As a general rule, you should size your objects' collision shapes so that they benefit the player. This means that</span></div>
<div style="position:absolute;left:52.98px;top:267.00px" class="cls_008"><span class="cls_008">enemy hitboxes should generally be a little smaller than the image while the hitboxes of beneficial items should be</span></div>
<div style="position:absolute;left:52.98px;top:280.50px" class="cls_008"><span class="cls_008">slightly oversized. This reduces player frustration and results in a better gameplay experience.</span></div>
<div style="position:absolute;left:5.00px;top:309.00px" class="cls_003"><span class="cls_003">Add a new animation to </span><span class="cls_010">AnimationPlayer</span><span class="cls_003"> (you only need one, so you can just name it </span><span class="cls_010">anim</span><span class="cls_003">). Set the</span></div>
<div style="position:absolute;left:5.00px;top:327.00px" class="cls_003"><span class="cls_003">Length to </span><span class="cls_010">1.6</span><span class="cls_003"> seconds and the Step to </span><span class="cls_010">0.2</span><span class="cls_003"> seconds.</span></div>
<div style="position:absolute;left:5.00px;top:360.00px" class="cls_003"><span class="cls_003">Set the Sprite's Frame property to </span><span class="cls_010">0</span><span class="cls_003"> and click the keyframe button to create the track. When you reach</span></div>
<div style="position:absolute;left:5.00px;top:378.00px" class="cls_003"><span class="cls_003">frame number four, start reversing the order back down to </span><span class="cls_010">1</span><span class="cls_003">. The full sequence of keyframes should</span></div>
<div style="position:absolute;left:5.00px;top:396.00px" class="cls_003"><span class="cls_003">be:</span></div>
<div style="position:absolute;left:19.99px;top:430.50px" class="cls_010"><span class="cls_010">0 → 1 → 2 → 3 → 4 → 3 → 2 → 1</span></div>
<div style="position:absolute;left:5.00px;top:455.25px" class="cls_003"><span class="cls_003">Enable looping and press the Play button. Now, you have a nicely animated cherry! Drag</span></div>
<div style="position:absolute;left:5.00px;top:473.25px" class="cls_010"><span class="cls_010">res://assets/gem.png</span><span class="cls_003"> into the texture and check that it animates as well. Finally, click the Autoplay on</span></div>
<div style="position:absolute;left:5.00px;top:491.25px" class="cls_003"><span class="cls_003">Load button to ensure the animation will play automatically when the scene begins. Refer to the</span></div>
<div style="position:absolute;left:5.00px;top:509.25px" class="cls_003"><span class="cls_003">following screenshot:</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:184460px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background234.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Collectible script</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">The Collectible's script needs to do two things:</span></div>
<div style="position:absolute;left:34.99px;top:111.75px" class="cls_003"><span class="cls_003">Set the start conditions (</span><span class="cls_010">texture</span><span class="cls_003"> and </span><span class="cls_010">position</span><span class="cls_003">)</span></div>
<div style="position:absolute;left:34.99px;top:129.00px" class="cls_003"><span class="cls_003">Detect when the player enters the area</span></div>
<div style="position:absolute;left:5.00px;top:162.00px" class="cls_003"><span class="cls_003">For the first part, add the following code to the new script:</span></div>
<div style="position:absolute;left:19.99px;top:196.50px" class="cls_010"><span class="cls_010">extends Area2D</span></div>
<div style="position:absolute;left:19.99px;top:219.00px" class="cls_010"><span class="cls_010">signal pickup</span></div>
<div style="position:absolute;left:19.99px;top:241.50px" class="cls_010"><span class="cls_010">var textures = {'cherry': 'res://assets/sprites/cherry.png',</span></div>
<div style="position:absolute;left:103.96px;top:252.75px" class="cls_010"><span class="cls_010">'gem': 'res://assets/sprites/gem.png'}</span></div>
<div style="position:absolute;left:19.99px;top:275.25px" class="cls_010"><span class="cls_010">func init(type, pos):</span></div>
<div style="position:absolute;left:40.99px;top:286.50px" class="cls_010"><span class="cls_010">$Sprite.texture = load(textures[type])</span></div>
<div style="position:absolute;left:40.99px;top:297.75px" class="cls_010"><span class="cls_010">position = pos</span></div>
<div style="position:absolute;left:5.00px;top:322.50px" class="cls_003"><span class="cls_003">The </span><span class="cls_010">pickup</span><span class="cls_003"> signal will be emitted when the player collects the item. In the </span><span class="cls_010">textures</span><span class="cls_003"> dictionary, you have</span></div>
<div style="position:absolute;left:5.00px;top:340.50px" class="cls_003"><span class="cls_003">a list of the item types and their corresponding texture locations. Note that you can quickly paste those</span></div>
<div style="position:absolute;left:5.00px;top:358.50px" class="cls_003"><span class="cls_003">file paths by right-clicking on the file in the FileSystem dock and choosing Copy Path:</span></div>
<div style="position:absolute;left:5.00px;top:585.00px" class="cls_003"><span class="cls_003">Next, you have an </span><span class="cls_010">init()</span><span class="cls_003"> function that sets the </span><span class="cls_010">texture</span><span class="cls_003"> and </span><span class="cls_010">position</span><span class="cls_003"> to the given values. The level script</span></div>
<div style="position:absolute;left:5.00px;top:603.00px" class="cls_003"><span class="cls_003">will use this function to spawn all the collectibles that you add to your level map.</span></div>
<div style="position:absolute;left:5.00px;top:636.00px" class="cls_003"><span class="cls_003">Finally, you need the object to detect when it's been picked up. Click on the </span><span class="cls_010">Area2D</span><span class="cls_003"> and connect its</span></div>
<div style="position:absolute;left:5.00px;top:654.00px" class="cls_010"><span class="cls_010">body_entered</span><span class="cls_003"> signal. Add the following code to the created function:</span></div>
<div style="position:absolute;left:19.99px;top:688.50px" class="cls_010"><span class="cls_010">func _on_Collectible_body_entered(body):</span></div>
<div style="position:absolute;left:40.99px;top:699.75px" class="cls_010"><span class="cls_010">emit_signal('pickup')</span></div>
<div style="position:absolute;left:40.99px;top:711.00px" class="cls_010"><span class="cls_010">queue_free()</span></div>
<div style="position:absolute;left:5.00px;top:735.75px" class="cls_003"><span class="cls_003">Emitting the signal will allow the game's script to react appropriately to the item pickup. It can add to</span></div>
<div style="position:absolute;left:5.00px;top:753.75px" class="cls_003"><span class="cls_003">the score, increase the player's speed, or whatever other effect you want the item to apply.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:185262px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background235.jpg" width=612 height=792></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:185262px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background236.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Designing the level</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">It wouldn't be a platformer without jumps. For most readers, this section will take up the largest</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">chunk of time. Once you start designing a level, you'll find it's a lot of fun to lay out all the pieces,</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">creating challenging jumps, secret paths, and dangerous encounters.</span></div>
<div style="position:absolute;left:5.00px;top:148.50px" class="cls_003"><span class="cls_003">First, you'll create a generic </span><span class="cls_010">Level</span><span class="cls_003"> scene containing all the nodes and code that is common to all</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">levels. You can then create any number of level scenes that inherit from this master level.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:186064px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background237.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">TileSet configuration</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">In the </span><span class="cls_010">assets</span><span class="cls_003"> folder you downloaded at the beginning of the project is a </span><span class="cls_010">tilesets</span><span class="cls_003"> folder. It contains three</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">ready-made </span><span class="cls_010">TileSet</span><span class="cls_003"> resources using the 16x16 art for the game:</span></div>
<div style="position:absolute;left:34.99px;top:129.75px" class="cls_010"><span class="cls_010">tiles_world.tres</span><span class="cls_003">: Ground and platform tiles</span></div>
<div style="position:absolute;left:34.99px;top:147.00px" class="cls_010"><span class="cls_010">tiles_items.tres</span><span class="cls_003">: Decorative items, foreground objects, and collectibles</span></div>
<div style="position:absolute;left:34.99px;top:164.25px" class="cls_010"><span class="cls_010">tiles_spikes.tres</span><span class="cls_003">: Danger items</span></div>
<div style="position:absolute;left:5.00px;top:197.25px" class="cls_003"><span class="cls_003">It is recommended that you use these tile sets to create the levels for this project. However, if you</span></div>
<div style="position:absolute;left:5.00px;top:215.25px" class="cls_003"><span class="cls_003">would rather make them yourself, the original art is in </span><span class="cls_010">res://assets/environment/layers</span><span class="cls_003">. See </span><span class="cls_009">Chapter 2</span><span class="cls_003">, </span><span class="cls_012">Coin</span></div>
<div style="position:absolute;left:5.00px;top:233.25px" class="cls_012"><span class="cls_012">Dash</span><span class="cls_003">, to review how to create a </span><span class="cls_010">TileSet</span><span class="cls_003"> resource.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:186866px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background238.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Base-level setup</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Create a new scene and add a </span><span class="cls_010">Node2D</span><span class="cls_003"> named </span><span class="cls_010">Level</span><span class="cls_003">. Save the scene in a new folder called </span><span class="cls_010">levels</span><span class="cls_003">. This is</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">where you'll save any other levels you create, after inheriting from </span><span class="cls_010">Level.tscn</span><span class="cls_003">. The node hierarchy will</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">be the same for all levels—only the layout will be different.</span></div>
<div style="position:absolute;left:5.00px;top:148.50px" class="cls_003"><span class="cls_003">Next, add a </span><span class="cls_010">TileMap</span><span class="cls_003"> and set its Cell/Size to </span><span class="cls_010">(16, 16)</span><span class="cls_003">, then duplicate it three times (press </span><span class="cls_012">Ctrl</span><span class="cls_003"> + </span><span class="cls_012">D</span><span class="cls_003"> to</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">duplicate a node). These will be the layers of your level, holding different tiles and information about</span></div>
<div style="position:absolute;left:5.00px;top:184.50px" class="cls_003"><span class="cls_003">the layout. Name the four </span><span class="cls_010">TileMap</span><span class="cls_003"> instances as follows and drag-and-drop the corresponding </span><span class="cls_010">TileSet</span><span class="cls_003"> into</span></div>
<div style="position:absolute;left:5.00px;top:202.50px" class="cls_003"><span class="cls_003">the Tile Set property of each. Refer to the following table:</span></div>
<div style="position:absolute;left:14.75px;top:240.75px" class="cls_002"><span class="cls_002">TileMap</span></div>
<div style="position:absolute;left:254.65px;top:240.75px" class="cls_002"><span class="cls_002">Tile Set</span></div>
<div style="position:absolute;left:14.75px;top:270.00px" class="cls_010"><span class="cls_010">World</span></div>
<div style="position:absolute;left:254.65px;top:270.00px" class="cls_010"><span class="cls_010">tiles_world.tres</span></div>
<div style="position:absolute;left:14.75px;top:291.00px" class="cls_010"><span class="cls_010">Objects</span></div>
<div style="position:absolute;left:254.65px;top:291.00px" class="cls_010"><span class="cls_010">tiles_items.tres</span></div>
<div style="position:absolute;left:14.75px;top:312.00px" class="cls_010"><span class="cls_010">Pickups</span></div>
<div style="position:absolute;left:254.65px;top:312.00px" class="cls_010"><span class="cls_010">tiles_items.tres</span></div>
<div style="position:absolute;left:14.75px;top:347.25px" class="cls_010"><span class="cls_010">Danger</span></div>
<div style="position:absolute;left:254.65px;top:347.25px" class="cls_010"><span class="cls_010">tiles_spikes.tres</span></div>
<div style="position:absolute;left:52.98px;top:377.25px" class="cls_008"><span class="cls_008">It's a good idea to press the Lock button on your </span><span class="cls_011">TileMap</span><span class="cls_008"> nodes to prevent accidentally moving them while you're</span></div>
<div style="position:absolute;left:52.98px;top:390.75px" class="cls_008"><span class="cls_008">working on your map.</span></div>
<div style="position:absolute;left:5.00px;top:420.00px" class="cls_003"><span class="cls_003">Next, add an instance of the </span><span class="cls_010">Player</span><span class="cls_003"> scene and a </span><span class="cls_010">Position2D</span><span class="cls_003"> named </span><span class="cls_010">PlayerSpawn</span><span class="cls_003">. Click the hide button on the</span></div>
<div style="position:absolute;left:5.00px;top:438.00px" class="cls_010"><span class="cls_010">Player</span><span class="cls_003">—you'll use </span><span class="cls_010">show()</span><span class="cls_003"> in the level script to make the player appear when it starts. Your scene tree</span></div>
<div style="position:absolute;left:5.00px;top:456.00px" class="cls_003"><span class="cls_003">should now look like this:</span></div>
<div style="position:absolute;left:5.00px;top:630.00px" class="cls_003"><span class="cls_003">Attach a script to the </span><span class="cls_010">Level</span><span class="cls_003"> node:</span></div>
<div style="position:absolute;left:19.99px;top:664.50px" class="cls_010"><span class="cls_010">extends Node2D</span></div>
<div style="position:absolute;left:19.99px;top:687.00px" class="cls_010"><span class="cls_010">onready var pickups = $Pickups</span></div>
<div style="position:absolute;left:19.99px;top:709.50px" class="cls_010"><span class="cls_010">func _ready():</span></div>
<div style="position:absolute;left:40.99px;top:720.75px" class="cls_010"><span class="cls_010">pickups.hide()</span></div>
<div style="position:absolute;left:40.99px;top:732.00px" class="cls_010"><span class="cls_010">$Player.start($PlayerSpawn.position)</span></div>
<div style="position:absolute;left:5.00px;top:756.75px" class="cls_003"><span class="cls_003">Later, you'll be scanning the </span><span class="cls_010">Pickups</span><span class="cls_003"> map to spawn collectible items in the designated locations. This</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:187668px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background239.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:2.93px" class="cls_003"><span class="cls_003">map layer itself shouldn't be seen, but rather than set it as hidden in the scene tree, which is easy to</span></div>
<div style="position:absolute;left:5.00px;top:20.93px" class="cls_003"><span class="cls_003">forget before you run the game, you can make sure it's always hidden during gameplay by doing so in</span></div>
<div style="position:absolute;left:5.00px;top:38.93px" class="cls_010"><span class="cls_010">_ready()</span><span class="cls_003">. Because there will be many references to the node, storing the result of </span><span class="cls_010">$Pickups</span><span class="cls_003"> in the </span><span class="cls_010">pickups</span></div>
<div style="position:absolute;left:5.00px;top:56.93px" class="cls_003"><span class="cls_003">variable will cache the result. (Remember, </span><span class="cls_010">$NodeName</span><span class="cls_003"> is the same as writing </span><span class="cls_010">get_node("NodeName")</span><span class="cls_003">.)</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:188470px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background240.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Designing the first level</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Now, you're ready to start drawing the level! Click Scene | New Inherited Scene and choose</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_010"><span class="cls_010">Level.tscn</span><span class="cls_003">. Name the new node </span><span class="cls_010">Level01</span><span class="cls_003"> and save it (still in the </span><span class="cls_010">levels</span><span class="cls_003"> folder).</span></div>
<div style="position:absolute;left:5.00px;top:130.50px" class="cls_003"><span class="cls_003">Start with the </span><span class="cls_010">World</span><span class="cls_003"> map and be creative. Do you like lots of jumps, or twisty tunnels to explore? Long</span></div>
<div style="position:absolute;left:5.00px;top:148.50px" class="cls_003"><span class="cls_003">runs, or careful upward climbs?</span></div>
<div style="position:absolute;left:5.00px;top:181.50px" class="cls_003"><span class="cls_003">Before going too far in your design, experiment with jump distance. You can change the Player's</span></div>
<div style="position:absolute;left:5.00px;top:199.50px" class="cls_010"><span class="cls_010">jump_speed</span><span class="cls_003">, </span><span class="cls_010">run_speed</span><span class="cls_003">, and </span><span class="cls_010">gravity</span><span class="cls_003"> properties to alter how high and how far they can jump. Set up some</span></div>
<div style="position:absolute;left:5.00px;top:217.50px" class="cls_003"><span class="cls_003">different gap sizes and run the scene to try them out. Don't forget to drag the </span><span class="cls_010">PlayerSpawn</span><span class="cls_003"> node to the</span></div>
<div style="position:absolute;left:5.00px;top:235.50px" class="cls_003"><span class="cls_003">place you want the character to start.</span></div>
<div style="position:absolute;left:5.00px;top:268.50px" class="cls_003"><span class="cls_003">For example, can the player make this jump? Take a look at the following screenshot:</span></div>
<div style="position:absolute;left:5.00px;top:421.50px" class="cls_003"><span class="cls_003">How you set the player's movement properties will have a big impact on how your level should be</span></div>
<div style="position:absolute;left:5.00px;top:439.50px" class="cls_003"><span class="cls_003">laid out. Make sure you're happy with your settings before spending too much time on the full design.</span></div>
<div style="position:absolute;left:5.00px;top:472.50px" class="cls_003"><span class="cls_003">Once you have the </span><span class="cls_010">World</span><span class="cls_003"> layer set up, use the </span><span class="cls_010">Objects</span><span class="cls_003"> layer to place decorations and accents like plants,</span></div>
<div style="position:absolute;left:5.00px;top:490.50px" class="cls_003"><span class="cls_003">rocks, and vines.</span></div>
<div style="position:absolute;left:5.00px;top:523.50px" class="cls_003"><span class="cls_003">Use the </span><span class="cls_010">Pickups</span><span class="cls_003"> layer to mark the locations you'll spawn collectible items at. There are two kinds:</span></div>
<div style="position:absolute;left:5.00px;top:541.50px" class="cls_003"><span class="cls_003">gems and cherries. The tiles that spawn them are drawn with a magenta background to make them</span></div>
<div style="position:absolute;left:5.00px;top:559.50px" class="cls_003"><span class="cls_003">stand out. Remember, they'll be replaced at runtime by the actual items and the tiles themselves won't</span></div>
<div style="position:absolute;left:5.00px;top:577.50px" class="cls_003"><span class="cls_003">be seen.</span></div>
<div style="position:absolute;left:5.00px;top:610.50px" class="cls_003"><span class="cls_003">Once you have your level laid out, you can limit the horizontal scrolling of the player camera to match</span></div>
<div style="position:absolute;left:5.00px;top:628.50px" class="cls_003"><span class="cls_003">the size of the map (plus a 5 tile buffer on each end):</span></div>
<div style="position:absolute;left:19.99px;top:663.00px" class="cls_010"><span class="cls_010">signal score_changed</span></div>
<div style="position:absolute;left:19.99px;top:674.25px" class="cls_010"><span class="cls_010">var score</span></div>
<div style="position:absolute;left:19.99px;top:696.75px" class="cls_010"><span class="cls_010">func _ready():</span></div>
<div style="position:absolute;left:40.99px;top:708.00px" class="cls_010"><span class="cls_010">score = 0</span></div>
<div style="position:absolute;left:40.99px;top:719.25px" class="cls_010"><span class="cls_010">emit_signal('score_changed', score)</span></div>
<div style="position:absolute;left:40.99px;top:730.50px" class="cls_010"><span class="cls_010">pickups.hide()</span></div>
<div style="position:absolute;left:40.99px;top:741.75px" class="cls_010"><span class="cls_010">$Player.start($PlayerSpawn.position)</span></div>
<div style="position:absolute;left:40.99px;top:753.00px" class="cls_010"><span class="cls_010">set_camera_limits()</span></div>
<div style="position:absolute;left:19.99px;top:775.50px" class="cls_010"><span class="cls_010">func set_camera_limits():</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:189272px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background241.jpg" width=612 height=792></div>
<div style="position:absolute;left:40.99px;top:4.81px" class="cls_010"><span class="cls_010">var map_size = $World.get_used_rect()</span></div>
<div style="position:absolute;left:40.99px;top:16.06px" class="cls_010"><span class="cls_010">var cell_size = $World.cell_size</span></div>
<div style="position:absolute;left:40.99px;top:27.31px" class="cls_010"><span class="cls_010">$Player/Camera2D.limit_left = (map_size.position.x - 5) * cell_size.x</span></div>
<div style="position:absolute;left:40.99px;top:38.25px" class="cls_010"><span class="cls_010">$Player/Camera2D.limit_right = (map_size.end.x + 5) * cell_size.x</span></div>
<div style="position:absolute;left:5.00px;top:63.00px" class="cls_003"><span class="cls_003">The script also needs to scan the </span><span class="cls_010">Pickups</span><span class="cls_003"> layer and look for the item markers:</span></div>
<div style="position:absolute;left:19.99px;top:97.50px" class="cls_010"><span class="cls_010">func spawn_pickups():</span></div>
<div style="position:absolute;left:40.99px;top:108.75px" class="cls_010"><span class="cls_010">for cell in pickups.get_used_cells():</span></div>
<div style="position:absolute;left:61.98px;top:120.00px" class="cls_010"><span class="cls_010">var id = pickups.get_cellv(cell)</span></div>
<div style="position:absolute;left:61.98px;top:131.25px" class="cls_010"><span class="cls_010">var type = pickups.tile_set.tile_get_name(id)</span></div>
<div style="position:absolute;left:61.98px;top:142.50px" class="cls_010"><span class="cls_010">if type in ['gem', 'cherry']:</span></div>
<div style="position:absolute;left:82.97px;top:153.75px" class="cls_010"><span class="cls_010">var c = Collectible.instance()</span></div>
<div style="position:absolute;left:82.97px;top:165.00px" class="cls_010"><span class="cls_010">var pos = pickups.map_to_world(cell)</span></div>
<div style="position:absolute;left:82.97px;top:176.25px" class="cls_010"><span class="cls_010">c.init(type, pos + pickups.cell_size/2)</span></div>
<div style="position:absolute;left:82.97px;top:187.50px" class="cls_010"><span class="cls_010">add_child(c)</span></div>
<div style="position:absolute;left:82.97px;top:198.75px" class="cls_010"><span class="cls_010">c.connect('pickup', self, '_on_Collectible_pickup')</span></div>
<div style="position:absolute;left:19.99px;top:221.25px" class="cls_010"><span class="cls_010">func _on_Collectible_pickup():</span></div>
<div style="position:absolute;left:40.99px;top:232.50px" class="cls_010"><span class="cls_010">score += 1</span></div>
<div style="position:absolute;left:40.99px;top:243.75px" class="cls_010"><span class="cls_010">emit_signal('score_changed', score)</span></div>
<div style="position:absolute;left:19.99px;top:266.25px" class="cls_010"><span class="cls_010">func _on_Player_dead():</span></div>
<div style="position:absolute;left:40.99px;top:277.50px" class="cls_010"><span class="cls_010">pass</span></div>
<div style="position:absolute;left:5.00px;top:302.25px" class="cls_003"><span class="cls_003">This function uses </span><span class="cls_010">get_used_cells()</span><span class="cls_003"> to get an array of the tiles that are in use on the </span><span class="cls_010">Pickups</span><span class="cls_003"> map. The</span></div>
<div style="position:absolute;left:5.00px;top:320.25px" class="cls_010"><span class="cls_010">TileMap</span><span class="cls_003"> sets each tile's value to an </span><span class="cls_010">id</span><span class="cls_003"> that references the individual tile object in the </span><span class="cls_010">TileSet</span><span class="cls_003">. You can</span></div>
<div style="position:absolute;left:5.00px;top:338.25px" class="cls_003"><span class="cls_003">then query the </span><span class="cls_010">TileSet</span><span class="cls_003"> for the tile's name using </span><span class="cls_010">tile_set.tile_get_name()</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:371.25px" class="cls_003"><span class="cls_003">Add </span><span class="cls_010">spawn_pickups()</span><span class="cls_003"> to </span><span class="cls_010">_ready()</span><span class="cls_003"> and add the following at the top of the script:</span></div>
<div style="position:absolute;left:19.99px;top:405.75px" class="cls_010"><span class="cls_010">var Collectible = preload('res://items/Collectible.tscn')</span></div>
<div style="position:absolute;left:5.00px;top:430.50px" class="cls_003"><span class="cls_003">Try running your level and you should see your gems and/or cherries appear where you placed them.</span></div>
<div style="position:absolute;left:5.00px;top:448.50px" class="cls_003"><span class="cls_003">Also check that they disappear when you run into them.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:190074px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background242.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Scrolling background</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">There are two background images in the </span><span class="cls_010">res://assets/environment/layers</span><span class="cls_003"> folder: </span><span class="cls_010">back.png</span><span class="cls_003"> and </span><span class="cls_010">middle.png</span><span class="cls_003">, for</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">the far and near background, respectively. By placing these images behind the tilemap and scrolling</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">them at different speeds relative to the camera, you can create an attractive illusion of depth in the</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">background.</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">To start, add a </span><span class="cls_010">ParallaxBackground</span><span class="cls_003"> node to the </span><span class="cls_010">Level</span><span class="cls_003"> scene. This node works automatically along with the</span></div>
<div style="position:absolute;left:5.00px;top:184.50px" class="cls_003"><span class="cls_003">camera to create a scrolling effect. Drag this node to the top of the scene tree so that it will be drawn</span></div>
<div style="position:absolute;left:5.00px;top:202.50px" class="cls_003"><span class="cls_003">behind the rest of the nodes. Next, add a </span><span class="cls_010">ParallaxLayer</span><span class="cls_003"> node as a child—</span><span class="cls_010">ParallaxBackground</span><span class="cls_003"> can have any</span></div>
<div style="position:absolute;left:5.00px;top:220.50px" class="cls_003"><span class="cls_003">number of </span><span class="cls_010">ParallaxLayer</span><span class="cls_003"> as children, allowing you to make many independently scrolling layers. Add a</span></div>
<div style="position:absolute;left:5.00px;top:238.50px" class="cls_010"><span class="cls_010">Sprite</span><span class="cls_003"> node as a child to the </span><span class="cls_010">ParallaxLayer</span><span class="cls_003"> and drag the </span><span class="cls_010">res://assets/environment/layers/back.png</span><span class="cls_003"> image into</span></div>
<div style="position:absolute;left:5.00px;top:256.50px" class="cls_003"><span class="cls_003">the Texture. Important—uncheck the box next to the Centered property of the Sprite.</span></div>
<div style="position:absolute;left:5.00px;top:289.50px" class="cls_003"><span class="cls_003">The background image is a little small, so set the Sprite's Scale to </span><span class="cls_010">(1.5, 1.5)</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:322.50px" class="cls_003"><span class="cls_003">On the </span><span class="cls_010">ParallaxLayer</span><span class="cls_003">, set the Motion/Scale to </span><span class="cls_010">(0.2, 1)</span><span class="cls_003">. This setting controls how fast the background</span></div>
<div style="position:absolute;left:5.00px;top:340.50px" class="cls_003"><span class="cls_003">scrolls in relation to the camera. By setting it to a low number, the background will only move a small</span></div>
<div style="position:absolute;left:5.00px;top:358.50px" class="cls_003"><span class="cls_003">amount as the player moves left and right.</span></div>
<div style="position:absolute;left:5.00px;top:391.50px" class="cls_003"><span class="cls_003">Next, you want to be sure the image repeats if your level is very wide, so set Mirroring to </span><span class="cls_010">(576, 0)</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:409.50px" class="cls_003"><span class="cls_003">This is exactly the width of the image (</span><span class="cls_010">384</span><span class="cls_003"> times </span><span class="cls_010">1.5</span><span class="cls_003">), so the image will be repeated when it has moved</span></div>
<div style="position:absolute;left:5.00px;top:427.50px" class="cls_003"><span class="cls_003">by that amount.</span></div>
<div style="position:absolute;left:5.00px;top:460.50px" class="cls_003"><span class="cls_003">Note that this background is best for wide rather than tall levels. If you jump too high, you'll reach the</span></div>
<div style="position:absolute;left:5.00px;top:478.50px" class="cls_003"><span class="cls_003">top of the background image and suddenly see the grey emptiness again. You can fix this by setting the</span></div>
<div style="position:absolute;left:5.00px;top:496.50px" class="cls_003"><span class="cls_003">top limit of the camera. If you haven't moved it, the upper-left corner of the image will be at </span><span class="cls_010">(0, 0)</span><span class="cls_003">, so</span></div>
<div style="position:absolute;left:5.00px;top:514.50px" class="cls_003"><span class="cls_003">you can set the Top limit on the camera to </span><span class="cls_010">0</span><span class="cls_003">. If you've moved the </span><span class="cls_010">ParallaxLayer</span><span class="cls_003">, you can find the correct</span></div>
<div style="position:absolute;left:5.00px;top:532.50px" class="cls_003"><span class="cls_003">value by looking at the </span><span class="cls_010">y</span><span class="cls_003"> value of the node's Position.</span></div>
<div style="position:absolute;left:5.00px;top:565.50px" class="cls_003"><span class="cls_003">Now, add another </span><span class="cls_010">ParallaxLayer</span><span class="cls_003"> (as a sibling of the first) for the middle background layer and give it a</span></div>
<div style="position:absolute;left:5.00px;top:583.50px" class="cls_010"><span class="cls_010">Sprite</span><span class="cls_003"> child. This time, use the </span><span class="cls_010">res://assets/environment/layers/middle.png</span><span class="cls_003"> texture. This texture is much</span></div>
<div style="position:absolute;left:5.00px;top:601.50px" class="cls_003"><span class="cls_003">narrower than the cloud/sky image, so you'll need to do a little extra adjustment to make it repeat</span></div>
<div style="position:absolute;left:5.00px;top:619.50px" class="cls_003"><span class="cls_003">properly. This is because the </span><span class="cls_010">ParallaxBackground</span><span class="cls_003"> needs to have images that are at least as big as the</span></div>
<div style="position:absolute;left:5.00px;top:637.50px" class="cls_003"><span class="cls_003">viewport area.</span></div>
<div style="position:absolute;left:5.00px;top:670.50px" class="cls_003"><span class="cls_003">First, click on the texture in the FileSystem dock and select the Import tab. Change the</span></div>
<div style="position:absolute;left:5.00px;top:688.50px" class="cls_003"><span class="cls_003">Repeat property to Mirrored, and check </span><span class="cls_010">On</span><span class="cls_003"> for Mipmaps. Press Reimport. Now, the texture can be</span></div>
<div style="position:absolute;left:5.00px;top:706.50px" class="cls_003"><span class="cls_003">repeated to fill the screen (and the parallax system will repeat it after that):</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:190876px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background243.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:229.50px" class="cls_003"><span class="cls_003">The image's original size is </span><span class="cls_010">176x368</span><span class="cls_003">, and it needs to be repeated horizontally. In the </span><span class="cls_010">Sprite</span><span class="cls_003"> properties,</span></div>
<div style="position:absolute;left:5.00px;top:247.50px" class="cls_003"><span class="cls_003">click On for Region Enabled. Next, set the Rect property to </span><span class="cls_010">(0, 0, 880, 368)</span><span class="cls_003"> (880 is 176 times 5, so you</span></div>
<div style="position:absolute;left:5.00px;top:265.50px" class="cls_003"><span class="cls_003">should now see five repetitions of the image). Move the </span><span class="cls_010">ParallaxLayer</span><span class="cls_003"> so that the image overlaps the</span></div>
<div style="position:absolute;left:5.00px;top:283.50px" class="cls_003"><span class="cls_003">bottom half of the ocean/cloud image:</span></div>
<div style="position:absolute;left:5.00px;top:316.50px" class="cls_003"><span class="cls_003">Set the </span><span class="cls_010">ParallaxLayer</span><span class="cls_003"> Motion/Scale to </span><span class="cls_010">(0.6, 1)</span><span class="cls_003"> and the Mirroring to </span><span class="cls_010">(880, 0)</span><span class="cls_003">. Using a higher scale factor</span></div>
<div style="position:absolute;left:5.00px;top:334.50px" class="cls_003"><span class="cls_003">means this layer will scroll a little faster than the cloud layer behind it, giving a satisfying effect of</span></div>
<div style="position:absolute;left:5.00px;top:352.50px" class="cls_003"><span class="cls_003">depth, as shown in the following screenshot:</span></div>
<div style="position:absolute;left:5.00px;top:526.50px" class="cls_003"><span class="cls_003">Once you're sure everything is working, try adjusting the Scale value for both layers and see how it</span></div>
<div style="position:absolute;left:5.00px;top:544.50px" class="cls_003"><span class="cls_003">changes. For example, try a value of </span><span class="cls_010">(1.2, 1)</span><span class="cls_003"> on the middle layer for a much different visual effect.</span></div>
<div style="position:absolute;left:5.00px;top:577.50px" class="cls_003"><span class="cls_003">Your main scene's tree should now look like this:</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:191678px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background244.jpg" width=612 height=792></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:192480px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background245.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Dangerous objects</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">The Danger map layer is meant to hold the spike objects that will harm the player if they're touched.</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">Try placing a few of them on your map where you can easily test running into them. Note that because</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">of the way TileMaps work, colliding with </span><span class="cls_012">any</span><span class="cls_003"> tile on this layer will cause damage to the player!</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:193282px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background246.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">About slide collisions</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">When a </span><span class="cls_010">KinematicBody2D</span><span class="cls_003"> is moved with </span><span class="cls_010">move_and_slide()</span><span class="cls_003">, it may collide with more than one object in a</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">given frame. For example, when running into a corner, the character may hit the wall and the floor at</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">the same time. You can use the </span><span class="cls_010">get_slide_count()</span><span class="cls_003"> method to find out how many collisions occurred, and</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">then get information about each collision with </span><span class="cls_010">get_slide_collision()</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">In the case of the </span><span class="cls_010">Player</span><span class="cls_003">, you want to detect when a collision occurs against the Danger </span><span class="cls_010">TileMap</span><span class="cls_003"> object.</span></div>
<div style="position:absolute;left:5.00px;top:184.50px" class="cls_003"><span class="cls_003">You can do this just after using </span><span class="cls_010">move_and_slide()</span><span class="cls_003"> in </span><span class="cls_010">Player.gd</span><span class="cls_003">:</span></div>
<div style="position:absolute;left:40.99px;top:219.00px" class="cls_010"><span class="cls_010">velocity = move_and_slide(velocity, Vector2(0, -1))</span></div>
<div style="position:absolute;left:40.99px;top:230.25px" class="cls_010"><span class="cls_010">if state == HURT:</span></div>
<div style="position:absolute;left:61.98px;top:241.50px" class="cls_010"><span class="cls_010">return</span></div>
<div style="position:absolute;left:40.99px;top:252.75px" class="cls_010"><span class="cls_010">for idx in range(get_slide_count()):</span></div>
<div style="position:absolute;left:61.98px;top:264.00px" class="cls_010"><span class="cls_010">var collision = get_slide_collision(idx)</span></div>
<div style="position:absolute;left:61.98px;top:275.25px" class="cls_010"><span class="cls_010">if collision.collider.name == 'Danger':</span></div>
<div style="position:absolute;left:82.97px;top:286.50px" class="cls_010"><span class="cls_010">hurt()</span></div>
<div style="position:absolute;left:5.00px;top:311.25px" class="cls_003"><span class="cls_003">Before checking for a collision with </span><span class="cls_010">Danger</span><span class="cls_003">, you can check whether the player is already in the </span><span class="cls_010">HURT</span></div>
<div style="position:absolute;left:5.00px;top:329.25px" class="cls_003"><span class="cls_003">state and skip checking if it is. Next, you must use </span><span class="cls_010">get_slide_count()</span><span class="cls_003"> to iterate through any collisions that</span></div>
<div style="position:absolute;left:5.00px;top:347.25px" class="cls_003"><span class="cls_003">may have occurred. For each, you can check whether the </span><span class="cls_010">collider.name</span><span class="cls_003"> is </span><span class="cls_010">Danger</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:380.25px" class="cls_003"><span class="cls_003">Run the scene and try running into one of the spike objects. Just like you wrote in the </span><span class="cls_010">hurt()</span><span class="cls_003"> function</span></div>
<div style="position:absolute;left:5.00px;top:398.25px" class="cls_003"><span class="cls_003">previously, you should see the player change to the </span><span class="cls_010">HURT</span><span class="cls_003"> state for a brief time before returning to </span><span class="cls_010">IDLE</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:416.25px" class="cls_003"><span class="cls_003">After three hits, the player enters the </span><span class="cls_010">DEAD</span><span class="cls_003"> state, which currently sets the visibility to hidden.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:194084px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background247.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Enemies</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Currently, the map is very lonely, so it's time to add some enemies to liven things up.</span></div>
<div style="position:absolute;left:5.00px;top:112.50px" class="cls_003"><span class="cls_003">There are many different behaviors you could create for an enemy. For this project, the enemy will</span></div>
<div style="position:absolute;left:5.00px;top:130.50px" class="cls_003"><span class="cls_003">walk along a platform in a straight line and reverse direction when hitting an obstacle.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:194886px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background248.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Scene setup</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Start with </span><span class="cls_010">KinematicBody2D</span><span class="cls_003"> with three children: </span><span class="cls_010">Sprite</span><span class="cls_003">, </span><span class="cls_010">AnimationPlayer</span><span class="cls_003">, and </span><span class="cls_010">CollisionShape2D</span><span class="cls_003">. Save the scene</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">as </span><span class="cls_010">Enemy.tscn</span><span class="cls_003"> in a new folder called </span><span class="cls_010">enemies</span><span class="cls_003">. If you decide to add more enemy types to the game, you can</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">save them all here.</span></div>
<div style="position:absolute;left:5.00px;top:148.50px" class="cls_003"><span class="cls_003">Set the body's collision layer to </span><span class="cls_010">enemies</span><span class="cls_003"> and its collision masks to </span><span class="cls_010">environment</span><span class="cls_003">, </span><span class="cls_010">player</span><span class="cls_003">, and </span><span class="cls_010">enemies</span><span class="cls_003">. It's</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">also useful to group the enemies, so click on the Node tab and add the body to a group called </span><span class="cls_010">enemies</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:199.50px" class="cls_003"><span class="cls_003">Add the </span><span class="cls_010">res://assets/opossum.png</span><span class="cls_003"> sprite sheet to the Sprite's Texture. Set Vframes to </span><span class="cls_010">1</span><span class="cls_003"> and Hframes to </span><span class="cls_010">6</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:217.50px" class="cls_003"><span class="cls_003">Add a rectangular collision shape that covers most (but not all) of the image, making sure that the</span></div>
<div style="position:absolute;left:5.00px;top:235.50px" class="cls_003"><span class="cls_003">bottom of the collision shape is aligned with the bottom of the image's feet:</span></div>
<div style="position:absolute;left:5.00px;top:403.50px" class="cls_003"><span class="cls_003">Add a new animation to the </span><span class="cls_010">AnimationPlayer</span><span class="cls_003"> called </span><span class="cls_010">walk</span><span class="cls_003">. Set the Length to </span><span class="cls_010">0.6</span><span class="cls_003"> seconds and the Step to </span><span class="cls_010">0.1</span></div>
<div style="position:absolute;left:5.00px;top:421.50px" class="cls_003"><span class="cls_003">seconds. Turn on Looping and Autoplay.</span></div>
<div style="position:absolute;left:5.00px;top:454.50px" class="cls_003"><span class="cls_003">The </span><span class="cls_010">walk</span><span class="cls_003"> animation will have two tracks: one that sets the Texture property and one that changes the</span></div>
<div style="position:absolute;left:5.00px;top:472.50px" class="cls_003"><span class="cls_003">Frame property. Click the Add keyframe button next to Texture once to add the first track, then click</span></div>
<div style="position:absolute;left:5.00px;top:490.50px" class="cls_003"><span class="cls_003">the one next to Frame and repeat until you have frames </span><span class="cls_010">0</span><span class="cls_003"> through </span><span class="cls_010">5</span><span class="cls_003">. Press Play and verify that the walk</span></div>
<div style="position:absolute;left:5.00px;top:508.50px" class="cls_003"><span class="cls_003">animation is playing correctly. The Animation panel should look like this:</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:195688px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background249.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Script</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Add the following script:</span></div>
<div style="position:absolute;left:19.99px;top:114.00px" class="cls_010"><span class="cls_010">extends KinematicBody2D</span></div>
<div style="position:absolute;left:19.99px;top:136.50px" class="cls_010"><span class="cls_010">export (int) var speed</span></div>
<div style="position:absolute;left:19.99px;top:147.75px" class="cls_010"><span class="cls_010">export (int) var gravity</span></div>
<div style="position:absolute;left:19.99px;top:170.25px" class="cls_010"><span class="cls_010">var velocity = Vector2()</span></div>
<div style="position:absolute;left:19.99px;top:181.50px" class="cls_010"><span class="cls_010">var facing = 1</span></div>
<div style="position:absolute;left:19.99px;top:204.00px" class="cls_010"><span class="cls_010">func _physics_process(delta):</span></div>
<div style="position:absolute;left:40.99px;top:215.25px" class="cls_010"><span class="cls_010">$Sprite.flip_h = velocity.x > 0</span></div>
<div style="position:absolute;left:40.99px;top:226.50px" class="cls_010"><span class="cls_010">velocity.y += gravity * delta</span></div>
<div style="position:absolute;left:40.99px;top:237.75px" class="cls_010"><span class="cls_010">velocity.x = facing * speed</span></div>
<div style="position:absolute;left:40.99px;top:260.25px" class="cls_010"><span class="cls_010">velocity = move_and_slide(velocity, Vector2(0, -1))</span></div>
<div style="position:absolute;left:40.99px;top:271.50px" class="cls_010"><span class="cls_010">for idx in range(get_slide_count()):</span></div>
<div style="position:absolute;left:61.98px;top:282.75px" class="cls_010"><span class="cls_010">var collision = get_slide_collision(idx)</span></div>
<div style="position:absolute;left:61.98px;top:294.00px" class="cls_010"><span class="cls_010">if collision.collider.name == 'Player':</span></div>
<div style="position:absolute;left:82.97px;top:305.25px" class="cls_010"><span class="cls_010">collision.collider.hurt()</span></div>
<div style="position:absolute;left:61.98px;top:316.50px" class="cls_010"><span class="cls_010">if collision.normal.x != 0:</span></div>
<div style="position:absolute;left:82.97px;top:327.75px" class="cls_010"><span class="cls_010">facing = sign(collision.normal.x)</span></div>
<div style="position:absolute;left:82.97px;top:339.00px" class="cls_010"><span class="cls_010">velocity.y = -100</span></div>
<div style="position:absolute;left:40.99px;top:361.50px" class="cls_010"><span class="cls_010">if position.y > 1000:</span></div>
<div style="position:absolute;left:61.98px;top:372.75px" class="cls_010"><span class="cls_010">queue_free()</span></div>
<div style="position:absolute;left:5.00px;top:397.50px" class="cls_003"><span class="cls_003">In this script, the </span><span class="cls_010">facing</span><span class="cls_003"> variable tracks the direction of movement (</span><span class="cls_010">1</span><span class="cls_003"> or </span><span class="cls_010">-1</span><span class="cls_003">). As with the player, when</span></div>
<div style="position:absolute;left:5.00px;top:415.50px" class="cls_003"><span class="cls_003">moving, you iterate through the slide collisions. If the colliding object is the </span><span class="cls_010">Player</span><span class="cls_003">, you call its </span><span class="cls_010">hurt()</span></div>
<div style="position:absolute;left:5.00px;top:433.50px" class="cls_003"><span class="cls_003">function.</span></div>
<div style="position:absolute;left:5.00px;top:466.50px" class="cls_003"><span class="cls_003">Next, you can check whether the colliding body's normal vector has an </span><span class="cls_010">x</span><span class="cls_003"> component that isn't </span><span class="cls_010">0</span><span class="cls_003">. This</span></div>
<div style="position:absolute;left:5.00px;top:484.50px" class="cls_003"><span class="cls_003">means it points to the left or right (that is, it is a wall, crate, or other obstacle). The direction of the</span></div>
<div style="position:absolute;left:5.00px;top:502.50px" class="cls_012"><span class="cls_012">normal</span><span class="cls_003"> is used to set the new facing. Finally, giving the body a small upward velocity will make the</span></div>
<div style="position:absolute;left:5.00px;top:520.50px" class="cls_003"><span class="cls_003">reverse transition look more appealing.</span></div>
<div style="position:absolute;left:5.00px;top:553.50px" class="cls_003"><span class="cls_003">Lastly, if, for some reason, the enemy does fall off a platform, you don't want the game to have to</span></div>
<div style="position:absolute;left:5.00px;top:571.50px" class="cls_003"><span class="cls_003">track it falling forever, so delete any enemy whose </span><span class="cls_012">y</span><span class="cls_003"> coordinate becomes too big.</span></div>
<div style="position:absolute;left:5.00px;top:604.50px" class="cls_003"><span class="cls_003">Set Speed to </span><span class="cls_010">50</span><span class="cls_003"> and Gravity to </span><span class="cls_010">900</span><span class="cls_003"> in the Inspector, and then create an </span><span class="cls_010">Enemy</span><span class="cls_003"> in your level scene. Make</span></div>
<div style="position:absolute;left:5.00px;top:622.50px" class="cls_003"><span class="cls_003">sure it has an obstacle on either side, and play the scene. Check that the enemy walks back and forth</span></div>
<div style="position:absolute;left:5.00px;top:640.50px" class="cls_003"><span class="cls_003">between the obstacles. Try putting the player in its path and verify that the player's </span><span class="cls_010">hurt()</span><span class="cls_003"> method is</span></div>
<div style="position:absolute;left:5.00px;top:658.50px" class="cls_003"><span class="cls_003">getting called.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:196490px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background250.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Damaging the enemy</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">It's not fair if the player can't strike back, so in the tradition of Super Mario Bros., jumping on top of</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">the enemy will defeat it.</span></div>
<div style="position:absolute;left:5.00px;top:130.50px" class="cls_003"><span class="cls_003">Start by adding a new animation to the </span><span class="cls_010">AnimationPlayer</span><span class="cls_003"> of the </span><span class="cls_010">Enemy</span><span class="cls_003"> and name it </span><span class="cls_010">death</span><span class="cls_003">. Set the Length to </span><span class="cls_010">0.3</span></div>
<div style="position:absolute;left:5.00px;top:148.50px" class="cls_003"><span class="cls_003">seconds and the Step to </span><span class="cls_010">0.05</span><span class="cls_003">. </span><span class="cls_012">Don't</span><span class="cls_003"> turn on looping for this animation.</span></div>
<div style="position:absolute;left:5.00px;top:181.50px" class="cls_003"><span class="cls_003">This animation will also set the Texture and Frame. This time, drag the </span><span class="cls_010">res://assets/enemy-</span></div>
<div style="position:absolute;left:5.00px;top:199.50px" class="cls_010"><span class="cls_010">death.png</span><span class="cls_003"> image into the Sprite's Texture before adding the keyframe for that property. As before,</span></div>
<div style="position:absolute;left:5.00px;top:217.50px" class="cls_003"><span class="cls_003">keyframe all the </span><span class="cls_010">Frame</span><span class="cls_003"> values from </span><span class="cls_010">0</span><span class="cls_003"> through </span><span class="cls_010">5</span><span class="cls_003">. Press Play to see the death animation run.</span></div>
<div style="position:absolute;left:5.00px;top:250.50px" class="cls_003"><span class="cls_003">Add the following code to the Enemy's script:</span></div>
<div style="position:absolute;left:19.99px;top:285.00px" class="cls_010"><span class="cls_010">func take_damage():</span></div>
<div style="position:absolute;left:40.99px;top:296.25px" class="cls_010"><span class="cls_010">$AnimationPlayer.play('death')</span></div>
<div style="position:absolute;left:40.99px;top:307.50px" class="cls_010"><span class="cls_010">$CollisionShape2D.disabled = true</span></div>
<div style="position:absolute;left:40.99px;top:318.75px" class="cls_010"><span class="cls_010">set_physics_process(false)</span></div>
<div style="position:absolute;left:5.00px;top:343.50px" class="cls_003"><span class="cls_003">When the </span><span class="cls_010">Player</span><span class="cls_003"> hits the </span><span class="cls_010">Enemy</span><span class="cls_003"> under the right conditions, it will call </span><span class="cls_010">take_damage()</span><span class="cls_003">, which plays the </span><span class="cls_010">death</span></div>
<div style="position:absolute;left:5.00px;top:361.50px" class="cls_003"><span class="cls_003">animation. It also disables collision and movement for the duration of the animation.</span></div>
<div style="position:absolute;left:5.00px;top:394.50px" class="cls_003"><span class="cls_003">When the </span><span class="cls_010">death</span><span class="cls_003"> animation finishes, it's OK to remove the enemy, so connect the</span></div>
<div style="position:absolute;left:5.00px;top:412.50px" class="cls_010"><span class="cls_010">animation_finished()</span><span class="cls_003"> signal of </span><span class="cls_010">AnimationPlayer</span><span class="cls_003">. This signal is called every time an animation finishes, so</span></div>
<div style="position:absolute;left:5.00px;top:430.50px" class="cls_003"><span class="cls_003">you need to check that it's the correct one:</span></div>
<div style="position:absolute;left:19.99px;top:465.00px" class="cls_010"><span class="cls_010">func _on_AnimationPlayer_animation_finished(anim_name):</span></div>
<div style="position:absolute;left:30.49px;top:476.25px" class="cls_010"><span class="cls_010">if anim_name == 'death':</span></div>
<div style="position:absolute;left:40.99px;top:487.50px" class="cls_010"><span class="cls_010">queue_free()</span></div>
<div style="position:absolute;left:5.00px;top:512.25px" class="cls_003"><span class="cls_003">To complete the process, go to the </span><span class="cls_010">Player.gd</span><span class="cls_003"> script and add the following to the collision checks in the</span></div>
<div style="position:absolute;left:5.00px;top:530.25px" class="cls_010"><span class="cls_010">_physics_process()</span><span class="cls_003"> method:</span></div>
<div style="position:absolute;left:19.99px;top:564.75px" class="cls_010"><span class="cls_010">for idx in range(get_slide_count()):</span></div>
<div style="position:absolute;left:40.99px;top:576.00px" class="cls_010"><span class="cls_010">var collision = get_slide_collision(idx)</span></div>
<div style="position:absolute;left:40.99px;top:587.25px" class="cls_010"><span class="cls_010">if collision.collider.name == 'Danger':</span></div>
<div style="position:absolute;left:61.98px;top:598.50px" class="cls_010"><span class="cls_010">hurt()</span></div>
<div style="position:absolute;left:40.99px;top:609.75px" class="cls_010"><span class="cls_010">if collision.collider.is_in_group('enemies'):</span></div>
<div style="position:absolute;left:61.98px;top:621.00px" class="cls_010"><span class="cls_010">var player_feet = (position + $CollisionShape2D.shape.extents).y</span></div>
<div style="position:absolute;left:61.98px;top:632.25px" class="cls_010"><span class="cls_010">if player_feet &lt; collision.collider.position.y:</span></div>
<div style="position:absolute;left:82.97px;top:643.50px" class="cls_010"><span class="cls_010">collision.collider.take_damage()</span></div>
<div style="position:absolute;left:82.97px;top:654.75px" class="cls_010"><span class="cls_010">velocity.y = -200</span></div>
<div style="position:absolute;left:61.98px;top:666.00px" class="cls_010"><span class="cls_010">else:</span></div>
<div style="position:absolute;left:82.97px;top:677.25px" class="cls_010"><span class="cls_010">hurt()</span></div>
<div style="position:absolute;left:5.00px;top:702.00px" class="cls_003"><span class="cls_003">This code checks the </span><span class="cls_012">y</span><span class="cls_003"> coordinate of the player's feet (that is, the bottom of its collision shape)</span></div>
<div style="position:absolute;left:5.00px;top:720.00px" class="cls_003"><span class="cls_003">against the enemy's </span><span class="cls_012">y</span><span class="cls_003"> coordinate. If the player is higher, the enemy is hurt; otherwise, the player is.</span></div>
<div style="position:absolute;left:5.00px;top:753.00px" class="cls_003"><span class="cls_003">Run the level and try jumping on the enemy to make sure all is working as expected.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:197292px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background251.jpg" width=612 height=792></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:197292px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background252.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">HUD</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">The purpose of the HUD is to display the information the player needs to know during gameplay.</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">Collecting items will increase the player's score, so that information needs to be displayed. The</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">player also needs to see their remaining life value, which will be displayed as a series of hearts.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:198094px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background253.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Scene setup</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Create a new scene with a </span><span class="cls_010">MarginContainer</span><span class="cls_003"> node. Name it </span><span class="cls_010">HUD</span><span class="cls_003"> and save in the </span><span class="cls_010">ui</span><span class="cls_003"> folder. Set the Layout to</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">Top Wide. In the Custom Constants section of Inspector, set the following values:</span></div>
<div style="position:absolute;left:34.99px;top:129.75px" class="cls_003"><span class="cls_003">Margin Right: </span><span class="cls_010">50</span></div>
<div style="position:absolute;left:34.99px;top:147.00px" class="cls_003"><span class="cls_003">Margin Top: </span><span class="cls_010">20</span></div>
<div style="position:absolute;left:34.99px;top:164.25px" class="cls_003"><span class="cls_003">Margin Left: </span><span class="cls_010">50</span></div>
<div style="position:absolute;left:34.99px;top:181.50px" class="cls_003"><span class="cls_003">Margin Bottom: </span><span class="cls_010">20</span></div>
<div style="position:absolute;left:5.00px;top:214.50px" class="cls_003"><span class="cls_003">Add an </span><span class="cls_010">HBoxContainer</span><span class="cls_003">. This node will contain all the UI elements and keep them aligned. It will have</span></div>
<div style="position:absolute;left:5.00px;top:232.50px" class="cls_003"><span class="cls_003">two children:</span></div>
<div style="position:absolute;left:34.99px;top:264.75px" class="cls_010"><span class="cls_010">Label</span><span class="cls_003">: </span><span class="cls_010">ScoreLabel</span></div>
<div style="position:absolute;left:34.99px;top:282.00px" class="cls_010"><span class="cls_010">HBoxContainer</span><span class="cls_003">: </span><span class="cls_010">LifeCounter</span></div>
<div style="position:absolute;left:5.00px;top:315.00px" class="cls_003"><span class="cls_003">On the </span><span class="cls_010">ScoreLabel</span><span class="cls_003">, set the Text property to </span><span class="cls_010">1</span><span class="cls_003">, and under Size Flags, set Horizontal to Fill and Expand.</span></div>
<div style="position:absolute;left:5.00px;top:333.00px" class="cls_003"><span class="cls_003">Add a custom </span><span class="cls_010">DynamicFont</span><span class="cls_003"> using </span><span class="cls_010">res://assets/Kenney Thick.ttf</span><span class="cls_003"> from the </span><span class="cls_010">assets</span><span class="cls_003"> folder, with a font size of </span><span class="cls_010">48</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:351.00px" class="cls_003"><span class="cls_003">In the Custom Colors section, set the Font Color to </span><span class="cls_010">white</span><span class="cls_003"> and the Font Color Shadow to </span><span class="cls_010">black</span><span class="cls_003">. Finally,</span></div>
<div style="position:absolute;left:5.00px;top:369.00px" class="cls_003"><span class="cls_003">under Custom Constants, set Shadow Offset X, Shadow Offset Y, and Shadow As Outline all to </span><span class="cls_010">5</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:387.00px" class="cls_003"><span class="cls_003">You should see a large white 1 with a black outline.</span></div>
<div style="position:absolute;left:5.00px;top:420.00px" class="cls_003"><span class="cls_003">For the </span><span class="cls_010">LifeCounter</span><span class="cls_003">, add a </span><span class="cls_010">TextureRect</span><span class="cls_003"> and name it </span><span class="cls_010">L1</span><span class="cls_003">. Drag </span><span class="cls_010">res://assets/heart.png</span><span class="cls_003"> into its Texture</span><span class="cls_012"> </span><span class="cls_003">and set</span></div>
<div style="position:absolute;left:5.00px;top:438.00px" class="cls_003"><span class="cls_003">Stretch Mode to </span><span class="cls_010">Keep Aspect Centered</span><span class="cls_003">. Click on the node and press </span><span class="cls_012">Ctrl</span><span class="cls_003"> + </span><span class="cls_012">D</span><span class="cls_003"> four times so that you have a</span></div>
<div style="position:absolute;left:5.00px;top:456.00px" class="cls_003"><span class="cls_003">row of five hearts:</span></div>
<div style="position:absolute;left:5.00px;top:640.50px" class="cls_003"><span class="cls_003">When finished, your HUD should look like this:</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:198896px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background254.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Script</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Here is the script for the </span><span class="cls_010">HUD</span><span class="cls_003">:</span></div>
<div style="position:absolute;left:19.99px;top:114.00px" class="cls_010"><span class="cls_010">extends MarginContainer</span></div>
<div style="position:absolute;left:19.99px;top:136.50px" class="cls_010"><span class="cls_010">onready var life_counter = [$HBoxContainer/LifeCounter/L1,</span></div>
<div style="position:absolute;left:166.93px;top:147.75px" class="cls_010"><span class="cls_010">$HBoxContainer/LifeCounter/L2,</span></div>
<div style="position:absolute;left:166.93px;top:159.00px" class="cls_010"><span class="cls_010">$HBoxContainer/LifeCounter/L3,</span></div>
<div style="position:absolute;left:166.93px;top:170.25px" class="cls_010"><span class="cls_010">$HBoxContainer/LifeCounter/L4,</span></div>
<div style="position:absolute;left:166.93px;top:181.50px" class="cls_010"><span class="cls_010">$HBoxContainer/LifeCounter/L5]</span></div>
<div style="position:absolute;left:19.99px;top:204.00px" class="cls_010"><span class="cls_010">func _on_Player_life_changed(value):</span></div>
<div style="position:absolute;left:40.99px;top:215.25px" class="cls_010"><span class="cls_010">for heart in range(life_counter.size()):</span></div>
<div style="position:absolute;left:61.98px;top:226.50px" class="cls_010"><span class="cls_010">life_counter[heart].visible = value > heart</span></div>
<div style="position:absolute;left:19.99px;top:249.00px" class="cls_010"><span class="cls_010">func _on_score_changed(value):</span></div>
<div style="position:absolute;left:40.99px;top:260.25px" class="cls_010"><span class="cls_010">$HBoxContainer/ScoreLabel.text = str(value)</span></div>
<div style="position:absolute;left:5.00px;top:285.00px" class="cls_003"><span class="cls_003">First, you make an array of references to the five heart indicators. Then, in </span><span class="cls_010">_on_Player_life_changed()</span><span class="cls_003">,</span></div>
<div style="position:absolute;left:5.00px;top:303.00px" class="cls_003"><span class="cls_003">which will be called when the player gets hurt or healed, you calculate how many hearts to display by</span></div>
<div style="position:absolute;left:5.00px;top:321.00px" class="cls_003"><span class="cls_003">setting </span><span class="cls_010">visible</span><span class="cls_003"> to </span><span class="cls_010">false</span><span class="cls_003"> if the number of the heart is less than the life amount.</span></div>
<div style="position:absolute;left:5.00px;top:354.00px" class="cls_010"><span class="cls_010">_on_score_changed()</span><span class="cls_003"> is similar, changing the value of the </span><span class="cls_010">ScoreLabel</span><span class="cls_003"> when called.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:199698px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background255.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Attaching the HUD</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Open </span><span class="cls_010">Level.tscn</span><span class="cls_003"> (the base-level scene, </span><span class="cls_012">not</span><span class="cls_003"> your </span><span class="cls_010">Level01</span><span class="cls_003"> scene) and add a </span><span class="cls_010">CanvasLayer</span><span class="cls_003"> node. Instance the</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_010"><span class="cls_010">HUD</span><span class="cls_003"> scene as a child of this </span><span class="cls_010">CanvasLayer</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:130.50px" class="cls_003"><span class="cls_003">Click on the </span><span class="cls_010">Player</span><span class="cls_003"> node and connect its </span><span class="cls_010">life_changed</span><span class="cls_003"> signal to the HUD's </span><span class="cls_010">_on_Player_life_changed()</span><span class="cls_003"> method:</span></div>
<div style="position:absolute;left:5.00px;top:386.25px" class="cls_003"><span class="cls_003">Next, do the same with the </span><span class="cls_010">score_changed</span><span class="cls_003"> signal of the </span><span class="cls_010">Level</span><span class="cls_003"> node, connecting it to the HUD's</span></div>
<div style="position:absolute;left:5.00px;top:404.25px" class="cls_010"><span class="cls_010">_on_score_changed</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:437.25px" class="cls_002"><span class="cls_002">Alternative method: </span><span class="cls_003">Note that if you don't want to use the scene tree to connect the signals, or if you</span></div>
<div style="position:absolute;left:5.00px;top:455.25px" class="cls_003"><span class="cls_003">find the signal connection window confusing, you can accomplish the same thing in code by adding</span></div>
<div style="position:absolute;left:5.00px;top:473.25px" class="cls_003"><span class="cls_003">these two lines to the </span><span class="cls_010">_ready()</span><span class="cls_003"> function of </span><span class="cls_010">Level.gd</span><span class="cls_003">:</span></div>
<div style="position:absolute;left:19.99px;top:507.75px" class="cls_010"><span class="cls_010">$Player.connect('life_changed', $CanvasLayer/HUD,</span></div>
<div style="position:absolute;left:103.96px;top:519.00px" class="cls_010"><span class="cls_010">'_on_Player_life_changed')</span></div>
<div style="position:absolute;left:19.99px;top:530.25px" class="cls_010"><span class="cls_010">$Player.connect('dead', self, '_on_Player_dead')</span></div>
<div style="position:absolute;left:19.99px;top:541.50px" class="cls_010"><span class="cls_010">connect('score_changed', $CanvasLayer/HUD, '_on_score_changed')</span></div>
<div style="position:absolute;left:5.00px;top:566.25px" class="cls_003"><span class="cls_003">Run your level and verify that you gain points when collecting items and lose hearts when getting hurt.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:200500px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background256.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Title screen</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">The title screen is the first scene the player will see. When the player dies, the game will return to</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">this scene and allow you to restart.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:201302px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background257.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Scene setup</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Start with a </span><span class="cls_010">Control</span><span class="cls_003"> node and set the Layout to Full Rect.</span></div>
<div style="position:absolute;left:5.00px;top:112.50px" class="cls_003"><span class="cls_003">Add a </span><span class="cls_010">TextureRect</span><span class="cls_003">. Set its Texture to </span><span class="cls_010">res://assets/environment/layers/back.png</span><span class="cls_003">, Layout to Full Rect, and</span></div>
<div style="position:absolute;left:5.00px;top:130.50px" class="cls_003"><span class="cls_003">Stretch Mode to Keep Aspect Covered.</span></div>
<div style="position:absolute;left:5.00px;top:163.50px" class="cls_003"><span class="cls_003">Add another </span><span class="cls_010">TextureRect</span><span class="cls_003">, this time with the Texture using </span><span class="cls_010">res://assets/environment/layers/middle.png</span><span class="cls_003"> and the</span></div>
<div style="position:absolute;left:5.00px;top:181.50px" class="cls_003"><span class="cls_003">Stretch Mode set to Tile. Drag the width of the rectangle until it's wider than the screen and arrange it</span></div>
<div style="position:absolute;left:5.00px;top:199.50px" class="cls_003"><span class="cls_003">so it covers the bottom half of the screen.</span></div>
<div style="position:absolute;left:5.00px;top:232.50px" class="cls_003"><span class="cls_003">Next, add two </span><span class="cls_010">Label</span><span class="cls_003"> nodes (</span><span class="cls_010">Title</span><span class="cls_003"> and </span><span class="cls_010">Message</span><span class="cls_003">) and set their Custom Font settings using the same options</span></div>
<div style="position:absolute;left:5.00px;top:250.50px" class="cls_003"><span class="cls_003">you used earlier for the score label. Set their Text properties to Jungle Jump and Press Space to Play,</span></div>
<div style="position:absolute;left:5.00px;top:268.50px" class="cls_003"><span class="cls_003">respectively. When you're finished, the screen should look like this:</span></div>
<div style="position:absolute;left:5.00px;top:430.50px" class="cls_003"><span class="cls_003">To make the title screen a bit more interesting, add an </span><span class="cls_010">AnimationPlayer</span><span class="cls_003"> node and create a new animation.</span></div>
<div style="position:absolute;left:5.00px;top:448.50px" class="cls_003"><span class="cls_003">Name it </span><span class="cls_010">anim</span><span class="cls_003"> and set it to autoplay. In this animation, you can animate the various components of the</span></div>
<div style="position:absolute;left:5.00px;top:466.50px" class="cls_003"><span class="cls_003">screen to make them move, appear, fade in, or any other effect you like.</span></div>
<div style="position:absolute;left:5.00px;top:499.50px" class="cls_003"><span class="cls_003">Drag the Title label to a position above the top of the screen and add a keyframe. Then, drag it back</span></div>
<div style="position:absolute;left:5.00px;top:517.50px" class="cls_003"><span class="cls_003">(or manually type the values in Position) and set another keyframe at around </span><span class="cls_010">0.5</span><span class="cls_003"> seconds. Feel free to</span></div>
<div style="position:absolute;left:5.00px;top:535.50px" class="cls_003"><span class="cls_003">add tracks that are animating the other nodes' properties.</span></div>
<div style="position:absolute;left:5.00px;top:568.50px" class="cls_003"><span class="cls_003">For example, here is an animation that drops the title down, fades in the two textures, and then makes</span></div>
<div style="position:absolute;left:5.00px;top:586.50px" class="cls_003"><span class="cls_003">the message appear (note the names of the properties that are modified by each track):</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:202104px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background258.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Main scene</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Delete the extra nodes you added to your temporary </span><span class="cls_010">Main.tscn</span><span class="cls_003"> (the </span><span class="cls_010">Player</span><span class="cls_003"> instance and the test</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_010"><span class="cls_010">StaticBody2D</span><span class="cls_003">). This scene will now be responsible for loading the current level. Before it can do that,</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">however, you need an Autoload script to track the game state: variables such as </span><span class="cls_010">current_level</span><span class="cls_003"> and other</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">data that needs to be carried from scene to scene.</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">Add a new script called </span><span class="cls_010">GameState.gd</span><span class="cls_003"> in the Script editor and add the following code:</span></div>
<div style="position:absolute;left:19.99px;top:201.00px" class="cls_010"><span class="cls_010">extends Node</span></div>
<div style="position:absolute;left:19.99px;top:223.50px" class="cls_010"><span class="cls_010">var num_levels = 2</span></div>
<div style="position:absolute;left:19.99px;top:234.75px" class="cls_010"><span class="cls_010">var current_level = 1</span></div>
<div style="position:absolute;left:19.99px;top:257.25px" class="cls_010"><span class="cls_010">var game_scene = 'res://Main.tscn'</span></div>
<div style="position:absolute;left:19.99px;top:268.50px" class="cls_010"><span class="cls_010">var title_screen = 'res://ui/TitleScreen.tscn'</span></div>
<div style="position:absolute;left:19.99px;top:291.00px" class="cls_010"><span class="cls_010">func restart():</span></div>
<div style="position:absolute;left:40.99px;top:302.25px" class="cls_010"><span class="cls_010">get_tree().change_scene(title_screen)</span></div>
<div style="position:absolute;left:19.99px;top:324.75px" class="cls_010"><span class="cls_010">func next_level():</span></div>
<div style="position:absolute;left:40.99px;top:336.00px" class="cls_010"><span class="cls_010">current_level += 1</span></div>
<div style="position:absolute;left:40.99px;top:347.25px" class="cls_010"><span class="cls_010">if current_level &lt;= num_levels:</span></div>
<div style="position:absolute;left:61.98px;top:358.50px" class="cls_010"><span class="cls_010">get_tree().reload_current_scene()</span></div>
<div style="position:absolute;left:5.00px;top:383.25px" class="cls_003"><span class="cls_003">Note that you should set </span><span class="cls_010">num_levels</span><span class="cls_003"> to the number of levels you've made in the </span><span class="cls_010">levels</span><span class="cls_003"> folder. Make sure</span></div>
<div style="position:absolute;left:5.00px;top:401.25px" class="cls_003"><span class="cls_003">to name them consistently (</span><span class="cls_010">Level01.tscn</span><span class="cls_003">, </span><span class="cls_010">Level02.tscn</span><span class="cls_003">, and so on) and then you can automatically load the</span></div>
<div style="position:absolute;left:5.00px;top:419.25px" class="cls_003"><span class="cls_003">next one in the sequence.</span></div>
<div style="position:absolute;left:5.00px;top:452.25px" class="cls_003"><span class="cls_003">Add this script in the AutoLoad tab of Project Settings, and add this script to </span><span class="cls_010">Main</span><span class="cls_003">:</span></div>
<div style="position:absolute;left:19.99px;top:486.75px" class="cls_010"><span class="cls_010">extends Node</span></div>
<div style="position:absolute;left:19.99px;top:509.25px" class="cls_010"><span class="cls_010">func _ready():</span></div>
<div style="position:absolute;left:40.99px;top:520.50px" class="cls_010"><span class="cls_010"># make sure your level numbers are 2 digits ("01", etc.)</span></div>
<div style="position:absolute;left:40.99px;top:531.75px" class="cls_010"><span class="cls_010">var level_num = str(GameState.current_level).pad_zeros(2)</span></div>
<div style="position:absolute;left:40.99px;top:543.00px" class="cls_010"><span class="cls_010">var path = 'res://levels/Level%s.tscn' % level_num</span></div>
<div style="position:absolute;left:40.99px;top:554.25px" class="cls_010"><span class="cls_010">var map = load(path).instance()</span></div>
<div style="position:absolute;left:40.99px;top:565.50px" class="cls_010"><span class="cls_010">add_child(map)</span></div>
<div style="position:absolute;left:5.00px;top:590.25px" class="cls_003"><span class="cls_003">Now, whenever the </span><span class="cls_010">Main</span><span class="cls_003"> scene is loaded, it will load the level scene corresponding to</span></div>
<div style="position:absolute;left:5.00px;top:608.25px" class="cls_010"><span class="cls_010">GameState.current_level</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:641.25px" class="cls_003"><span class="cls_003">The title screen needs to transition to the game scene, so attach this script to the </span><span class="cls_010">TitleScreen</span><span class="cls_003"> node:</span></div>
<div style="position:absolute;left:19.99px;top:675.75px" class="cls_010"><span class="cls_010">extends Control</span></div>
<div style="position:absolute;left:19.99px;top:698.25px" class="cls_010"><span class="cls_010">func _input(event):</span></div>
<div style="position:absolute;left:40.99px;top:709.50px" class="cls_010"><span class="cls_010">if event.is_action_pressed('ui_select'):</span></div>
<div style="position:absolute;left:61.98px;top:720.75px" class="cls_010"><span class="cls_010">get_tree().change_scene(GameState.game_scene)</span></div>
<div style="position:absolute;left:5.00px;top:745.50px" class="cls_003"><span class="cls_003">You can also call the restart function when the player dies by adding it to the method in </span><span class="cls_010">Level.gd</span><span class="cls_003">:</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:202906px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background259.jpg" width=612 height=792></div>
<div style="position:absolute;left:19.99px;top:4.50px" class="cls_010"><span class="cls_010">func _on_Player_dead():</span></div>
<div style="position:absolute;left:40.99px;top:15.75px" class="cls_010"><span class="cls_010">GameState.restart()</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:203708px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background260.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Level transitions</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Your levels now need a way to transition from one to the next. In the</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_010"><span class="cls_010">res://assets/environment/layers/props.png</span><span class="cls_003"> sprite sheet, there is an image of a door that you can use for your</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">level's exit. Finding and walking into the door will result in the player moving to the next level.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:204510px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background261.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Door scene</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Make a new scene with an </span><span class="cls_010">Area2D</span><span class="cls_003"> named </span><span class="cls_010">Door</span><span class="cls_003"> and save it in the </span><span class="cls_010">items</span><span class="cls_003"> folder. Add a </span><span class="cls_010">Sprite</span><span class="cls_003"> and use</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">the </span><span class="cls_010">res://assets/environment/layers/props.png</span><span class="cls_003"> sprite sheet along with the </span><span class="cls_012">Region</span><span class="cls_003"> setting to select the door</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">image, then attach a rectangular </span><span class="cls_010">CollisionShape2D</span><span class="cls_003">. This scene doesn't need a script, because you're just</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">going to use the area's </span><span class="cls_010">body_entered</span><span class="cls_003"> signal.</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">Put the door on the </span><span class="cls_010">collectibles</span><span class="cls_003"> layer and set its mask to only scan the </span><span class="cls_010">player</span><span class="cls_003"> layer.</span></div>
<div style="position:absolute;left:5.00px;top:199.50px" class="cls_003"><span class="cls_003">Instance this door scene in your first level and put it somewhere that the player can reach. Click on</span></div>
<div style="position:absolute;left:5.00px;top:217.50px" class="cls_003"><span class="cls_003">the </span><span class="cls_010">Door</span><span class="cls_003"> node and connect the </span><span class="cls_010">body_entered</span><span class="cls_003"> signal to the </span><span class="cls_010">Level.gd</span><span class="cls_003"> script where you can add this code:</span></div>
<div style="position:absolute;left:19.99px;top:252.00px" class="cls_010"><span class="cls_010">func _on_Door_body_entered(body):</span></div>
<div style="position:absolute;left:40.99px;top:263.25px" class="cls_010"><span class="cls_010">GameState.next_level()</span></div>
<div style="position:absolute;left:5.00px;top:288.00px" class="cls_003"><span class="cls_003">Run the game and try running into the door to check that it immediately transfers to the next level.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:205312px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background262.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Finishing touches</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Now that you've completed the structure of the game, you can consider some additions so that you can</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">add more game features, more visual effects, additional enemies, or other ideas you might have. In</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">this section, there are a few suggested features—add them as-is or adjust them to your liking.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:206114px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background263.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Sound effects</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">As with the previous projects, you can add audio effects and music to improve the gameplay</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">experience. In the </span><span class="cls_010">res://assets/audio</span><span class="cls_003"> folder, you'll find a number of files you can use for various game</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">events, such as player jump, enemy hit and pickup. There are also two music files: Intro Theme for</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">the title screen and Grasslands Theme for the level scenes.</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">Adding these to the game will be left to you, but here are a few tips:</span></div>
<div style="position:absolute;left:34.99px;top:198.75px" class="cls_003"><span class="cls_003">Make sure the sound effects have Loop set to Off while the music files have it On in the Import</span></div>
<div style="position:absolute;left:34.99px;top:216.00px" class="cls_003"><span class="cls_003">settings tab.</span></div>
<div style="position:absolute;left:34.99px;top:233.25px" class="cls_003"><span class="cls_003">You may find it helpful to adjust the volume of individual sounds. This can be set with</span></div>
<div style="position:absolute;left:34.99px;top:250.50px" class="cls_003"><span class="cls_003">the Volume Db property. Setting a negative value will reduce the sound's volume.</span></div>
<div style="position:absolute;left:34.99px;top:267.75px" class="cls_003"><span class="cls_003">You can attach music to the master </span><span class="cls_010">Level.tscn</span><span class="cls_003"> and that music will be used for all levels (set the</span></div>
<div style="position:absolute;left:34.99px;top:285.00px" class="cls_010"><span class="cls_010">AudioStreamPlayer</span><span class="cls_003"> to Autoplay).</span></div>
<div style="position:absolute;left:34.99px;top:302.25px" class="cls_003"><span class="cls_003">You an also attach separate music to individual levels if you want to set a certain mood.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:206916px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background264.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Infinite falling</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Depending on how you've designed your levels, it may be possible for the player to fall off the level</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">entirely. Typically, you want to design things so that this isn't possible by using walls that are too high</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">to jump, spikes at the bottom of pits, and so on. However, in case it does happen, add the following</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">code to the player's </span><span class="cls_010">_physics_process()</span><span class="cls_003"> method:</span></div>
<div style="position:absolute;left:19.99px;top:168.00px" class="cls_010"><span class="cls_010">if position.y > 1000:</span></div>
<div style="position:absolute;left:40.99px;top:179.25px" class="cls_010"><span class="cls_010">change_state(DEAD)</span></div>
<div style="position:absolute;left:5.00px;top:204.00px" class="cls_003"><span class="cls_003">Note that if you've designed a level that extends below a </span><span class="cls_010">y</span><span class="cls_003"> of </span><span class="cls_010">1000</span><span class="cls_003">, you'll need to increase the value to</span></div>
<div style="position:absolute;left:5.00px;top:222.00px" class="cls_003"><span class="cls_003">prevent accidental death.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:207718px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background265.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Double jump</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Double-jumps are a popular platforming feature. The player gets a second, usually smaller, upwards</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">boost if they press the jump key a second time while in the air. To implement this feature, you need to</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">add a few things to the player script.</span></div>
<div style="position:absolute;left:5.00px;top:148.50px" class="cls_003"><span class="cls_003">First, you will need two variables to track the state:</span></div>
<div style="position:absolute;left:19.99px;top:183.00px" class="cls_010"><span class="cls_010">var max_jumps = 2</span></div>
<div style="position:absolute;left:19.99px;top:194.25px" class="cls_010"><span class="cls_010">var jump_count = 0</span></div>
<div style="position:absolute;left:5.00px;top:219.00px" class="cls_003"><span class="cls_003">When entering the </span><span class="cls_010">JUMP</span><span class="cls_003"> state, reset the number of jumps:</span></div>
<div style="position:absolute;left:19.99px;top:253.50px" class="cls_010"><span class="cls_010">JUMP:</span></div>
<div style="position:absolute;left:40.99px;top:264.75px" class="cls_010"><span class="cls_010">new_anim = 'jump_up'</span></div>
<div style="position:absolute;left:40.99px;top:276.00px" class="cls_010"><span class="cls_010">jump_count = 1</span></div>
<div style="position:absolute;left:5.00px;top:300.75px" class="cls_003"><span class="cls_003">Finally, in </span><span class="cls_010">get_input()</span><span class="cls_003">, allow the jump if it meets the conditions:</span></div>
<div style="position:absolute;left:19.99px;top:335.25px" class="cls_010"><span class="cls_010">if jump and state == JUMP and jump_count &lt; max_jumps:</span></div>
<div style="position:absolute;left:40.99px;top:346.50px" class="cls_010"><span class="cls_010">new_anim = 'jump_up'</span></div>
<div style="position:absolute;left:40.99px;top:357.75px" class="cls_010"><span class="cls_010">velocity.y = jump_speed / 1.5</span></div>
<div style="position:absolute;left:40.99px;top:369.00px" class="cls_010"><span class="cls_010">jump_count += 1</span></div>
<div style="position:absolute;left:5.00px;top:393.75px" class="cls_003"><span class="cls_003">Note that this makes the second jump 2/3 the upward speed of the normal jump. You can adjust this</span></div>
<div style="position:absolute;left:5.00px;top:411.75px" class="cls_003"><span class="cls_003">according to your preferences.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:208520px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background266.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Dust particles</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Dust particles at the character's feet are a low-effort effect that can add a lot of character to your</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">player's movements. In this section, you'll add a small puff of dust to the player's feet that is emitted</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">whenever they land on the ground. This adds a sense of weight and impact to the player's jumps.</span></div>
<div style="position:absolute;left:5.00px;top:148.50px" class="cls_003"><span class="cls_003">Add a </span><span class="cls_010">Particles2D</span><span class="cls_003"> node and name it </span><span class="cls_010">Dust</span><span class="cls_003">. Note the warning that a process material must be added. First,</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">however, set the properties of the </span><span class="cls_010">Dust</span><span class="cls_003"> node:</span></div>
<div style="position:absolute;left:14.75px;top:204.75px" class="cls_002"><span class="cls_002">Property</span></div>
<div style="position:absolute;left:394.09px;top:204.75px" class="cls_002"><span class="cls_002">Value</span></div>
<div style="position:absolute;left:14.75px;top:231.75px" class="cls_003"><span class="cls_003">Amount</span></div>
<div style="position:absolute;left:394.09px;top:237.00px" class="cls_010"><span class="cls_010">20</span></div>
<div style="position:absolute;left:14.75px;top:258.75px" class="cls_003"><span class="cls_003">Lifetime</span></div>
<div style="position:absolute;left:394.09px;top:264.00px" class="cls_010"><span class="cls_010">0.45</span></div>
<div style="position:absolute;left:14.75px;top:285.75px" class="cls_003"><span class="cls_003">One Shot</span></div>
<div style="position:absolute;left:394.09px;top:291.00px" class="cls_010"><span class="cls_010">On</span></div>
<div style="position:absolute;left:14.75px;top:312.75px" class="cls_003"><span class="cls_003">Speed Scale</span></div>
<div style="position:absolute;left:394.09px;top:318.00px" class="cls_010"><span class="cls_010">2</span></div>
<div style="position:absolute;left:14.75px;top:339.75px" class="cls_003"><span class="cls_003">Explosiveness</span></div>
<div style="position:absolute;left:394.09px;top:345.00px" class="cls_010"><span class="cls_010">0.7</span></div>
<div style="position:absolute;left:14.75px;top:366.75px" class="cls_003"><span class="cls_003">Local Coords</span></div>
<div style="position:absolute;left:394.09px;top:372.00px" class="cls_010"><span class="cls_010">Off</span></div>
<div style="position:absolute;left:14.75px;top:393.75px" class="cls_003"><span class="cls_003">Position</span></div>
<div style="position:absolute;left:394.09px;top:399.00px" class="cls_010"><span class="cls_010">(-2, 15)</span></div>
<div style="position:absolute;left:14.75px;top:432.00px" class="cls_003"><span class="cls_003">Rotation</span></div>
<div style="position:absolute;left:394.09px;top:437.25px" class="cls_010"><span class="cls_010">-90</span></div>
<div style="position:absolute;left:5.00px;top:515.25px" class="cls_003"><span class="cls_003">Now, under Process Material, add a new </span><span class="cls_010">ParticlesMaterial</span><span class="cls_003">. Click on it and you'll see all the particle</span></div>
<div style="position:absolute;left:5.00px;top:533.25px" class="cls_003"><span class="cls_003">settings. Here are the ones you need for the dust effect:</span></div>
<div style="position:absolute;left:14.75px;top:571.50px" class="cls_002"><span class="cls_002">Particle Property</span></div>
<div style="position:absolute;left:411.33px;top:571.50px" class="cls_002"><span class="cls_002">Value</span></div>
<div style="position:absolute;left:14.75px;top:598.50px" class="cls_003"><span class="cls_003">Emission Shape</span></div>
<div style="position:absolute;left:411.33px;top:603.75px" class="cls_010"><span class="cls_010">Box</span></div>
<div style="position:absolute;left:14.75px;top:625.50px" class="cls_003"><span class="cls_003">Box Extents</span></div>
<div style="position:absolute;left:411.33px;top:630.75px" class="cls_010"><span class="cls_010">(1, 6, 1)</span></div>
<div style="position:absolute;left:14.75px;top:652.50px" class="cls_003"><span class="cls_003">Gravity</span></div>
<div style="position:absolute;left:411.33px;top:657.75px" class="cls_010"><span class="cls_010">(0, 0, 0)</span></div>
<div style="position:absolute;left:14.75px;top:679.50px" class="cls_003"><span class="cls_003">Initial Velocity</span></div>
<div style="position:absolute;left:411.33px;top:684.75px" class="cls_010"><span class="cls_010">10</span></div>
<div style="position:absolute;left:14.75px;top:706.50px" class="cls_003"><span class="cls_003">Velocity Random</span></div>
<div style="position:absolute;left:411.33px;top:711.75px" class="cls_010"><span class="cls_010">1</span></div>
<div style="position:absolute;left:14.75px;top:733.50px" class="cls_003"><span class="cls_003">Scale</span></div>
<div style="position:absolute;left:411.33px;top:738.75px" class="cls_010"><span class="cls_010">5</span></div>
<div style="position:absolute;left:14.75px;top:760.50px" class="cls_003"><span class="cls_003">Scale Random</span></div>
<div style="position:absolute;left:415.08px;top:766.50px" class="cls_010"><span class="cls_010">1</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:209322px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background267.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:36.00px" class="cls_003"><span class="cls_003">The default particle color is white, but the dust effect will look better as a tan shade. It should also</span></div>
<div style="position:absolute;left:5.00px;top:54.00px" class="cls_003"><span class="cls_003">fade away so that it appears to dissipate. This can be accomplished with a </span><span class="cls_010">ColorRamp</span><span class="cls_003">. Next to Color</span></div>
<div style="position:absolute;left:5.00px;top:72.00px" class="cls_003"><span class="cls_003">Ramp, click on New GradientTexture. In the </span><span class="cls_010">GradientTexture</span><span class="cls_003"> properties, choose a new </span><span class="cls_010">Gradient</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:105.00px" class="cls_003"><span class="cls_003">The </span><span class="cls_010">Gradient</span><span class="cls_003"> has two colors: a start color on the left and an end color on the right. These are selected</span></div>
<div style="position:absolute;left:5.00px;top:123.00px" class="cls_003"><span class="cls_003">by the small rectangles at the ends of the gradient. Clicking on the square on the right allows you to</span></div>
<div style="position:absolute;left:5.00px;top:141.00px" class="cls_003"><span class="cls_003">set the color:</span></div>
<div style="position:absolute;left:5.00px;top:351.00px" class="cls_003"><span class="cls_003">Set the start color to a tan shade, and set the end color to the same color, but with the alpha value set</span></div>
<div style="position:absolute;left:5.00px;top:369.00px" class="cls_003"><span class="cls_003">to </span><span class="cls_010">0</span><span class="cls_003"> (transparent). You can test how it looks by checking the Emitting box in the Inspector. Because the</span></div>
<div style="position:absolute;left:5.00px;top:387.00px" class="cls_003"><span class="cls_003">node is set to One Shot, there will only be one puff of particles and you have to check the box again to</span></div>
<div style="position:absolute;left:5.00px;top:405.00px" class="cls_003"><span class="cls_003">emit them.</span></div>
<div style="position:absolute;left:5.00px;top:438.00px" class="cls_003"><span class="cls_003">Feel free to alter the properties from what is listed here. Experimenting with </span><span class="cls_010">Particles2D</span><span class="cls_003"> settings can</span></div>
<div style="position:absolute;left:5.00px;top:456.00px" class="cls_003"><span class="cls_003">be great fun, and often you'll stumble on to a very nice effect just by tinkering. Once you're happy with</span></div>
<div style="position:absolute;left:5.00px;top:474.00px" class="cls_003"><span class="cls_003">the appearance, add the following to the Player's </span><span class="cls_010">_physics_process()</span><span class="cls_003"> code:</span></div>
<div style="position:absolute;left:19.99px;top:508.50px" class="cls_010"><span class="cls_010">if state == JUMP and is_on_floor():</span></div>
<div style="position:absolute;left:40.99px;top:519.75px" class="cls_010"><span class="cls_010">change_state(IDLE)</span></div>
<div style="position:absolute;left:40.99px;top:531.00px" class="cls_010"><span class="cls_010">$Dust.emitting = true # add this line</span></div>
<div style="position:absolute;left:5.00px;top:555.75px" class="cls_003"><span class="cls_003">Run the game and every time your character lands on the ground, a small puff of dust will appear.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:210124px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background268.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Crouching state</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">The crouching state is useful if you have enemies or projectiles that the player needs to dodge by</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">ducking under them. The sprite sheet contains a two-frame animation for this state:</span></div>
<div style="position:absolute;left:5.00px;top:228.75px" class="cls_003"><span class="cls_003">Add a new animation called crouch to the player's </span><span class="cls_010">AnimationPlayer</span><span class="cls_003">. Set its Length to </span><span class="cls_010">0.2</span><span class="cls_003"> and add a track</span></div>
<div style="position:absolute;left:5.00px;top:246.75px" class="cls_003"><span class="cls_003">for the Frame property that changes the value from </span><span class="cls_010">3</span><span class="cls_003"> to </span><span class="cls_010">4</span><span class="cls_003">. Set the animation to loop.</span></div>
<div style="position:absolute;left:5.00px;top:279.75px" class="cls_003"><span class="cls_003">In the player's script, add the new state to the </span><span class="cls_010">enum</span><span class="cls_003"> and state change:</span></div>
<div style="position:absolute;left:19.99px;top:314.25px" class="cls_010"><span class="cls_010">enum {IDLE, RUN, JUMP, HURT, DEAD, CROUCH}</span></div>
<div style="position:absolute;left:19.99px;top:334.50px" class="cls_010"><span class="cls_010">CROUCH:</span></div>
<div style="position:absolute;left:40.99px;top:345.75px" class="cls_010"><span class="cls_010">new_anim = 'crouch'</span></div>
<div style="position:absolute;left:5.00px;top:370.50px" class="cls_003"><span class="cls_003">In the </span><span class="cls_010">get_input()</span><span class="cls_003"> method, you need to handle the various state transitions. When on the ground, the</span></div>
<div style="position:absolute;left:5.00px;top:388.50px" class="cls_003"><span class="cls_003">down input should transition to </span><span class="cls_010">CROUCH</span><span class="cls_003">. When in </span><span class="cls_010">CROUCH</span><span class="cls_003">, releasing the down input should transition to</span></div>
<div style="position:absolute;left:5.00px;top:406.50px" class="cls_010"><span class="cls_010">IDLE</span><span class="cls_003">. Finally, if in the </span><span class="cls_010">CROUCH</span><span class="cls_003"> state and left or right is pressed, the state should change to </span><span class="cls_010">RUN</span><span class="cls_003">:</span></div>
<div style="position:absolute;left:19.99px;top:441.00px" class="cls_010"><span class="cls_010">var down = Input.is_action_pressed('crouch')</span></div>
<div style="position:absolute;left:19.99px;top:463.50px" class="cls_010"><span class="cls_010">if down and is_on_floor():</span></div>
<div style="position:absolute;left:40.99px;top:474.75px" class="cls_010"><span class="cls_010">change_state(CROUCH)</span></div>
<div style="position:absolute;left:19.99px;top:486.00px" class="cls_010"><span class="cls_010">if !down and state == CROUCH:</span></div>
<div style="position:absolute;left:40.99px;top:497.25px" class="cls_010"><span class="cls_010">change_state(IDLE)</span></div>
<div style="position:absolute;left:5.00px;top:522.00px" class="cls_003"><span class="cls_003">You also need to change this line:</span></div>
<div style="position:absolute;left:19.99px;top:556.50px" class="cls_010"><span class="cls_010">if state == IDLE and velocity.x != 0:</span></div>
<div style="position:absolute;left:40.99px;top:567.75px" class="cls_010"><span class="cls_010">change_state(RUN)</span></div>
<div style="position:absolute;left:5.00px;top:592.50px" class="cls_003"><span class="cls_003">To this:</span></div>
<div style="position:absolute;left:19.99px;top:627.00px" class="cls_010"><span class="cls_010">if state in [IDLE, CROUCH] and velocity.x != 0:</span></div>
<div style="position:absolute;left:40.99px;top:638.25px" class="cls_010"><span class="cls_010">change_state(RUN)</span></div>
<div style="position:absolute;left:5.00px;top:663.00px" class="cls_003"><span class="cls_003">That's it! Run the game and try out your new animation state.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:210926px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background269.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Climbing ladders</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">The player animation also includes frames for a </span><span class="cls_012">climbing</span><span class="cls_003"> action, and the tileset contains ladders.</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">Currently, the ladder tiles do nothing: in the TileSet, they do not have any collision shape assigned.</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">That's fine, because you don't want the player to collide with the ladders; you want to be able to move</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">up and down on them.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:211728px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background270.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Player code</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Start by clicking on the player's </span><span class="cls_010">AnimationPlayer</span><span class="cls_003"> and adding a new animation named </span><span class="cls_010">climb</span><span class="cls_003">. Its Length</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">should be set to </span><span class="cls_010">0.4</span><span class="cls_003"> seconds and the Frame values for the </span><span class="cls_010">Sprite</span><span class="cls_003"> are </span><span class="cls_010">0, 1, 0, 2</span><span class="cls_003">. Set the animation to</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">loop.</span></div>
<div style="position:absolute;left:5.00px;top:148.50px" class="cls_003"><span class="cls_003">Now, go to </span><span class="cls_010">Player.gd</span><span class="cls_003"> and add a new state, </span><span class="cls_010">CLIMB</span><span class="cls_003">, to the state enum. In addition, add two new variables</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">to the declarations at the top:</span></div>
<div style="position:absolute;left:19.99px;top:201.00px" class="cls_010"><span class="cls_010">export (int) var climb_speed</span></div>
<div style="position:absolute;left:19.99px;top:212.25px" class="cls_010"><span class="cls_010">var is_on_ladder = false</span></div>
<div style="position:absolute;left:5.00px;top:237.00px" class="cls_010"><span class="cls_010">is_on_ladder</span><span class="cls_003"> will be used to tell if the player is on a ladder or not. Using this, you can decide whether</span></div>
<div style="position:absolute;left:5.00px;top:255.00px" class="cls_003"><span class="cls_003">the up arrow should have any effect. In the Inspector, set Climb Speed to </span><span class="cls_010">50</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:288.00px" class="cls_003"><span class="cls_003">In </span><span class="cls_010">change_state()</span><span class="cls_003">, add a condition for the new state:</span></div>
<div style="position:absolute;left:19.99px;top:322.50px" class="cls_010"><span class="cls_010">CLIMB:</span></div>
<div style="position:absolute;left:40.99px;top:333.75px" class="cls_010"><span class="cls_010">new_anim = 'climb'</span></div>
<div style="position:absolute;left:5.00px;top:358.50px" class="cls_003"><span class="cls_003">Next, in </span><span class="cls_010">_get_input()</span><span class="cls_003">, you need to add the </span><span class="cls_010">climb</span><span class="cls_003"> input action and add the code to determine when to</span></div>
<div style="position:absolute;left:5.00px;top:376.50px" class="cls_003"><span class="cls_003">trigger the new state. Add the following:</span></div>
<div style="position:absolute;left:19.99px;top:411.00px" class="cls_010"><span class="cls_010">var climb = Input.is_action_pressed('climb')</span></div>
<div style="position:absolute;left:19.99px;top:433.50px" class="cls_010"><span class="cls_010">if climb and state != CLIMB and is_on_ladder:</span></div>
<div style="position:absolute;left:40.99px;top:444.75px" class="cls_010"><span class="cls_010">change_state(CLIMB)</span></div>
<div style="position:absolute;left:19.99px;top:456.00px" class="cls_010"><span class="cls_010">if state == CLIMB:</span></div>
<div style="position:absolute;left:40.99px;top:467.25px" class="cls_010"><span class="cls_010">if climb:</span></div>
<div style="position:absolute;left:61.98px;top:478.50px" class="cls_010"><span class="cls_010">velocity.y = -climb_speed</span></div>
<div style="position:absolute;left:40.99px;top:489.75px" class="cls_010"><span class="cls_010">elif down:</span></div>
<div style="position:absolute;left:61.98px;top:501.00px" class="cls_010"><span class="cls_010">velocity.y = climb_speed</span></div>
<div style="position:absolute;left:40.99px;top:512.25px" class="cls_010"><span class="cls_010">else:</span></div>
<div style="position:absolute;left:61.98px;top:523.50px" class="cls_010"><span class="cls_010">velocity.y = 0</span></div>
<div style="position:absolute;left:61.98px;top:534.75px" class="cls_010"><span class="cls_010">$AnimationPlayer.play("climb")</span></div>
<div style="position:absolute;left:19.99px;top:546.00px" class="cls_010"><span class="cls_010">if state == CLIMB and not is_on_ladder:</span></div>
<div style="position:absolute;left:40.99px;top:557.25px" class="cls_010"><span class="cls_010">change_state(IDLE)</span></div>
<div style="position:absolute;left:5.00px;top:582.00px" class="cls_003"><span class="cls_003">Here, you have three new conditions to check. First, if the player is not in the </span><span class="cls_010">CLIMB</span><span class="cls_003"> state, but is on a</span></div>
<div style="position:absolute;left:5.00px;top:600.00px" class="cls_003"><span class="cls_003">ladder, then pressing up should start make the player start climbing. Next, if the player is climbing,</span></div>
<div style="position:absolute;left:5.00px;top:618.00px" class="cls_003"><span class="cls_003">then up and down should move them accordingly, but halt movement if no keys are pressed. Finally, if</span></div>
<div style="position:absolute;left:5.00px;top:636.00px" class="cls_003"><span class="cls_003">the player leaves the ladder while climbing, it will leave the </span><span class="cls_010">CLIMB</span><span class="cls_003"> state.</span></div>
<div style="position:absolute;left:5.00px;top:669.00px" class="cls_003"><span class="cls_003">The one remaining issue is you need gravity to stop pulling the player downwards when climbing.</span></div>
<div style="position:absolute;left:5.00px;top:687.00px" class="cls_003"><span class="cls_003">Add the following condition to the gravity code in </span><span class="cls_010">_physics_process()</span><span class="cls_003">:</span></div>
<div style="position:absolute;left:19.99px;top:721.50px" class="cls_010"><span class="cls_010">if state != CLIMB:</span></div>
<div style="position:absolute;left:40.99px;top:732.75px" class="cls_010"><span class="cls_010">velocity.y += gravity * delta</span></div>
<div style="position:absolute;left:5.00px;top:757.50px" class="cls_003"><span class="cls_003">Now, the player is ready, and you can add some ladders to your level map.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:212530px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background271.jpg" width=612 height=792></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:212530px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background272.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Level code</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Place a few ladder tiles somewhere on your map, then add a Ladder </span><span class="cls_010">Area2D</span><span class="cls_003"> to the level scene. Give</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">this node a </span><span class="cls_010">CollisionShape2D</span><span class="cls_003"> with a rectangular shape. The best way to size the area is to use grid</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">snapping. Turn this on via the menu and use Configure Snap... to set the grid step to </span><span class="cls_010">(4, 4)</span><span class="cls_003">:</span></div>
<div style="position:absolute;left:5.00px;top:269.25px" class="cls_003"><span class="cls_003">Adjust the collision shape so that it covers the center portion of the ladder from top to bottom. If you</span></div>
<div style="position:absolute;left:5.00px;top:287.25px" class="cls_003"><span class="cls_003">make the shape fully as wide as the ladder, the player will still count as climbing even when hanging</span></div>
<div style="position:absolute;left:5.00px;top:305.25px" class="cls_003"><span class="cls_003">off the side. You may find that this looks a bit odd, so making the shape a bit smaller than the width of</span></div>
<div style="position:absolute;left:5.00px;top:323.25px" class="cls_003"><span class="cls_003">the ladder will prevent this.</span></div>
<div style="position:absolute;left:5.00px;top:356.25px" class="cls_003"><span class="cls_003">Connect the </span><span class="cls_010">body_entered</span><span class="cls_003"> and </span><span class="cls_010">body_exited</span><span class="cls_003"> signals of the </span><span class="cls_010">Ladder</span><span class="cls_003"> and add the following code to have them set</span></div>
<div style="position:absolute;left:5.00px;top:374.25px" class="cls_003"><span class="cls_003">the Player's ladder variable:</span></div>
<div style="position:absolute;left:19.99px;top:408.75px" class="cls_010"><span class="cls_010">func _on_Ladder_body_entered(body):</span></div>
<div style="position:absolute;left:40.99px;top:420.00px" class="cls_010"><span class="cls_010">if body.name == "Player":</span></div>
<div style="position:absolute;left:61.98px;top:431.25px" class="cls_010"><span class="cls_010">body.is_on_ladder = true</span></div>
<div style="position:absolute;left:19.99px;top:453.75px" class="cls_010"><span class="cls_010">func _on_Ladder_body_exited(body):</span></div>
<div style="position:absolute;left:40.99px;top:465.00px" class="cls_010"><span class="cls_010">if body.name == "Player":</span></div>
<div style="position:absolute;left:61.98px;top:476.25px" class="cls_010"><span class="cls_010">body.is_on_ladder = false</span></div>
<div style="position:absolute;left:5.00px;top:501.00px" class="cls_003"><span class="cls_003">Now you can give it a try. You should be able to walk to the ladder and climb up and down it. Note</span></div>
<div style="position:absolute;left:5.00px;top:519.00px" class="cls_003"><span class="cls_003">that if you are at the top of a ladder and step onto it, you'll fall to the bottom rather than climb down</span></div>
<div style="position:absolute;left:5.00px;top:537.00px" class="cls_003"><span class="cls_003">(although pressing up as you fall will grab the ladder). If you prefer to automatically transition to the</span></div>
<div style="position:absolute;left:5.00px;top:555.00px" class="cls_003"><span class="cls_003">climbing state, you can add an additional falling check in </span><span class="cls_010">_physics_process()</span><span class="cls_003">.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:213332px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background273.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Moving platforms</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Make a new scene with a </span><span class="cls_010">KinematicBody2D</span><span class="cls_003"> root node. Add a </span><span class="cls_010">Sprite</span><span class="cls_003"> child and use the</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_010"><span class="cls_010">res://assets/environment/layers/tileset.png</span><span class="cls_003"> sprite sheet as the Texture with Region enabled so you can</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">choose one particular tile. You probably want your platform to be wider than one tile, so duplicate</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">the </span><span class="cls_010">Sprite</span><span class="cls_003"> as many times as you like. Turn grid snapping on so that the sprites can be aligned in a row:</span></div>
<div style="position:absolute;left:5.00px;top:287.25px" class="cls_003"><span class="cls_003">A grid setting of </span><span class="cls_010">(8, 8)</span><span class="cls_003"> works well for aligning the tiles. Add a rectangular </span><span class="cls_010">CollisionShape2D</span><span class="cls_003"> that covers</span></div>
<div style="position:absolute;left:5.00px;top:305.25px" class="cls_003"><span class="cls_003">the image:</span></div>
<div style="position:absolute;left:5.00px;top:460.50px" class="cls_003"><span class="cls_003">Platform movement can be made very complex (following paths, changing speeds, and so on), but this</span></div>
<div style="position:absolute;left:5.00px;top:478.50px" class="cls_003"><span class="cls_003">example will stick with a platform that moves horizontally back and forth between two objects.</span></div>
<div style="position:absolute;left:5.00px;top:511.50px" class="cls_003"><span class="cls_003">Here is the platform's script:</span></div>
<div style="position:absolute;left:19.99px;top:546.00px" class="cls_010"><span class="cls_010">extends KinematicBody2D</span></div>
<div style="position:absolute;left:19.99px;top:568.50px" class="cls_010"><span class="cls_010">export (Vector2) var velocity</span></div>
<div style="position:absolute;left:19.99px;top:591.00px" class="cls_010"><span class="cls_010">func _physics_process(delta):</span></div>
<div style="position:absolute;left:40.99px;top:602.25px" class="cls_010"><span class="cls_010">var collision = move_and_collide(velocity * delta)</span></div>
<div style="position:absolute;left:40.99px;top:613.50px" class="cls_010"><span class="cls_010">if collision:</span></div>
<div style="position:absolute;left:61.98px;top:624.75px" class="cls_010"><span class="cls_010">velocity = velocity.bounce(collision.normal)</span></div>
<div style="position:absolute;left:5.00px;top:649.50px" class="cls_003"><span class="cls_003">This time, you're using </span><span class="cls_010">move_and_collide()</span><span class="cls_003"> to move the kinematic body. This is a better choice since the</span></div>
<div style="position:absolute;left:5.00px;top:667.50px" class="cls_003"><span class="cls_003">platform shouldn't slide when it collides with another wall. Instead, it bounces off the colliding body.</span></div>
<div style="position:absolute;left:5.00px;top:685.50px" class="cls_003"><span class="cls_003">As long as your collision shapes are rectangular (as the </span><span class="cls_010">TileMap</span><span class="cls_003"> bodies are), this method will work</span></div>
<div style="position:absolute;left:5.00px;top:703.50px" class="cls_003"><span class="cls_003">fine. If you have a rounded object, the bounce may send the platform off in a strange direction, in</span></div>
<div style="position:absolute;left:5.00px;top:721.50px" class="cls_003"><span class="cls_003">which case you should use something like the following to keep the motion horizontal:</span></div>
<div style="position:absolute;left:19.99px;top:756.00px" class="cls_010"><span class="cls_010">func _physics_process(delta):</span></div>
<div style="position:absolute;left:40.99px;top:767.25px" class="cls_010"><span class="cls_010">var collision = move_and_collide(velocity * delta)</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:214134px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background274.jpg" width=612 height=792></div>
<div style="position:absolute;left:40.99px;top:4.81px" class="cls_010"><span class="cls_010">if collision:</span></div>
<div style="position:absolute;left:61.98px;top:15.75px" class="cls_010"><span class="cls_010">velocity.x *= -1</span></div>
<div style="position:absolute;left:5.00px;top:40.50px" class="cls_003"><span class="cls_003">Set the </span><span class="cls_012">Velocity</span><span class="cls_003"> in the Inspector to </span><span class="cls_010">(50, 0)</span><span class="cls_003">, then go to your level scene and instance one of these</span></div>
<div style="position:absolute;left:5.00px;top:58.50px" class="cls_003"><span class="cls_003">objects somewhere in your level. Make sure it is between two objects so that it can move back and</span></div>
<div style="position:absolute;left:5.00px;top:76.50px" class="cls_003"><span class="cls_003">forth between them.</span></div>
<div style="position:absolute;left:5.00px;top:109.50px" class="cls_003"><span class="cls_003">Run the scene and try jumping on the moving platform. Since the Player is using </span><span class="cls_010">move_and_slide()</span><span class="cls_003">, they</span></div>
<div style="position:absolute;left:5.00px;top:127.50px" class="cls_003"><span class="cls_003">will automatically move along with the platform if you stand on it.</span></div>
<div style="position:absolute;left:5.00px;top:160.50px" class="cls_003"><span class="cls_003">Add as many of these objects as you like to your level. They will even bounce off each other, so you</span></div>
<div style="position:absolute;left:5.00px;top:178.50px" class="cls_003"><span class="cls_003">can make chains of moving platforms that cover a large distance and require careful timing of the</span></div>
<div style="position:absolute;left:5.00px;top:196.50px" class="cls_003"><span class="cls_003">player's jumps.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:214936px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background275.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Summary</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">In this chapter, you learned how to use the </span><span class="cls_010">KinematicBody2D</span><span class="cls_003"> node to create arcade-style physics. You also</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">used the </span><span class="cls_010">AnimationPlayer</span><span class="cls_003"> to create a variety of animations for character behavior, and made extensive</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">use of what you learned in earlier projects to tie everything together. Hopefully, by this point, you</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">have a good grasp of the scene system and how a Godot project is structured.</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">Remember the Stretch Mode and Aspect properties you set in the Project Settings at the beginning?</span></div>
<div style="position:absolute;left:5.00px;top:184.50px" class="cls_003"><span class="cls_003">Run the game and observe what happens when you resize the game window. These settings are the</span></div>
<div style="position:absolute;left:5.00px;top:202.50px" class="cls_003"><span class="cls_003">best for this style of game, but try changing the Stretch Mode to Viewport instead, then make your</span></div>
<div style="position:absolute;left:5.00px;top:220.50px" class="cls_003"><span class="cls_003">game window very wide or tall. Experiment with the other settings to see the effect of the different</span></div>
<div style="position:absolute;left:5.00px;top:238.50px" class="cls_003"><span class="cls_003">resizing options.</span></div>
<div style="position:absolute;left:5.00px;top:271.50px" class="cls_003"><span class="cls_003">Once again, before moving on, take a few moments to play your game and look through its various</span></div>
<div style="position:absolute;left:5.00px;top:289.50px" class="cls_003"><span class="cls_003">scenes and scripts to review how you built it. Review any sections of this chapter that you found</span></div>
<div style="position:absolute;left:5.00px;top:307.50px" class="cls_003"><span class="cls_003">particularly tricky.</span></div>
<div style="position:absolute;left:5.00px;top:340.50px" class="cls_003"><span class="cls_003">In the next chapter, you'll make the jump to 3D!</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:215738px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background276.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">3D Minigolf</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">The previous projects in this book have been designed in 2D space. This is intentional, in order to</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">introduce the various features and concepts of Godot while keeping the projects' scopes limited. In</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">this chapter, you'll venture into the 3D side of game development. For some, 3D development feels</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">significantly more difficult to manage; for others, it is more straightforward. In either case, there is</span></div>
<div style="position:absolute;left:5.00px;top:151.50px" class="cls_003"><span class="cls_003">certainly an additional layer of complexity for you to understand.</span></div>
<div style="position:absolute;left:5.00px;top:184.50px" class="cls_003"><span class="cls_003">If you've never worked with any kind of 3D software before, you may find yourself encountering</span></div>
<div style="position:absolute;left:5.00px;top:202.50px" class="cls_003"><span class="cls_003">many new concepts. This chapter will explain them as much as possible, but remember to refer to the</span></div>
<div style="position:absolute;left:5.00px;top:220.50px" class="cls_003"><span class="cls_003">Godot documentation whenever you need a more in-depth understanding of a particular topic.</span></div>
<div style="position:absolute;left:5.00px;top:253.50px" class="cls_003"><span class="cls_003">The game you'll make in this chapter is called </span><span class="cls_002">Minigolf</span><span class="cls_003">. This will consist of a small customizable</span></div>
<div style="position:absolute;left:5.00px;top:271.50px" class="cls_003"><span class="cls_003">course, a ball, and an interface for aiming and shooting the ball towards the hole.</span></div>
<div style="position:absolute;left:5.00px;top:304.50px" class="cls_003"><span class="cls_003">This is what you'll learn in this chapter:</span></div>
<div style="position:absolute;left:34.99px;top:336.75px" class="cls_003"><span class="cls_003">Navigating Godot's 3D editor</span></div>
<div style="position:absolute;left:34.99px;top:354.00px" class="cls_003"><span class="cls_003">The Spatial node and its properties</span></div>
<div style="position:absolute;left:34.99px;top:371.25px" class="cls_003"><span class="cls_003">Importing 3D meshes and using 3D collision shapes</span></div>
<div style="position:absolute;left:34.99px;top:388.50px" class="cls_003"><span class="cls_003">How to use 3D cameras, both stationary and moving</span></div>
<div style="position:absolute;left:34.99px;top:405.75px" class="cls_003"><span class="cls_003">Using GridMap to place the tiles of your golf course</span></div>
<div style="position:absolute;left:34.99px;top:423.00px" class="cls_003"><span class="cls_003">Setting up lighting and the environment</span></div>
<div style="position:absolute;left:34.99px;top:440.25px" class="cls_003"><span class="cls_003">An introduction to PBR rendering and materials</span></div>
<div style="position:absolute;left:5.00px;top:473.25px" class="cls_003"><span class="cls_003">But first, here's a brief introduction to 3D in Godot.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:216540px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background277.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Introduction to 3D</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">One of the strengths of Godot is its ability to handle both 2D and 3D games. While much of what</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">you've learned earlier in this book applies equally well in 3D (nodes, scenes, signals, and so on),</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">changing from 2D to 3D brings with it a whole new layer of complexity and capabilities. First, you'll</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">find that there are some additional features available in the 3D editor window, and it's a good idea to</span></div>
<div style="position:absolute;left:5.00px;top:151.50px" class="cls_003"><span class="cls_003">familiarize yourself with how to navigate in the 3D editor window.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:217342px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background278.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Orienting in 3D space</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">When you click on the 3D button at the top of the editor window, you will see the 3D project view:</span></div>
<div style="position:absolute;left:5.00px;top:328.50px" class="cls_003"><span class="cls_003">The first thing you should notice is the three colored lines in the center. These are the </span><span class="cls_012">x</span><span class="cls_003"> (red), </span><span class="cls_012">y</span></div>
<div style="position:absolute;left:5.00px;top:346.50px" class="cls_003"><span class="cls_003">(green), and </span><span class="cls_012">z</span><span class="cls_003"> (blue) axes. The point where they meet is the origin, with coordinates of </span><span class="cls_010">(0, 0, 0)</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:52.98px;top:379.50px" class="cls_008"><span class="cls_008">Just as you used </span><span class="cls_011">Vector2(x, y)</span><span class="cls_008"> to indicate a position in two-dimensional space, </span><span class="cls_011">Vector3(x, y, z)</span><span class="cls_008"> describes a position in</span></div>
<div style="position:absolute;left:52.98px;top:393.00px" class="cls_008"><span class="cls_008">three dimensions along these three axes.</span></div>
<div style="position:absolute;left:5.00px;top:422.25px" class="cls_003"><span class="cls_003">One issue that arises when working in 3D is that different applications use different conventions for</span></div>
<div style="position:absolute;left:5.00px;top:440.25px" class="cls_003"><span class="cls_003">orientation. Godot uses Y-Up orientation, so when looking at the axes, if </span><span class="cls_012">x</span><span class="cls_003"> is pointing to the left/right,</span></div>
<div style="position:absolute;left:5.00px;top:458.25px" class="cls_003"><span class="cls_003">then </span><span class="cls_012">y</span><span class="cls_003"> is up/down, and </span><span class="cls_012">z</span><span class="cls_003"> is forward/back. You may find when using other popular 3D software that</span></div>
<div style="position:absolute;left:5.00px;top:476.25px" class="cls_003"><span class="cls_003">they use Z-Up. It's good to be aware of this, as it can lead to confusion when moving between</span></div>
<div style="position:absolute;left:5.00px;top:494.25px" class="cls_003"><span class="cls_003">different programs.</span></div>
<div style="position:absolute;left:5.00px;top:527.25px" class="cls_003"><span class="cls_003">Another major aspect to be aware of is the unit of measure. In 2D, everything is measured in pixels,</span></div>
<div style="position:absolute;left:5.00px;top:545.25px" class="cls_003"><span class="cls_003">which makes sense as a natural basis for measurement when drawing on the screen. However, when</span></div>
<div style="position:absolute;left:5.00px;top:563.25px" class="cls_003"><span class="cls_003">working in 3D space, pixels aren't really useful. Two objects of exactly the same size will occupy</span></div>
<div style="position:absolute;left:5.00px;top:581.25px" class="cls_003"><span class="cls_003">different areas on the screen depending on how far away they are from the camera (more about</span></div>
<div style="position:absolute;left:5.00px;top:599.25px" class="cls_003"><span class="cls_003">cameras soon). For this reason, in 3D space all objects in Godot are measured in generic units.</span></div>
<div style="position:absolute;left:5.00px;top:617.25px" class="cls_003"><span class="cls_003">You're free to call these units whatever you like: meters, inches, or even light years, depending on the</span></div>
<div style="position:absolute;left:5.00px;top:635.25px" class="cls_003"><span class="cls_003">scale of your game world.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:218144px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background279.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Godot's 3D editor</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Before getting started with 3D, it will be useful to briefly review how to navigate in Godot's 3D</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">space. The camera is controlled with the mouse and keyboard:</span></div>
<div style="position:absolute;left:34.99px;top:129.75px" class="cls_003"><span class="cls_003">Mousewheel up/down: Zoom in/out</span></div>
<div style="position:absolute;left:34.99px;top:147.00px" class="cls_003"><span class="cls_003">Middle button + drag: Orbit the camera around the current target</span></div>
<div style="position:absolute;left:34.99px;top:164.25px" class="cls_012"><span class="cls_012">Shift</span><span class="cls_003"> + middle button + drag: Pan camera up/down/left/right</span></div>
<div style="position:absolute;left:34.99px;top:181.50px" class="cls_003"><span class="cls_003">Right-click + drag: Rotate camera in place</span></div>
<div style="position:absolute;left:5.00px;top:214.50px" class="cls_003"><span class="cls_003">If you're familiar with popular 3D games such as </span><span class="cls_012">Minecraft</span><span class="cls_003">, you can press </span><span class="cls_012">Shift</span><span class="cls_003"> + </span><span class="cls_012">F</span><span class="cls_003"> to switch to</span></div>
<div style="position:absolute;left:5.00px;top:232.50px" class="cls_003"><span class="cls_003">Freelook mode. In this mode, you can use the WASD keys to </span><span class="cls_012">fly</span><span class="cls_003"> around the scene while aiming with</span></div>
<div style="position:absolute;left:5.00px;top:250.50px" class="cls_003"><span class="cls_003">the mouse. Press </span><span class="cls_012">Shift</span><span class="cls_003"> + </span><span class="cls_012">F</span><span class="cls_003"> again to exit Freelook mode.</span></div>
<div style="position:absolute;left:5.00px;top:283.50px" class="cls_003"><span class="cls_003">You can also alter the camera's view by clicking on the [ Perspective ] label in the upper-left corner.</span></div>
<div style="position:absolute;left:5.00px;top:301.50px" class="cls_003"><span class="cls_003">Here, you can snap the camera to a particular orientation such as Top View or Front View:</span></div>
<div style="position:absolute;left:5.00px;top:502.50px" class="cls_003"><span class="cls_003">This can be especially useful on large displays when combined with the use of multiple Viewports.</span></div>
<div style="position:absolute;left:5.00px;top:520.50px" class="cls_003"><span class="cls_003">Click the View menu and you can split the screen into multiple views of the space, allowing you to</span></div>
<div style="position:absolute;left:5.00px;top:538.50px" class="cls_003"><span class="cls_003">see an object from all sides simultaneously.</span></div>
<div style="position:absolute;left:52.98px;top:571.50px" class="cls_008"><span class="cls_008">Note that each of these menu options has a keyboard shortcut associated with it. You can click on Editor | Editor</span></div>
<div style="position:absolute;left:52.98px;top:585.00px" class="cls_008"><span class="cls_008">Settings | 3D to adjust the 3D navigation and shortcuts to your liking.</span></div>
<div style="position:absolute;left:5.00px;top:747.75px" class="cls_003"><span class="cls_003">When using multiple viewports, each can be set to a different perspective so you can see the effect of</span></div>
<div style="position:absolute;left:5.00px;top:765.75px" class="cls_003"><span class="cls_003">your actions from multiple directions at the same time:</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:218946px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background280.jpg" width=612 height=792></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:219748px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background281.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Adding 3D objects</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">It's time to add your first 3D node. Just as all 2D nodes inherit from </span><span class="cls_010">Node2D</span><span class="cls_003">, which provides properties</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">such as </span><span class="cls_010">position</span><span class="cls_003"> and </span><span class="cls_010">rotation</span><span class="cls_003">, 3D nodes inherit from the </span><span class="cls_010">Spatial</span><span class="cls_003"> node. Add one to the scene and you'll</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">see the following:</span></div>
<div style="position:absolute;left:5.00px;top:288.00px" class="cls_003"><span class="cls_003">That colorful object you see is not the node, but rather a 3D </span><span class="cls_012">gizmo</span><span class="cls_003">. Gizmos are tools that allow you to</span></div>
<div style="position:absolute;left:5.00px;top:306.00px" class="cls_003"><span class="cls_003">move and rotate objects in space. The three rings control rotation, while the three arrows move</span></div>
<div style="position:absolute;left:5.00px;top:324.00px" class="cls_003"><span class="cls_003">(translate) the object along the three axes. Notice that the rings and arrows are color-coded to match</span></div>
<div style="position:absolute;left:5.00px;top:342.00px" class="cls_003"><span class="cls_003">the axis colors. The arrows move the object </span><span class="cls_012">along</span><span class="cls_003"> the respective axis, while the rings rotate the</span></div>
<div style="position:absolute;left:5.00px;top:360.00px" class="cls_003"><span class="cls_003">object </span><span class="cls_012">around</span><span class="cls_003"> a particular axis. There are also three small squares that lock one axis and allow you</span></div>
<div style="position:absolute;left:5.00px;top:378.00px" class="cls_003"><span class="cls_003">to move the object in a single plane.</span></div>
<div style="position:absolute;left:5.00px;top:411.00px" class="cls_003"><span class="cls_003">Take a few minutes to experiment and get familiar with the gizmo. Use Undo if you find yourself</span></div>
<div style="position:absolute;left:5.00px;top:429.00px" class="cls_003"><span class="cls_003">getting lost.</span></div>
<div style="position:absolute;left:5.00px;top:462.00px" class="cls_003"><span class="cls_003">Sometimes, gizmos get in the way. You can click on the mode icons to restrict yourself to only one</span></div>
<div style="position:absolute;left:5.00px;top:480.00px" class="cls_003"><span class="cls_003">type of transformation: move, rotate, or scale:</span></div>
<div style="position:absolute;left:5.00px;top:555.00px" class="cls_003"><span class="cls_003">The </span><span class="cls_012">Q</span><span class="cls_003">, </span><span class="cls_012">W</span><span class="cls_003">, </span><span class="cls_012">E</span><span class="cls_003">, and </span><span class="cls_012">R</span><span class="cls_003"> keys are shortcuts for these buttons, allowing for quickly changing between</span></div>
<div style="position:absolute;left:5.00px;top:573.00px" class="cls_003"><span class="cls_003">modes.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:220550px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background282.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Global versus Local Space</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">By default, the gizmo controls operate in global space. Try rotating the object. No matter how you turn</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">it, the gizmo's movement arrows still point along the axes. Now try this: put the </span><span class="cls_010">Spatial</span><span class="cls_003"> node back to</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">its original position and orientation (or delete it and add a new one). Rotate the object around one</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">axis, then click the Local Space Mode (T) button:</span></div>
<div style="position:absolute;left:5.00px;top:226.50px" class="cls_003"><span class="cls_003">Observe what happened to the gizmo arrows. They now point along the </span><span class="cls_012">object's</span><span class="cls_003"> local </span><span class="cls_012">x</span><span class="cls_003">/</span><span class="cls_012">y</span><span class="cls_003">/</span><span class="cls_012">z</span><span class="cls_003"> axes and</span></div>
<div style="position:absolute;left:5.00px;top:244.50px" class="cls_003"><span class="cls_003">not the world's. When you click and drag them, they will move the object relative to its axes.</span></div>
<div style="position:absolute;left:5.00px;top:262.50px" class="cls_003"><span class="cls_003">Switching back and forth between these two modes can make it much easier to place an object exactly</span></div>
<div style="position:absolute;left:5.00px;top:280.50px" class="cls_003"><span class="cls_003">where you want it.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:221352px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background283.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Transforms</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Look at the Inspector for your </span><span class="cls_010">Spatial</span><span class="cls_003"> node. Instead of a Position property, you now have Translation,</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">as well as Rotation Degrees and Scale. As you move the object around, observe how these values</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">change. Note that the Translation represents the object's coordinates relative to the origin:</span></div>
<div style="position:absolute;left:5.00px;top:324.75px" class="cls_003"><span class="cls_003">You'll also notice a Transform property, which also changes as you move and rotate the object. When</span></div>
<div style="position:absolute;left:5.00px;top:342.75px" class="cls_003"><span class="cls_003">you change translation or rotation, you'll notice that the 12 transform quantities will change as well.</span></div>
<div style="position:absolute;left:5.00px;top:375.75px" class="cls_003"><span class="cls_003">A full explanation of the math behind transforms is beyond the scope of this book, but in a nutshell, a</span></div>
<div style="position:absolute;left:5.00px;top:393.75px" class="cls_003"><span class="cls_003">transform is a </span><span class="cls_012">matrix</span><span class="cls_003"> that describes an object's translation, rotation, and scale all at once. You briefly</span></div>
<div style="position:absolute;left:5.00px;top:411.75px" class="cls_003"><span class="cls_003">used the 2D equivalent in the Space Rocks game earlier in this book, but the concept is more widely</span></div>
<div style="position:absolute;left:5.00px;top:429.75px" class="cls_003"><span class="cls_003">applied in 3D.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:222154px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background284.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Transforms in code</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">When positioning a 3D node via code, you have access to its </span><span class="cls_010">transform</span><span class="cls_003"> and </span><span class="cls_010">global_transform</span><span class="cls_003"> properties,</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">which are </span><span class="cls_010">Transform</span><span class="cls_003"> objects. A </span><span class="cls_010">Transform</span><span class="cls_003"> has two sub-properties: </span><span class="cls_010">origin</span><span class="cls_003"> and </span><span class="cls_010">basis</span><span class="cls_003">. The </span><span class="cls_010">origin</span><span class="cls_003"> represents</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">the body's offset from its parent's origin or the global origin, respectively. The </span><span class="cls_010">basis</span><span class="cls_003"> property contains</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">three vectors that define a local coordinate system traveling with the object. Think of the three axis</span></div>
<div style="position:absolute;left:5.00px;top:151.50px" class="cls_003"><span class="cls_003">arrows in the gizmo when you are in Local Space mode.</span></div>
<div style="position:absolute;left:5.00px;top:184.50px" class="cls_003"><span class="cls_003">You'll see more about how to use 3D transforms later in this section.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:222956px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background285.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Meshes</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Just like </span><span class="cls_010">Node2D</span><span class="cls_003">, a </span><span class="cls_010">Spatial</span><span class="cls_003"> node has no size or appearance of its own. In 2D, you added a Sprite to</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">assign a texture to the node. In 3D, you need to add a </span><span class="cls_012">mesh</span><span class="cls_003">. A mesh is a mathematical description of a</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">shape. It consists of a collection of points, called </span><span class="cls_012">vertices</span><span class="cls_003">. These vertices are connected by lines,</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">called </span><span class="cls_012">edges,</span><span class="cls_003"> and multiple edges (at least three) together make a </span><span class="cls_012">face</span><span class="cls_003">:</span></div>
<div style="position:absolute;left:5.00px;top:293.25px" class="cls_003"><span class="cls_003">A cube, for example, is composed of eight vertices, twelve edges, and six faces.</span></div>
<div style="position:absolute;left:5.00px;top:326.25px" class="cls_003"><span class="cls_003">If you've ever used 3D design software, this will be very familiar to you. If you haven't, and you're</span></div>
<div style="position:absolute;left:5.00px;top:344.25px" class="cls_003"><span class="cls_003">interested in learning about 3D modeling, Blender is a very popular open source tool for designing</span></div>
<div style="position:absolute;left:5.00px;top:362.25px" class="cls_003"><span class="cls_003">3D objects. You can find many tutorials and lessons on the internet to help you get started with</span></div>
<div style="position:absolute;left:5.00px;top:380.25px" class="cls_003"><span class="cls_003">Blender.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:223758px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background286.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Importing meshes</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Whatever modeling software you may use, you will need to export your models in a format that is</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">readable by Godot. Wavefront (</span><span class="cls_010">.obj</span><span class="cls_003">) and Collada (</span><span class="cls_010">.dae</span><span class="cls_003">) are the most popular. Unfortunately, if you're</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">using Blender, its Collada exporter has some flaws that make it unusable with Godot. To fix this,</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">Godot's developers have created a Blender plugin called </span><span class="cls_002">Better Collada Exporter</span><span class="cls_003"> that you can</span></div>
<div style="position:absolute;left:5.00px;top:151.50px" class="cls_003"><span class="cls_003">download from </span><A HREF="https://godotengine.org/download">https://godotengine.org/download</A> </span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:184.50px" class="cls_003"><span class="cls_003">If your objects are in another format, such as FBX, you'll need to use a converter tool to save them as</span></div>
<div style="position:absolute;left:5.00px;top:202.50px" class="cls_003"><span class="cls_003">OBJ or DAE in order to use them with Godot.</span></div>
<div style="position:absolute;left:52.98px;top:235.50px" class="cls_008"><span class="cls_008">A new format called GLTF is gaining in popularity and has some significant advantages over Collada. Godot</span></div>
<div style="position:absolute;left:52.98px;top:249.00px" class="cls_008"><span class="cls_008">already supports it, so feel free to experiment with any models you may find in this format.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:224560px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background287.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Primitives</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">If you don't have any models handy, or if you just need a simple model quickly, Godot has the ability</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">to create certain 3D meshes directly. Add a </span><span class="cls_010">MeshInstance</span><span class="cls_003"> node as a child of Spatial, and in the</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">Inspector, click the Mesh property:</span></div>
<div style="position:absolute;left:5.00px;top:357.00px" class="cls_003"><span class="cls_003">These predefined shapes are called </span><span class="cls_012">primitives</span><span class="cls_003"> and they represent a handy collection of common</span></div>
<div style="position:absolute;left:5.00px;top:375.00px" class="cls_003"><span class="cls_003">useful shapes. You can use these shapes for a variety of purposes, as you'll see later in this chapter.</span></div>
<div style="position:absolute;left:5.00px;top:393.00px" class="cls_003"><span class="cls_003">Select New CubeMesh and you'll see a plain cube appear on the screen. The cube itself is white, but</span></div>
<div style="position:absolute;left:5.00px;top:411.00px" class="cls_003"><span class="cls_003">it may appear bluish on your screen due to the default ambient light in the 3D editor window. You'll</span></div>
<div style="position:absolute;left:5.00px;top:429.00px" class="cls_003"><span class="cls_003">learn how to work with lighting later in this chapter.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:225362px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background288.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Multiple meshes</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Often, you'll find yourself with an object composed of many different meshes. A character might have</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">separate meshes for its head, torso, and limbs. If you have a great many of these types of objects, it</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">can lead to performance issues as the engine tries to render so many meshes. As a result,</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_010"><span class="cls_010">MultiMeshInstance</span><span class="cls_003"> is designed to provide a high-performance method of grouping many meshes together</span></div>
<div style="position:absolute;left:5.00px;top:151.50px" class="cls_003"><span class="cls_003">into a single object. You probably don't need it yet, because it won't be necessary for this project, but</span></div>
<div style="position:absolute;left:5.00px;top:169.50px" class="cls_003"><span class="cls_003">keep it in mind as a tool that may come in handy later.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:226164px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background289.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Cameras</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Try running the scene with your cube mesh. Where is it? In 3D, you won't see anything in the game</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">viewport without using a </span><span class="cls_010">Camera</span><span class="cls_003">. Add one, and use the camera's gizmo to position and point it towards</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">the cube, as in the following screenshot:</span></div>
<div style="position:absolute;left:5.00px;top:308.25px" class="cls_003"><span class="cls_003">The pinkish-purple, pyramid-shaped object is called the camera's </span><span class="cls_012">fustrum</span><span class="cls_003">. It represents the camera's</span></div>
<div style="position:absolute;left:5.00px;top:326.25px" class="cls_003"><span class="cls_003">view, and can be made narrow or wide to affect the camera's </span><span class="cls_012">field of view</span><span class="cls_003">. The triangular arrow at</span></div>
<div style="position:absolute;left:5.00px;top:344.25px" class="cls_003"><span class="cls_003">the top of the fustrum is the camera's up direction.</span></div>
<div style="position:absolute;left:5.00px;top:377.25px" class="cls_003"><span class="cls_003">As you're moving the camera around, you can use the Preview button in the upper-right to check your</span></div>
<div style="position:absolute;left:5.00px;top:395.25px" class="cls_003"><span class="cls_003">aim. Preview will always show you what the selected camera can see.</span></div>
<div style="position:absolute;left:5.00px;top:428.25px" class="cls_003"><span class="cls_003">As with the </span><span class="cls_010">Camera2D</span><span class="cls_003"> you used earlier, a </span><span class="cls_010">Camera</span><span class="cls_003"> must be set as Current for it to be active. Its other</span></div>
<div style="position:absolute;left:5.00px;top:446.25px" class="cls_003"><span class="cls_003">properties affect how it </span><span class="cls_012">sees</span><span class="cls_003">: field of view, projection, and near/far. The default values of these</span></div>
<div style="position:absolute;left:5.00px;top:464.25px" class="cls_003"><span class="cls_003">properties are good for this project, but go ahead and experiment with them to see how they affect the</span></div>
<div style="position:absolute;left:5.00px;top:482.25px" class="cls_003"><span class="cls_003">view of the cube. Use Undo to return everything to the default values when you're done.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:226966px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background290.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Project setup</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Now that you've learned how to navigate in Godot's 3D editor, you're ready to start on the Minigolf</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">project. As with the other projects, download the game assets from the following link and unzip them</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">in your project folder. The unzipped </span><span class="cls_010">assets</span><span class="cls_003"> folder contains images, 3D models, and the other assets</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">you need to complete the project. You can download a Zip file of the art and sounds (collectively</span></div>
<div style="position:absolute;left:5.00px;top:151.50px" class="cls_003"><span class="cls_003">known as </span><span class="cls_012">assets</span><span class="cls_003">) for the game here, </span><A HREF="https://github.com/PacktPublishing/Godot-Game-Engine-Projects/releases">https://github.com/PacktPublishing/Godot-Game-Engine-Projects/releases</A> </span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:184.50px" class="cls_003"><span class="cls_003">This game will use the left mouse button as an input. The Input Map does not have any default actions</span></div>
<div style="position:absolute;left:5.00px;top:202.50px" class="cls_003"><span class="cls_003">defined for this, so you need to add one. Open Project | Project Settings and go to the Input Map tab.</span></div>
<div style="position:absolute;left:5.00px;top:220.50px" class="cls_003"><span class="cls_003">Add a new action called click, then click the plus to add a Mouse Button event to it. Choose Left</span></div>
<div style="position:absolute;left:5.00px;top:238.50px" class="cls_003"><span class="cls_003">Button:</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:227768px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background291.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Creating the course</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">For the first scene, add a node called </span><span class="cls_010">Main</span><span class="cls_003"> to serve as your scene's root. This scene will contain the</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">major parts of the game, starting with the course itself. Start by adding a </span><span class="cls_010">GridMap</span><span class="cls_003"> node to lay out the</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">course.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:228570px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background292.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">GridMaps</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_010"><span class="cls_010">GridMap</span><span class="cls_003"> is the 3D equivalent of the </span><span class="cls_010">TileMap</span><span class="cls_003"> node you used in earlier projects. It allows you to use a</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">collection of meshes (contained in a </span><span class="cls_010">MeshLibrary</span><span class="cls_003">) and lay them out in a grid to more quickly design an</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">environment. Because it is 3D, you can stack the meshes in any direction, although for this project,</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">you'll stick to the same plane.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:229372px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background293.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Making a MeshLibrary</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">The </span><span class="cls_010">res://assets</span><span class="cls_003"> folder contains a pre-generated </span><span class="cls_010">MeshLibrary</span><span class="cls_003"> for the project, containing all the necessary</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">course parts along with collision shapes. However, if you need to change it or make your own, you'll</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">find the procedure is very similar to how </span><span class="cls_010">TileSet</span><span class="cls_003"> is created in 2D.</span></div>
<div style="position:absolute;left:52.98px;top:148.50px" class="cls_008"><span class="cls_008">The scene used to create the pre-generated </span><span class="cls_011">MeshLibrary</span><span class="cls_008"> can also be found in the </span><span class="cls_011">res://assets</span><span class="cls_008"> folder. Its name is</span></div>
<div style="position:absolute;left:52.98px;top:162.00px" class="cls_011"><span class="cls_011">course_tiles_edit1.tscn</span><span class="cls_008">. Feel free to open it and look at how it is set up.</span></div>
<div style="position:absolute;left:5.00px;top:191.25px" class="cls_003"><span class="cls_003">Start by making a new scene, with a </span><span class="cls_010">Spatial</span><span class="cls_003"> as its root. To this node, add any number of </span><span class="cls_010">MeshInstance</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:209.25px" class="cls_003"><span class="cls_003">You can find the original course meshes, exported from Blender, in the </span><span class="cls_010">res://assets/dae</span><span class="cls_003"> folder.</span></div>
<div style="position:absolute;left:5.00px;top:242.25px" class="cls_003"><span class="cls_003">The names you give to these nodes will be their names in the </span><span class="cls_010">MeshLibrary</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:275.25px" class="cls_003"><span class="cls_003">Once you have added the meshes, they need static collision bodies added to them. Creating collision</span></div>
<div style="position:absolute;left:5.00px;top:293.25px" class="cls_003"><span class="cls_003">shapes that match a given mesh can be complicated, but Godot has a method of automatically</span></div>
<div style="position:absolute;left:5.00px;top:311.25px" class="cls_003"><span class="cls_003">generating them.</span></div>
<div style="position:absolute;left:5.00px;top:344.25px" class="cls_003"><span class="cls_003">Select a mesh and you'll see a </span><span class="cls_010">Mesh</span><span class="cls_003"> menu appear at the top of the editor window:</span></div>
<div style="position:absolute;left:5.00px;top:603.00px" class="cls_003"><span class="cls_003">Select Create Trimesh Static Body and Godot will create a </span><span class="cls_010">StaticBody</span><span class="cls_003"> and add a </span><span class="cls_010">CollisionShape</span><span class="cls_003"> using the</span></div>
<div style="position:absolute;left:5.00px;top:621.00px" class="cls_003"><span class="cls_003">mesh's data:</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:230174px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background294.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:3.00px" class="cls_003"><span class="cls_003">Do this with each of your mesh objects, and then select Scene | Convert To | MeshLibrary to save the</span></div>
<div style="position:absolute;left:5.00px;top:21.00px" class="cls_003"><span class="cls_003">resource.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:230976px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background295.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Drawing the course</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Drag the </span><span class="cls_010">MeshLibrary</span><span class="cls_003"> (</span><span class="cls_010">res://assets/course_tiles.tres</span><span class="cls_003"> or the one you created) into the Theme property of</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_010"><span class="cls_010">GridMap</span><span class="cls_003"> in the Inspector. Also, check that the Cell/Size property is set to </span><span class="cls_010">(2, 2, 2)</span><span class="cls_003">:</span></div>
<div style="position:absolute;left:5.00px;top:228.00px" class="cls_003"><span class="cls_003">Try drawing by selecting the tile piece from the list on the right and placing it by left-clicking in the</span></div>
<div style="position:absolute;left:5.00px;top:246.00px" class="cls_003"><span class="cls_003">editor window. You can rotate a piece around the y axis by pressing </span><span class="cls_012">S</span><span class="cls_003">. To remove a tile, use </span><span class="cls_012">Shift</span><span class="cls_003"> +</span></div>
<div style="position:absolute;left:5.00px;top:264.00px" class="cls_003"><span class="cls_003">right-click.</span></div>
<div style="position:absolute;left:5.00px;top:297.00px" class="cls_003"><span class="cls_003">For now, stick to a simple course; you can get fancy later when everything is working. Don't forget the</span></div>
<div style="position:absolute;left:5.00px;top:315.00px" class="cls_003"><span class="cls_003">hole!</span></div>
<div style="position:absolute;left:5.00px;top:516.00px" class="cls_003"><span class="cls_003">Now, it's time to see what this is going to look like when the game is run. Add a </span><span class="cls_010">Camera</span><span class="cls_003"> to the scene.</span></div>
<div style="position:absolute;left:5.00px;top:534.00px" class="cls_003"><span class="cls_003">Move it up and angle it so it looks down on the course. Remember, you can use the Preview button to</span></div>
<div style="position:absolute;left:5.00px;top:552.00px" class="cls_003"><span class="cls_003">check what the camera sees.</span></div>
<div style="position:absolute;left:5.00px;top:585.00px" class="cls_003"><span class="cls_003">Run the scene. You'll see that everything seems very dark. By default, there is minimal environmental</span></div>
<div style="position:absolute;left:5.00px;top:603.00px" class="cls_003"><span class="cls_003">light in the scene. To see more clearly, you need to add more light.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:231778px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background296.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">WorldEnvironment</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Lighting is a complex subject all on its own. Deciding where to place lights and how to set their color</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">and intensity can dramatically affect how a scene looks.</span></div>
<div style="position:absolute;left:5.00px;top:130.50px" class="cls_003"><span class="cls_003">Godot provides three lighting nodes in 3D:</span></div>
<div style="position:absolute;left:34.99px;top:162.75px" class="cls_010"><span class="cls_010">OmniLight</span><span class="cls_003">: For light that is emitted in all directions, like from a light bulb or candle</span></div>
<div style="position:absolute;left:34.99px;top:180.00px" class="cls_010"><span class="cls_010">DirectionalLight</span><span class="cls_003">: Infinite light from a distant source, such as sunlight</span></div>
<div style="position:absolute;left:34.99px;top:197.25px" class="cls_010"><span class="cls_010">SpotLight</span><span class="cls_003">: Directional light from a single source, such as a flashlight</span></div>
<div style="position:absolute;left:5.00px;top:230.25px" class="cls_003"><span class="cls_003">In addition to using individual lights, you can also set an </span><span class="cls_012">ambient</span><span class="cls_003"> light using </span><span class="cls_010">WorldEnvironment</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:263.25px" class="cls_003"><span class="cls_003">Add a </span><span class="cls_010">WorldEnvironment</span><span class="cls_003"> node to the scene. In the Inspector, select New Environment in the Environment</span></div>
<div style="position:absolute;left:5.00px;top:281.25px" class="cls_003"><span class="cls_003">property. Everything will turn black, but don't worry, you'll fix that soon:</span></div>
<div style="position:absolute;left:5.00px;top:461.25px" class="cls_003"><span class="cls_003">Click on New Environment and you'll see a large list of properties. The one you want is Ambient</span></div>
<div style="position:absolute;left:5.00px;top:479.25px" class="cls_003"><span class="cls_003">Light. Set Color to white and you'll see your scene become more brightly lit.</span></div>
<div style="position:absolute;left:52.98px;top:512.25px" class="cls_008"><span class="cls_008">Keep in mind that ambient light comes from all directions equally. If your scene needs shadows or other light</span></div>
<div style="position:absolute;left:52.98px;top:525.75px" class="cls_008"><span class="cls_008">effects, you'll want to use one of the </span><span class="cls_011">Light</span><span class="cls_008"> nodes. You'll see how light nodes work later in the chapter.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:232580px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background297.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Finishing the scene</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Now that you have the course laid out, two more items remain: the </span><span class="cls_012">tee,</span><span class="cls_003"> or location where the ball will</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">start, and a way to detect when the ball has entered the hole.</span></div>
<div style="position:absolute;left:5.00px;top:130.50px" class="cls_003"><span class="cls_003">Add a </span><span class="cls_010">Position3D</span><span class="cls_003"> node named </span><span class="cls_010">Tee</span><span class="cls_003">. Just like </span><span class="cls_010">Position2D</span><span class="cls_003">, this node is used to mark a location in space.</span></div>
<div style="position:absolute;left:5.00px;top:148.50px" class="cls_003"><span class="cls_003">Place this node where you want the ball to start. Make sure you put it just above the surface so that the</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">ball doesn't spawn inside the ground.</span></div>
<div style="position:absolute;left:5.00px;top:199.50px" class="cls_003"><span class="cls_003">To detect the ball entering the hole, you can use an </span><span class="cls_010">Area</span><span class="cls_003"> node. This node is directly analogous to the</span></div>
<div style="position:absolute;left:5.00px;top:217.50px" class="cls_003"><span class="cls_003">2D version: it can signal when a body enters its assigned shape. Add an </span><span class="cls_010">Area</span><span class="cls_003"> and give it a </span><span class="cls_010">CollisionShape</span></div>
<div style="position:absolute;left:5.00px;top:235.50px" class="cls_003"><span class="cls_003">child.</span></div>
<div style="position:absolute;left:5.00px;top:268.50px" class="cls_003"><span class="cls_003">In the child's Shape property of the </span><span class="cls_010">CollisionShape</span><span class="cls_003">, add a </span><span class="cls_010">SphereShape</span><span class="cls_003">:</span></div>
<div style="position:absolute;left:5.00px;top:552.75px" class="cls_003"><span class="cls_003">To size the collision sphere, use the single radius adjustment handle:</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:233382px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background298.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:3.00px" class="cls_003"><span class="cls_003">Place the </span><span class="cls_010">Area</span><span class="cls_003"> just below the hole and size the collision shape so that it overlaps the bottom of the</span></div>
<div style="position:absolute;left:5.00px;top:21.00px" class="cls_003"><span class="cls_003">hole. Don't let it project above the top of the hole, or the ball will count as </span><span class="cls_012">in</span><span class="cls_003"> when it hasn't dropped</span></div>
<div style="position:absolute;left:5.00px;top:39.00px" class="cls_003"><span class="cls_003">in yet.</span></div>
<div style="position:absolute;left:5.00px;top:252.00px" class="cls_003"><span class="cls_003">You may find it easier to position the node if you use the Perspective button to view the hole from one</span></div>
<div style="position:absolute;left:5.00px;top:270.00px" class="cls_003"><span class="cls_003">direction at at time. When you've finished positioning it, change the name of the </span><span class="cls_010">Area</span><span class="cls_003"> to </span><span class="cls_010">Hole</span><span class="cls_003">.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:234184px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background299.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Ball</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Now, you're ready to make the ball. Since the ball needs physics—gravity, friction, collision with</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">walls, and other physics properties—</span><span class="cls_010">RigidBody</span><span class="cls_003"> will be the best choice of node. Create a new scene</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">with a </span><span class="cls_010">RigidBody</span><span class="cls_003"> named </span><span class="cls_010">Ball</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:148.50px" class="cls_003"><span class="cls_003">RigidBody is the 3D equivalent of the </span><span class="cls_010">RigidBody2D</span><span class="cls_003"> node you used in </span><span class="cls_009">Chapter 3</span><span class="cls_003">, </span><span class="cls_012">Escape the Maze</span><span class="cls_003">. Its</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">behavior and properties are very similar, and you use many of the same methods to interact with it,</span></div>
<div style="position:absolute;left:5.00px;top:184.50px" class="cls_003"><span class="cls_003">such as </span><span class="cls_010">apply_impulse()</span><span class="cls_003"> and </span><span class="cls_010">_integrate_forces()</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:217.50px" class="cls_003"><span class="cls_003">The shape of the ball needs to be a sphere. The basic 3D shapes such as sphere, cube, cylinder, and</span></div>
<div style="position:absolute;left:5.00px;top:235.50px" class="cls_003"><span class="cls_003">so on are called </span><span class="cls_012">primitives</span><span class="cls_003">. Godot can automatically make primitives using the </span><span class="cls_010">MeshInstance</span><span class="cls_003"> node, so</span></div>
<div style="position:absolute;left:5.00px;top:253.50px" class="cls_003"><span class="cls_003">add one as a child of the body. In the Inspector, choose New SphereMesh in the Mesh property:</span></div>
<div style="position:absolute;left:5.00px;top:495.00px" class="cls_003"><span class="cls_003">The default size is much too large, so click on the new sphere mesh and set its size properties, Radius</span></div>
<div style="position:absolute;left:5.00px;top:513.00px" class="cls_003"><span class="cls_003">to </span><span class="cls_010">0.15</span><span class="cls_003"> and Height to </span><span class="cls_010">0.3</span><span class="cls_003">:</span></div>
<div style="position:absolute;left:5.00px;top:704.25px" class="cls_003"><span class="cls_003">Next, add a </span><span class="cls_010">CollisionShape</span><span class="cls_003"> node to the </span><span class="cls_010">Ball</span><span class="cls_003"> and give it a </span><span class="cls_010">SphereShape</span><span class="cls_003">. Size it to fit the mesh using the size</span></div>
<div style="position:absolute;left:5.00px;top:722.25px" class="cls_003"><span class="cls_003">handle (orange dot):</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:234986px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background300.jpg" width=612 height=792></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:235788px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background301.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Testing the ball</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">To test the ball, add it to the </span><span class="cls_010">Main</span><span class="cls_003"> scene with the instance button. Position it somewhere above the</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">course and hit Play. You should see the ball fall and land on the ground. You may find it helpful to add</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">another </span><span class="cls_010">Camera</span><span class="cls_003"> node positioned on the side of the course for a different view. Set the Current property</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">on whichever camera you want to use.</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">You can also temporarily give the ball some motion by setting its Linear/Velocity property. Try setting</span></div>
<div style="position:absolute;left:5.00px;top:184.50px" class="cls_003"><span class="cls_003">it to different values and playing the scene. Remember that the </span><span class="cls_012">y</span><span class="cls_003"> axis is up and that using too large a</span></div>
<div style="position:absolute;left:5.00px;top:202.50px" class="cls_003"><span class="cls_003">value may cause the ball to go right through the wall. Set it back to </span><span class="cls_010">(0, 0, 0)</span><span class="cls_003"> when you're done.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:236590px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background302.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Improving collisions</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">You may have noticed when adjusting the velocity that the ball sometimes goes straight through the</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">wall and/or bounces oddly, especially if you choose a high value. There are a few adjustments you</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">can make to the </span><span class="cls_010">RigidBody</span><span class="cls_003"> properties to improve the collision behavior at high speeds.</span></div>
<div style="position:absolute;left:5.00px;top:148.50px" class="cls_003"><span class="cls_003">First, turn on </span><span class="cls_002">Continuous Collision Detection</span><span class="cls_003"> (</span><span class="cls_002">CCD</span><span class="cls_003">). You'll find it listed as Continuous Cd in the</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">Inspector. Using CCD alters the way the physics engine calculates collisions. Normally, the engine</span></div>
<div style="position:absolute;left:5.00px;top:184.50px" class="cls_003"><span class="cls_003">operates by first moving the object and then testing for and resolving collisions. This is fast, and</span></div>
<div style="position:absolute;left:5.00px;top:202.50px" class="cls_003"><span class="cls_003">works in most common situations. When using CCD, however, the engine projects the object's</span></div>
<div style="position:absolute;left:5.00px;top:220.50px" class="cls_003"><span class="cls_003">movement along its path and attempts to predict where the collision may occur. This is slower than</span></div>
<div style="position:absolute;left:5.00px;top:238.50px" class="cls_003"><span class="cls_003">the default behavior, and so not as efficient, especially when simulating many objects, but it is much</span></div>
<div style="position:absolute;left:5.00px;top:256.50px" class="cls_003"><span class="cls_003">more accurate. Since you only have one ball in the game, CCD is a good option because it won't</span></div>
<div style="position:absolute;left:5.00px;top:274.50px" class="cls_003"><span class="cls_003">introduce any noticeable performance penalty, but will greatly improve collision detection.</span></div>
<div style="position:absolute;left:5.00px;top:307.50px" class="cls_003"><span class="cls_003">The ball also needs a little more action, so set the Bounce to </span><span class="cls_010">0.2</span><span class="cls_003"> and the Gravity Scale to </span><span class="cls_010">2</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:340.50px" class="cls_003"><span class="cls_003">Finally, you may also have noticed that the ball takes a long time to come to a stop. Set</span></div>
<div style="position:absolute;left:5.00px;top:358.50px" class="cls_003"><span class="cls_003">the Linear/Damp property to </span><span class="cls_010">0.5</span><span class="cls_003"> and Angular/Damp to </span><span class="cls_010">0.1</span><span class="cls_003"> so that you won't have to wait as long for</span></div>
<div style="position:absolute;left:5.00px;top:376.50px" class="cls_003"><span class="cls_003">the ball to stop moving.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:237392px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background303.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">UI</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Now that the ball is on the course, you need a way to aim and hit the ball. There are a number of</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">possible control schemes for a game of this type. For this project, you'll use a two-step process:</span></div>
<div style="position:absolute;left:16.25px;top:129.75px" class="cls_003"><span class="cls_003">1. Aim: An arrow will appear swinging back and forth. Clicking the mouse button will set the aim</span></div>
<div style="position:absolute;left:34.99px;top:147.00px" class="cls_003"><span class="cls_003">direction to the arrow's.</span></div>
<div style="position:absolute;left:16.25px;top:164.25px" class="cls_003"><span class="cls_003">2. Shoot: A power bar will move up and down on the screen. Clicking the mouse will set the</span></div>
<div style="position:absolute;left:34.99px;top:181.50px" class="cls_003"><span class="cls_003">power and launch the ball.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:238194px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background304.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Aiming arrow</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Drawing an object in 3D is not as easy as it is in 2D. In many cases, you'll have to switch to a 3D</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">modeling program such as Blender to create your game's objects. However, in this case Godot's</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">primitives have you covered; to make an arrow, you just need two meshes: a long, thin rectangle and a</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">triangular prism.</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">Start a new scene by adding a </span><span class="cls_010">Spatial</span><span class="cls_003"> node with a </span><span class="cls_010">MeshInstance</span><span class="cls_003"> child. Add a new </span><span class="cls_010">CubeMesh</span><span class="cls_003">. Click on the</span></div>
<div style="position:absolute;left:5.00px;top:184.50px" class="cls_003"><span class="cls_003">Mesh property and set the Size property to </span><span class="cls_010">(0.5, 0.2, 2)</span><span class="cls_003">. This is the body of the arrow, but it still has</span></div>
<div style="position:absolute;left:5.00px;top:202.50px" class="cls_003"><span class="cls_003">one problem. If you rotate the parent, the mesh rotates around its center. Instead, you need the arrow</span></div>
<div style="position:absolute;left:5.00px;top:220.50px" class="cls_003"><span class="cls_003">to rotate around its end, so change the Transform/Translation of MeshInstance to </span><span class="cls_010">(0, 0, -1)</span><span class="cls_003">:</span></div>
<div style="position:absolute;left:5.00px;top:546.75px" class="cls_003"><span class="cls_003">Try rotating the </span><span class="cls_010">Arrow</span><span class="cls_003"> (root) node with the gizmo to confirm that the shape is now offset correctly.</span></div>
<div style="position:absolute;left:5.00px;top:579.75px" class="cls_003"><span class="cls_003">To create the point of the arrow, add another </span><span class="cls_010">MeshInstance</span><span class="cls_003">, and this time choose New PrismMesh. Set</span></div>
<div style="position:absolute;left:5.00px;top:597.75px" class="cls_003"><span class="cls_003">its size to </span><span class="cls_010">(1.5, 2, 0.5)</span><span class="cls_003">. You now have a flat triangle shape. To place it properly at the end of the</span></div>
<div style="position:absolute;left:5.00px;top:615.75px" class="cls_003"><span class="cls_003">rectangle, change the mesh's Transform/Translation to </span><span class="cls_010">(0, 0, -3)</span><span class="cls_003"> and its Rotation Degrees to </span><span class="cls_010">(-90, 0, 0)</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:52.98px;top:648.75px" class="cls_008"><span class="cls_008">Using primitives is a quick way to create placeholder objects directly in Godot without having to open up your 3D</span></div>
<div style="position:absolute;left:52.98px;top:662.25px" class="cls_008"><span class="cls_008">modeling software.</span></div>
<div style="position:absolute;left:5.00px;top:691.50px" class="cls_003"><span class="cls_003">Finally, scale the whole arrow down by setting the root node's Transform/Scale to </span><span class="cls_010">(0.5, 0.5, 0.5)</span><span class="cls_003">:</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:238996px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background305.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:168.00px" class="cls_003"><span class="cls_003">You now have a completed arrow shape. Save it, then instance it in the </span><span class="cls_010">Main</span><span class="cls_003"> scene.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:239798px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background306.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">UI display</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Create a new scene with a CanvasLayer called </span><span class="cls_010">UI</span><span class="cls_003">. In this scene, you'll show the power bar as well as</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">the shot count for the player's score. Add a </span><span class="cls_010">MarginContainer</span><span class="cls_003">, </span><span class="cls_010">VBoxContainer</span><span class="cls_003">, two </span><span class="cls_010">Label</span><span class="cls_003"> properties, and a</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_010"><span class="cls_010">TextureProgress</span><span class="cls_003">. Name them as shown:</span></div>
<div style="position:absolute;left:5.00px;top:321.75px" class="cls_003"><span class="cls_003">Set the Custom Constants of </span><span class="cls_010">MarginContainer</span><span class="cls_003"> all to </span><span class="cls_010">20</span><span class="cls_003">. Add the </span><span class="cls_010">Xolonium-Regular.ttf</span><span class="cls_003"> font to both of the </span><span class="cls_010">Label</span></div>
<div style="position:absolute;left:5.00px;top:339.75px" class="cls_003"><span class="cls_003">nodes and set their font sizes to </span><span class="cls_010">30</span><span class="cls_003">. Set the </span><span class="cls_010">Shots</span><span class="cls_003"> label's Text to Shots: 0 and the </span><span class="cls_010">Label</span><span class="cls_003"> Text to Power.</span></div>
<div style="position:absolute;left:5.00px;top:357.75px" class="cls_003"><span class="cls_003">Drag one of the colored bar textures from </span><span class="cls_010">res://assets</span><span class="cls_003"> into the Texture/Progress of </span><span class="cls_010">PowerBar</span><span class="cls_003">. By default,</span></div>
<div style="position:absolute;left:5.00px;top:375.75px" class="cls_010"><span class="cls_010">TextureProgress</span><span class="cls_003"> bars grow from left to right, so for a vertical orientation, change the Fill Mode to</span></div>
<div style="position:absolute;left:5.00px;top:393.75px" class="cls_003"><span class="cls_003">Bottom to Top.</span></div>
<div style="position:absolute;left:5.00px;top:426.75px" class="cls_003"><span class="cls_003">The completed UI layout should look like this:</span></div>
<div style="position:absolute;left:5.00px;top:601.50px" class="cls_003"><span class="cls_003">Instance this scene in the </span><span class="cls_010">Main</span><span class="cls_003"> scene. Because it's a CanvasLayer, it will be drawn on top of the 3D</span></div>
<div style="position:absolute;left:5.00px;top:619.50px" class="cls_003"><span class="cls_003">camera view.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:240600px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background307.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Scripts</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">In this section, you'll create the scripts needed to make everything work together. The flow of the</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">game will be as follows:</span></div>
<div style="position:absolute;left:16.25px;top:129.75px" class="cls_003"><span class="cls_003">1. Place the ball at the start (</span><span class="cls_010">Tee</span><span class="cls_003">)</span></div>
<div style="position:absolute;left:16.25px;top:147.00px" class="cls_003"><span class="cls_003">2. Angle mode: Aim the ball</span></div>
<div style="position:absolute;left:16.25px;top:164.25px" class="cls_003"><span class="cls_003">3. Power mode: Set the hit power</span></div>
<div style="position:absolute;left:16.25px;top:181.50px" class="cls_003"><span class="cls_003">4. Launch the ball</span></div>
<div style="position:absolute;left:16.25px;top:198.75px" class="cls_003"><span class="cls_003">5. Repeat from step 2 until the ball is in the hole</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:241402px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background308.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">UI</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Add the following script to the </span><span class="cls_010">UI</span><span class="cls_003"> to update the UI elements:</span></div>
<div style="position:absolute;left:19.99px;top:114.00px" class="cls_010"><span class="cls_010">extends CanvasLayer</span></div>
<div style="position:absolute;left:19.99px;top:136.50px" class="cls_010"><span class="cls_010">var bar_red = preload("res://assets/bar_red.png")</span></div>
<div style="position:absolute;left:19.99px;top:147.75px" class="cls_010"><span class="cls_010">var bar_green = preload("res://assets/bar_green.png")</span></div>
<div style="position:absolute;left:19.99px;top:159.00px" class="cls_010"><span class="cls_010">var bar_yellow = preload("res://assets/bar_yellow.png")</span></div>
<div style="position:absolute;left:19.99px;top:181.50px" class="cls_010"><span class="cls_010">func update_shots(value):</span></div>
<div style="position:absolute;left:40.99px;top:192.75px" class="cls_010"><span class="cls_010">$Margin/Container/Shots.text = 'Shots: %s' % value</span></div>
<div style="position:absolute;left:19.99px;top:215.25px" class="cls_010"><span class="cls_010">func update_powerbar(value):</span></div>
<div style="position:absolute;left:40.99px;top:226.50px" class="cls_010"><span class="cls_010">$Margin/Container/PowerBar.texture_progress = bar_green</span></div>
<div style="position:absolute;left:40.99px;top:237.75px" class="cls_010"><span class="cls_010">if value > 70:</span></div>
<div style="position:absolute;left:61.98px;top:249.00px" class="cls_010"><span class="cls_010">$Margin/Container/PowerBar.texture_progress = bar_red</span></div>
<div style="position:absolute;left:40.99px;top:260.25px" class="cls_010"><span class="cls_010">elif value > 40:</span></div>
<div style="position:absolute;left:61.98px;top:271.50px" class="cls_010"><span class="cls_010">$Margin/Container/PowerBar.texture_progress = bar_yellow</span></div>
<div style="position:absolute;left:40.99px;top:282.75px" class="cls_010"><span class="cls_010">$Margin/Container/PowerBar.value = value</span></div>
<div style="position:absolute;left:5.00px;top:307.50px" class="cls_003"><span class="cls_003">The two functions provide a way to update the UI elements when they need to display a new value.</span></div>
<div style="position:absolute;left:5.00px;top:325.50px" class="cls_003"><span class="cls_003">As you did in the Space Rocks game, changing the progress bar's texture based on its size gives a nice</span></div>
<div style="position:absolute;left:5.00px;top:343.50px" class="cls_003"><span class="cls_003">high/medium/low feel to the power level.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:242204px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background309.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Main</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Next, add a script to </span><span class="cls_010">Main</span><span class="cls_003"> and start with these variables:</span></div>
<div style="position:absolute;left:19.99px;top:114.00px" class="cls_010"><span class="cls_010">extends Node</span></div>
<div style="position:absolute;left:19.99px;top:136.50px" class="cls_010"><span class="cls_010">var shots = 0</span></div>
<div style="position:absolute;left:19.99px;top:147.75px" class="cls_010"><span class="cls_010">var state</span></div>
<div style="position:absolute;left:19.99px;top:159.00px" class="cls_010"><span class="cls_010">var power = 0</span></div>
<div style="position:absolute;left:19.99px;top:170.25px" class="cls_010"><span class="cls_010">var power_change = 1</span></div>
<div style="position:absolute;left:19.99px;top:181.50px" class="cls_010"><span class="cls_010">var power_speed = 100</span></div>
<div style="position:absolute;left:19.99px;top:192.75px" class="cls_010"><span class="cls_010">var angle_change = 1</span></div>
<div style="position:absolute;left:19.99px;top:204.00px" class="cls_010"><span class="cls_010">var angle_speed = 1.1</span></div>
<div style="position:absolute;left:19.99px;top:215.25px" class="cls_010"><span class="cls_010">enum {SET_ANGLE, SET_POWER, SHOOT, WIN}</span></div>
<div style="position:absolute;left:5.00px;top:240.00px" class="cls_003"><span class="cls_003">The </span><span class="cls_010">enum</span><span class="cls_003"> lists the states the game can be in, while the </span><span class="cls_010">power*</span><span class="cls_003"> and </span><span class="cls_010">angle*</span><span class="cls_003"> variables will be used to set</span></div>
<div style="position:absolute;left:5.00px;top:258.00px" class="cls_003"><span class="cls_003">their respective values and change them over time. Take a look at the following code snippet:</span></div>
<div style="position:absolute;left:19.99px;top:292.50px" class="cls_010"><span class="cls_010">func _ready():</span></div>
<div style="position:absolute;left:40.99px;top:303.75px" class="cls_010"><span class="cls_010">$Arrow.hide()</span></div>
<div style="position:absolute;left:40.99px;top:315.00px" class="cls_010"><span class="cls_010">$Ball.transform.origin = $Tee.transform.origin</span></div>
<div style="position:absolute;left:40.99px;top:326.25px" class="cls_010"><span class="cls_010">change_state(SET_ANGLE)</span></div>
<div style="position:absolute;left:5.00px;top:351.00px" class="cls_003"><span class="cls_003">At the beginning, the ball is placed at the location of the </span><span class="cls_010">Tee</span><span class="cls_003"> using both bodies' </span><span class="cls_010">transform.origin</span></div>
<div style="position:absolute;left:5.00px;top:369.00px" class="cls_003"><span class="cls_003">properties. Then, the game is put into the </span><span class="cls_010">SET_ANGLE</span><span class="cls_003"> state:</span></div>
<div style="position:absolute;left:19.99px;top:403.50px" class="cls_010"><span class="cls_010">func change_state(new_state):</span></div>
<div style="position:absolute;left:40.99px;top:414.75px" class="cls_010"><span class="cls_010">state = new_state</span></div>
<div style="position:absolute;left:40.99px;top:426.00px" class="cls_010"><span class="cls_010">match state:</span></div>
<div style="position:absolute;left:61.98px;top:437.25px" class="cls_010"><span class="cls_010">SET_ANGLE:</span></div>
<div style="position:absolute;left:82.97px;top:448.50px" class="cls_010"><span class="cls_010">$Arrow.transform.origin = $Ball.transform.origin</span></div>
<div style="position:absolute;left:82.97px;top:459.75px" class="cls_010"><span class="cls_010">$Arrow.show()</span></div>
<div style="position:absolute;left:61.98px;top:471.00px" class="cls_010"><span class="cls_010">SET_POWER:</span></div>
<div style="position:absolute;left:82.97px;top:482.25px" class="cls_010"><span class="cls_010">pass</span></div>
<div style="position:absolute;left:61.98px;top:493.50px" class="cls_010"><span class="cls_010">SHOOT:</span></div>
<div style="position:absolute;left:82.97px;top:504.75px" class="cls_010"><span class="cls_010">$Arrow.hide()</span></div>
<div style="position:absolute;left:82.97px;top:516.00px" class="cls_010"><span class="cls_010">$Ball.shoot($Arrow.rotation.y, power)</span></div>
<div style="position:absolute;left:82.97px;top:527.25px" class="cls_010"><span class="cls_010">shots += 1</span></div>
<div style="position:absolute;left:82.97px;top:538.50px" class="cls_010"><span class="cls_010">$UI.update_shots(shots)</span></div>
<div style="position:absolute;left:61.98px;top:549.75px" class="cls_010"><span class="cls_010">WIN:</span></div>
<div style="position:absolute;left:82.97px;top:561.00px" class="cls_010"><span class="cls_010">$Ball.hide()</span></div>
<div style="position:absolute;left:82.97px;top:572.25px" class="cls_010"><span class="cls_010">$Arrow.hide()</span></div>
<div style="position:absolute;left:5.00px;top:597.00px" class="cls_003"><span class="cls_003">The </span><span class="cls_010">SET_ANGLE</span><span class="cls_003"> state places the arrow at the ball's location. Recall that you offset the arrow, so it will</span></div>
<div style="position:absolute;left:5.00px;top:615.00px" class="cls_003"><span class="cls_003">appear to be pointing out from the ball. When rotating the arrow, you rotate it around the </span><span class="cls_012">y</span><span class="cls_003"> axis so that</span></div>
<div style="position:absolute;left:5.00px;top:633.00px" class="cls_003"><span class="cls_003">it remains flat (the </span><span class="cls_012">y</span><span class="cls_003"> axis points upwards).</span></div>
<div style="position:absolute;left:5.00px;top:666.00px" class="cls_003"><span class="cls_003">Also, note that when entering the </span><span class="cls_010">SHOOT</span><span class="cls_003"> state, you call the </span><span class="cls_010">shoot()</span><span class="cls_003"> function on the </span><span class="cls_010">Ball</span><span class="cls_003">. You'll add that</span></div>
<div style="position:absolute;left:5.00px;top:684.00px" class="cls_003"><span class="cls_003">function in the next section.</span></div>
<div style="position:absolute;left:5.00px;top:717.00px" class="cls_003"><span class="cls_003">The next step is to check for user input:</span></div>
<div style="position:absolute;left:19.99px;top:751.50px" class="cls_010"><span class="cls_010">func _input(event):</span></div>
<div style="position:absolute;left:40.99px;top:762.75px" class="cls_010"><span class="cls_010">if event.is_action_pressed('click'):</span></div>
<div style="position:absolute;left:61.98px;top:774.00px" class="cls_010"><span class="cls_010">match state:</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:243006px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background310.jpg" width=612 height=792></div>
<div style="position:absolute;left:82.97px;top:4.81px" class="cls_010"><span class="cls_010">SET_ANGLE:</span></div>
<div style="position:absolute;left:103.96px;top:16.06px" class="cls_010"><span class="cls_010">change_state(SET_POWER)</span></div>
<div style="position:absolute;left:82.97px;top:27.31px" class="cls_010"><span class="cls_010">SET_POWER:</span></div>
<div style="position:absolute;left:103.96px;top:38.25px" class="cls_010"><span class="cls_010">change_state(SHOOT)</span></div>
<div style="position:absolute;left:5.00px;top:63.00px" class="cls_003"><span class="cls_003">The only input for the game is clicking the left mouse button. Depending on what state you're in,</span></div>
<div style="position:absolute;left:5.00px;top:81.00px" class="cls_003"><span class="cls_003">clicking it will transition to the next state:</span></div>
<div style="position:absolute;left:19.99px;top:115.50px" class="cls_010"><span class="cls_010">func _process(delta):</span></div>
<div style="position:absolute;left:40.99px;top:126.75px" class="cls_010"><span class="cls_010">match state:</span></div>
<div style="position:absolute;left:61.98px;top:138.00px" class="cls_010"><span class="cls_010">SET_ANGLE:</span></div>
<div style="position:absolute;left:82.97px;top:149.25px" class="cls_010"><span class="cls_010">animate_angle(delta)</span></div>
<div style="position:absolute;left:61.98px;top:160.50px" class="cls_010"><span class="cls_010">SET_POWER:</span></div>
<div style="position:absolute;left:82.97px;top:171.75px" class="cls_010"><span class="cls_010">animate_power_bar(delta)</span></div>
<div style="position:absolute;left:61.98px;top:183.00px" class="cls_010"><span class="cls_010">SHOOT:</span></div>
<div style="position:absolute;left:82.97px;top:194.25px" class="cls_010"><span class="cls_010">pass</span></div>
<div style="position:absolute;left:5.00px;top:219.00px" class="cls_003"><span class="cls_003">In </span><span class="cls_010">_process()</span><span class="cls_003">, you determine what to animate based on the state. For now, it just calls the function that</span></div>
<div style="position:absolute;left:5.00px;top:237.00px" class="cls_003"><span class="cls_003">animates the property that's currently being set:</span></div>
<div style="position:absolute;left:19.99px;top:271.50px" class="cls_010"><span class="cls_010">func animate_power_bar(delta):</span></div>
<div style="position:absolute;left:40.99px;top:282.75px" class="cls_010"><span class="cls_010">power += power_speed * power_change * delta</span></div>
<div style="position:absolute;left:40.99px;top:294.00px" class="cls_010"><span class="cls_010">if power >= 100:</span></div>
<div style="position:absolute;left:61.98px;top:305.25px" class="cls_010"><span class="cls_010">power_change = -1</span></div>
<div style="position:absolute;left:40.99px;top:316.50px" class="cls_010"><span class="cls_010">if power &lt;= 0:</span></div>
<div style="position:absolute;left:61.98px;top:327.75px" class="cls_010"><span class="cls_010">power_change = 1</span></div>
<div style="position:absolute;left:40.99px;top:339.00px" class="cls_010"><span class="cls_010">$UI.update_powerbar(power)</span></div>
<div style="position:absolute;left:19.99px;top:361.50px" class="cls_010"><span class="cls_010">func animate_angle(delta):</span></div>
<div style="position:absolute;left:40.99px;top:372.75px" class="cls_010"><span class="cls_010">$Arrow.rotation.y += angle_speed * angle_change * delta</span></div>
<div style="position:absolute;left:40.99px;top:384.00px" class="cls_010"><span class="cls_010">if $Arrow.rotation.y > PI/2:</span></div>
<div style="position:absolute;left:61.98px;top:395.25px" class="cls_010"><span class="cls_010">angle_change = -1</span></div>
<div style="position:absolute;left:40.99px;top:406.50px" class="cls_010"><span class="cls_010">if $Arrow.rotation.y &lt; -PI/2:</span></div>
<div style="position:absolute;left:61.98px;top:417.75px" class="cls_010"><span class="cls_010">angle_change = 1</span></div>
<div style="position:absolute;left:5.00px;top:442.50px" class="cls_003"><span class="cls_003">Both of these functions are similar. They gradually change a value between two extremes, reversing</span></div>
<div style="position:absolute;left:5.00px;top:460.50px" class="cls_003"><span class="cls_003">direction when a limit is hit. Note that the arrow is animating over a +/- 90-degree arc.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:243808px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background311.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Ball</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">In the ball script, there are two functions needed. First, an impulse must be applied to the ball to</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">launch it. Second, when the ball stops moving, it needs to notify the </span><span class="cls_010">Main</span><span class="cls_003"> scene so that the player can</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">take another shot:</span></div>
<div style="position:absolute;left:19.99px;top:150.00px" class="cls_010"><span class="cls_010">extends RigidBody</span></div>
<div style="position:absolute;left:19.99px;top:172.50px" class="cls_010"><span class="cls_010">signal stopped</span></div>
<div style="position:absolute;left:19.99px;top:195.00px" class="cls_010"><span class="cls_010">func shoot(angle, power):</span></div>
<div style="position:absolute;left:40.99px;top:206.25px" class="cls_010"><span class="cls_010">var force = Vector3(0, 0, -1).rotated(Vector3(0, 1, 0), angle)</span></div>
<div style="position:absolute;left:40.99px;top:217.50px" class="cls_010"><span class="cls_010">apply_impulse(Vector3(), force * power / 5)</span></div>
<div style="position:absolute;left:19.99px;top:240.00px" class="cls_010"><span class="cls_010">func _integrate_forces(state):</span></div>
<div style="position:absolute;left:40.99px;top:251.25px" class="cls_010"><span class="cls_010">if state.linear_velocity.length() &lt; 0.1:</span></div>
<div style="position:absolute;left:61.98px;top:262.50px" class="cls_010"><span class="cls_010">emit_signal("stopped")</span></div>
<div style="position:absolute;left:61.98px;top:273.75px" class="cls_010"><span class="cls_010">state.linear_velocity = Vector3()</span></div>
<div style="position:absolute;left:5.00px;top:298.50px" class="cls_003"><span class="cls_003">As you saw in the Space Rocks game, you can use the physics state in </span><span class="cls_010">_integrate_forces()</span><span class="cls_003"> to safely stop</span></div>
<div style="position:absolute;left:5.00px;top:316.50px" class="cls_003"><span class="cls_003">the ball if the speed has gotten too slow. Remember, due to floating point number precision, the</span></div>
<div style="position:absolute;left:5.00px;top:334.50px" class="cls_003"><span class="cls_003">velocity may not actually slow to </span><span class="cls_010">0</span><span class="cls_003"> on its own. The ball may appear to be stopped, but its velocity</span></div>
<div style="position:absolute;left:5.00px;top:352.50px" class="cls_003"><span class="cls_003">may actually be something like </span><span class="cls_010">0.0000001</span><span class="cls_003"> instead. Rather than wait for it to reach </span><span class="cls_010">0</span><span class="cls_003">, you can make the</span></div>
<div style="position:absolute;left:5.00px;top:370.50px" class="cls_003"><span class="cls_003">ball stop if its speed drops below </span><span class="cls_010">0.1</span><span class="cls_003">.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:244610px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background312.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Hole</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">To detect when the ball has dropped into the hole, click on the </span><span class="cls_010">Area</span><span class="cls_003"> in </span><span class="cls_010">Main</span><span class="cls_003"> and connect its </span><span class="cls_010">body_entered</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">signal:</span></div>
<div style="position:absolute;left:19.99px;top:132.00px" class="cls_010"><span class="cls_010">func _on_Hole_body_entered(body):</span></div>
<div style="position:absolute;left:40.99px;top:143.25px" class="cls_010"><span class="cls_010">print("Win!")</span></div>
<div style="position:absolute;left:40.99px;top:154.50px" class="cls_010"><span class="cls_010">change_state(WIN)</span></div>
<div style="position:absolute;left:5.00px;top:179.25px" class="cls_003"><span class="cls_003">Changing to the </span><span class="cls_010">WIN</span><span class="cls_003"> state will prevent the ball's </span><span class="cls_010">stopped</span><span class="cls_003"> signal from allowing another shot.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:245412px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background313.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Testing it out</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Try running the game. You may want to make sure you have a very easy course with a straight shot to</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">the hole for this part. You should see the arrow rotating at the ball's position. When you click the</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">mouse button, the arrow stops, and the power bar starts moving up and down. When you click a</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">second time, the ball is launched.</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">If any of those steps don't work, don't go any further, but stop and go back to try and find what you</span></div>
<div style="position:absolute;left:5.00px;top:184.50px" class="cls_003"><span class="cls_003">missed.</span></div>
<div style="position:absolute;left:5.00px;top:217.50px" class="cls_003"><span class="cls_003">Once everything is working, you'll notice some areas that need improvement. First, when the ball</span></div>
<div style="position:absolute;left:5.00px;top:235.50px" class="cls_003"><span class="cls_003">stops moving the arrow may not point in the direction you want. The reason for this is that the starting</span></div>
<div style="position:absolute;left:5.00px;top:253.50px" class="cls_003"><span class="cls_003">angle is always </span><span class="cls_010">0</span><span class="cls_003">, which points along the </span><span class="cls_012">z</span><span class="cls_003"> axis, and then the arrow swings +/- 90 degrees from</span></div>
<div style="position:absolute;left:5.00px;top:271.50px" class="cls_003"><span class="cls_003">there. In the next sections, you'll have the option of improving the aiming in two ways.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:246214px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background314.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Improving aiming - option 1</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">The aim could be improved by making the 180-degree swing of the arrow always begin by pointing</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">towards the hole.</span></div>
<div style="position:absolute;left:5.00px;top:130.50px" class="cls_003"><span class="cls_003">Add a variable called </span><span class="cls_010">hole_dir</span><span class="cls_003"> to the </span><span class="cls_010">Main</span><span class="cls_003"> script. At the start of aiming, this will be set to the angle</span></div>
<div style="position:absolute;left:5.00px;top:148.50px" class="cls_003"><span class="cls_003">pointing towards the hole using the following function:</span></div>
<div style="position:absolute;left:19.99px;top:183.00px" class="cls_010"><span class="cls_010">func set_start_angle():</span></div>
<div style="position:absolute;left:40.99px;top:194.25px" class="cls_010"><span class="cls_010">var hole_pos = Vector2($Hole.transform.origin.z, $Hole.transform.origin.x)</span></div>
<div style="position:absolute;left:40.99px;top:205.50px" class="cls_010"><span class="cls_010">var ball_pos = Vector2($Ball.transform.origin.z, $Ball.transform.origin.x)</span></div>
<div style="position:absolute;left:40.99px;top:216.75px" class="cls_010"><span class="cls_010">hole_dir = (ball_pos - hole_pos).angle()</span></div>
<div style="position:absolute;left:40.99px;top:228.00px" class="cls_010"><span class="cls_010">$Arrow.rotation.y = hole_dir</span></div>
<div style="position:absolute;left:5.00px;top:252.75px" class="cls_003"><span class="cls_003">Remember that the ball's position is its center, so it's slightly above the surface, while the hole's</span></div>
<div style="position:absolute;left:5.00px;top:270.75px" class="cls_003"><span class="cls_003">center is somewhat below. Because of this, an arrow pointing directly between them would point at a</span></div>
<div style="position:absolute;left:5.00px;top:288.75px" class="cls_003"><span class="cls_003">downward angle into the ground. To prevent this and keep the arrow level, you can use only the </span><span class="cls_012">x</span><span class="cls_003"> and</span></div>
<div style="position:absolute;left:5.00px;top:306.75px" class="cls_012"><span class="cls_012">z</span><span class="cls_003"> values from the </span><span class="cls_010">transform.origin</span><span class="cls_003"> to produce a </span><span class="cls_010">Vector2</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:339.75px" class="cls_003"><span class="cls_003">Now the initial arrow direction is towards the hole, so you can alter the animation to add +/-90</span></div>
<div style="position:absolute;left:5.00px;top:357.75px" class="cls_003"><span class="cls_003">degrees to that angle:</span></div>
<div style="position:absolute;left:19.99px;top:392.25px" class="cls_010"><span class="cls_010">func animate_angle(delta):</span></div>
<div style="position:absolute;left:40.99px;top:403.50px" class="cls_010"><span class="cls_010">$Arrow.rotation.y += angle_speed * angle_change * delta</span></div>
<div style="position:absolute;left:40.99px;top:414.75px" class="cls_010"><span class="cls_010">if $Arrow.rotation.y > hole_dir + PI/2:</span></div>
<div style="position:absolute;left:61.98px;top:426.00px" class="cls_010"><span class="cls_010">angle_change = -1</span></div>
<div style="position:absolute;left:40.99px;top:437.25px" class="cls_010"><span class="cls_010">if $Arrow.rotation.y &lt; hole_dir - PI/2:</span></div>
<div style="position:absolute;left:61.98px;top:448.50px" class="cls_010"><span class="cls_010">angle_change = 1</span></div>
<div style="position:absolute;left:5.00px;top:473.25px" class="cls_003"><span class="cls_003">Lastly, change the </span><span class="cls_010">SET_ANGLE</span><span class="cls_003"> state to call the function:</span></div>
<div style="position:absolute;left:19.99px;top:507.75px" class="cls_010"><span class="cls_010">SET_ANGLE:</span></div>
<div style="position:absolute;left:40.99px;top:519.00px" class="cls_010"><span class="cls_010">$Arrow.transform.origin = $Ball.transform.origin</span></div>
<div style="position:absolute;left:40.99px;top:530.25px" class="cls_010"><span class="cls_010">$Arrow.show()</span></div>
<div style="position:absolute;left:40.99px;top:541.50px" class="cls_010"><span class="cls_010">set_start_angle()</span></div>
<div style="position:absolute;left:5.00px;top:566.25px" class="cls_003"><span class="cls_003">Try the game again. The ball should now always point in the general direction of the hole. This is</span></div>
<div style="position:absolute;left:5.00px;top:584.25px" class="cls_003"><span class="cls_003">better, but you still can't point in any direction you like. For that, you can try aiming option 2.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:247016px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background315.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Improving aiming - option 2</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">The previous solution is acceptable, but there is another possibility. Instead of the arrow bouncing</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">back and forth, you can aim by moving the mouse side-to-side. The benefit of this option is that you're</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">not limited to 180 degrees of motion.</span></div>
<div style="position:absolute;left:5.00px;top:148.50px" class="cls_003"><span class="cls_003">To accomplish this, you can make use of a particular input event: </span><span class="cls_010">InputEventMouseMotion</span><span class="cls_003">. This event</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">occurs when the mouse moves, and returns with it a </span><span class="cls_010">relative</span><span class="cls_003"> property representing how far the mouse</span></div>
<div style="position:absolute;left:5.00px;top:184.50px" class="cls_003"><span class="cls_003">moved in the previous frame. You can use this value to rotate the arrow by a small amount.</span></div>
<div style="position:absolute;left:5.00px;top:217.50px" class="cls_003"><span class="cls_003">First, disable the arrow animation by removing the </span><span class="cls_010">SET_ANGLE</span><span class="cls_003"> portion from </span><span class="cls_010">_process()</span><span class="cls_003">. Next, add the</span></div>
<div style="position:absolute;left:5.00px;top:235.50px" class="cls_003"><span class="cls_003">following code to </span><span class="cls_010">_input()</span><span class="cls_003">:</span></div>
<div style="position:absolute;left:19.99px;top:270.00px" class="cls_010"><span class="cls_010">func _input(event):</span></div>
<div style="position:absolute;left:40.99px;top:281.25px" class="cls_010"><span class="cls_010">if event is InputEventMouseMotion:</span></div>
<div style="position:absolute;left:61.98px;top:292.50px" class="cls_010"><span class="cls_010">if state == SET_ANGLE:</span></div>
<div style="position:absolute;left:82.97px;top:303.75px" class="cls_010"><span class="cls_010">$Arrow.rotation.y -= event.relative.x / 150</span></div>
<div style="position:absolute;left:5.00px;top:328.50px" class="cls_003"><span class="cls_003">This sets the arrow's rotation as you move the mouse left/right on the screen. Dividing by </span><span class="cls_010">150</span><span class="cls_003"> ensures</span></div>
<div style="position:absolute;left:5.00px;top:346.50px" class="cls_003"><span class="cls_003">that the movement isn't too fast and that you can move a full 360 degrees if you move the mouse all the</span></div>
<div style="position:absolute;left:5.00px;top:364.50px" class="cls_003"><span class="cls_003">way from one side of the screen to the other. Depending on your mouse's sensitivity, you can adjust</span></div>
<div style="position:absolute;left:5.00px;top:382.50px" class="cls_003"><span class="cls_003">this to your preference.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:247818px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background316.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Camera improvements</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Another problem, especially if you have a relatively large course, is that if your camera is placed to</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">show the starting area near the tee, it may not show the other parts of the course well, or at all. This</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">can make it challenging to aim when the ball is in certain places.</span></div>
<div style="position:absolute;left:5.00px;top:148.50px" class="cls_003"><span class="cls_003">In this section, you'll learn two different ways to address this problem. One involves creating</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">multiple cameras and activating whichever one is closer to the ball's position. The other solution is to</span></div>
<div style="position:absolute;left:5.00px;top:184.50px" class="cls_003"><span class="cls_003">create an </span><span class="cls_012">orbiting</span><span class="cls_003"> camera that follows the ball and that the player can control to view the course from</span></div>
<div style="position:absolute;left:5.00px;top:202.50px" class="cls_003"><span class="cls_003">any angle.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:248620px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background317.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Multiple cameras</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Add a second </span><span class="cls_010">Camera</span><span class="cls_003"> node and position it near the hole or at the opposite end of your course, for</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">example:</span></div>
<div style="position:absolute;left:5.00px;top:307.50px" class="cls_003"><span class="cls_003">Add an </span><span class="cls_010">Area</span><span class="cls_003"> child to this second camera. Name it </span><span class="cls_010">Camera2Area</span><span class="cls_003"> and then add a </span><span class="cls_010">CollisionShape</span><span class="cls_003">. You could</span></div>
<div style="position:absolute;left:5.00px;top:325.50px" class="cls_003"><span class="cls_003">use a spherical shape just as well, but for this example, choose a </span><span class="cls_010">BoxShape</span><span class="cls_003">. Note that because you've</span></div>
<div style="position:absolute;left:5.00px;top:343.50px" class="cls_003"><span class="cls_003">rotated the camera, the box is rotated as well. You can reverse this by setting the rotation</span></div>
<div style="position:absolute;left:5.00px;top:361.50px" class="cls_003"><span class="cls_003">of </span><span class="cls_010">CollisionShape</span><span class="cls_003"> to the opposite value, or you can leave it rotated. Either way, adjust the size and</span></div>
<div style="position:absolute;left:5.00px;top:379.50px" class="cls_003"><span class="cls_003">position of the box to cover the portion of the course you want the camera to be responsible for:</span></div>
<div style="position:absolute;left:5.00px;top:602.25px" class="cls_003"><span class="cls_003">Now, connect the area's </span><span class="cls_010">body_entered</span><span class="cls_003"> signal to the main script. When the ball enters the area, the signal</span></div>
<div style="position:absolute;left:5.00px;top:620.25px" class="cls_003"><span class="cls_003">will be emitted, and you can change the active camera:</span></div>
<div style="position:absolute;left:19.99px;top:654.75px" class="cls_010"><span class="cls_010">func _on_Cam2Area_body_entered(body):</span></div>
<div style="position:absolute;left:40.99px;top:666.00px" class="cls_010"><span class="cls_010">$Camera2.current = true</span></div>
<div style="position:absolute;left:5.00px;top:690.75px" class="cls_003"><span class="cls_003">Play the game again and hit the ball toward the new camera area. Confirm that the camera view</span></div>
<div style="position:absolute;left:5.00px;top:708.75px" class="cls_003"><span class="cls_003">changes when the ball enters the area. For a large course, you can add as many cameras as you</span></div>
<div style="position:absolute;left:5.00px;top:726.75px" class="cls_003"><span class="cls_003">want/need and set them to activate for different sections of the course.</span></div>
<div style="position:absolute;left:5.00px;top:759.75px" class="cls_003"><span class="cls_003">The drawback of this method is that the cameras are still static. Unless you've very carefully placed</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:249422px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background318.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:3.31px" class="cls_003"><span class="cls_003">them in the right positions, it still may not be comfortable to aim the ball from some locations on the</span></div>
<div style="position:absolute;left:5.00px;top:21.00px" class="cls_003"><span class="cls_003">course.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:250224px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background319.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Orbiting camera</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">In many 3D games, the player can control a camera that rotates and moves as desired. Typically, the</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">control scheme uses a combination of mouse and keyboard. The first step will be to add some new</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">input actions:</span></div>
<div style="position:absolute;left:5.00px;top:386.25px" class="cls_003"><span class="cls_003">The WASD keys will be used to orbit the camera by moving it side to side and up and down. The</span></div>
<div style="position:absolute;left:5.00px;top:404.25px" class="cls_003"><span class="cls_003">mouse wheel will control zooming in/out.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:251026px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background320.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Creating a gimbal</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">The camera movement needs to have some restrictions. For one, it should always remain level, and</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">not be tilted side to side. Try this: take a camera and rotate it a small amount around x (red ring), then</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">a small amount around </span><span class="cls_012">z</span><span class="cls_003"> (blue ring). Now, reverse the </span><span class="cls_012">x</span><span class="cls_003"> rotation and click the Preview button. Do you</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">see how the camera is now tilted?</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">The solution to this problem is to place the camera on a </span><span class="cls_012">gimbal—</span><span class="cls_003">a device designed to keep an object</span></div>
<div style="position:absolute;left:5.00px;top:184.50px" class="cls_003"><span class="cls_003">level during movement. You can create a gimbal using two </span><span class="cls_010">Spatial</span><span class="cls_003"> nodes, which will control the</span></div>
<div style="position:absolute;left:5.00px;top:202.50px" class="cls_003"><span class="cls_003">camera's left/right and up/down movement respectively.</span></div>
<div style="position:absolute;left:5.00px;top:235.50px" class="cls_003"><span class="cls_003">First, make sure to remove any other </span><span class="cls_010">Camera</span><span class="cls_003"> nodes in the scene. If you tried the multiple camera setup</span></div>
<div style="position:absolute;left:5.00px;top:253.50px" class="cls_003"><span class="cls_003">from the previous section and you'd rather not delete them, you can set their Current values to Off</span></div>
<div style="position:absolute;left:5.00px;top:271.50px" class="cls_003"><span class="cls_003">and disconnect any </span><span class="cls_010">Area</span><span class="cls_003"> signals for them.</span></div>
<div style="position:absolute;left:5.00px;top:304.50px" class="cls_003"><span class="cls_003">Add a new </span><span class="cls_010">Spatial</span><span class="cls_003"> node called </span><span class="cls_010">GimbalOut</span><span class="cls_003"> and place it near the center of the course. Make sure not to</span></div>
<div style="position:absolute;left:5.00px;top:322.50px" class="cls_003"><span class="cls_003">rotate it. Give it a </span><span class="cls_010">Spatial</span><span class="cls_003"> child called </span><span class="cls_010">GimbalIn</span><span class="cls_003">, and then add a </span><span class="cls_010">Camera</span><span class="cls_003"> to that node. Set the</span></div>
<div style="position:absolute;left:5.00px;top:340.50px" class="cls_003"><span class="cls_003">Transform/Translation of Camera to </span><span class="cls_010">(0, 0, 10)</span><span class="cls_003">:</span></div>
<div style="position:absolute;left:5.00px;top:453.75px" class="cls_003"><span class="cls_003">Here's how the gimbal works: the outer spatial is allowed to rotate </span><span class="cls_012">only</span><span class="cls_003"> in </span><span class="cls_012">y</span><span class="cls_003">, while the inner one</span></div>
<div style="position:absolute;left:5.00px;top:471.75px" class="cls_003"><span class="cls_003">rotates </span><span class="cls_012">only</span><span class="cls_003"> in </span><span class="cls_012">x</span><span class="cls_003">. You can try it yourself, but make sure you change to Local Space Mode (see</span></div>
<div style="position:absolute;left:5.00px;top:489.75px" class="cls_003"><span class="cls_003">the </span><span class="cls_012">Introduction to 3D</span><span class="cls_003"> section). Remember to only move the </span><span class="cls_012">green</span><span class="cls_003"> ring of the outer gimbal node and</span></div>
<div style="position:absolute;left:5.00px;top:507.75px" class="cls_003"><span class="cls_003">only the </span><span class="cls_012">red</span><span class="cls_003"> ring of the inner one. Don't change the camera at all. Reset all the rotations to </span><span class="cls_010">0</span><span class="cls_003"> once</span></div>
<div style="position:absolute;left:5.00px;top:525.75px" class="cls_003"><span class="cls_003">you've finished experimenting.</span></div>
<div style="position:absolute;left:5.00px;top:558.75px" class="cls_003"><span class="cls_003">To control this motion in the game, attach a script to </span><span class="cls_010">GimbalOut</span><span class="cls_003"> and add the following:</span></div>
<div style="position:absolute;left:19.99px;top:604.50px" class="cls_010"><span class="cls_010">extends Spatial</span></div>
<div style="position:absolute;left:19.99px;top:627.00px" class="cls_010"><span class="cls_010">var cam_speed = PI/2</span></div>
<div style="position:absolute;left:19.99px;top:638.25px" class="cls_010"><span class="cls_010">var zoom_speed = 0.1</span></div>
<div style="position:absolute;left:19.99px;top:649.50px" class="cls_010"><span class="cls_010">var zoom = 0.5</span></div>
<div style="position:absolute;left:19.99px;top:672.00px" class="cls_010"><span class="cls_010">func _input(event):</span></div>
<div style="position:absolute;left:40.99px;top:683.25px" class="cls_010"><span class="cls_010">if event.is_action_pressed('cam_zoom_in'):</span></div>
<div style="position:absolute;left:61.98px;top:694.50px" class="cls_010"><span class="cls_010">zoom -= zoom_speed</span></div>
<div style="position:absolute;left:40.99px;top:705.75px" class="cls_010"><span class="cls_010">if event.is_action_pressed('cam_zoom_out'):</span></div>
<div style="position:absolute;left:61.98px;top:717.00px" class="cls_010"><span class="cls_010">zoom += zoom_speed</span></div>
<div style="position:absolute;left:19.99px;top:739.50px" class="cls_010"><span class="cls_010">func _process(delta):</span></div>
<div style="position:absolute;left:40.99px;top:750.75px" class="cls_010"><span class="cls_010">zoom = clamp(zoom, 0.1, 2)</span></div>
<div style="position:absolute;left:40.99px;top:762.00px" class="cls_010"><span class="cls_010">scale = Vector3(1, 1, 1) * zoom</span></div>
<div style="position:absolute;left:40.99px;top:773.25px" class="cls_010"><span class="cls_010">if Input.is_action_pressed('cam_left'):</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:251828px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background321.jpg" width=612 height=792></div>
<div style="position:absolute;left:61.98px;top:4.81px" class="cls_010"><span class="cls_010">rotate_y(-cam_speed * delta)</span></div>
<div style="position:absolute;left:40.99px;top:16.06px" class="cls_010"><span class="cls_010">if Input.is_action_pressed('cam_right'):</span></div>
<div style="position:absolute;left:61.98px;top:27.31px" class="cls_010"><span class="cls_010">rotate_y(cam_speed * delta)</span></div>
<div style="position:absolute;left:40.99px;top:38.56px" class="cls_010"><span class="cls_010">if Input.is_action_pressed('cam_up'):</span></div>
<div style="position:absolute;left:61.98px;top:49.81px" class="cls_010"><span class="cls_010">$GimbalIn.rotate_x(-cam_speed * delta)</span></div>
<div style="position:absolute;left:40.99px;top:61.06px" class="cls_010"><span class="cls_010">if Input.is_action_pressed('cam_down'):</span></div>
<div style="position:absolute;left:61.98px;top:72.31px" class="cls_010"><span class="cls_010">$GimbalIn.rotate_x(cam_speed * delta)</span></div>
<div style="position:absolute;left:40.99px;top:83.25px" class="cls_010"><span class="cls_010">$GimbalIn.rotation.x = clamp($GimbalIn.rotation.x, -PI/2, -0.2)</span></div>
<div style="position:absolute;left:5.00px;top:108.00px" class="cls_003"><span class="cls_003">As you can see, the left/right actions rotate </span><span class="cls_010">GimbalOut</span><span class="cls_003"> only on the </span><span class="cls_012">y</span><span class="cls_003"> axis, while the up/down actions</span></div>
<div style="position:absolute;left:5.00px;top:126.00px" class="cls_003"><span class="cls_003">rotate </span><span class="cls_010">GimbalIn</span><span class="cls_003"> on the </span><span class="cls_012">x</span><span class="cls_003"> axis. The entire gimbal system's </span><span class="cls_010">scale</span><span class="cls_003"> property is used to handle zooming. It is</span></div>
<div style="position:absolute;left:5.00px;top:144.00px" class="cls_003"><span class="cls_003">also necessary to set some limits using </span><span class="cls_010">clamp()</span><span class="cls_003">. The rotation limit holds up/down movement between</span></div>
<div style="position:absolute;left:5.00px;top:162.00px" class="cls_010"><span class="cls_010">-0.2</span><span class="cls_003"> (almost level with the ground) to </span><span class="cls_010">-90</span><span class="cls_003"> degrees (looking straight down) while the zoom limit keeps</span></div>
<div style="position:absolute;left:5.00px;top:180.00px" class="cls_003"><span class="cls_003">you from getting too close or too far away.</span></div>
<div style="position:absolute;left:5.00px;top:213.00px" class="cls_003"><span class="cls_003">Run the game and test the camera controls. You should be able to pan in all four directions and zoom</span></div>
<div style="position:absolute;left:5.00px;top:231.00px" class="cls_003"><span class="cls_003">with your mouse wheel. However, the gimbal's position is still static, so you may have trouble seeing</span></div>
<div style="position:absolute;left:5.00px;top:249.00px" class="cls_003"><span class="cls_003">the ball properly from certain angles.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:252630px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background322.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Tracking camera</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">There is one final improvement to the camera: making it follow the ball. Now that you have a stable,</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">gimbaled camera, it will work great if the gimbal is set to follow the ball's position. Add this line to</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">the </span><span class="cls_010">Main</span><span class="cls_003"> scene's </span><span class="cls_010">_process()</span><span class="cls_003"> function:</span></div>
<div style="position:absolute;left:19.99px;top:150.00px" class="cls_010"><span class="cls_010">$GimbalOut.transform.origin = $Ball.transform.origin</span></div>
<div style="position:absolute;left:5.00px;top:174.75px" class="cls_003"><span class="cls_003">Note that you shouldn't set the gimbal's transform to the ball's transform, or it will also </span><span class="cls_012">rotate</span><span class="cls_003"> as the</span></div>
<div style="position:absolute;left:5.00px;top:192.75px" class="cls_003"><span class="cls_003">ball rolls!</span></div>
<div style="position:absolute;left:5.00px;top:225.75px" class="cls_003"><span class="cls_003">Try the game now and observe how the camera tracks the ball's movement while still being able to</span></div>
<div style="position:absolute;left:5.00px;top:243.75px" class="cls_003"><span class="cls_003">rotate and zoom.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:253432px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background323.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Visual effects</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">The appearance of the ball and the other meshes in your scene have been intentionally left very plain.</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">You can think of the flat, white ball like a blank canvas, ready to be molded and shaped the way you</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">want it. Applying graphics to 3D models can be a very complex process, especially if you're not</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">familiar with it. First, a bit of vocabulary:</span></div>
<div style="position:absolute;left:34.99px;top:166.50px" class="cls_002"><span class="cls_002">Textures</span><span class="cls_003">: Textures are flat, 2D images that are </span><span class="cls_012">wrapped</span><span class="cls_003"> around 3D objects to give them more</span></div>
<div style="position:absolute;left:34.99px;top:183.75px" class="cls_003"><span class="cls_003">interesting appearances. Imagine wrapping a present: the flat paper is folded around the</span></div>
<div style="position:absolute;left:34.99px;top:201.00px" class="cls_003"><span class="cls_003">package, conforming to its shape. Textures can be very simple or quite complex depending on the</span></div>
<div style="position:absolute;left:34.99px;top:218.25px" class="cls_003"><span class="cls_003">shape they are designed to be applied to. An example of a simple one would be a small pattern</span></div>
<div style="position:absolute;left:34.99px;top:235.50px" class="cls_003"><span class="cls_003">of bricks that can be repeated on a large wall object.</span></div>
<div style="position:absolute;left:34.99px;top:268.50px" class="cls_002"><span class="cls_002">Shaders</span><span class="cls_003">: While textures determine </span><span class="cls_012">what</span><span class="cls_003"> is drawn on an object's surface, shaders determine </span><span class="cls_012">how</span></div>
<div style="position:absolute;left:34.99px;top:285.75px" class="cls_003"><span class="cls_003">it is drawn. Imagine that same brick wall. How would it look if it were wet? The mesh and the</span></div>
<div style="position:absolute;left:34.99px;top:303.00px" class="cls_003"><span class="cls_003">texture would still be the same, but the way the light reflects from it would be quite different.</span></div>
<div style="position:absolute;left:34.99px;top:320.25px" class="cls_003"><span class="cls_003">This is the function of shaders: to alter the appearance of an object without actually changing</span></div>
<div style="position:absolute;left:34.99px;top:337.50px" class="cls_003"><span class="cls_003">it. Shaders are typically written in a specialized programming language and can use a great deal</span></div>
<div style="position:absolute;left:34.99px;top:354.75px" class="cls_003"><span class="cls_003">of advanced math, the details of which are beyond the scope of this book. For many effects,</span></div>
<div style="position:absolute;left:34.99px;top:372.00px" class="cls_003"><span class="cls_003">writing your own shader is unavoidable. However, Godot provides an alternative method of</span></div>
<div style="position:absolute;left:34.99px;top:389.25px" class="cls_003"><span class="cls_003">creating a shader for your object that allows for a great deal of customization without diving into</span></div>
<div style="position:absolute;left:34.99px;top:406.50px" class="cls_003"><span class="cls_003">shader code: </span><span class="cls_010">ShaderMaterial</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:34.99px;top:439.50px" class="cls_002"><span class="cls_002">Materials</span><span class="cls_003">: Godot uses a computer graphics model called </span><span class="cls_002">Physically Based Rendering</span><span class="cls_003"> (</span><span class="cls_002">PBR</span><span class="cls_003">).</span></div>
<div style="position:absolute;left:34.99px;top:456.75px" class="cls_003"><span class="cls_003">The goal of PBR is to render the surface of objects in a way that more accurately models the</span></div>
<div style="position:absolute;left:34.99px;top:474.00px" class="cls_003"><span class="cls_003">way light works in the real world. These affects are applied to meshes using the </span><span class="cls_010">Material</span></div>
<div style="position:absolute;left:34.99px;top:491.25px" class="cls_003"><span class="cls_003">property. Materials are essentially containers for textures and shaders. Rather than apply them</span></div>
<div style="position:absolute;left:34.99px;top:508.50px" class="cls_003"><span class="cls_003">individually, they are contained in the material, which is then added to the object. The material's</span></div>
<div style="position:absolute;left:34.99px;top:525.75px" class="cls_003"><span class="cls_003">properties determine how the textures and shader effects are applied. Using Godot's built-in</span></div>
<div style="position:absolute;left:34.99px;top:543.00px" class="cls_003"><span class="cls_003">material properties, you can simulate a wide range of realistic (or stylized) real-world physical</span></div>
<div style="position:absolute;left:34.99px;top:560.25px" class="cls_003"><span class="cls_003">materials, such as stone, cloth, or metal. If the built-in properties aren't enough for your</span></div>
<div style="position:absolute;left:34.99px;top:577.50px" class="cls_003"><span class="cls_003">purposes, you can write your own shader code to add even more effects.</span></div>
<div style="position:absolute;left:5.00px;top:610.50px" class="cls_003"><span class="cls_003">You can add a PBR material to a mesh using a </span><span class="cls_010">SpatialMaterial</span><span class="cls_003">.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:254234px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background324.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">SpatialMaterials</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Click on the ball's </span><span class="cls_010">MeshInstance</span><span class="cls_003"> and, under Material, select New SpatialMaterial, then click the new</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">material. You will see a great number of parameters, far more than can be covered in this book. This</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">section will focus on some of the most useful ones for making the ball look more appealing. You are</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">encouraged to visit </span><A HREF="http://docs.godotengine.org/en/3.0/tutorials/3d/spatial_material.html">http://docs.godotengine.org/en/3.0/tutorials/3d/spatial_material.html</A> </span><span class="cls_003"> for a full</span></div>
<div style="position:absolute;left:5.00px;top:151.50px" class="cls_003"><span class="cls_003">explanation of all the </span><span class="cls_010">SpatialMaterial</span><span class="cls_003"> settings. To improve the look of the ball, try experimenting with</span></div>
<div style="position:absolute;left:5.00px;top:169.50px" class="cls_003"><span class="cls_003">these parameters:</span></div>
<div style="position:absolute;left:34.99px;top:202.50px" class="cls_002"><span class="cls_002">Albedo</span><span class="cls_003">: This property sets the base color of the material. Change this to make the ball whatever</span></div>
<div style="position:absolute;left:34.99px;top:219.75px" class="cls_003"><span class="cls_003">color you like. If you're working with an object that needs a texture to be applied, you can add it</span></div>
<div style="position:absolute;left:34.99px;top:237.00px" class="cls_003"><span class="cls_003">here as well.</span></div>
<div style="position:absolute;left:34.99px;top:270.00px" class="cls_002"><span class="cls_002">Metallic and Roughness</span><span class="cls_003">: These parameters control how reflective the surface is. Both can be</span></div>
<div style="position:absolute;left:34.99px;top:287.25px" class="cls_003"><span class="cls_003">set to values between </span><span class="cls_010">0</span><span class="cls_003"> and </span><span class="cls_010">1</span><span class="cls_003">. The Metallic value controls the </span><span class="cls_012">shininess</span><span class="cls_003">; higher values will</span></div>
<div style="position:absolute;left:34.99px;top:304.50px" class="cls_003"><span class="cls_003">reflect more light. The </span><span class="cls_012">Roughness</span><span class="cls_003"> value applies an amount of blur to the reflection. You can</span></div>
<div style="position:absolute;left:34.99px;top:321.75px" class="cls_003"><span class="cls_003">simulate a wide variety of materials by adjusting these two properties. The following is a guide</span></div>
<div style="position:absolute;left:34.99px;top:339.00px" class="cls_003"><span class="cls_003">to how the </span><span class="cls_012">Roughness</span><span class="cls_003"> and </span><span class="cls_012">Metallic</span><span class="cls_003"> properties affect the appearance of an object. Keep in mind</span></div>
<div style="position:absolute;left:34.99px;top:356.25px" class="cls_003"><span class="cls_003">that lighting and other factors will alter the surface appearance as well. Understanding how light</span></div>
<div style="position:absolute;left:34.99px;top:373.50px" class="cls_003"><span class="cls_003">and reflections interact with surface properties is a big part of learning to design effective 3D</span></div>
<div style="position:absolute;left:34.99px;top:390.75px" class="cls_003"><span class="cls_003">objects:</span></div>
<div style="position:absolute;left:34.99px;top:610.50px" class="cls_002"><span class="cls_002">Normal Map</span><span class="cls_003">: Normal mapping is a 3D graphics technique for </span><span class="cls_012">faking</span><span class="cls_003"> the appearance of bumps</span></div>
<div style="position:absolute;left:34.99px;top:627.75px" class="cls_003"><span class="cls_003">and dents in a surface. Modeling these in the mesh itself would result in a large increase in the</span></div>
<div style="position:absolute;left:34.99px;top:645.00px" class="cls_003"><span class="cls_003">number of polygons, or faces, making up the object, leading to reduced performance. Instead, a</span></div>
<div style="position:absolute;left:34.99px;top:662.25px" class="cls_003"><span class="cls_003">2D texture is used that maps the pattern of light and shadow that would result from these small</span></div>
<div style="position:absolute;left:34.99px;top:679.50px" class="cls_003"><span class="cls_003">surface features. The lighting engine then uses that information to alter the lighting as if those</span></div>
<div style="position:absolute;left:34.99px;top:696.75px" class="cls_003"><span class="cls_003">details were actually there. A properly constructed normal map can add a great amount of detail</span></div>
<div style="position:absolute;left:34.99px;top:714.00px" class="cls_003"><span class="cls_003">to an otherwise bland-looking object.</span></div>
<div style="position:absolute;left:5.00px;top:747.00px" class="cls_003"><span class="cls_003">The ball is a perfect example of a good use of normal mapping because a real golf ball has hundreds</span></div>
<div style="position:absolute;left:5.00px;top:765.00px" class="cls_003"><span class="cls_003">of dimples on its surface, but the sphere primitive is a smooth surface. Using a regular texture could</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:255036px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background325.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:3.31px" class="cls_003"><span class="cls_003">add spots, but they would look flat and painted on. A normal map that would simulate those dimples</span></div>
<div style="position:absolute;left:5.00px;top:21.00px" class="cls_003"><span class="cls_003">looks like this:</span></div>
<div style="position:absolute;left:5.00px;top:209.25px" class="cls_003"><span class="cls_003">It doesn't look like much, but the pattern of red and blue contains information telling the engine which</span></div>
<div style="position:absolute;left:5.00px;top:227.25px" class="cls_003"><span class="cls_003">direction it should assume the surface is facing at that point and therefore which direction light should</span></div>
<div style="position:absolute;left:5.00px;top:245.25px" class="cls_003"><span class="cls_003">reflect from it there. Note the stretching along the top and the bottom—that's because this image is</span></div>
<div style="position:absolute;left:5.00px;top:263.25px" class="cls_003"><span class="cls_003">made to be wrapped around a sphere shape.</span></div>
<div style="position:absolute;left:5.00px;top:296.25px" class="cls_003"><span class="cls_003">Enable the Normal Map property and drag </span><span class="cls_010">res://assets/ball_normal_map.png</span><span class="cls_003"> into the </span><span class="cls_012">Texture</span><span class="cls_003"> field. Try this</span></div>
<div style="position:absolute;left:5.00px;top:314.25px" class="cls_003"><span class="cls_003">with the </span><span class="cls_012">Albedo</span><span class="cls_003"> color set to white at first, so you can best see the effect. Adjust the </span><span class="cls_010">Depth</span><span class="cls_003"> parameter to</span></div>
<div style="position:absolute;left:5.00px;top:332.25px" class="cls_003"><span class="cls_003">increase or decrease the strength of the effect. A negative value will make the dimples look inset;</span></div>
<div style="position:absolute;left:5.00px;top:350.25px" class="cls_003"><span class="cls_003">something between </span><span class="cls_010">-1.0</span><span class="cls_003"> and </span><span class="cls_010">-1.5</span><span class="cls_003"> is a good value:</span></div>
<div style="position:absolute;left:5.00px;top:576.75px" class="cls_003"><span class="cls_003">Take some time to experiment with these settings and find a combination you like. Don't forget to try it</span></div>
<div style="position:absolute;left:5.00px;top:594.75px" class="cls_003"><span class="cls_003">in the game as well, as the ambient lighting of the </span><span class="cls_010">WorldEnvironment</span><span class="cls_003"> will effect the final result.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:255838px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background326.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Environment options</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">When you added the WorldEnvironment, the only parameter you changed was the </span><span class="cls_012">Ambient Light</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">color. In this section, you'll learn about some of the other properties you can adjust for improved</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">visual appeal:</span></div>
<div style="position:absolute;left:34.99px;top:148.50px" class="cls_002"><span class="cls_002">Background</span><span class="cls_003">: This parameter lets you specify what the background of the world looks like. The</span></div>
<div style="position:absolute;left:34.99px;top:165.75px" class="cls_003"><span class="cls_003">default value is Clear Color, which is the plain grey you see currently. Change the Mode to Sky</span></div>
<div style="position:absolute;left:34.99px;top:183.00px" class="cls_003"><span class="cls_003">and, in the Sky property, choose New Procedural Sky. Note that the sky is not just for</span></div>
<div style="position:absolute;left:34.99px;top:200.25px" class="cls_003"><span class="cls_003">background appearance—objects will reflect and absorb its ambient light. Observe how the</span></div>
<div style="position:absolute;left:34.99px;top:217.50px" class="cls_003"><span class="cls_003">ball's appearance changes as you change the </span><span class="cls_010">Energy</span><span class="cls_003"> parameter. This setting can be used to give the</span></div>
<div style="position:absolute;left:34.99px;top:234.75px" class="cls_003"><span class="cls_003">impression of a day or night sky, or even that of an alien planet.</span></div>
<div style="position:absolute;left:34.99px;top:267.75px" class="cls_002"><span class="cls_002">Screen Space Ambient Occlusion</span><span class="cls_003"> (</span><span class="cls_002">SSAO</span><span class="cls_003">): When enabled, this parameter works together with</span></div>
<div style="position:absolute;left:34.99px;top:285.00px" class="cls_003"><span class="cls_003">any ambient light to produce shadows in corners. You have two sources of ambient light now:</span></div>
<div style="position:absolute;left:34.99px;top:302.25px" class="cls_003"><span class="cls_003">the </span><span class="cls_012">Background</span><span class="cls_003"> (sky) and the </span><span class="cls_012">Ambient Light</span><span class="cls_003"> settings. Enable SSAO and you'll immediately see</span></div>
<div style="position:absolute;left:34.99px;top:319.50px" class="cls_003"><span class="cls_003">an improvement, making the walls of the course look much less fake and plastic. Feel free to try</span></div>
<div style="position:absolute;left:34.99px;top:336.75px" class="cls_003"><span class="cls_003">adjusting the various SSAO properties, but remember, a small change can make a big difference.</span></div>
<div style="position:absolute;left:34.99px;top:354.00px" class="cls_003"><span class="cls_003">Adjust the properties in small increments, and observe the effects before changing them further.</span></div>
<div style="position:absolute;left:34.99px;top:387.00px" class="cls_002"><span class="cls_002">DOF Far Blur</span><span class="cls_003">: </span><span class="cls_012">Depth of Field</span><span class="cls_003"> adds a blur effect to objects that are above a certain distance</span></div>
<div style="position:absolute;left:34.99px;top:404.25px" class="cls_003"><span class="cls_003">from the camera. Try adjusting the Distance property to see the effect.</span></div>
<div style="position:absolute;left:5.00px;top:437.25px" class="cls_003"><span class="cls_003">For more information about advanced usage of environmental effects, see </span><span class="cls_009">http://docs.godotengine.org/en/</span></div>
<div style="position:absolute;left:5.00px;top:455.25px" class="cls_009"><span class="cls_009">3.0/tutorials/3d/environment_and_post_processing.html</span><span class="cls_003">.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:256640px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background327.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Lighting</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Add a </span><span class="cls_010">DirectionalLight</span><span class="cls_003"> to the scene. This type of light simulates an infinite number of parallel rays of</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">light, so it's often used to represent sunlight or another very distant source of light that illuminates an</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">entire area equally. The location of the node in the scene doesn't matter, only its direction, so you can</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">position it anywhere you like. Aim it using the gizmo so that it strikes the course at an angle, then</span></div>
<div style="position:absolute;left:5.00px;top:151.50px" class="cls_003"><span class="cls_003">turn Shadow/Enabled to On so that you'll see shadows being cast from the walls and other objects:</span></div>
<div style="position:absolute;left:5.00px;top:329.25px" class="cls_003"><span class="cls_003">There are a number of properties available to adjust and alter the appearance of the shadows, both in</span></div>
<div style="position:absolute;left:5.00px;top:347.25px" class="cls_003"><span class="cls_003">the </span><span class="cls_012">Shadow</span><span class="cls_003"> section, which is present for all </span><span class="cls_010">Light</span><span class="cls_003"> nodes, and in the </span><span class="cls_012">Directional Shadow</span><span class="cls_003"> section,</span></div>
<div style="position:absolute;left:5.00px;top:365.25px" class="cls_003"><span class="cls_003">which is specific to </span><span class="cls_010">DirectionalLight</span><span class="cls_003">. The default values will work for most general cases, but the one</span></div>
<div style="position:absolute;left:5.00px;top:383.25px" class="cls_003"><span class="cls_003">property that you should probably adjust to improve shadow appearance is </span><span class="cls_012">Max Distance</span><span class="cls_003">. Lowering</span></div>
<div style="position:absolute;left:5.00px;top:401.25px" class="cls_003"><span class="cls_003">this value will improve shadow appearance, but only when the camera is closer than the given</span></div>
<div style="position:absolute;left:5.00px;top:419.25px" class="cls_003"><span class="cls_003">distance. If your camera will mostly be close to objects, you can reduce this value. To see the effect,</span></div>
<div style="position:absolute;left:5.00px;top:437.25px" class="cls_003"><span class="cls_003">try setting it to just </span><span class="cls_010">10</span><span class="cls_003"> and zooming in/out, then do the same with it set to </span><span class="cls_010">1000</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:470.25px" class="cls_003"><span class="cls_003">Directional light can even be used to simulate the day/night cycle. If you attach a script to the light and</span></div>
<div style="position:absolute;left:5.00px;top:488.25px" class="cls_003"><span class="cls_003">slowly rotate it around one axis, you'll see the shadows change as if the sun is rising and setting.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:257442px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background328.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Summary</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">This chapter introduced you to the world of 3D graphics. One of Godot's great strengths is that the</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">same tools and workflow are used in both 2D and 3D. Everything you learned about the process of</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">creating scenes, instancing, and using signals works in the same way. For example, an interface you</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">build with control nodes for a 2D game can be dropped into a 3D game and will work just the same.</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">In this chapter, you learned how to navigate in the the 3D editor to view and place nodes using</span></div>
<div style="position:absolute;left:5.00px;top:184.50px" class="cls_003"><span class="cls_003">gizmos.You learned about meshes and how to quickly make your own objects using Godot's</span></div>
<div style="position:absolute;left:5.00px;top:202.50px" class="cls_003"><span class="cls_003">primitives. You used GridMap to lay out your minigolf course. You learned about using cameras,</span></div>
<div style="position:absolute;left:5.00px;top:220.50px" class="cls_003"><span class="cls_003">lighting, and the world environment to design how your game will appear on screen. Finally, you got</span></div>
<div style="position:absolute;left:5.00px;top:238.50px" class="cls_003"><span class="cls_003">a taste of using PBR rendering via Godot's SpatialMaterial resource.</span></div>
<div style="position:absolute;left:5.00px;top:271.50px" class="cls_003"><span class="cls_003">Congratulations, you've made it to the end! But with these five projects, your journey to becoming a</span></div>
<div style="position:absolute;left:5.00px;top:289.50px" class="cls_003"><span class="cls_003">game developer has just begun. As you become more proficient with Godot's features, you'll be able</span></div>
<div style="position:absolute;left:5.00px;top:307.50px" class="cls_003"><span class="cls_003">to make any game you can imagine.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:258244px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background329.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Additional Topics</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Congratulations! The projects you've built in this book have started you on the road to becoming a</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">Godot expert. However, you've only just scratched the surface of what's possible in Godot. As you</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">become more proficient, and the size of your projects grows, you'll need to know how to find</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">solutions to your problems, how to distribute your games so they can be played, and even how to</span></div>
<div style="position:absolute;left:5.00px;top:151.50px" class="cls_003"><span class="cls_003">extend the engine yourself.</span></div>
<div style="position:absolute;left:5.00px;top:184.50px" class="cls_003"><span class="cls_003">In this chapter, you'll learn about the following topics:</span></div>
<div style="position:absolute;left:34.99px;top:216.75px" class="cls_003"><span class="cls_003">How to effectively use Godot's built-in documentation</span></div>
<div style="position:absolute;left:34.99px;top:234.00px" class="cls_003"><span class="cls_003">Exporting projects to run on other platforms</span></div>
<div style="position:absolute;left:34.99px;top:251.25px" class="cls_003"><span class="cls_003">Using other programming languages in Godot</span></div>
<div style="position:absolute;left:34.99px;top:268.50px" class="cls_003"><span class="cls_003">How to use Godot's asset library to install plugins</span></div>
<div style="position:absolute;left:34.99px;top:285.75px" class="cls_003"><span class="cls_003">Becoming a Godot contributor</span></div>
<div style="position:absolute;left:34.99px;top:303.00px" class="cls_003"><span class="cls_003">Community resources</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:259046px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background330.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Using Godot's documentation</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Learning Godot's API can seem overwhelming at first. How can you learn all the different nodes, and</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">the properties and methods each one contains? Fortunately, Godot's built-in documentation is there to</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">help you. Develop the habit of using it often: it will help you find things when you're learning, but it's</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">also a great way to quickly look up a method or property for reference once you know your way</span></div>
<div style="position:absolute;left:5.00px;top:151.50px" class="cls_003"><span class="cls_003">around.</span></div>
<div style="position:absolute;left:5.00px;top:184.50px" class="cls_003"><span class="cls_003">When you are in the Script tab of the editor, you'll see the following buttons in the upper-right corner:</span></div>
<div style="position:absolute;left:5.00px;top:260.25px" class="cls_003"><span class="cls_003">The Online Docs button will open the documentation website in your browser. If you have a</span></div>
<div style="position:absolute;left:5.00px;top:278.25px" class="cls_003"><span class="cls_003">multimonitor setup, it can be very useful to keep the API reference open on one side for quick</span></div>
<div style="position:absolute;left:5.00px;top:296.25px" class="cls_003"><span class="cls_003">reference while you're working in Godot.</span></div>
<div style="position:absolute;left:5.00px;top:329.25px" class="cls_003"><span class="cls_003">The other two buttons allow you to view the documentation directly in the Godot editor.</span></div>
<div style="position:absolute;left:5.00px;top:347.25px" class="cls_003"><span class="cls_003">The Classes button allows you to browse through the available node and object types, while</span></div>
<div style="position:absolute;left:5.00px;top:365.25px" class="cls_003"><span class="cls_003">the Search Help button lets you search for any method or property name. Both searches are </span><span class="cls_012">smart</span><span class="cls_003">,</span></div>
<div style="position:absolute;left:5.00px;top:383.25px" class="cls_003"><span class="cls_003">meaning you can type part of a word and the results will be narrowed down as you type. Take a look</span></div>
<div style="position:absolute;left:5.00px;top:401.25px" class="cls_003"><span class="cls_003">at the following screenshot:</span></div>
<div style="position:absolute;left:5.00px;top:709.50px" class="cls_003"><span class="cls_003">When you find the property or method you're looking for, click Open and the documentation reference</span></div>
<div style="position:absolute;left:5.00px;top:727.50px" class="cls_003"><span class="cls_003">for that node will appear.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:259848px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background331.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Reading the API documentation</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">When you've found the documentation for the node you want, you'll see that it follows a common</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">format, with the name of the node at the top followed by several subsections of information, as shown</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">in the following screenshot:</span></div>
<div style="position:absolute;left:5.00px;top:412.50px" class="cls_003"><span class="cls_003">At the top of the document is a list titled Inherits, which shows you the chain of classes that a</span></div>
<div style="position:absolute;left:5.00px;top:430.50px" class="cls_003"><span class="cls_003">particular node is built from all the way back to </span><span class="cls_010">Object</span><span class="cls_003">, which is Godot's base object class. For</span></div>
<div style="position:absolute;left:5.00px;top:448.50px" class="cls_003"><span class="cls_003">example, an </span><span class="cls_010">Area2D</span><span class="cls_003"> node has the following inheritance chain:</span></div>
<div style="position:absolute;left:19.99px;top:483.00px" class="cls_010"><span class="cls_010">CollisionObject2D &lt; Node2D &lt; CanvasItem &lt; Node &lt; Object</span></div>
<div style="position:absolute;left:5.00px;top:507.75px" class="cls_003"><span class="cls_003">This lets you quickly see what other properties this type of object may have. You can click on any of</span></div>
<div style="position:absolute;left:5.00px;top:525.75px" class="cls_003"><span class="cls_003">the node names to jump to that node's documentation.</span></div>
<div style="position:absolute;left:5.00px;top:558.75px" class="cls_003"><span class="cls_003">You can also see a list of what node types, if any, inherit from that particular node, as well as a</span></div>
<div style="position:absolute;left:5.00px;top:576.75px" class="cls_003"><span class="cls_003">general description of the node. Below that, you can see the member variables and methods of the</span></div>
<div style="position:absolute;left:5.00px;top:594.75px" class="cls_003"><span class="cls_003">node. The names of most methods and types are links, so you can click on any item to read more about</span></div>
<div style="position:absolute;left:5.00px;top:612.75px" class="cls_003"><span class="cls_003">it.</span></div>
<div style="position:absolute;left:5.00px;top:645.75px" class="cls_003"><span class="cls_003">Develop the habit of consulting the API documentation regularly as you work. You'll find that you will</span></div>
<div style="position:absolute;left:5.00px;top:663.75px" class="cls_003"><span class="cls_003">quickly begin to develop a stronger understanding of how everything works together.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:260650px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background332.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Exporting projects</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Eventually, your project will reach the stage where you want to share it with the world.</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_012"><span class="cls_012">Exporting</span><span class="cls_003"> your project means converting it into a package that can be run by someone who doesn't</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">have the Godot editor. You can export your project for a number of popular platforms.</span></div>
<div style="position:absolute;left:5.00px;top:148.50px" class="cls_003"><span class="cls_003">At the time of writing, Godot supports the following target platforms:</span></div>
<div style="position:absolute;left:34.99px;top:180.75px" class="cls_003"><span class="cls_003">Windows Universal</span></div>
<div style="position:absolute;left:34.99px;top:198.00px" class="cls_003"><span class="cls_003">Windows Desktop</span></div>
<div style="position:absolute;left:34.99px;top:215.25px" class="cls_003"><span class="cls_003">macOS</span></div>
<div style="position:absolute;left:34.99px;top:232.50px" class="cls_003"><span class="cls_003">Linux</span></div>
<div style="position:absolute;left:34.99px;top:249.75px" class="cls_003"><span class="cls_003">Android (mobile)</span></div>
<div style="position:absolute;left:34.99px;top:267.00px" class="cls_003"><span class="cls_003">iOS (mobile)</span></div>
<div style="position:absolute;left:34.99px;top:284.25px" class="cls_003"><span class="cls_003">HTML5 (web)</span></div>
<div style="position:absolute;left:5.00px;top:317.25px" class="cls_003"><span class="cls_003">The method for exporting the project varies depending on the platform you are targeting. For example,</span></div>
<div style="position:absolute;left:5.00px;top:335.25px" class="cls_003"><span class="cls_003">to export for iOS, you must be running on a macOS computer with Xcode installed.</span></div>
<div style="position:absolute;left:5.00px;top:368.25px" class="cls_003"><span class="cls_003">Each platform is unique, and some features of your game may not work on some platforms because of</span></div>
<div style="position:absolute;left:5.00px;top:386.25px" class="cls_003"><span class="cls_003">hardware limitations, screen size, or other factors. As an example, if you wanted to export the Coin</span></div>
<div style="position:absolute;left:5.00px;top:404.25px" class="cls_003"><span class="cls_003">Dash game (from </span><span class="cls_009">Chapter 1</span><span class="cls_003">, </span><span class="cls_012">Introduction</span><span class="cls_003">) for the Android platform, your player wouldn't be able to</span></div>
<div style="position:absolute;left:5.00px;top:422.25px" class="cls_003"><span class="cls_003">move because the keyboard controls wouldn't work! For that platform, you would need to include</span></div>
<div style="position:absolute;left:5.00px;top:440.25px" class="cls_003"><span class="cls_003">touchscreen controls in your game's code (more about this later).</span></div>
<div style="position:absolute;left:5.00px;top:473.25px" class="cls_003"><span class="cls_003">You may even find that you need to set different values in Project Settings for different platforms. You</span></div>
<div style="position:absolute;left:5.00px;top:491.25px" class="cls_003"><span class="cls_003">can do this by selecting the setting and clicking Override For</span></div>
<div style="position:absolute;left:378.35px;top:491.25px" class="cls_003"><span class="cls_003">This will create a new setting specific</span></div>
<div style="position:absolute;left:5.00px;top:509.25px" class="cls_003"><span class="cls_003">to that platform.</span></div>
<div style="position:absolute;left:5.00px;top:542.25px" class="cls_003"><span class="cls_003">For example, if you want to enable HiDPI support, but not allow it for Android, you can create an</span></div>
<div style="position:absolute;left:5.00px;top:560.25px" class="cls_003"><span class="cls_003">override for that setting:</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:261452px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background333.jpg" width=612 height=792></div>
<div style="position:absolute;left:52.98px;top:250.50px" class="cls_008"><span class="cls_008">Every platform is unique, and there are many factors to consider when configuring your project for export.</span></div>
<div style="position:absolute;left:52.98px;top:264.00px" class="cls_008"><span class="cls_008">Consult the official documentation for the latest instructions on exporting to your desired platform.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:262254px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background334.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Getting the export templates</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_012"><span class="cls_012">Export templates</span><span class="cls_003"> are versions of Godot that are compiled for each target platform, but don't include</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">the editor. Your project will be combined with the target platform's template to create a standalone</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">application.</span></div>
<div style="position:absolute;left:5.00px;top:148.50px" class="cls_003"><span class="cls_003">To begin, you must download the export templates. Click on Manage Export Templates from the</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">Editor menu:</span></div>
<div style="position:absolute;left:5.00px;top:325.50px" class="cls_003"><span class="cls_003">In this window, you can click Download to fetch the export templates:</span></div>
<div style="position:absolute;left:5.00px;top:597.75px" class="cls_003"><span class="cls_003">Templates can also be downloaded from the Godot website at </span><A HREF="http://godotengine.org/download">http://godotengine.org/download</A> </span><span class="cls_003">. If you</span></div>
<div style="position:absolute;left:5.00px;top:615.75px" class="cls_003"><span class="cls_003">choose to do this, use the Install From File button to complete the installation.</span></div>
<div style="position:absolute;left:52.98px;top:648.75px" class="cls_008"><span class="cls_008">The template's version must match the version of Godot you are using. If you upgrade to a new version of Godot,</span></div>
<div style="position:absolute;left:52.98px;top:662.25px" class="cls_008"><span class="cls_008">make sure that you also download the corresponding templates, or your exported project may not work properly.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:263056px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background335.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Export presets</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">When you're ready to export your project, click on Project | Export:</span></div>
<div style="position:absolute;left:5.00px;top:381.00px" class="cls_003"><span class="cls_003">In this window, you can create </span><span class="cls_012">presets</span><span class="cls_003"> for each platform by clicking Add... and selecting the platform</span></div>
<div style="position:absolute;left:5.00px;top:399.00px" class="cls_003"><span class="cls_003">from the list. You can make as many presets for each platform as you wish. For example, you may</span></div>
<div style="position:absolute;left:5.00px;top:417.00px" class="cls_003"><span class="cls_003">want to create both Debug and Release versions of your projects.</span></div>
<div style="position:absolute;left:5.00px;top:450.00px" class="cls_003"><span class="cls_003">Each platform has its own settings and options, too many to describe here. The default values are</span></div>
<div style="position:absolute;left:5.00px;top:468.00px" class="cls_003"><span class="cls_003">typically good, but you should test them thoroughly before distributing the project.</span></div>
<div style="position:absolute;left:5.00px;top:501.00px" class="cls_003"><span class="cls_003">In the Resources tab, you can customize which portions of your project are exported. For example,</span></div>
<div style="position:absolute;left:5.00px;top:519.00px" class="cls_003"><span class="cls_003">you can choose to only export selected scenes or to exclude certain source files from the project:</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:263858px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background336.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:265.50px" class="cls_003"><span class="cls_003">The Patches tab allows you to create updates for your previously exported projects.</span></div>
<div style="position:absolute;left:5.00px;top:298.50px" class="cls_003"><span class="cls_003">Finally, the Features tab displays a summary of the features (configured in the Options tab) for the</span></div>
<div style="position:absolute;left:5.00px;top:316.50px" class="cls_003"><span class="cls_003">platform. These features can determine which properties are customized by the Override value in the</span></div>
<div style="position:absolute;left:5.00px;top:334.50px" class="cls_003"><span class="cls_003">Project Settings:</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:264660px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background337.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Exporting</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">There are two export buttons at the bottom of the window. The first button, Export PCK/Zip, will only</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">create a PCK, or packed, version of your project's data. This doesn't include an executable, so the</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">game can't be run on its own. This method is useful if you need to provide add-ons or DLC</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">(downloadable content) for your game.</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">The second button, Export Project, will create an executable version of your game, such as an </span><span class="cls_010">.exe</span><span class="cls_003"> for</span></div>
<div style="position:absolute;left:5.00px;top:184.50px" class="cls_003"><span class="cls_003">Windows or an </span><span class="cls_010">.apk</span><span class="cls_003"> for Android.</span></div>
<div style="position:absolute;left:5.00px;top:217.50px" class="cls_003"><span class="cls_003">Click Save and you will have a playable version of your game.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:265462px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background338.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Example - Coin Dash for Android</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">If you have an Android device, you can follow this example to export the Coin Dash game for mobile</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">platforms. For other platforms, see Godot's documentation at </span><span class="cls_009">http://docs.godotengine.org/en/latest/getting</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_009"><span class="cls_009">_started/workflow/export</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:148.50px" class="cls_003"><span class="cls_003">Mobile devices come with a wide variety of capabilities. Always consult the official documentation</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">in the preceding link for information on your platform and what restrictions, if any, may apply to your</span></div>
<div style="position:absolute;left:5.00px;top:184.50px" class="cls_003"><span class="cls_003">device. In most cases, Godot's default settings will work, but mobile development is sometimes more</span></div>
<div style="position:absolute;left:5.00px;top:202.50px" class="cls_003"><span class="cls_003">art than science, and you may need to do some experimenting and searching for help in order to get</span></div>
<div style="position:absolute;left:5.00px;top:220.50px" class="cls_003"><span class="cls_003">everything working.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:266264px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background339.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Modifying the game</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Because the game as written in this chapter uses keyboard controls, you won't be able to play on a</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">mobile device without making some changes. Fortunately, Godot has support for touchscreen input.</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">First, open Project Settings, and in the Display/Window section, make sure Orientation is set to</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">portrait and Emulate Touchscreen is On. This will let you test the program on your computer by</span></div>
<div style="position:absolute;left:5.00px;top:151.50px" class="cls_003"><span class="cls_003">treating mouse clicks as touch events:</span></div>
<div style="position:absolute;left:5.00px;top:445.50px" class="cls_003"><span class="cls_003">Next, you need to change the player controls. Instead of using the four direction inputs, the player will</span></div>
<div style="position:absolute;left:5.00px;top:463.50px" class="cls_003"><span class="cls_003">move toward the position of the touch event. Change the player script as follows:</span></div>
<div style="position:absolute;left:19.99px;top:498.00px" class="cls_010"><span class="cls_010">var target = Vector2()</span></div>
<div style="position:absolute;left:19.99px;top:520.50px" class="cls_010"><span class="cls_010">func _input(event):</span></div>
<div style="position:absolute;left:40.99px;top:531.75px" class="cls_010"><span class="cls_010">if event is InputEventScreenTouch and event.pressed:</span></div>
<div style="position:absolute;left:61.98px;top:543.00px" class="cls_010"><span class="cls_010">target = event.position</span></div>
<div style="position:absolute;left:19.99px;top:565.50px" class="cls_010"><span class="cls_010">func _process(delta):</span></div>
<div style="position:absolute;left:40.99px;top:576.75px" class="cls_010"><span class="cls_010">velocity = (target - position).normalized() * speed</span></div>
<div style="position:absolute;left:40.99px;top:588.00px" class="cls_010"><span class="cls_010">if (target - position).length() > 5:</span></div>
<div style="position:absolute;left:61.98px;top:599.25px" class="cls_010"><span class="cls_010">position += velocity * delta</span></div>
<div style="position:absolute;left:40.99px;top:610.50px" class="cls_010"><span class="cls_010">else:</span></div>
<div style="position:absolute;left:61.98px;top:621.75px" class="cls_010"><span class="cls_010">velocity = Vector2()</span></div>
<div style="position:absolute;left:40.99px;top:644.25px" class="cls_010"><span class="cls_010">if velocity.length() > 0:</span></div>
<div style="position:absolute;left:61.98px;top:655.50px" class="cls_010"><span class="cls_010">$AnimatedSprite.animation = "run"</span></div>
<div style="position:absolute;left:61.98px;top:666.75px" class="cls_010"><span class="cls_010">$AnimatedSprite.flip_h = velocity.x &lt; 0</span></div>
<div style="position:absolute;left:40.99px;top:678.00px" class="cls_010"><span class="cls_010">else:</span></div>
<div style="position:absolute;left:61.98px;top:689.25px" class="cls_010"><span class="cls_010">$AnimatedSprite.animation = "idle"</span></div>
<div style="position:absolute;left:5.00px;top:714.00px" class="cls_003"><span class="cls_003">Try it out and make sure that mouse clicks are causing the player to move. If everything is working,</span></div>
<div style="position:absolute;left:5.00px;top:732.00px" class="cls_003"><span class="cls_003">you're ready to set up your computer for Android development.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:267066px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background340.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Preparing your system</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">In order to export your project to Android, you'll need to download the Android </span><span class="cls_002">software</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_002"><span class="cls_002">development kit</span><span class="cls_003"> (</span><span class="cls_002">SDK</span><span class="cls_003">) from </span><A HREF="https://developer.android.com/studio/">https://developer.android.com/studio/</A> </span><span class="cls_003"> and the </span><span class="cls_002">Java Development</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_002"><span class="cls_002">Kit</span><span class="cls_003"> (</span><span class="cls_002">JDK</span><span class="cls_003">) from </span><A HREF="http://www.oracle.com/technetwork/java/javase/downloads/index.html">http://www.oracle.com/technetwork/java/javase/downloads/index.html</A> </span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:148.50px" class="cls_003"><span class="cls_003">When you run Android Studio for the first time, click on Configure | SDK Manager and make sure that</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">you install Android SDK Platform-Tools:</span></div>
<div style="position:absolute;left:5.00px;top:546.00px" class="cls_003"><span class="cls_003">This will install the </span><span class="cls_010">adb</span><span class="cls_003"> command-line tool, which Godot uses to communicate with your device.</span></div>
<div style="position:absolute;left:5.00px;top:579.00px" class="cls_003"><span class="cls_003">After you've installed the development tools, create a debug keystore by running the following</span></div>
<div style="position:absolute;left:5.00px;top:597.00px" class="cls_003"><span class="cls_003">command:</span></div>
<div style="position:absolute;left:19.99px;top:631.50px" class="cls_010"><span class="cls_010">keytool -keyalg RSA -genkeypair -alias androiddebugkey -keypass android -keystore debug.keystore -storepass</span></div>
<div style="position:absolute;left:19.99px;top:642.75px" class="cls_010"><span class="cls_010">android -dname "CN=Android Debug,O=Android,C=US" -validity 9999</span></div>
<div style="position:absolute;left:5.00px;top:667.50px" class="cls_003"><span class="cls_003">In Godot, click on Editor | Editor Settings, find the Export/Android section, and set the paths to the</span></div>
<div style="position:absolute;left:5.00px;top:685.50px" class="cls_003"><span class="cls_003">applications on your system. Note that you'll only have to do this once, as the editor settings are</span></div>
<div style="position:absolute;left:5.00px;top:703.50px" class="cls_003"><span class="cls_003">independent of the project settings:</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:267868px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background341.jpg" width=612 height=792></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:268670px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background342.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Exporting</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">You're now ready to export. Click on Project | Export and add a preset for Android (see the previous</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">section). Click the Export Project button and you'll have an </span><span class="cls_002">Android Package Kit</span><span class="cls_003"> (</span><span class="cls_002">APK</span><span class="cls_003">) you can</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">install on your device. You can do this with a graphical tool or from the command line using </span><span class="cls_010">adb</span><span class="cls_003">:</span></div>
<div style="position:absolute;left:19.99px;top:150.00px" class="cls_013"><span class="cls_013">adb install dodge.apk</span></div>
<div style="position:absolute;left:5.00px;top:175.50px" class="cls_003"><span class="cls_003">Note that if your system supports it, connecting a compatible Android device will cause the one-click</span></div>
<div style="position:absolute;left:5.00px;top:193.50px" class="cls_003"><span class="cls_003">deploy button to appear in the Godot editor:</span></div>
<div style="position:absolute;left:5.00px;top:262.50px" class="cls_003"><span class="cls_003">Clicking this button will export the project and install it on your device in one step. Your device may</span></div>
<div style="position:absolute;left:5.00px;top:280.50px" class="cls_003"><span class="cls_003">need to be in developer mode for this to happen: consult your device's documentation for details.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:269472px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background343.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Shaders</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">A </span><span class="cls_012">shader</span><span class="cls_003"> is a program that is designed to run in the GPU, and alters the way that objects appear on</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">the screen. Shaders are used extensively in both 2D and 3D development to create a variety of visual</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">effects. They are called shaders because they were originally used for shading and lighting effects,</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">but today they are used for any number of visual effects. Because they run in the GPU in </span><span class="cls_012">parallel</span><span class="cls_003">, they</span></div>
<div style="position:absolute;left:5.00px;top:151.50px" class="cls_003"><span class="cls_003">are very fast, but also come with some restrictions.</span></div>
<div style="position:absolute;left:52.98px;top:184.50px" class="cls_008"><span class="cls_008">This section is a very brief introduction to the concept of shaders. For a more in-depth understanding, see </span><A HREF="https://thebookofshaders.com/">https://th</A> </span></div>
<div style="position:absolute;left:52.98px;top:198.00px" class="cls_014"><span class="cls_014">ebookofshaders.com/</span><span class="cls_008"> and Godot's shader documentation at </span><span class="cls_014">http://docs.godotengine.org/en/latest/tutorials/shading/shading_language.htm</span></div>
<div style="position:absolute;left:52.98px;top:211.50px" class="cls_014"><span class="cls_014">l</span><span class="cls_008">.</span></div>
<div style="position:absolute;left:5.00px;top:240.00px" class="cls_003"><span class="cls_003">In Godot 3.0, shaders are written in a language very similar to GLSL ES 3.0. If you are familiar with</span></div>
<div style="position:absolute;left:5.00px;top:258.00px" class="cls_003"><span class="cls_003">C, you will find the syntax very similar. If you are not, it may look strange to you at first. See the end</span></div>
<div style="position:absolute;left:5.00px;top:276.00px" class="cls_003"><span class="cls_003">of this section for links to further resources where you can learn more.</span></div>
<div style="position:absolute;left:5.00px;top:309.00px" class="cls_003"><span class="cls_003">Shaders in Godot come in three types: </span><span class="cls_002">spatial</span><span class="cls_003"> (for 3D rendering), </span><span class="cls_002">canvas item</span><span class="cls_003"> (for 2D), and</span></div>
<div style="position:absolute;left:5.00px;top:327.00px" class="cls_002"><span class="cls_002">particles</span><span class="cls_003"> (for rendering particle effects). The first line of your shader must declare which of these</span></div>
<div style="position:absolute;left:5.00px;top:345.00px" class="cls_003"><span class="cls_003">types you are writing.</span></div>
<div style="position:absolute;left:5.00px;top:378.00px" class="cls_003"><span class="cls_003">After determining the type of shader, you have another three choices of what render phase(s) you want</span></div>
<div style="position:absolute;left:5.00px;top:396.00px" class="cls_003"><span class="cls_003">to affect: fragment, vertex, and/or light. Fragment shaders are used to set the color of every affected</span></div>
<div style="position:absolute;left:5.00px;top:414.00px" class="cls_003"><span class="cls_003">pixel. Vertex shaders are used to modify the vertices of a shape or mesh (and thus are typically used</span></div>
<div style="position:absolute;left:5.00px;top:432.00px" class="cls_003"><span class="cls_003">more in 3D applications). Finally, light shaders are applied to alter the way light is processed for an</span></div>
<div style="position:absolute;left:5.00px;top:450.00px" class="cls_003"><span class="cls_003">object.</span></div>
<div style="position:absolute;left:5.00px;top:483.00px" class="cls_003"><span class="cls_003">After choosing the type(s) of your shader, you will then write code that will be run </span><span class="cls_012">simultaneously</span><span class="cls_003"> on</span></div>
<div style="position:absolute;left:5.00px;top:501.00px" class="cls_003"><span class="cls_003">every affected item. This is where the real power of shaders comes from. For example, when using a</span></div>
<div style="position:absolute;left:5.00px;top:519.00px" class="cls_003"><span class="cls_003">fragment shader, the code is run on every pixel of the object at the same time. This is a very different</span></div>
<div style="position:absolute;left:5.00px;top:537.00px" class="cls_003"><span class="cls_003">process than what you might be used to using a traditional language, where you would loop over each</span></div>
<div style="position:absolute;left:5.00px;top:555.00px" class="cls_003"><span class="cls_003">pixel one at a time. That kind of sequential code just isn't fast enough to handle the huge number of</span></div>
<div style="position:absolute;left:5.00px;top:573.00px" class="cls_003"><span class="cls_003">pixels modern games need to process.</span></div>
<div style="position:absolute;left:52.98px;top:606.00px" class="cls_008"><span class="cls_008">Consider a game running at the relatively low resolution of 480 x 720. The total number of pixels on the screen is</span></div>
<div style="position:absolute;left:52.98px;top:619.50px" class="cls_008"><span class="cls_008">almost 350,000. Any manipulation of those pixels in code must happen in less than 1/60 of a second to avoid lag—</span></div>
<div style="position:absolute;left:52.98px;top:633.00px" class="cls_008"><span class="cls_008">even less when you consider the rest of your code that also has to run for every frame: game logic, animation,</span></div>
<div style="position:absolute;left:52.98px;top:646.50px" class="cls_008"><span class="cls_008">networking, and everything else. This is why GPUs are so important, especially for high-end games that may be</span></div>
<div style="position:absolute;left:52.98px;top:660.00px" class="cls_008"><span class="cls_008">processing millions of pixels for each frame.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:270274px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background344.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Creating a shader</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">To demonstrate some shader effects, create a scene with a </span><span class="cls_010">Sprite</span><span class="cls_003"> node and choose any texture you like.</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">This demo will use the cactus image from Coin Dash:</span></div>
<div style="position:absolute;left:5.00px;top:259.50px" class="cls_003"><span class="cls_003">A shader can be added to any </span><span class="cls_010">CanvasItem</span><span class="cls_003"> derived node—in this case, </span><span class="cls_010">Sprite</span><span class="cls_003">, via its Material property. In</span></div>
<div style="position:absolute;left:5.00px;top:277.50px" class="cls_003"><span class="cls_003">this property, select New Shader Material and click on the newly created resource. The first property</span></div>
<div style="position:absolute;left:5.00px;top:295.50px" class="cls_003"><span class="cls_003">is Shader, where you can choose a New Shader. When you do, a Shader panel appears at the bottom</span></div>
<div style="position:absolute;left:5.00px;top:313.50px" class="cls_003"><span class="cls_003">of the editor window.</span></div>
<div style="position:absolute;left:5.00px;top:346.50px" class="cls_003"><span class="cls_003">This is where you'll write your shader code:</span></div>
<div style="position:absolute;left:5.00px;top:659.25px" class="cls_003"><span class="cls_003">A blank shader looks like the following:</span></div>
<div style="position:absolute;left:19.99px;top:693.75px" class="cls_010"><span class="cls_010">shader_type canvas_item; // choose spatial, canvas_item, or particles</span></div>
<div style="position:absolute;left:19.99px;top:716.25px" class="cls_010"><span class="cls_010">void fragment(){</span></div>
<div style="position:absolute;left:40.99px;top:727.50px" class="cls_010"><span class="cls_010">// code in this function runs on every pixel</span></div>
<div style="position:absolute;left:19.99px;top:738.75px" class="cls_010"><span class="cls_010">}</span></div>
<div style="position:absolute;left:19.99px;top:761.25px" class="cls_010"><span class="cls_010">void vertex() {</span></div>
<div style="position:absolute;left:40.99px;top:772.50px" class="cls_010"><span class="cls_010">// code in this function runs on each vertex</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:271076px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background345.jpg" width=612 height=792></div>
<div style="position:absolute;left:19.99px;top:4.81px" class="cls_010"><span class="cls_010">}</span></div>
<div style="position:absolute;left:19.99px;top:27.31px" class="cls_010"><span class="cls_010">void light() {</span></div>
<div style="position:absolute;left:40.99px;top:38.56px" class="cls_010"><span class="cls_010">// code in this function affects light processing</span></div>
<div style="position:absolute;left:19.99px;top:49.50px" class="cls_010"><span class="cls_010">}</span></div>
<div style="position:absolute;left:5.00px;top:74.25px" class="cls_003"><span class="cls_003">For the purposes of this example, you'll be coding a 2D-fragment shader, so you won't need to include</span></div>
<div style="position:absolute;left:5.00px;top:92.25px" class="cls_003"><span class="cls_003">the other two functions.</span></div>
<div style="position:absolute;left:5.00px;top:125.25px" class="cls_003"><span class="cls_003">Shader functions have a number of </span><span class="cls_012">built-ins</span><span class="cls_003">, which are either input values or output values. For</span></div>
<div style="position:absolute;left:5.00px;top:143.25px" class="cls_003"><span class="cls_003">example, the </span><span class="cls_010">TEXTURE</span><span class="cls_003"> input built-in contains the pixel data of the object's texture, while the </span><span class="cls_010">COLOR</span><span class="cls_003"> output</span></div>
<div style="position:absolute;left:5.00px;top:161.25px" class="cls_003"><span class="cls_003">built-in is used to set the result of your calculation. Remember, a fragment shader's purpose is to</span></div>
<div style="position:absolute;left:5.00px;top:179.25px" class="cls_003"><span class="cls_003">affect the color of every processed pixel.</span></div>
<div style="position:absolute;left:5.00px;top:212.25px" class="cls_003"><span class="cls_003">When working with shaders in the </span><span class="cls_010">TEXTURE</span><span class="cls_003"> property, for example, coordinates are measured in</span></div>
<div style="position:absolute;left:5.00px;top:230.25px" class="cls_003"><span class="cls_003">a </span><span class="cls_012">normalized</span><span class="cls_003"> (that is, ranging from </span><span class="cls_010">0</span><span class="cls_003"> to </span><span class="cls_010">1</span><span class="cls_003">) coordinate space. This coordinate space is called </span><span class="cls_010">UV</span><span class="cls_003"> to</span></div>
<div style="position:absolute;left:5.00px;top:248.25px" class="cls_003"><span class="cls_003">distinguish it from the </span><span class="cls_012">x</span><span class="cls_003">/</span><span class="cls_012">y</span><span class="cls_003"> coordinate space:</span></div>
<div style="position:absolute;left:5.00px;top:420.00px" class="cls_003"><span class="cls_003">As a result, all values in coordinate vectors will range from </span><span class="cls_010">0</span><span class="cls_003"> and </span><span class="cls_010">1</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:453.00px" class="cls_003"><span class="cls_003">As a very small example, this first shader will take the pixels of the cactus image and change them all</span></div>
<div style="position:absolute;left:5.00px;top:471.00px" class="cls_003"><span class="cls_003">to a single color. To allow you to choose the color, you can use a </span><span class="cls_010">uniform</span><span class="cls_003"> variable.</span></div>
<div style="position:absolute;left:5.00px;top:504.00px" class="cls_003"><span class="cls_003">Uniforms allow you to pass data into the shader from outside. Declaring a </span><span class="cls_010">uniform</span><span class="cls_003"> variable will cause</span></div>
<div style="position:absolute;left:5.00px;top:522.00px" class="cls_003"><span class="cls_003">it to appear in the Inspector (similar to how </span><span class="cls_010">export</span><span class="cls_003"> works in GDScript) and also allow you to set it via</span></div>
<div style="position:absolute;left:5.00px;top:540.00px" class="cls_003"><span class="cls_003">code.</span></div>
<div style="position:absolute;left:5.00px;top:573.00px" class="cls_003"><span class="cls_003">Type the following code into the Shader panel:</span></div>
<div style="position:absolute;left:19.99px;top:607.50px" class="cls_010"><span class="cls_010">shader_type canvas_item;</span></div>
<div style="position:absolute;left:19.99px;top:630.00px" class="cls_010"><span class="cls_010">uniform vec4 fill_color:hint_color;</span></div>
<div style="position:absolute;left:19.99px;top:652.50px" class="cls_010"><span class="cls_010">void fragment(){</span></div>
<div style="position:absolute;left:40.99px;top:663.75px" class="cls_010"><span class="cls_010">COLOR.rgb = fill_color.rgb;</span></div>
<div style="position:absolute;left:19.99px;top:675.00px" class="cls_010"><span class="cls_010">}</span></div>
<div style="position:absolute;left:5.00px;top:699.75px" class="cls_003"><span class="cls_003">You should see the image change immediately: The whole image turns black. To select a different</span></div>
<div style="position:absolute;left:5.00px;top:717.75px" class="cls_003"><span class="cls_003">color, click on the Material in the inspector, and you'll see your </span><span class="cls_010">uniform</span><span class="cls_003"> variable listed under Shader</span></div>
<div style="position:absolute;left:5.00px;top:735.75px" class="cls_003"><span class="cls_003">Param:</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:271878px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background346.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:194.25px" class="cls_003"><span class="cls_003">You're not done, however. The image just turned to a colored rectangle, but you only want the cactus</span></div>
<div style="position:absolute;left:5.00px;top:212.25px" class="cls_003"><span class="cls_003">to change color, not its surrounding transparent pixels. Add one more line after setting </span><span class="cls_010">COLOR.rgb</span><span class="cls_003">:</span></div>
<div style="position:absolute;left:19.99px;top:246.75px" class="cls_010"><span class="cls_010">COLOR.a = texture(TEXTURE, UV).a;</span></div>
<div style="position:absolute;left:5.00px;top:271.50px" class="cls_003"><span class="cls_003">This last line makes the shader output every pixel with the same alpha (transparency) value as the</span></div>
<div style="position:absolute;left:5.00px;top:289.50px" class="cls_003"><span class="cls_003">pixel in the original texture. Now the empty area around the cactus remains transparent, with an alpha</span></div>
<div style="position:absolute;left:5.00px;top:307.50px" class="cls_003"><span class="cls_003">of </span><span class="cls_010">0</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:340.50px" class="cls_003"><span class="cls_003">The following code shows one more example. In this shader, you create a blur effect by setting each</span></div>
<div style="position:absolute;left:5.00px;top:358.50px" class="cls_003"><span class="cls_003">pixel's color to the average value of the pixels around it:</span></div>
<div style="position:absolute;left:19.99px;top:393.00px" class="cls_010"><span class="cls_010">shader_type canvas_item;</span></div>
<div style="position:absolute;left:19.99px;top:415.50px" class="cls_010"><span class="cls_010">uniform float radius = 10.0;</span></div>
<div style="position:absolute;left:19.99px;top:438.00px" class="cls_010"><span class="cls_010">void fragment(){</span></div>
<div style="position:absolute;left:40.99px;top:449.25px" class="cls_010"><span class="cls_010">vec4 new_color = texture(TEXTURE, UV);</span></div>
<div style="position:absolute;left:40.99px;top:460.50px" class="cls_010"><span class="cls_010">vec2 pixel_size = TEXTURE_PIXEL_SIZE; // size of the texture in pixels</span></div>
<div style="position:absolute;left:40.99px;top:483.00px" class="cls_010"><span class="cls_010">new_color += texture(TEXTURE, UV + vec2(0, -radius) * pixel_size);</span></div>
<div style="position:absolute;left:40.99px;top:494.25px" class="cls_010"><span class="cls_010">new_color += texture(TEXTURE, UV + vec2(0, radius) * pixel_size);</span></div>
<div style="position:absolute;left:40.99px;top:505.50px" class="cls_010"><span class="cls_010">new_color += texture(TEXTURE, UV + vec2(-radius, 0) * pixel_size);</span></div>
<div style="position:absolute;left:40.99px;top:516.75px" class="cls_010"><span class="cls_010">new_color += texture(TEXTURE, UV + vec2(radius, 0) * pixel_size);</span></div>
<div style="position:absolute;left:40.99px;top:539.25px" class="cls_010"><span class="cls_010">COLOR = new_color / 5.0;</span></div>
<div style="position:absolute;left:19.99px;top:550.50px" class="cls_010"><span class="cls_010">}</span></div>
<div style="position:absolute;left:5.00px;top:575.25px" class="cls_003"><span class="cls_003">Note that since you've added five color values together (the original pixel's, plus the four that are</span></div>
<div style="position:absolute;left:5.00px;top:593.25px" class="cls_003"><span class="cls_003">found by moving in each direction around it), you need to divide by </span><span class="cls_010">5.0</span><span class="cls_003"> to get the average value. The</span></div>
<div style="position:absolute;left:5.00px;top:611.25px" class="cls_003"><span class="cls_003">larger you make the </span><span class="cls_010">radius</span><span class="cls_003">, the more "smeared" the image looks:</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:272680px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background347.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Learning more</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Shaders are capable of an amazing range of effects. Experimenting with Godot's shader language is a</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">great way to learn the basics, but there is also a wealth of resources on the internet for learning</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">more. When learning about shaders, you can use resources that aren't specific to Godot, and you</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">shouldn't have much trouble getting them to work in Godot. The concept is the same across all types</span></div>
<div style="position:absolute;left:5.00px;top:151.50px" class="cls_003"><span class="cls_003">of graphics applications.</span></div>
<div style="position:absolute;left:5.00px;top:184.50px" class="cls_003"><span class="cls_003">To see some examples of just how powerful shaders can be, visit </span><A HREF="https://www.shadertoy.com/">https://www.shadertoy.com/</A> </span><span class="cls_003">.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:273482px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background348.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Using other languages</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">The projects in this book have all been written using GDScript. GDScript has a number of advantages</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">that make it the best choice for building your games. It is very tightly integrated with Godot's API, and</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">its Python-style syntax makes it useful for rapid development while also being very beginner-friendly.</span></div>
<div style="position:absolute;left:5.00px;top:148.50px" class="cls_003"><span class="cls_003">It's not the only option, however. Godot also supports two other "official" scripting languages, and</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">also provides tools for integrating code using a variety of other languages.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:274284px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background349.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">C#</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">With the release of Godot 3.0 in early 2018, support was added for C# as a scripting language for the</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">first time. C# is very popular in game development, and the Godot version is based on the Mono 5.2</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">.NET framework. Because of its wide use, there are many resources available for learning C# and a</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">great deal of existing code in the language for accomplishing a variety of game-related functions.</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">At the time of writing, the current Godot version is 3.0.2. In this version, C# support should be</span></div>
<div style="position:absolute;left:5.00px;top:184.50px" class="cls_003"><span class="cls_003">considered preliminary; it is functional, but has not been fully tested. Some features and capabilities,</span></div>
<div style="position:absolute;left:5.00px;top:202.50px" class="cls_003"><span class="cls_003">such as exporting projects, are not yet supported.</span></div>
<div style="position:absolute;left:5.00px;top:235.50px" class="cls_003"><span class="cls_003">If you want to try out the C# implementation, you'll need to first make sure you have Mono installed,</span></div>
<div style="position:absolute;left:5.00px;top:253.50px" class="cls_003"><span class="cls_003">which you can get from </span><A HREF="http://www.mono-project.com/download/">http://www.mono-project.com/download/</A> </span><span class="cls_003">. You must also download the Godot version</span></div>
<div style="position:absolute;left:5.00px;top:271.50px" class="cls_003"><span class="cls_003">that has C# support included, which you can find at </span><A HREF="http://godotengine.org/download">http://godotengine.org/download</A> </span><span class="cls_003"> where it is labeled</span></div>
<div style="position:absolute;left:5.00px;top:289.50px" class="cls_003"><span class="cls_003">Mono Version.</span></div>
<div style="position:absolute;left:5.00px;top:322.50px" class="cls_003"><span class="cls_003">You'll probably also want to use an external editor—such as Visual Studio Code or MonoDevelop—</span></div>
<div style="position:absolute;left:5.00px;top:340.50px" class="cls_003"><span class="cls_003">that provides more debugging and language functionality than Godot's built-in editor. You can set this</span></div>
<div style="position:absolute;left:5.00px;top:358.50px" class="cls_003"><span class="cls_003">in Editor Settings under the Mono section.</span></div>
<div style="position:absolute;left:5.00px;top:391.50px" class="cls_003"><span class="cls_003">To attach a C# script to a node, select the language from the Attach Node Script dialog:</span></div>
<div style="position:absolute;left:5.00px;top:626.25px" class="cls_003"><span class="cls_003">In general, scripting in C# works very much the same as what you've seen with GDScript. The main</span></div>
<div style="position:absolute;left:5.00px;top:644.25px" class="cls_003"><span class="cls_003">difference is that API functions are renamed in </span><span class="cls_010">PascalCase</span><span class="cls_003"> to follow C# standards instead of </span><span class="cls_010">snake_case</span><span class="cls_003">,</span></div>
<div style="position:absolute;left:5.00px;top:662.25px" class="cls_003"><span class="cls_003">which is the standard for GDScript.</span></div>
<div style="position:absolute;left:5.00px;top:695.25px" class="cls_003"><span class="cls_003">Here is an example of </span><span class="cls_010">KinematicBody2D</span><span class="cls_003"> movement using C#:</span></div>
<div style="position:absolute;left:19.99px;top:729.75px" class="cls_010"><span class="cls_010">using Godot;</span></div>
<div style="position:absolute;left:19.99px;top:741.00px" class="cls_010"><span class="cls_010">using System;</span></div>
<div style="position:absolute;left:19.99px;top:763.50px" class="cls_010"><span class="cls_010">public class Movement : KinematicBody2D</span></div>
<div style="position:absolute;left:19.99px;top:774.75px" class="cls_010"><span class="cls_010">{</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:275086px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background350.jpg" width=612 height=792></div>
<div style="position:absolute;left:40.99px;top:4.81px" class="cls_010"><span class="cls_010">[Export] public int speed = 200;</span></div>
<div style="position:absolute;left:40.99px;top:27.15px" class="cls_010"><span class="cls_010">Vector2 velocity = new Vector2();</span></div>
<div style="position:absolute;left:40.99px;top:49.65px" class="cls_010"><span class="cls_010">public void GetInput()</span></div>
<div style="position:absolute;left:40.99px;top:60.90px" class="cls_010"><span class="cls_010">{</span></div>
<div style="position:absolute;left:61.98px;top:72.15px" class="cls_010"><span class="cls_010">velocity = new Vector2();</span></div>
<div style="position:absolute;left:61.98px;top:83.40px" class="cls_010"><span class="cls_010">if (Input.IsActionPressed("right"))</span></div>
<div style="position:absolute;left:61.98px;top:94.65px" class="cls_010"><span class="cls_010">{</span></div>
<div style="position:absolute;left:82.97px;top:105.90px" class="cls_010"><span class="cls_010">velocity.x += 1;</span></div>
<div style="position:absolute;left:61.98px;top:117.15px" class="cls_010"><span class="cls_010">}</span></div>
<div style="position:absolute;left:61.98px;top:128.40px" class="cls_010"><span class="cls_010">if (Input.IsActionPressed("left"))</span></div>
<div style="position:absolute;left:61.98px;top:139.65px" class="cls_010"><span class="cls_010">{</span></div>
<div style="position:absolute;left:82.97px;top:150.90px" class="cls_010"><span class="cls_010">velocity.x -= 1;</span></div>
<div style="position:absolute;left:61.98px;top:162.15px" class="cls_010"><span class="cls_010">}</span></div>
<div style="position:absolute;left:61.98px;top:173.40px" class="cls_010"><span class="cls_010">if (Input.IsActionPressed("down"))</span></div>
<div style="position:absolute;left:61.98px;top:184.65px" class="cls_010"><span class="cls_010">{</span></div>
<div style="position:absolute;left:82.97px;top:195.90px" class="cls_010"><span class="cls_010">velocity.y += 1;</span></div>
<div style="position:absolute;left:61.98px;top:207.15px" class="cls_010"><span class="cls_010">}</span></div>
<div style="position:absolute;left:61.98px;top:218.40px" class="cls_010"><span class="cls_010">if (Input.IsActionPressed("up"))</span></div>
<div style="position:absolute;left:61.98px;top:229.65px" class="cls_010"><span class="cls_010">{</span></div>
<div style="position:absolute;left:82.97px;top:240.90px" class="cls_010"><span class="cls_010">velocity.y -= 1;</span></div>
<div style="position:absolute;left:61.98px;top:252.15px" class="cls_010"><span class="cls_010">}</span></div>
<div style="position:absolute;left:61.98px;top:263.40px" class="cls_010"><span class="cls_010">velocity = velocity.Normalized() * speed;</span></div>
<div style="position:absolute;left:40.99px;top:274.65px" class="cls_010"><span class="cls_010">}</span></div>
<div style="position:absolute;left:40.99px;top:297.15px" class="cls_010"><span class="cls_010">public override void _PhysicsProcess(float delta)</span></div>
<div style="position:absolute;left:40.99px;top:308.40px" class="cls_010"><span class="cls_010">{</span></div>
<div style="position:absolute;left:61.98px;top:319.65px" class="cls_010"><span class="cls_010">GetInput();</span></div>
<div style="position:absolute;left:61.98px;top:330.90px" class="cls_010"><span class="cls_010">MoveAndSlide(velocity);</span></div>
<div style="position:absolute;left:40.99px;top:342.15px" class="cls_010"><span class="cls_010">}</span></div>
<div style="position:absolute;left:19.99px;top:353.25px" class="cls_010"><span class="cls_010">}</span></div>
<div style="position:absolute;left:5.00px;top:378.00px" class="cls_003"><span class="cls_003">For more details about using C#, see the </span><span class="cls_002">Scripting</span><span class="cls_003"> section of the documentation at </span><span class="cls_009">http://docs.godotengi</span></div>
<div style="position:absolute;left:5.00px;top:396.00px" class="cls_009"><span class="cls_009">ne.org/en/latest/getting_started/scripting/</span><span class="cls_003">.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:275888px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background351.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">VisualScript</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Visual scripting is intended to provide an alternative scripting method using a drag-and-drop visual</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">metaphor instead of written code. To create a script, you drag nodes (not to be confused with Godot's</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">nodes) representing functions and data, and connect them by drawing lines. Running your script means</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">following the path of the line through the nodes. The goal of this style of presentation is to provide a</span></div>
<div style="position:absolute;left:5.00px;top:151.50px" class="cls_003"><span class="cls_003">more intuitive way to visualize program flow for non-programmers, such as artists or animators, who</span></div>
<div style="position:absolute;left:5.00px;top:169.50px" class="cls_003"><span class="cls_003">need to collaborate on a project.</span></div>
<div style="position:absolute;left:5.00px;top:202.50px" class="cls_003"><span class="cls_003">In practice, this goal has yet to be reached in a practical way. Godot's VisualScript was also added</span></div>
<div style="position:absolute;left:5.00px;top:220.50px" class="cls_003"><span class="cls_003">for the first time in version 3.0, and it is currently not mature enough as a feature to be used in an</span></div>
<div style="position:absolute;left:5.00px;top:238.50px" class="cls_003"><span class="cls_003">actual project. As with C#, it should be considered in testing, and if you're interested in it, your</span></div>
<div style="position:absolute;left:5.00px;top:256.50px" class="cls_003"><span class="cls_003">testing and feedback will be very valuable to the Godot team in improving its functionality.</span></div>
<div style="position:absolute;left:5.00px;top:289.50px" class="cls_003"><span class="cls_003">One potential strength of VisualScript is to use it as a second layer of scripting. You can create an</span></div>
<div style="position:absolute;left:5.00px;top:307.50px" class="cls_003"><span class="cls_003">object's core behavior in GDScript, and then a game designer can use a VisualScript that calls the</span></div>
<div style="position:absolute;left:5.00px;top:325.50px" class="cls_003"><span class="cls_003">functions of those scripts in visual nodes.</span></div>
<div style="position:absolute;left:5.00px;top:358.50px" class="cls_003"><span class="cls_003">The following screenshot is an example VisualScript project. Here, you can see a portion of the</span></div>
<div style="position:absolute;left:5.00px;top:376.50px" class="cls_003"><span class="cls_003">player movement code in Coin Dash:</span></div>
<div style="position:absolute;left:232.16px;top:758.25px" class="cls_015"><span class="cls_015">The player movement code in Coin Dash</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:276690px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background352.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Native code - GDNative</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">There are many programming languages to choose from. Each has its strengths and weaknesses, as</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">well as its fans who prefer to use it over other options. While it doesn't make sense to support every</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">language directly in Godot, there are situations where GDScript is no longer sufficient to solve a</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">particular problem. Perhaps you want to use an existing external library, or you're doing something</span></div>
<div style="position:absolute;left:5.00px;top:151.50px" class="cls_003"><span class="cls_003">computationally intensive—such as AI or procedural world generation—that doesn't make sense for</span></div>
<div style="position:absolute;left:5.00px;top:169.50px" class="cls_003"><span class="cls_003">GDScript.</span></div>
<div style="position:absolute;left:5.00px;top:202.50px" class="cls_003"><span class="cls_003">Because GDScript is an interpreted language, it trades performance for flexibility. This means that for</span></div>
<div style="position:absolute;left:5.00px;top:220.50px" class="cls_003"><span class="cls_003">some processor-intensive code, it can run unacceptably slow. In this case, the highest performance</span></div>
<div style="position:absolute;left:5.00px;top:238.50px" class="cls_003"><span class="cls_003">would be achieved by running native code written in a compiled language. In this situation, you can</span></div>
<div style="position:absolute;left:5.00px;top:256.50px" class="cls_003"><span class="cls_003">move that code to a GDNative library.</span></div>
<div style="position:absolute;left:5.00px;top:289.50px" class="cls_003"><span class="cls_003">GDNative is a C API that can be used by external libraries to interface with Godot. These external</span></div>
<div style="position:absolute;left:5.00px;top:307.50px" class="cls_003"><span class="cls_003">libraries can be your own or any existing third-party libraries that you may need for a particular</span></div>
<div style="position:absolute;left:5.00px;top:325.50px" class="cls_003"><span class="cls_003">project.</span></div>
<div style="position:absolute;left:5.00px;top:358.50px" class="cls_003"><span class="cls_003">In GDScript, you can then use the </span><span class="cls_010">GDNative</span><span class="cls_003"> and </span><span class="cls_010">GDNativeLibrary</span><span class="cls_003"> classes to load and call functions from</span></div>
<div style="position:absolute;left:5.00px;top:376.50px" class="cls_003"><span class="cls_003">these libraries. The following code is an example of calling a library that has been saved as a</span></div>
<div style="position:absolute;left:5.00px;top:394.50px" class="cls_010"><span class="cls_010">GDNativeLibrary</span><span class="cls_003"> resource file:</span></div>
<div style="position:absolute;left:19.99px;top:429.00px" class="cls_010"><span class="cls_010">extends Node</span></div>
<div style="position:absolute;left:19.99px;top:451.50px" class="cls_010"><span class="cls_010">func _ready():</span></div>
<div style="position:absolute;left:40.99px;top:462.75px" class="cls_010"><span class="cls_010">var lib = GDNative.new()</span></div>
<div style="position:absolute;left:40.99px;top:474.00px" class="cls_010"><span class="cls_010">lib.library = load("res://somelib.tres")</span></div>
<div style="position:absolute;left:40.99px;top:485.25px" class="cls_010"><span class="cls_010">lib.initialize()</span></div>
<div style="position:absolute;left:40.99px;top:507.75px" class="cls_010"><span class="cls_010">// call functions in the library</span></div>
<div style="position:absolute;left:40.99px;top:519.00px" class="cls_010"><span class="cls_010">var result = lib.call_native("call_type", "some_function", arguments_array)</span></div>
<div style="position:absolute;left:40.99px;top:541.50px" class="cls_010"><span class="cls_010">lib.terminate()</span></div>
<div style="position:absolute;left:5.00px;top:566.25px" class="cls_003"><span class="cls_003">Whereas, the library might look something like this (in C):</span></div>
<div style="position:absolute;left:19.99px;top:600.75px" class="cls_010"><span class="cls_010">#include &lt;gdnative.h></span></div>
<div style="position:absolute;left:19.99px;top:623.25px" class="cls_010"><span class="cls_010">void GDN_EXPORT godot_gdnative_init(godot_gdnative_init_options *p_options) {</span></div>
<div style="position:absolute;left:40.99px;top:634.50px" class="cls_010"><span class="cls_010">// initialization code</span></div>
<div style="position:absolute;left:19.99px;top:645.75px" class="cls_010"><span class="cls_010">}</span></div>
<div style="position:absolute;left:19.99px;top:668.25px" class="cls_010"><span class="cls_010">void GDN_EXPORT godot_gdnative_terminate(godot_gdnative_terminate_options *p_options) {</span></div>
<div style="position:absolute;left:40.99px;top:679.50px" class="cls_010"><span class="cls_010">// termination code</span></div>
<div style="position:absolute;left:19.99px;top:690.75px" class="cls_010"><span class="cls_010">}</span></div>
<div style="position:absolute;left:19.99px;top:713.25px" class="cls_010"><span class="cls_010">void GDN_EXPORT godot_nativescript_init(void *p_handle) {</span></div>
<div style="position:absolute;left:19.99px;top:735.75px" class="cls_010"><span class="cls_010">}</span></div>
<div style="position:absolute;left:19.99px;top:758.25px" class="cls_010"><span class="cls_010">godot_variant GDN_EXPORT some_function(void *args) {</span></div>
<div style="position:absolute;left:40.99px;top:769.50px" class="cls_010"><span class="cls_010">// Do something</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:277492px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background353.jpg" width=612 height=792></div>
<div style="position:absolute;left:19.99px;top:4.81px" class="cls_010"><span class="cls_010">}</span></div>
<div style="position:absolute;left:5.00px;top:29.25px" class="cls_003"><span class="cls_003">Keep in mind that writing code like this is definitely more involved than sticking to pure GDScript. In</span></div>
<div style="position:absolute;left:5.00px;top:47.25px" class="cls_003"><span class="cls_003">a native language, you'll need to handle calling constructors and destructors for objects and manually</span></div>
<div style="position:absolute;left:5.00px;top:65.25px" class="cls_003"><span class="cls_003">manage working with Godot's </span><span class="cls_010">Variant</span><span class="cls_003"> class. You should only resort to using GDNative when</span></div>
<div style="position:absolute;left:5.00px;top:83.25px" class="cls_003"><span class="cls_003">performance truly becomes an issue, and even then, only use it if the functionality really demands its</span></div>
<div style="position:absolute;left:5.00px;top:101.25px" class="cls_003"><span class="cls_003">use.</span></div>
<div style="position:absolute;left:5.00px;top:134.25px" class="cls_003"><span class="cls_003">If this section made no sense at all to you, don't worry. Most Godot developers will never need to</span></div>
<div style="position:absolute;left:5.00px;top:152.25px" class="cls_003"><span class="cls_003">delve into this side of development. Even if you find yourself needing higher-performance code, you</span></div>
<div style="position:absolute;left:5.00px;top:170.25px" class="cls_003"><span class="cls_003">may only need to look at the Asset library to find that someone has already created a library for you.</span></div>
<div style="position:absolute;left:5.00px;top:188.25px" class="cls_003"><span class="cls_003">You can find out about the Asset library in the next section.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:278294px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background354.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Language bindings</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Another benefit of GDNative is that it has allowed proponents of other languages to create API</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">bindings to enable scripting in those languages.</span></div>
<div style="position:absolute;left:5.00px;top:130.50px" class="cls_003"><span class="cls_003">At the time of writing, several projects are available that use GDNative to allow you to use other</span></div>
<div style="position:absolute;left:5.00px;top:148.50px" class="cls_003"><span class="cls_003">languages for scripting. These include C, C++, Python, Nim, D, Go, and others. While these</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">additional language bindings are still relatively new at the time of writing, they each have a dedicated</span></div>
<div style="position:absolute;left:5.00px;top:184.50px" class="cls_003"><span class="cls_003">group of developers working on them. If you're interested in using a particular language with Godot, a</span></div>
<div style="position:absolute;left:5.00px;top:202.50px" class="cls_003"><span class="cls_003">Google search of "godot + &lt;language name>" will help you find what's available.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:279096px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background355.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Asset library</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">At the top of the editor window, in the Workspaces section, you'll find a button labeled AssetLib:</span></div>
<div style="position:absolute;left:5.00px;top:156.00px" class="cls_003"><span class="cls_003">Clicking this button will take you to Godot's Asset library. This is a collection of add-ons, tools, and</span></div>
<div style="position:absolute;left:5.00px;top:174.00px" class="cls_003"><span class="cls_003">utilities contributed by the Godot community that you may find useful in your projects. For example, if</span></div>
<div style="position:absolute;left:5.00px;top:192.00px" class="cls_003"><span class="cls_003">you search for </span><span class="cls_010">State</span><span class="cls_003">, you'll see that there is a tool called </span><span class="cls_002">finite state machine</span><span class="cls_003"> (</span><span class="cls_002">FSM</span><span class="cls_003">) available in the</span></div>
<div style="position:absolute;left:5.00px;top:210.00px" class="cls_003"><span class="cls_003">library. You can click on its name for more information, and if you decide you want to try it out, click</span></div>
<div style="position:absolute;left:5.00px;top:228.00px" class="cls_003"><span class="cls_003">Install to download it into the </span><span class="cls_010">res://addons/</span><span class="cls_003"> folder, which will be created if it doesn't already exist:</span></div>
<div style="position:absolute;left:5.00px;top:615.75px" class="cls_003"><span class="cls_003">You then need to enable the add-on by opening Project Settings and choosing the Plugins tab:</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:279898px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background356.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:297.00px" class="cls_003"><span class="cls_003">The plugin is now ready to use. Be sure to read the plugin author's instructions to understand how it</span></div>
<div style="position:absolute;left:5.00px;top:315.00px" class="cls_003"><span class="cls_003">works.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:280700px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background357.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Contributing to Godot</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Godot is an open source, community-driven project. All of the work that's done to build, test,</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">document, and otherwise support Godot is done primarily by passionate individuals contributing their</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">time and skills. For the majority of contributors, it is a labor of love, and they take pride in helping to</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">build something of quality that people enjoy using.</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">In order for Godot to continue growing and improving, there is always a need for more members of</span></div>
<div style="position:absolute;left:5.00px;top:184.50px" class="cls_003"><span class="cls_003">the community to step up and contribute. There are many ways you can help out, regardless of your</span></div>
<div style="position:absolute;left:5.00px;top:202.50px" class="cls_003"><span class="cls_003">skill level or the amount of time you can commit.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:281502px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background358.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Contributing to the engine</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">There are two main ways you can directly contribute to Godot's development. If you visit </span><span class="cls_009">https://githu</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_009"><span class="cls_009">b.com/godotengine/godot</span><span class="cls_003">, you can see Godot's source code, as well as find out exactly what's being</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">worked on. Click the Clone or Download button, and you'll have the up-to-the-minute source code</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">and can test out the latest features. You'll need to build the engine, but don't be intimidated: Godot is</span></div>
<div style="position:absolute;left:5.00px;top:151.50px" class="cls_003"><span class="cls_003">one of the easiest open source projects to compile that you'll find. See </span><span class="cls_009">http://docs.godotengine.org/en/late</span></div>
<div style="position:absolute;left:5.00px;top:169.50px" class="cls_009"><span class="cls_009">st/development/compiling/</span><span class="cls_003"> for instructions.</span></div>
<div style="position:absolute;left:5.00px;top:202.50px" class="cls_003"><span class="cls_003">If you're not able to actually contribute to the C++ code, go to the Issues tab, where you can report or</span></div>
<div style="position:absolute;left:5.00px;top:220.50px" class="cls_003"><span class="cls_003">read about bugs and suggestions for improvements. There is always a need for people to confirm bug</span></div>
<div style="position:absolute;left:5.00px;top:238.50px" class="cls_003"><span class="cls_003">reports, test fixes, and give their opinions on new features.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:282304px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background359.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Writing documentation</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Godot's official documentation is only as good as its community's contributions. From something as</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">small as correcting a typo to writing an entire tutorial, all levels of help are very welcome. The home</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">of the official documentatin is </span><A HREF="https://github.com/godotengine/godot-docs">https://github.com/godotengine/godot-docs</A> </span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:148.50px" class="cls_003"><span class="cls_003">Hopefully, by now you've taken some time to browse through the official documentation and get an</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">idea of what's available. If you spot something wrong or something missing, open an issue at the</span></div>
<div style="position:absolute;left:5.00px;top:184.50px" class="cls_003"><span class="cls_003">aforementioned GitHub link. If you're comfortable with using GitHub, you can even go ahead and</span></div>
<div style="position:absolute;left:5.00px;top:202.50px" class="cls_003"><span class="cls_003">submit a pull request yourself. Just make sure you read all the guidelines first so that your contribution</span></div>
<div style="position:absolute;left:5.00px;top:220.50px" class="cls_003"><span class="cls_003">will be accepted. You can find the guidelines at </span><span class="cls_009">http://docs.godotengine.org/en/latest/community/contributing</span></div>
<div style="position:absolute;left:5.00px;top:238.50px" class="cls_009"><span class="cls_009">/</span><span class="cls_003">.</span></div>
<div style="position:absolute;left:52.98px;top:271.50px" class="cls_008"><span class="cls_008">If you speak a language other than English, translations are also very much needed, and will be greatly</span></div>
<div style="position:absolute;left:52.98px;top:285.00px" class="cls_008"><span class="cls_008">appreciated by Godot's non-English-speaking users. See </span><A HREF="https://hosted.weblate.org/projects/godot-engine/godot-docs/">https://hosted.weblate.org/projects/godot-engine/godot-docs/</A> </span><span class="cls_008"> for how</span></div>
<div style="position:absolute;left:52.98px;top:298.50px" class="cls_008"><span class="cls_008">to contribute in your language.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:283106px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background360.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Donations</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Godot is a not-for-profit project, and user donations go a long way to help pay for hosting costs and</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">development resources, such as hardware. Financial contributions also allow the project to pay core</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">developers, allowing them to dedicate themselves part- or full-time to working on the engine.</span></div>
<div style="position:absolute;left:5.00px;top:148.50px" class="cls_003"><span class="cls_003">The easiest way to contribute to Godot is via the Patreon page at </span><A HREF="https://www.patreon.com/godotengine">https://www.patreon.com/godotengine</A> </span><span class="cls_003">.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:283908px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background361.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Getting help - community resources</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">Godot's online community is one of its strengths. Because of its open source nature, there is a wide</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">variety of people working together to improve the engine, write documentation, and help each other</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">with issues.</span></div>
<div style="position:absolute;left:5.00px;top:148.50px" class="cls_003"><span class="cls_003">You can find a full list of community resources at </span><A HREF="https://godotengine.org/community">https://godotengine.org/community</A> </span><span class="cls_003">.</span></div>
<div style="position:absolute;left:5.00px;top:181.50px" class="cls_003"><span class="cls_003">These links may change over time, but the following are the main community resources you should be</span></div>
<div style="position:absolute;left:5.00px;top:199.50px" class="cls_003"><span class="cls_003">aware of.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:284710px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background362.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">GitHub</span></div>
<div style="position:absolute;left:8.75px;top:85.50px" class="cls_009"><span class="cls_009"> </span><A HREF="https://github.com/godotengine/">https://github.com/godotengine/</A> </div>
<div style="position:absolute;left:5.00px;top:112.50px" class="cls_003"><span class="cls_003">The Godot GitHub repository is where Godot's developers work. You can find Godot's source code</span></div>
<div style="position:absolute;left:5.00px;top:130.50px" class="cls_003"><span class="cls_003">here, if you find yourself needing to compile a custom version of the engine for your own use.</span></div>
<div style="position:absolute;left:5.00px;top:163.50px" class="cls_003"><span class="cls_003">If you find any kind of problem with the engine itself—something that doesn't work, a typo in the</span></div>
<div style="position:absolute;left:5.00px;top:181.50px" class="cls_003"><span class="cls_003">documentation, and so on—this is the place where you should report it.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:285512px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background363.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Godot Q and A</span></div>
<div style="position:absolute;left:5.00px;top:80.25px" class="cls_009"><span class="cls_009"> </span><A HREF="https://godotengine.org/qa/">https://godotengine.org/qa/</A> </div>
<div style="position:absolute;left:5.00px;top:105.00px" class="cls_003"><span class="cls_003">This is Godot's official help site. You can post questions here for the community to answer, as well as</span></div>
<div style="position:absolute;left:5.00px;top:123.00px" class="cls_003"><span class="cls_003">search the growing database of previously answered questions. If you happen to see a question you</span></div>
<div style="position:absolute;left:5.00px;top:141.00px" class="cls_003"><span class="cls_003">know the answer to, you can help out as well.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:286314px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background364.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Discord / Forum</span></div>
<div style="position:absolute;left:5.00px;top:80.25px" class="cls_009"><span class="cls_009"> </span><A HREF="https://discord.gg/zH7NUgz">https://discord.gg/zH7NUgz</A> </div>
<div style="position:absolute;left:5.00px;top:105.75px" class="cls_009"><span class="cls_009"> </span><A HREF="http://godotdevelopers.org/">http://godotdevelopers.org/</A> </div>
<div style="position:absolute;left:5.00px;top:130.50px" class="cls_003"><span class="cls_003">While not </span><span class="cls_012">official</span><span class="cls_003">, these are two very active communities of Godot users where you can get help, find</span></div>
<div style="position:absolute;left:5.00px;top:148.50px" class="cls_003"><span class="cls_003">answers to questions, and discuss your project with others.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:287116px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background365.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Summary</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">In this chapter, you learned about a few additional topics that will help you continue to level up your</span></div>
<div style="position:absolute;left:5.00px;top:97.50px" class="cls_003"><span class="cls_003">Godot skills. Godot has a great many features in addition to those explored in this book. You'll need</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">to know where to look and where to ask for help as you move on to working on projects of your own.</span></div>
<div style="position:absolute;left:5.00px;top:148.50px" class="cls_003"><span class="cls_003">You also learned about some more advanced topics, such as working with other programming</span></div>
<div style="position:absolute;left:5.00px;top:166.50px" class="cls_003"><span class="cls_003">languages and using shaders to enhance your game's visual effects.</span></div>
<div style="position:absolute;left:5.00px;top:199.50px" class="cls_003"><span class="cls_003">In addition, since Godot is built by its community, you learned how you can participate and become</span></div>
<div style="position:absolute;left:5.00px;top:217.50px" class="cls_003"><span class="cls_003">part of the team that is making it one of the fastest-growing projects of its kind.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:287918px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background366.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Other Books You May Enjoy</span></div>
<div style="position:absolute;left:5.00px;top:79.50px" class="cls_003"><span class="cls_003">If you enjoyed this book, you may be interested in these other books by Packt:</span></div>
<div style="position:absolute;left:5.00px;top:246.75px" class="cls_002"><span class="cls_002">Getting Started with Unity 2018 - Third Edition</span></div>
<div style="position:absolute;left:5.00px;top:264.75px" class="cls_003"><span class="cls_003">Dr. Edward Lavieri</span></div>
<div style="position:absolute;left:5.00px;top:297.75px" class="cls_003"><span class="cls_003">ISBN: 9781788830102</span></div>
<div style="position:absolute;left:34.99px;top:330.00px" class="cls_003"><span class="cls_003">Set up your Unity development environment and navigate its tools</span></div>
<div style="position:absolute;left:34.99px;top:347.25px" class="cls_003"><span class="cls_003">Import and use custom assets and asset packages to add characters to your game</span></div>
<div style="position:absolute;left:34.99px;top:364.50px" class="cls_003"><span class="cls_003">Build a 3D game world with a custom terrain, water, sky, mountains, and trees</span></div>
<div style="position:absolute;left:34.99px;top:381.75px" class="cls_003"><span class="cls_003">Animate game characters, using animation controllers, and scripting</span></div>
<div style="position:absolute;left:34.99px;top:399.00px" class="cls_003"><span class="cls_003">Apply audio and particle effects to the game</span></div>
<div style="position:absolute;left:34.99px;top:416.25px" class="cls_003"><span class="cls_003">Create intuitive game menus and interface elements</span></div>
<div style="position:absolute;left:34.99px;top:433.50px" class="cls_003"><span class="cls_003">Customize your game with sound effects, shadows, lighting effects, and rendering options</span></div>
<div style="position:absolute;left:34.99px;top:450.75px" class="cls_003"><span class="cls_003">Debug code and provide smooth error handling</span></div>
<div style="position:absolute;left:5.00px;top:618.00px" class="cls_002"><span class="cls_002">Unity Virtual Reality Projects - Second Edition</span></div>
<div style="position:absolute;left:5.00px;top:636.00px" class="cls_003"><span class="cls_003">Jonathan Linowes</span></div>
<div style="position:absolute;left:5.00px;top:669.00px" class="cls_003"><span class="cls_003">ISBN: 9781788478809</span></div>
<div style="position:absolute;left:34.99px;top:701.25px" class="cls_003"><span class="cls_003">Create 3D scenes with Unity and other 3D tools while learning about world space and scale</span></div>
<div style="position:absolute;left:34.99px;top:718.50px" class="cls_003"><span class="cls_003">Build and run VR applications for specific headsets, including Oculus, Vive, and Daydream</span></div>
<div style="position:absolute;left:34.99px;top:735.75px" class="cls_003"><span class="cls_003">Interact with virtual objects using eye gaze, hand controllers, and user input events</span></div>
<div style="position:absolute;left:34.99px;top:753.00px" class="cls_003"><span class="cls_003">Move around your VR scenes using locomotion and teleportation</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:288720px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background367.jpg" width=612 height=792></div>
<div style="position:absolute;left:34.99px;top:2.25px" class="cls_003"><span class="cls_003">Implement an audio fireball game using physics and particle systems</span></div>
<div style="position:absolute;left:34.99px;top:19.50px" class="cls_003"><span class="cls_003">Implement an art gallery tour with teleportation and data info</span></div>
<div style="position:absolute;left:34.99px;top:36.75px" class="cls_003"><span class="cls_003">Design and build a VR storytelling animation with a soundtrack and timelines</span></div>
<div style="position:absolute;left:34.99px;top:54.00px" class="cls_003"><span class="cls_003">Create social VR experiences with Unity networking</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:289522px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_id_1974dbd4-7e9e-11e9-9d71-0cc47a792c0a_files/background368.jpg" width=612 height=792></div>
<div style="position:absolute;left:5.00px;top:22.51px" class="cls_004"><span class="cls_004">Leave a review - let other readers know what</span></div>
<div style="position:absolute;left:5.00px;top:58.51px" class="cls_004"><span class="cls_004">you think</span></div>
<div style="position:absolute;left:5.00px;top:115.50px" class="cls_003"><span class="cls_003">Please share your thoughts on this book with others by leaving a review on the site that you bought it</span></div>
<div style="position:absolute;left:5.00px;top:133.50px" class="cls_003"><span class="cls_003">from. If you purchased the book from Amazon, please leave us an honest review on this book's</span></div>
<div style="position:absolute;left:5.00px;top:151.50px" class="cls_003"><span class="cls_003">Amazon page. This is vital so that other potential readers can see and use your unbiased opinion to</span></div>
<div style="position:absolute;left:5.00px;top:169.50px" class="cls_003"><span class="cls_003">make purchasing decisions, we can understand what our customers think about our products, and our</span></div>
<div style="position:absolute;left:5.00px;top:187.50px" class="cls_003"><span class="cls_003">authors can see your feedback on the title that they have worked with Packt to create. It will only take</span></div>
<div style="position:absolute;left:5.00px;top:205.50px" class="cls_003"><span class="cls_003">a few minutes of your time, but is valuable to other potential customers, our authors, and Packt. Thank</span></div>
<div style="position:absolute;left:5.00px;top:223.50px" class="cls_003"><span class="cls_003">you!</span></div>
</div>

</body>
</html>
